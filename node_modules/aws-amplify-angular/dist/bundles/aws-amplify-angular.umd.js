!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/common"),require("@aws-amplify/core"),require("lodash"),require("url"),require("buffer"),require("http"),require("fs"),require("os"),require("path"),require("child_process"),require("crypto"),require("uuid"),require("https"),require("stream"),require("http2"),require("process"),require("@aws-crypto/crc32"),require("lodash/isEmpty"),require("lodash/isEqual"),require("lodash/get"),require("crypto-js/core"),require("crypto-js/lib-typedarrays"),require("crypto-js/sha256"),require("crypto-js/hmac-sha256"),require("crypto-js/enc-base64"),require("isomorphic-unfetch"),require("js-cookie"),require("fast-xml-parser"),require("axios"),require("events"),require("zen-observable"),require("paho-mqtt"),require("util"),require("@aws-amplify/ui")):"function"==typeof define&&define.amd?define(["exports","@angular/core","@angular/common","@aws-amplify/core","lodash","url","buffer","http","fs","os","path","child_process","crypto","uuid","https","stream","http2","process","@aws-crypto/crc32","lodash/isEmpty","lodash/isEqual","lodash/get","crypto-js/core","crypto-js/lib-typedarrays","crypto-js/sha256","crypto-js/hmac-sha256","crypto-js/enc-base64","isomorphic-unfetch","js-cookie","fast-xml-parser","axios","events","zen-observable","paho-mqtt","util","@aws-amplify/ui"],t):t((e=e||self)["aws-amplify-angular"]={},e.ng.core,e.ng.common,e.Amplify,e._,e.url,e.buffer,e.http,e.fs,e.os,e.path,e.child_process,e.crypto$1,e.uuid,e.https,e.stream,e.http2,e.process$1,e.crc32,e.isEmpty,e.isEqual,e.get,e.CryptoJS,e.libTypedarrays,e.SHA256,e.HmacSHA256,e.Base64,0,e.Cookies,e.fastXmlParser,e.axios,e.events,e.zenObservable,e.Paho,e.util,e.AmplifyUI)}(this,function(e,f,t,E,y,h,d,g,a,i,o,s,n,m,v,u,r,c,l,p,b,S,w,C,_,I,A,P,O,T,k,x,N,L,M,R){"use strict";var U="default"in E?E.default:E;c=c&&Object.prototype.hasOwnProperty.call(c,"default")?c.default:c,p=p&&Object.prototype.hasOwnProperty.call(p,"default")?p.default:p,b=b&&Object.prototype.hasOwnProperty.call(b,"default")?b.default:b,S=S&&Object.prototype.hasOwnProperty.call(S,"default")?S.default:S,w=w&&Object.prototype.hasOwnProperty.call(w,"default")?w.default:w,C=C&&Object.prototype.hasOwnProperty.call(C,"default")?C.default:C,_=_&&Object.prototype.hasOwnProperty.call(_,"default")?_.default:_,I=I&&Object.prototype.hasOwnProperty.call(I,"default")?I.default:I,A=A&&Object.prototype.hasOwnProperty.call(A,"default")?A.default:A,k=k&&Object.prototype.hasOwnProperty.call(k,"default")?k.default:k,N=N&&Object.prototype.hasOwnProperty.call(N,"default")?N.default:N;var D=function(e,t){return(D=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function F(e,t){function n(){this.constructor=e}D(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var j=function(){return(j=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function B(e,t){var n={};for(i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]]);return n}function V(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;0<=a;a--)(i=e[a])&&(s=(o<3?i(s):3<o?i(t,n,s):i(t,n))||s);return 3<o&&s&&Object.defineProperty(t,n,s),s}function z(n,r){return function(e,t){r(e,t,n)}}function q(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function K(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{o(u.next(e))}catch(e){t(e)}}function i(e){try{o(u.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,i)}o((u=u.apply(e,s||[])).next())})}function H(n,r){var i,o,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,o&&(s=2&t[0]?o.return:t[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,t[1])).done)return s;switch(o=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,o=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],o=0}finally{i=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}}function G(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return{value:(e=e&&r>=e.length?void 0:e)&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function W(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function $(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(W(arguments[t]));return e}function Y(e){return this instanceof Y?(this.v=e,this):new Y(e)}function J(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=n.apply(e,t||[]),o=[],s={};return r("next"),r("throw"),r("return"),s[Symbol.asyncIterator]=function(){return this},s;function r(r){i[r]&&(s[r]=function(n){return new Promise(function(e,t){1<o.push([r,n,e,t])||a(r,n)})})}function a(e,t){try{(n=i[e](t)).value instanceof Y?Promise.resolve(n.value.v).then(u,c):l(o[0][2],n)}catch(e){l(o[0][3],e)}var n}function u(e){a("next",e)}function c(e){a("throw",e)}function l(e,t){e(t),o.shift(),o.length&&a(o[0][0],o[0][1])}}function Z(s){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,t=s[Symbol.asyncIterator];return t?t.call(s):(s=G(s),e={},n("next"),n("throw"),n("return"),e[Symbol.asyncIterator]=function(){return this},e);function n(o){e[o]=s[o]&&function(i){return new Promise(function(e,t){var n,r;i=s[o](i),n=e,e=t,r=i.done,t=i.value,Promise.resolve(t).then(function(e){n({value:e,done:r})},e)})}}}function Q(e){return"function"==typeof e}var X=!1,ee={Promise:void 0,set useDeprecatedSynchronousErrorHandling(e){e&&(new Error).stack,X=e},get useDeprecatedSynchronousErrorHandling(){return X}};function te(e){setTimeout(function(){throw e},0)}var ne={closed:!0,next:function(e){},error:function(e){if(ee.useDeprecatedSynchronousErrorHandling)throw e;te(e)},complete:function(){}},re=function(){return Array.isArray||function(e){return e&&"number"==typeof e.length}}();function ie(e){return null!==e&&"object"==typeof e}var oe=function(){function e(e){return Error.call(this),this.message=e?e.length+" errors occurred during unsubscription:\n"+e.map(function(e,t){return t+1+") "+e.toString()}).join("\n  "):"",this.name="UnsubscriptionError",this.errors=e,this}return e.prototype=Object.create(Error.prototype),e}(),se=function(){function u(e){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,e&&(this._ctorUnsubscribe=!0,this._unsubscribe=e)}var e;return u.prototype.unsubscribe=function(){var t;if(!this.closed){var e=this._parentOrParents,n=this._ctorUnsubscribe,r=this._unsubscribe,i=this._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,e instanceof u)e.remove(this);else if(null!==e)for(var o=0;o<e.length;++o)e[o].remove(this);if(Q(r)){n&&(this._unsubscribe=void 0);try{r.call(this)}catch(e){t=e instanceof oe?ae(e.errors):[e]}}if(re(i))for(var o=-1,s=i.length;++o<s;){var a=i[o];if(ie(a))try{a.unsubscribe()}catch(e){t=t||[],e instanceof oe?t=t.concat(ae(e.errors)):t.push(e)}}if(t)throw new oe(t)}},u.prototype.add=function(e){var t,n=e;if(!e)return u.EMPTY;switch(typeof e){case"function":n=new u(e);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;n instanceof u||(t=n,(n=new u)._subscriptions=[t]);break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}var r=n._parentOrParents;if(null===r)n._parentOrParents=this;else if(r instanceof u){if(r===this)return n;n._parentOrParents=[r,this]}else{if(-1!==r.indexOf(this))return n;r.push(this)}r=this._subscriptions;return null===r?this._subscriptions=[n]:r.push(n),n},u.prototype.remove=function(e){var t=this._subscriptions;!t||-1!==(e=t.indexOf(e))&&t.splice(e,1)},u.EMPTY=((e=new u).closed=!0,e),u}();function ae(e){return e.reduce(function(e,t){return e.concat(t instanceof oe?t.errors:t)},[])}var ue=function(){return"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()}(),ce=function(i){function o(e,t,n){var r=i.call(this)||this;switch(r.syncErrorValue=null,r.syncErrorThrown=!1,r.syncErrorThrowable=!1,r.isStopped=!1,arguments.length){case 0:r.destination=ne;break;case 1:if(!e){r.destination=ne;break}if("object"==typeof e){e instanceof o?(r.syncErrorThrowable=e.syncErrorThrowable,(r.destination=e).add(r)):(r.syncErrorThrowable=!0,r.destination=new le(r,e));break}default:r.syncErrorThrowable=!0,r.destination=new le(r,e,t,n)}return r}return F(o,i),o.prototype[ue]=function(){return this},o.create=function(e,t,n){n=new o(e,t,n);return n.syncErrorThrowable=!1,n},o.prototype.next=function(e){this.isStopped||this._next(e)},o.prototype.error=function(e){this.isStopped||(this.isStopped=!0,this._error(e))},o.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},o.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,i.prototype.unsubscribe.call(this))},o.prototype._next=function(e){this.destination.next(e)},o.prototype._error=function(e){this.destination.error(e),this.unsubscribe()},o.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},o.prototype._unsubscribeAndRecycle=function(){var e=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=e,this},o}(se),le=function(s){function e(e,t,n,r){var i,o=s.call(this)||this;o._parentSubscriber=e;e=o;return Q(t)?i=t:t&&(i=t.next,n=t.error,r=t.complete,t!==ne&&(Q((e=Object.create(t)).unsubscribe)&&o.add(e.unsubscribe.bind(e)),e.unsubscribe=o.unsubscribe.bind(o))),o._context=e,o._next=i,o._error=n,o._complete=r,o}return F(e,s),e.prototype.next=function(e){var t;!this.isStopped&&this._next&&(t=this._parentSubscriber,ee.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e))},e.prototype.error=function(e){if(!this.isStopped){var t=this._parentSubscriber,n=ee.useDeprecatedSynchronousErrorHandling;if(this._error)n&&t.syncErrorThrowable?this.__tryOrSetError(t,this._error,e):this.__tryOrUnsub(this._error,e),this.unsubscribe();else if(t.syncErrorThrowable)n?(t.syncErrorValue=e,t.syncErrorThrown=!0):te(e),this.unsubscribe();else{if(this.unsubscribe(),n)throw e;te(e)}}},e.prototype.complete=function(){var e,t,n=this;this.isStopped||(e=this._parentSubscriber,this._complete&&(t=function(){return n._complete.call(n._context)},ee.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,t):this.__tryOrUnsub(t)),this.unsubscribe())},e.prototype.__tryOrUnsub=function(e,t){try{e.call(this._context,t)}catch(e){if(this.unsubscribe(),ee.useDeprecatedSynchronousErrorHandling)throw e;te(e)}},e.prototype.__tryOrSetError=function(t,e,n){if(!ee.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,n)}catch(e){return ee.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=e,t.syncErrorThrown=!0):(te(e),!0)}return!1},e.prototype._unsubscribe=function(){var e=this._parentSubscriber;this._context=null,this._parentSubscriber=null,e.unsubscribe()},e}(ce);var pe=function(){return"function"==typeof Symbol&&Symbol.observable||"@@observable"}();function de(e){return e}var fe=function(){function n(e){this._isScalar=!1,e&&(this._subscribe=e)}return n.prototype.lift=function(e){var t=new n;return t.source=this,t.operator=e,t},n.prototype.subscribe=function(e,t,n){var r=this.operator,n=function(e,t,n){if(e){if(e instanceof ce)return e;if(e[ue])return e[ue]()}return e||t||n?new ce(e,t,n):new ce(ne)}(e,t,n);if(r?n.add(r.call(n,this.source)):n.add(this.source||ee.useDeprecatedSynchronousErrorHandling&&!n.syncErrorThrowable?this._subscribe(n):this._trySubscribe(n)),ee.useDeprecatedSynchronousErrorHandling&&n.syncErrorThrowable&&(n.syncErrorThrowable=!1,n.syncErrorThrown))throw n.syncErrorValue;return n},n.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(e){ee.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),!function(e){for(;e;){var t=e.closed,n=e.destination,r=e.isStopped;if(t||r)return;e=n&&n instanceof ce?n:null}return 1}(t)?console.warn(e):t.error(e)}},n.prototype.forEach=function(r,e){var i=this;return new(e=he(e))(function(e,t){var n=i.subscribe(function(e){try{r(e)}catch(e){t(e),n&&n.unsubscribe()}},t,e)})},n.prototype._subscribe=function(e){var t=this.source;return t&&t.subscribe(e)},n.prototype[pe]=function(){return this},n.prototype.pipe=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return 0===e.length?this:(0===(t=e).length?de:1===t.length?t[0]:function(e){return t.reduce(function(e,t){return t(e)},e)})(this)},n.prototype.toPromise=function(e){var r=this;return new(e=he(e))(function(e,t){var n;r.subscribe(function(e){return n=e},function(e){return t(e)},function(){return e(n)})})},n.create=function(e){return new n(e)},n}();function he(e){if(!(e=e||Promise))throw new Error("no Promise impl found");return e}var ge=function(){function e(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return e.prototype=Object.create(Error.prototype),e}(),me=function(r){function e(e,t){var n=r.call(this)||this;return n.subject=e,n.subscriber=t,n.closed=!1,n}return F(e,r),e.prototype.unsubscribe=function(){var e,t;this.closed||(this.closed=!0,e=(t=this.subject).observers,this.subject=null,!e||0===e.length||t.isStopped||t.closed||-1!==(t=e.indexOf(this.subscriber))&&e.splice(t,1))},e}(se),ye=function(n){function e(e){var t=n.call(this,e)||this;return t.destination=e,t}return F(e,n),e}(ce),ve=function(t){function e(){var e=t.call(this)||this;return e.observers=[],e.closed=!1,e.isStopped=!1,e.hasError=!1,e.thrownError=null,e}return F(e,t),e.prototype[ue]=function(){return new ye(this)},e.prototype.lift=function(e){var t=new be(this,this);return t.operator=e,t},e.prototype.next=function(e){if(this.closed)throw new ge;if(!this.isStopped)for(var t=this.observers,n=t.length,r=t.slice(),i=0;i<n;i++)r[i].next(e)},e.prototype.error=function(e){if(this.closed)throw new ge;this.hasError=!0,this.thrownError=e,this.isStopped=!0;for(var t=this.observers,n=t.length,r=t.slice(),i=0;i<n;i++)r[i].error(e);this.observers.length=0},e.prototype.complete=function(){if(this.closed)throw new ge;this.isStopped=!0;for(var e=this.observers,t=e.length,n=e.slice(),r=0;r<t;r++)n[r].complete();this.observers.length=0},e.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},e.prototype._trySubscribe=function(e){if(this.closed)throw new ge;return t.prototype._trySubscribe.call(this,e)},e.prototype._subscribe=function(e){if(this.closed)throw new ge;return this.hasError?(e.error(this.thrownError),se.EMPTY):this.isStopped?(e.complete(),se.EMPTY):(this.observers.push(e),new me(this,e))},e.prototype.asObservable=function(){var e=new fe;return e.source=this,e},e.create=function(e,t){return new be(e,t)},e}(fe),be=function(r){function e(e,t){var n=r.call(this)||this;return n.destination=e,n.source=t,n}return F(e,r),e.prototype.next=function(e){var t=this.destination;t&&t.next&&t.next(e)},e.prototype.error=function(e){var t=this.destination;t&&t.error&&this.destination.error(e)},e.prototype.complete=function(){var e=this.destination;e&&e.complete&&this.destination.complete()},e.prototype._subscribe=function(e){return this.source?this.source.subscribe(e):se.EMPTY},e}(ve);function Se(t,n){return function(e){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return e.lift(new we(t,n))}}var we=function(){function e(e,t){this.project=e,this.thisArg=t}return e.prototype.call=function(e,t){return t.subscribe(new Ce(e,this.project,this.thisArg))},e}(),Ce=function(r){function e(e,t,n){e=r.call(this,e)||this;return e.project=t,e.count=0,e.thisArg=n||e,e}return F(e,r),e.prototype._next=function(e){var t;try{t=this.project.call(this.thisArg,e,this.count++)}catch(e){return void this.destination.error(e)}this.destination.next(t)},e}(ce);function _e(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}var Ee=_e(),Ie=function(e){return e&&"number"==typeof e.length&&"function"!=typeof e};function Ae(e){return e&&"function"!=typeof e.subscribe&&"function"==typeof e.then}var Pe=function(e){if(e&&"function"==typeof e[pe])return o=e,function(e){var t=o[pe]();if("function"!=typeof t.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return t.subscribe(e)};if(Ie(e))return i=e,function(e){for(var t=0,n=i.length;t<n&&!e.closed;t++)e.next(i[t]);e.complete()};if(Ae(e))return n=e,function(t){return n.then(function(e){t.closed||(t.next(e),t.complete())},function(e){return t.error(e)}).then(null,te),t};if(e&&"function"==typeof e[Ee])return r=e,function(t){for(var e=r[Ee]();;){var n=void 0;try{n=e.next()}catch(e){return t.error(e),t}if(n.done){t.complete();break}if(t.next(n.value),t.closed)break}return"function"==typeof e.return&&t.add(function(){e.return&&e.return()}),t};var r,n,i,o,e=ie(e)?"an invalid object":"'"+e+"'";throw new TypeError("You provided "+e+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.")};function Oe(e,t){if(null!=e){if((n=e)&&"function"==typeof n[pe])return a=e,u=t,new fe(function(t){var n=new se;return n.add(u.schedule(function(){var e=a[pe]();n.add(e.subscribe({next:function(e){n.add(u.schedule(function(){return t.next(e)}))},error:function(e){n.add(u.schedule(function(){return t.error(e)}))},complete:function(){n.add(u.schedule(function(){return t.complete()}))}}))})),n});if(Ae(e))return o=e,s=t,new fe(function(t){var n=new se;return n.add(s.schedule(function(){return o.then(function(e){n.add(s.schedule(function(){t.next(e),n.add(s.schedule(function(){return t.complete()}))}))},function(e){n.add(s.schedule(function(){return t.error(e)}))})})),n});if(Ie(e))return r=e,i=t,new fe(function(e){var t=new se,n=0;return t.add(i.schedule(function(){n!==r.length?(e.next(r[n++]),e.closed||t.add(this.schedule())):e.complete()})),t});if((n=e)&&"function"==typeof n[Ee]||"string"==typeof e)return function(t,n){if(!t)throw new Error("Iterable cannot be null");return new fe(function(r){var i,e=new se;return e.add(function(){i&&"function"==typeof i.return&&i.return()}),e.add(n.schedule(function(){i=t[Ee](),e.add(n.schedule(function(){if(!r.closed){try{var e=i.next(),t=e.value,n=e.done}catch(e){return void r.error(e)}n?r.complete():(r.next(t),this.schedule())}}))})),e})}(e,t)}var r,i,o,s,a,u,n;throw new TypeError((null!==e&&typeof e||e)+" is not observable")}function Te(e,t){return t?Oe(e,t):e instanceof fe?e:new fe(Pe(e))}function ke(u,c){return new fe(function(r){var i=u.length;if(0!==i)for(var o=new Array(i),s=0,a=0,e=0;e<i;e++)!function(t){var e=Te(u[t]),n=!1;r.add(e.subscribe({next:function(e){n||(n=!0,a++),o[t]=e},error:function(e){return r.error(e)},complete:function(){++s!==i&&n||(a===i&&r.next(c?c.reduce(function(e,t,n){return e[t]=o[n],e},{}):o),r.complete())}}))}(e);else r.complete()})}var xe=null;var Ne=(Object.defineProperty(Le.prototype,"attrToPropMap",{get:function(){return this._attrToPropMap},set:function(e){this._attrToPropMap=e},enumerable:!0,configurable:!0}),Le);function Le(){this.resourceLoaderType=null}var Me,Re=(F(Ue,Me=Ne),Ue.prototype.getDistributedNodes=function(e){return e.getDistributedNodes()},Ue.prototype.resolveAndSetHref=function(e,t,n){e.href=null==n?t:t+"/../"+n},Ue.prototype.supportsDOMEvents=function(){return!0},Ue.prototype.supportsNativeShadowDOM=function(){return"function"==typeof document.body.createShadowRoot},Ue.prototype.getAnimationPrefix=function(){return this._animationPrefix||""},Ue.prototype.getTransitionEnd=function(){return this._transitionEnd||""},Ue.prototype.supportsAnimation=function(){return null!=this._animationPrefix&&null!=this._transitionEnd},Ue);function Ue(){var t=Me.call(this)||this;t._animationPrefix=null,t._transitionEnd=null;try{var n=t.createElement("div",document);if(null!=t.getStyle(n,"animationName"))t._animationPrefix="";else for(var e=["Webkit","Moz","O","ms"],r=0;r<e.length;r++)if(null!=t.getStyle(n,e[r]+"AnimationName")){t._animationPrefix="-"+e[r].toLowerCase()+"-";break}var i={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};Object.keys(i).forEach(function(e){null!=t.getStyle(n,e)&&(t._transitionEnd=i[e])})}catch(e){t._animationPrefix=null,t._transitionEnd=null}return t}var De,Fe={class:"className",innerHtml:"innerHTML",readonly:"readOnly",tabindex:"tabIndex"},je={"\b":"Backspace","\t":"Tab","":"Delete","":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Be={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","":"NumLock"};f["ɵglobal"].Node&&(De=f["ɵglobal"].Node.prototype.contains||function(e){return!!(16&this.compareDocumentPosition(e))});var Ve,ze=(F(qe,Ve=Re),qe.prototype.parse=function(e){throw new Error("parse not implemented")},qe.makeCurrent=function(){var e;e=new qe,xe=xe||e},qe.prototype.hasProperty=function(e,t){return t in e},qe.prototype.setProperty=function(e,t,n){e[t]=n},qe.prototype.getProperty=function(e,t){return e[t]},qe.prototype.invoke=function(e,t,n){e[t].apply(e,n)},qe.prototype.logError=function(e){window.console&&(console.error?console.error(e):console.log(e))},qe.prototype.log=function(e){window.console&&window.console.log&&window.console.log(e)},qe.prototype.logGroup=function(e){window.console&&window.console.group&&window.console.group(e)},qe.prototype.logGroupEnd=function(){window.console&&window.console.groupEnd&&window.console.groupEnd()},Object.defineProperty(qe.prototype,"attrToPropMap",{get:function(){return Fe},enumerable:!0,configurable:!0}),qe.prototype.contains=function(e,t){return De.call(e,t)},qe.prototype.querySelector=function(e,t){return e.querySelector(t)},qe.prototype.querySelectorAll=function(e,t){return e.querySelectorAll(t)},qe.prototype.on=function(e,t,n){e.addEventListener(t,n,!1)},qe.prototype.onAndCancel=function(e,t,n){return e.addEventListener(t,n,!1),function(){e.removeEventListener(t,n,!1)}},qe.prototype.dispatchEvent=function(e,t){e.dispatchEvent(t)},qe.prototype.createMouseEvent=function(e){var t=this.getDefaultDocument().createEvent("MouseEvent");return t.initEvent(e,!0,!0),t},qe.prototype.createEvent=function(e){var t=this.getDefaultDocument().createEvent("Event");return t.initEvent(e,!0,!0),t},qe.prototype.preventDefault=function(e){e.preventDefault(),e.returnValue=!1},qe.prototype.isPrevented=function(e){return e.defaultPrevented||null!=e.returnValue&&!e.returnValue},qe.prototype.getInnerHTML=function(e){return e.innerHTML},qe.prototype.getTemplateContent=function(e){return"content"in e&&this.isTemplateElement(e)?e.content:null},qe.prototype.getOuterHTML=function(e){return e.outerHTML},qe.prototype.nodeName=function(e){return e.nodeName},qe.prototype.nodeValue=function(e){return e.nodeValue},qe.prototype.type=function(e){return e.type},qe.prototype.content=function(e){return this.hasProperty(e,"content")?e.content:e},qe.prototype.firstChild=function(e){return e.firstChild},qe.prototype.nextSibling=function(e){return e.nextSibling},qe.prototype.parentElement=function(e){return e.parentNode},qe.prototype.childNodes=function(e){return e.childNodes},qe.prototype.childNodesAsList=function(e){for(var t=e.childNodes,n=new Array(t.length),r=0;r<t.length;r++)n[r]=t[r];return n},qe.prototype.clearNodes=function(e){for(;e.firstChild;)e.removeChild(e.firstChild)},qe.prototype.appendChild=function(e,t){e.appendChild(t)},qe.prototype.removeChild=function(e,t){e.removeChild(t)},qe.prototype.replaceChild=function(e,t,n){e.replaceChild(t,n)},qe.prototype.remove=function(e){return e.parentNode&&e.parentNode.removeChild(e),e},qe.prototype.insertBefore=function(e,t,n){e.insertBefore(n,t)},qe.prototype.insertAllBefore=function(t,n,e){e.forEach(function(e){return t.insertBefore(e,n)})},qe.prototype.insertAfter=function(e,t,n){e.insertBefore(n,t.nextSibling)},qe.prototype.setInnerHTML=function(e,t){e.innerHTML=t},qe.prototype.getText=function(e){return e.textContent},qe.prototype.setText=function(e,t){e.textContent=t},qe.prototype.getValue=function(e){return e.value},qe.prototype.setValue=function(e,t){e.value=t},qe.prototype.getChecked=function(e){return e.checked},qe.prototype.setChecked=function(e,t){e.checked=t},qe.prototype.createComment=function(e){return this.getDefaultDocument().createComment(e)},qe.prototype.createTemplate=function(e){var t=this.getDefaultDocument().createElement("template");return t.innerHTML=e,t},qe.prototype.createElement=function(e,t){return(t=t||this.getDefaultDocument()).createElement(e)},qe.prototype.createElementNS=function(e,t,n){return(n=n||this.getDefaultDocument()).createElementNS(e,t)},qe.prototype.createTextNode=function(e,t){return(t=t||this.getDefaultDocument()).createTextNode(e)},qe.prototype.createScriptTag=function(e,t,n){n=(n=n||this.getDefaultDocument()).createElement("SCRIPT");return n.setAttribute(e,t),n},qe.prototype.createStyleElement=function(e,t){var n=(t=t||this.getDefaultDocument()).createElement("style");return this.appendChild(n,this.createTextNode(e,t)),n},qe.prototype.createShadowRoot=function(e){return e.createShadowRoot()},qe.prototype.getShadowRoot=function(e){return e.shadowRoot},qe.prototype.getHost=function(e){return e.host},qe.prototype.clone=function(e){return e.cloneNode(!0)},qe.prototype.getElementsByClassName=function(e,t){return e.getElementsByClassName(t)},qe.prototype.getElementsByTagName=function(e,t){return e.getElementsByTagName(t)},qe.prototype.classList=function(e){return Array.prototype.slice.call(e.classList,0)},qe.prototype.addClass=function(e,t){e.classList.add(t)},qe.prototype.removeClass=function(e,t){e.classList.remove(t)},qe.prototype.hasClass=function(e,t){return e.classList.contains(t)},qe.prototype.setStyle=function(e,t,n){e.style[t]=n},qe.prototype.removeStyle=function(e,t){e.style[t]=""},qe.prototype.getStyle=function(e,t){return e.style[t]},qe.prototype.hasStyle=function(e,t,n){t=this.getStyle(e,t)||"";return n?t==n:0<t.length},qe.prototype.tagName=function(e){return e.tagName},qe.prototype.attributeMap=function(e){for(var t=new Map,n=e.attributes,r=0;r<n.length;r++){var i=n.item(r);t.set(i.name,i.value)}return t},qe.prototype.hasAttribute=function(e,t){return e.hasAttribute(t)},qe.prototype.hasAttributeNS=function(e,t,n){return e.hasAttributeNS(t,n)},qe.prototype.getAttribute=function(e,t){return e.getAttribute(t)},qe.prototype.getAttributeNS=function(e,t,n){return e.getAttributeNS(t,n)},qe.prototype.setAttribute=function(e,t,n){e.setAttribute(t,n)},qe.prototype.setAttributeNS=function(e,t,n,r){e.setAttributeNS(t,n,r)},qe.prototype.removeAttribute=function(e,t){e.removeAttribute(t)},qe.prototype.removeAttributeNS=function(e,t,n){e.removeAttributeNS(t,n)},qe.prototype.templateAwareRoot=function(e){return this.isTemplateElement(e)?this.content(e):e},qe.prototype.createHtmlDocument=function(){return document.implementation.createHTMLDocument("fakeTitle")},qe.prototype.getDefaultDocument=function(){return document},qe.prototype.getBoundingClientRect=function(e){try{return e.getBoundingClientRect()}catch(e){return{top:0,bottom:0,left:0,right:0,width:0,height:0}}},qe.prototype.getTitle=function(e){return e.title},qe.prototype.setTitle=function(e,t){e.title=t||""},qe.prototype.elementMatches=function(e,t){return!!this.isElementNode(e)&&(e.matches&&e.matches(t)||e.msMatchesSelector&&e.msMatchesSelector(t)||e.webkitMatchesSelector&&e.webkitMatchesSelector(t))},qe.prototype.isTemplateElement=function(e){return this.isElementNode(e)&&"TEMPLATE"===e.nodeName},qe.prototype.isTextNode=function(e){return e.nodeType===Node.TEXT_NODE},qe.prototype.isCommentNode=function(e){return e.nodeType===Node.COMMENT_NODE},qe.prototype.isElementNode=function(e){return e.nodeType===Node.ELEMENT_NODE},qe.prototype.hasShadowRoot=function(e){return null!=e.shadowRoot&&e instanceof HTMLElement},qe.prototype.isShadowRoot=function(e){return e instanceof DocumentFragment},qe.prototype.importIntoDoc=function(e){return document.importNode(this.templateAwareRoot(e),!0)},qe.prototype.adoptNode=function(e){return document.adoptNode(e)},qe.prototype.getHref=function(e){return e.getAttribute("href")},qe.prototype.getEventKey=function(e){var t=e.key;if(null==t){if(null==(t=e.keyIdentifier))return"Unidentified";t.startsWith("U+")&&(t=String.fromCharCode(parseInt(t.substring(2),16)),3===e.location&&Be.hasOwnProperty(t)&&(t=Be[t]))}return je[t]||t},qe.prototype.getGlobalEventTarget=function(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null},qe.prototype.getHistory=function(){return window.history},qe.prototype.getLocation=function(){return window.location},qe.prototype.getBaseHref=function(e){var t=function(){if(!He&&!(He=document.querySelector("base")))return null;return He.getAttribute("href")}();return null==t?null:function(e){Ke=Ke||document.createElement("a");return Ke.setAttribute("href",e),"/"===Ke.pathname.charAt(0)?Ke.pathname:"/"+Ke.pathname}(t)},qe.prototype.resetBaseElement=function(){He=null},qe.prototype.getUserAgent=function(){return window.navigator.userAgent},qe.prototype.setData=function(e,t,n){this.setAttribute(e,"data-"+t,n)},qe.prototype.getData=function(e,t){return this.getAttribute(e,"data-"+t)},qe.prototype.getComputedStyle=function(e){return getComputedStyle(e)},qe.prototype.supportsWebAnimation=function(){return"function"==typeof Element.prototype.animate},qe.prototype.performanceNow=function(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()},qe.prototype.supportsCookies=function(){return!0},qe.prototype.getCookie=function(e){return t["ɵparseCookieValue"](document.cookie,e)},qe.prototype.setCookie=function(e,t){document.cookie=encodeURIComponent(e)+"="+encodeURIComponent(t)},qe);function qe(){return null!==Ve&&Ve.apply(this,arguments)||this}var Ke,He=null;var Ge=t.DOCUMENT;function We(){return window.history.pushState}var $e,Ye=(F(Je,$e=t.PlatformLocation),Je.prototype._init=function(){this.location=xe.getLocation(),this._history=xe.getHistory()},Je.prototype.getBaseHrefFromDOM=function(){return xe.getBaseHref(this._doc)},Je.prototype.onPopState=function(e){xe.getGlobalEventTarget(this._doc,"window").addEventListener("popstate",e,!1)},Je.prototype.onHashChange=function(e){xe.getGlobalEventTarget(this._doc,"window").addEventListener("hashchange",e,!1)},Object.defineProperty(Je.prototype,"pathname",{get:function(){return this.location.pathname},set:function(e){this.location.pathname=e},enumerable:!0,configurable:!0}),Object.defineProperty(Je.prototype,"search",{get:function(){return this.location.search},enumerable:!0,configurable:!0}),Object.defineProperty(Je.prototype,"hash",{get:function(){return this.location.hash},enumerable:!0,configurable:!0}),Je.prototype.pushState=function(e,t,n){We()?this._history.pushState(e,t,n):this.location.hash=n},Je.prototype.replaceState=function(e,t,n){We()?this._history.replaceState(e,t,n):this.location.hash=n},Je.prototype.forward=function(){this._history.forward()},Je.prototype.back=function(){this._history.back()},Je.decorators=[{type:f.Injectable}],Je.ctorParameters=function(){return[{type:void 0,decorators:[{type:f.Inject,args:[Ge]}]}]},Je);function Je(e){var t=$e.call(this)||this;return t._doc=e,t._init(),t}Ze.prototype.addTag=function(e,t){return void 0===t&&(t=!1),e?this._getOrCreateElement(e,t):null},Ze.prototype.addTags=function(e,n){var r=this;return void 0===n&&(n=!1),e?e.reduce(function(e,t){return t&&e.push(r._getOrCreateElement(t,n)),e},[]):[]},Ze.prototype.getTag=function(e){return e&&this._dom.querySelector(this._doc,"meta["+e+"]")||null},Ze.prototype.getTags=function(e){if(!e)return[];e=this._dom.querySelectorAll(this._doc,"meta["+e+"]");return e?[].slice.call(e):[]},Ze.prototype.updateTag=function(e,t){if(!e)return null;t=t||this._parseSelector(e);t=this.getTag(t);return t?this._setMetaElementAttributes(e,t):this._getOrCreateElement(e,!0)},Ze.prototype.removeTag=function(e){this.removeTagElement(this.getTag(e))},Ze.prototype.removeTagElement=function(e){e&&this._dom.remove(e)},Ze.prototype._getOrCreateElement=function(e,t){if(!(t=void 0===t?!1:t)){var n=this._parseSelector(e),n=this.getTag(n);if(n&&this._containsAttributes(e,n))return n}n=this._dom.createElement("meta");this._setMetaElementAttributes(e,n);e=this._dom.getElementsByTagName(this._doc,"head")[0];return this._dom.appendChild(e,n),n},Ze.prototype._setMetaElementAttributes=function(t,n){var r=this;return Object.keys(t).forEach(function(e){return r._dom.setAttribute(n,e,t[e])}),n},Ze.prototype._parseSelector=function(e){var t=e.name?"name":"property";return t+'="'+e[t]+'"'},Ze.prototype._containsAttributes=function(t,n){var r=this;return Object.keys(t).every(function(e){return r._dom.getAttribute(n,e)===t[e]})},Ze.decorators=[{type:f.Injectable}],Ze.ctorParameters=function(){return[{type:void 0,decorators:[{type:f.Inject,args:[Ge]}]}]};function Ze(e){this._doc=e,this._dom=xe}new f.InjectionToken("TRANSITION_ID");var Qe=(Xe.init=function(){f.setTestabilityGetter(new Xe)},Xe.prototype.addToWindow=function(n){f["ɵglobal"].getAngularTestability=function(e,t){void 0===t&&(t=!0);t=n.findTestabilityInTree(e,t);if(null==t)throw new Error("Could not find testability for element.");return t},f["ɵglobal"].getAllAngularTestabilities=function(){return n.getAllTestabilities()},f["ɵglobal"].getAllAngularRootElements=function(){return n.getAllRootElements()};f["ɵglobal"].frameworkStabilizers||(f["ɵglobal"].frameworkStabilizers=[]),f["ɵglobal"].frameworkStabilizers.push(function(t){function n(e){i=i||e,0==--r&&t(i)}var e=f["ɵglobal"].getAllAngularTestabilities(),r=e.length,i=!1;e.forEach(function(e){e.whenStable(n)})})},Xe.prototype.findTestabilityInTree=function(e,t,n){if(null==t)return null;var r=e.getTestability(t);return null!=r?r:n?xe.isShadowRoot(t)?this.findTestabilityInTree(e,xe.getHost(t),!0):this.findTestabilityInTree(e,xe.parentElement(t),!0):null},Xe);function Xe(){}et.prototype.getTitle=function(){return xe.getTitle(this._doc)},et.prototype.setTitle=function(e){xe.setTitle(this._doc,e)},et.decorators=[{type:f.Injectable}],et.ctorParameters=function(){return[{type:void 0,decorators:[{type:f.Inject,args:[Ge]}]}]};function et(e){this._doc=e}function tt(e,t){"undefined"!=typeof COMPILED&&COMPILED||((f["ɵglobal"].ng=f["ɵglobal"].ng||{})[e]=t)}var nt={ApplicationRef:f.ApplicationRef,NgZone:f.NgZone};function rt(e){return f.getDebugNode(e)}f.APP_INITIALIZER,f.NgProbeToken,new f.Optional;var it=new f.InjectionToken("EventManagerPlugins"),ot=(st.prototype.addEventListener=function(e,t,n){return this._findPluginFor(t).addEventListener(e,t,n)},st.prototype.addGlobalEventListener=function(e,t,n){return this._findPluginFor(t).addGlobalEventListener(e,t,n)},st.prototype.getZone=function(){return this._zone},st.prototype._findPluginFor=function(e){var t=this._eventNameToPlugin.get(e);if(t)return t;for(var n=this._plugins,r=0;r<n.length;r++){var i=n[r];if(i.supports(e))return this._eventNameToPlugin.set(e,i),i}throw new Error("No event manager plugin found for event "+e)},st.decorators=[{type:f.Injectable}],st.ctorParameters=function(){return[{type:Array,decorators:[{type:f.Inject,args:[it]}]},{type:f.NgZone}]},st);function st(e,t){var n=this;this._zone=t,this._eventNameToPlugin=new Map,e.forEach(function(e){return e.manager=n}),this._plugins=e.slice().reverse()}var at=(ut.prototype.addGlobalEventListener=function(e,t,n){e=xe.getGlobalEventTarget(this._doc,e);if(!e)throw new Error("Unsupported event target "+e+" for event "+t);return this.addEventListener(e,t,n)},ut);function ut(e){this._doc=e}var ct=(lt.prototype.addStyles=function(e){var t=this,n=new Set;e.forEach(function(e){t._stylesSet.has(e)||(t._stylesSet.add(e),n.add(e))}),this.onStylesAdded(n)},lt.prototype.onStylesAdded=function(e){},lt.prototype.getAllStyles=function(){return Array.from(this._stylesSet)},lt.decorators=[{type:f.Injectable}],lt.ctorParameters=function(){return[]},lt);function lt(){this._stylesSet=new Set}var pt,dt=(F(ft,pt=ct),ft.prototype._addStylesToHost=function(e,n){var r=this;e.forEach(function(e){var t=r._doc.createElement("style");t.textContent=e,r._styleNodes.add(n.appendChild(t))})},ft.prototype.addHost=function(e){this._addStylesToHost(this._stylesSet,e),this._hostNodes.add(e)},ft.prototype.removeHost=function(e){this._hostNodes.delete(e)},ft.prototype.onStylesAdded=function(t){var n=this;this._hostNodes.forEach(function(e){return n._addStylesToHost(t,e)})},ft.prototype.ngOnDestroy=function(){this._styleNodes.forEach(function(e){return xe.remove(e)})},ft.decorators=[{type:f.Injectable}],ft.ctorParameters=function(){return[{type:void 0,decorators:[{type:f.Inject,args:[Ge]}]}]},ft);function ft(e){var t=pt.call(this)||this;return t._doc=e,t._hostNodes=new Set,t._styleNodes=new Set,t._hostNodes.add(e.head),t}var ht={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},gt=/%COMP%/g,mt="_nghost-%COMP%",yt="_ngcontent-%COMP%";function vt(e,t,n){for(var r=0;r<t.length;r++){var i=t[r];Array.isArray(i)?vt(e,i,n):(i=i.replace(gt,e),n.push(i))}return n}function bt(t){return function(e){!1===t(e)&&(e.preventDefault(),e.returnValue=!1)}}St.prototype.createRenderer=function(e,t){if(!e||!t)return this.defaultRenderer;switch(t.encapsulation){case f.ViewEncapsulation.Emulated:var n=this.rendererByCompId.get(t.id);return n||(n=new At(this.eventManager,this.sharedStylesHost,t),this.rendererByCompId.set(t.id,n)),n.applyToHost(e),n;case f.ViewEncapsulation.Native:return new Tt(this.eventManager,this.sharedStylesHost,e,t);default:return this.rendererByCompId.has(t.id)||(n=vt(t.id,t.styles,[]),this.sharedStylesHost.addStyles(n),this.rendererByCompId.set(t.id,this.defaultRenderer)),this.defaultRenderer}},St.prototype.begin=function(){},St.prototype.end=function(){},St.decorators=[{type:f.Injectable}],St.ctorParameters=function(){return[{type:ot},{type:dt}]};function St(e,t){this.eventManager=e,this.sharedStylesHost=t,this.rendererByCompId=new Map,this.defaultRenderer=new wt(e)}var wt=(Ct.prototype.destroy=function(){},Ct.prototype.createElement=function(e,t){return t?document.createElementNS(ht[t],e):document.createElement(e)},Ct.prototype.createComment=function(e){return document.createComment(e)},Ct.prototype.createText=function(e){return document.createTextNode(e)},Ct.prototype.appendChild=function(e,t){e.appendChild(t)},Ct.prototype.insertBefore=function(e,t,n){e&&e.insertBefore(t,n)},Ct.prototype.removeChild=function(e,t){e&&e.removeChild(t)},Ct.prototype.selectRootElement=function(e){var t="string"==typeof e?document.querySelector(e):e;if(!t)throw new Error('The selector "'+e+'" did not match any elements');return t.textContent="",t},Ct.prototype.parentNode=function(e){return e.parentNode},Ct.prototype.nextSibling=function(e){return e.nextSibling},Ct.prototype.setAttribute=function(e,t,n,r){r?(t=r+":"+t,(r=ht[r])?e.setAttributeNS(r,t,n):e.setAttribute(t,n)):e.setAttribute(t,n)},Ct.prototype.removeAttribute=function(e,t,n){var r;n?(r=ht[n])?e.removeAttributeNS(r,t):e.removeAttribute(n+":"+t):e.removeAttribute(t)},Ct.prototype.addClass=function(e,t){e.classList.add(t)},Ct.prototype.removeClass=function(e,t){e.classList.remove(t)},Ct.prototype.setStyle=function(e,t,n,r){r&f.RendererStyleFlags2.DashCase?e.style.setProperty(t,n,r&f.RendererStyleFlags2.Important?"important":""):e.style[t]=n},Ct.prototype.removeStyle=function(e,t,n){n&f.RendererStyleFlags2.DashCase?e.style.removeProperty(t):e.style[t]=""},Ct.prototype.setProperty=function(e,t,n){Et(t,"property"),e[t]=n},Ct.prototype.setValue=function(e,t){e.nodeValue=t},Ct.prototype.listen=function(e,t,n){return Et(t,"listener"),"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,bt(n)):this.eventManager.addEventListener(e,t,bt(n))},Ct);function Ct(e){this.eventManager=e,this.data=Object.create(null)}var _t="@".charCodeAt(0);function Et(e,t){if(e.charCodeAt(0)===_t)throw new Error("Found the synthetic "+t+" "+e+'. Please include either "BrowserAnimationsModule" or "NoopAnimationsModule" in your application.')}var It,At=(F(Pt,It=wt),Pt.prototype.applyToHost=function(e){It.prototype.setAttribute.call(this,e,this.hostAttr,"")},Pt.prototype.createElement=function(e,t){t=It.prototype.createElement.call(this,e,t);return It.prototype.setAttribute.call(this,t,this.contentAttr,""),t},Pt);function Pt(e,t,n){var r=It.call(this,e)||this,e=vt((r.component=n).id,n.styles,[]);return t.addStyles(e),r.contentAttr=(e=n.id,yt.replace(gt,e)),r.hostAttr=(n=n.id,mt.replace(gt,n)),r}var Ot,Tt=(F(kt,Ot=wt),kt.prototype.nodeOrShadowRoot=function(e){return e===this.hostEl?this.shadowRoot:e},kt.prototype.destroy=function(){this.sharedStylesHost.removeHost(this.shadowRoot)},kt.prototype.appendChild=function(e,t){return Ot.prototype.appendChild.call(this,this.nodeOrShadowRoot(e),t)},kt.prototype.insertBefore=function(e,t,n){return Ot.prototype.insertBefore.call(this,this.nodeOrShadowRoot(e),t,n)},kt.prototype.removeChild=function(e,t){return Ot.prototype.removeChild.call(this,this.nodeOrShadowRoot(e),t)},kt.prototype.parentNode=function(e){return this.nodeOrShadowRoot(Ot.prototype.parentNode.call(this,this.nodeOrShadowRoot(e)))},kt);function kt(e,t,n,r){var i=Ot.call(this,e)||this;i.sharedStylesHost=t,i.hostEl=n,i.component=r,i.shadowRoot=n.createShadowRoot(),i.sharedStylesHost.addHost(i.shadowRoot);for(var o=vt(r.id,r.styles,[]),s=0;s<o.length;s++){var a=document.createElement("style");a.textContent=o[s],i.shadowRoot.appendChild(a)}return i}var xt,Nt="undefined"!=typeof Zone&&Zone.__symbol__||function(e){return"__zone_symbol__"+e},Lt=Nt("addEventListener"),Mt=Nt("removeEventListener"),Rt={},Ut="removeEventListener",Dt="__zone_symbol__propagationStopped",Ft="__zone_symbol__stopImmediatePropagation",jt="undefined"!=typeof Zone&&Zone[Nt("BLACK_LISTED_EVENTS")];jt&&(xt={},jt.forEach(function(e){xt[e]=e}));function Bt(e){return!!xt&&xt.hasOwnProperty(e)}function Vt(e){var t=Rt[e.type];if(t){t=this[t];if(t){var n=[e];if(1===t.length)return(r=t[0]).zone!==Zone.current?r.zone.run(r.handler,this,n):r.handler.apply(this,n);for(var r,i=t.slice(),o=0;o<i.length&&!0!==e[Dt];o++)(r=i[o]).zone!==Zone.current?r.zone.run(r.handler,this,n):r.handler.apply(this,n)}}}var zt;F(qt,zt=at),qt.prototype.patchEvent=function(){var e;Event&&Event.prototype&&(Event.prototype[Ft]||(e=Event.prototype[Ft]=Event.prototype.stopImmediatePropagation,Event.prototype.stopImmediatePropagation=function(){this&&(this[Dt]=!0),e&&e.apply(this,arguments)}))},qt.prototype.supports=function(e){return!0},qt.prototype.addEventListener=function(e,t,n){var r=this,i=e[Lt],o=n;if(!i||f.NgZone.isInAngularZone()&&!Bt(t))e.addEventListener(t,o,!1);else{var n=(n=Rt[t])||(Rt[t]=Nt("ANGULAR"+t+"FALSE")),i=(s=e[n])&&0<s.length,s=s||(e[n]=[]),n=Bt(t)?Zone.root:Zone.current;if(0===s.length)s.push({zone:n,handler:o});else{for(var a=!1,u=0;u<s.length;u++)if(s[u].handler===o){a=!0;break}a||s.push({zone:n,handler:o})}i||e[Lt](t,Vt,!1)}return function(){return r.removeEventListener(e,t,o)}},qt.prototype.removeEventListener=function(e,t,n){var r=e[Mt];if(!r)return e[Ut].apply(e,[t,n,!1]);var i=Rt[t],o=i&&e[i];if(!o)return e[Ut].apply(e,[t,n,!1]);for(var s=!1,a=0;a<o.length;a++)if(o[a].handler===n){s=!0,o.splice(a,1);break}s?0===o.length&&r.apply(e,[t,Vt,!1]):e[Ut].apply(e,[t,n,!1])},qt.decorators=[{type:f.Injectable}],qt.ctorParameters=function(){return[{type:void 0,decorators:[{type:f.Inject,args:[Ge]}]},{type:f.NgZone}]};function qt(e,t){e=zt.call(this,e)||this;return e.ngZone=t,e.patchEvent(),e}var Kt={pan:!0,panstart:!0,panmove:!0,panend:!0,pancancel:!0,panleft:!0,panright:!0,panup:!0,pandown:!0,pinch:!0,pinchstart:!0,pinchmove:!0,pinchend:!0,pinchcancel:!0,pinchin:!0,pinchout:!0,press:!0,pressup:!0,rotate:!0,rotatestart:!0,rotatemove:!0,rotateend:!0,rotatecancel:!0,swipe:!0,swipeleft:!0,swiperight:!0,swipeup:!0,swipedown:!0,tap:!0},Ht=new f.InjectionToken("HammerGestureConfig"),Gt=(Wt.prototype.buildHammer=function(e){var t,n=new Hammer(e);for(t in n.get("pinch").set({enable:!0}),n.get("rotate").set({enable:!0}),this.overrides)n.get(t).set(this.overrides[t]);return n},Wt.decorators=[{type:f.Injectable}],Wt.ctorParameters=function(){return[]},Wt);function Wt(){this.events=[],this.overrides={}}var $t;F(Yt,$t=at),Yt.prototype.supports=function(e){if(!Kt.hasOwnProperty(e.toLowerCase())&&!this.isCustomEvent(e))return!1;if(!window.Hammer)throw new Error("Hammer.js is not loaded, can not bind "+e+" event");return!0},Yt.prototype.addEventListener=function(n,r,i){var o=this,s=this.manager.getZone();return r=r.toLowerCase(),s.runOutsideAngular(function(){function e(e){s.runGuarded(function(){i(e)})}var t=o._config.buildHammer(n);return t.on(r,e),function(){return t.off(r,e)}})},Yt.prototype.isCustomEvent=function(e){return-1<this._config.events.indexOf(e)},Yt.decorators=[{type:f.Injectable}],Yt.ctorParameters=function(){return[{type:void 0,decorators:[{type:f.Inject,args:[Ge]}]},{type:Gt,decorators:[{type:f.Inject,args:[Ht]}]}]};function Yt(e,t){e=$t.call(this,e)||this;return e._config=t,e}var Jt,Zt=["alt","control","meta","shift"],Qt={alt:function(e){return e.altKey},control:function(e){return e.ctrlKey},meta:function(e){return e.metaKey},shift:function(e){return e.shiftKey}};F(Xt,Jt=at),Xt.prototype.supports=function(e){return null!=Xt.parseEventName(e)},Xt.prototype.addEventListener=function(e,t,n){var r=Xt.parseEventName(t),i=Xt.eventCallback(r.fullKey,n,this.manager.getZone());return this.manager.getZone().runOutsideAngular(function(){return xe.onAndCancel(e,r.domEventName,i)})},Xt.parseEventName=function(e){var n=e.toLowerCase().split("."),t=n.shift();if(0===n.length||"keydown"!==t&&"keyup"!==t)return null;var e=Xt._normalizeKey(n.pop()),r="";if(Zt.forEach(function(e){var t=n.indexOf(e);-1<t&&(n.splice(t,1),r+=e+".")}),r+=e,0!=n.length||0===e.length)return null;e={};return e.domEventName=t,e.fullKey=r,e},Xt.getEventFullKey=function(t){var n="",r=xe.getEventKey(t);return" "===(r=r.toLowerCase())?r="space":"."===r&&(r="dot"),Zt.forEach(function(e){e!=r&&(0,Qt[e])(t)&&(n+=e+".")}),n+=r},Xt.eventCallback=function(t,n,r){return function(e){Xt.getEventFullKey(e)===t&&r.runGuarded(function(){return n(e)})}},Xt._normalizeKey=function(e){return"esc"!==e?e:"escape"},Xt.decorators=[{type:f.Injectable}],Xt.ctorParameters=function(){return[{type:void 0,decorators:[{type:f.Inject,args:[Ge]}]}]};function Xt(e){return Jt.call(this,e)||this}var en=(tn.prototype.getInertBodyElement_XHR=function(e){e="<body><remove></remove>"+e+"</body>";try{e=encodeURI(e)}catch(e){return null}var t=new XMLHttpRequest;t.responseType="document",t.open("GET","data:text/html;charset=utf-8,"+e,!1),t.send(null);t=t.response.body;return t.removeChild(t.firstChild),t},tn.prototype.getInertBodyElement_DOMParser=function(e){e="<body><remove></remove>"+e+"</body>";try{var t=(new window.DOMParser).parseFromString(e,"text/html").body;return t.removeChild(t.firstChild),t}catch(e){return null}},tn.prototype.getInertBodyElement_InertDocument=function(e){var t=this.DOM.createElement("template");return"content"in t?(this.DOM.setInnerHTML(t,e),t):(this.DOM.setInnerHTML(this.inertBodyElement,e),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(this.inertBodyElement),this.inertBodyElement)},tn.prototype.stripCustomNsAttrs=function(n){var r=this;this.DOM.attributeMap(n).forEach(function(e,t){"xmlns:ns1"!==t&&0!==t.indexOf("ns1:")||r.DOM.removeAttribute(n,t)});for(var e=0,t=this.DOM.childNodesAsList(n);e<t.length;e++){var i=t[e];this.DOM.isElementNode(i)&&this.stripCustomNsAttrs(i)}},tn);function tn(e,t){this.defaultDoc=e,this.DOM=t;e=this.DOM.createHtmlDocument();this.inertBodyElement=e.body,null==this.inertBodyElement&&(t=this.DOM.createElement("html",e),this.inertBodyElement=this.DOM.createElement("body",e),this.DOM.appendChild(t,this.inertBodyElement),this.DOM.appendChild(e,t)),this.DOM.setInnerHTML(this.inertBodyElement,'<svg><g onload="this.parentNode.remove()"></g></svg>'),!this.inertBodyElement.querySelector||this.inertBodyElement.querySelector("svg")?(this.DOM.setInnerHTML(this.inertBodyElement,'<svg><p><style><img src="</style><img src=x onerror=alert(1)//">'),this.inertBodyElement.querySelector&&this.inertBodyElement.querySelector("svg img")&&function(){try{return!!window.DOMParser}catch(e){return!1}}()?this.getInertBodyElement=this.getInertBodyElement_DOMParser:this.getInertBodyElement=this.getInertBodyElement_InertDocument):this.getInertBodyElement=this.getInertBodyElement_XHR}var nn=/^(?:(?:https?|mailto|ftp|tel|file):|[^&:/?#]*(?:[/?#]|$))/gi,rn=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function on(e){return(e=String(e)).match(nn)||e.match(rn)?e:(f.isDevMode()&&xe.log("WARNING: sanitizing unsafe URL value "+e+" (see http://g.co/ng/security#xss)"),"unsafe:"+e)}function sn(e){for(var t={},n=0,r=e.split(",");n<r.length;n++)t[r[n]]=!0;return t}function an(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n={},r=0,i=e;r<i.length;r++){var o,s=i[r];for(o in s)s.hasOwnProperty(o)&&(n[o]=!0)}return n}var un=sn("area,br,col,hr,img,wbr"),cn=sn("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),ln=sn("rp,rt"),pn=an(ln,cn),dn=an(cn,sn("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),fn=an(ln,sn("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),hn=an(un,dn,fn,pn),gn=sn("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),mn=sn("srcset"),p=sn("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),yn=an(gn,mn,p),vn=(bn.prototype.sanitizeChildren=function(e){for(var t=this.DOM.firstChild(e);t;)if(this.DOM.isElementNode(t)?this.startElement(t):this.DOM.isTextNode(t)?this.chars(this.DOM.nodeValue(t)):this.sanitizedSomething=!0,this.DOM.firstChild(t))t=this.DOM.firstChild(t);else for(;t;){this.DOM.isElementNode(t)&&this.endElement(t);var n=this.checkClobberedElement(t,this.DOM.nextSibling(t));if(n){t=n;break}t=this.checkClobberedElement(t,this.DOM.parentElement(t))}return this.buf.join("")},bn.prototype.startElement=function(e){var r=this,t=this.DOM.nodeName(e).toLowerCase();hn.hasOwnProperty(t)?(this.buf.push("<"),this.buf.push(t),this.DOM.attributeMap(e).forEach(function(e,t){var n=t.toLowerCase();yn.hasOwnProperty(n)?(gn[n]&&(e=on(e)),mn[n]&&(n=e,e=(n=String(n)).split(",").map(function(e){return on(e.trim())}).join(", ")),r.buf.push(" "),r.buf.push(t),r.buf.push('="'),r.buf.push(_n(e)),r.buf.push('"')):r.sanitizedSomething=!0}),this.buf.push(">")):this.sanitizedSomething=!0},bn.prototype.endElement=function(e){e=this.DOM.nodeName(e).toLowerCase();hn.hasOwnProperty(e)&&!un.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))},bn.prototype.chars=function(e){this.buf.push(_n(e))},bn.prototype.checkClobberedElement=function(e,t){if(t&&this.DOM.contains(e,t))throw new Error("Failed to sanitize html because the element is clobbered: "+this.DOM.getOuterHTML(e));return t},bn);function bn(){this.sanitizedSomething=!1,this.buf=[],this.DOM=xe}var Sn,wn=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Cn=/([^\#-~ |!])/g;function _n(e){return e.replace(/&/g,"&amp;").replace(wn,function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"}).replace(Cn,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}var En=new RegExp("^([-,.\"'%_!# a-zA-Z0-9]+|(?:(?:matrix|translate|scale|rotate|skew|perspective)(?:X|Y|3d)?|(?:rgb|hsl)a?|(?:repeating-)?(?:linear|radial)-gradient|(?:calc|attr))\\([-0-9.%, #a-zA-Z]+\\))$","g"),In=/^url\(([^)]+)\)$/;function An(e){if(!(e=String(e).trim()))return"";var t=e.match(In);return t&&on(t[1])===t[1]||e.match(En)&&function(e){for(var t=!0,n=!0,r=0;r<e.length;r++){var i=e.charAt(r);"'"===i&&n?t=!t:'"'===i&&t&&(n=!n)}return t&&n}(e)?e:(f.isDevMode()&&xe.log("WARNING: sanitizing unsafe style value "+e+" (see http://g.co/ng/security#xss)."),"unsafe")}var Pn;F(On,Pn=function(){}),On.prototype.sanitize=function(e,t){if(null==t)return null;switch(e){case f.SecurityContext.NONE:return t;case f.SecurityContext.HTML:return t instanceof Nn?t.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(t,"HTML"),function(e,t){var n=xe,r=null;try{Sn=Sn||new en(e,n);var i=t?String(t):"",r=Sn.getInertBodyElement(i),o=5,s=i;do{if(0===o)throw new Error("Failed to sanitize html because the input is unstable")}while(o--,i=s,s=n.getInnerHTML(r),r=Sn.getInertBodyElement(i),i!==s);var a=new vn,u=a.sanitizeChildren(n.getTemplateContent(r)||r);return f.isDevMode()&&a.sanitizedSomething&&n.log("WARNING: sanitizing HTML stripped some content (see http://g.co/ng/security#xss)."),u}finally{if(r)for(var c=n.getTemplateContent(r)||r,l=0,p=n.childNodesAsList(c);l<p.length;l++){var d=p[l];n.removeChild(c,d)}}}(this._doc,String(t)));case f.SecurityContext.STYLE:return t instanceof Rn?t.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(t,"Style"),An(t));case f.SecurityContext.SCRIPT:if(t instanceof Fn)return t.changingThisBreaksApplicationSecurity;throw this.checkNotSafeValue(t,"Script"),new Error("unsafe value used in a script context");case f.SecurityContext.URL:return t instanceof Kn||t instanceof Vn?t.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(t,"URL"),on(String(t)));case f.SecurityContext.RESOURCE_URL:if(t instanceof Kn)return t.changingThisBreaksApplicationSecurity;throw this.checkNotSafeValue(t,"ResourceURL"),new Error("unsafe value used in a resource URL context (see http://g.co/ng/security#xss)");default:throw new Error("Unexpected SecurityContext "+e+" (see http://g.co/ng/security#xss)")}},On.prototype.checkNotSafeValue=function(e,t){if(e instanceof Tn)throw new Error("Required a safe "+t+", got a "+e.getTypeName()+" (see http://g.co/ng/security#xss)")},On.prototype.bypassSecurityTrustHtml=function(e){return new Nn(e)},On.prototype.bypassSecurityTrustStyle=function(e){return new Rn(e)},On.prototype.bypassSecurityTrustScript=function(e){return new Fn(e)},On.prototype.bypassSecurityTrustUrl=function(e){return new Vn(e)},On.prototype.bypassSecurityTrustResourceUrl=function(e){return new Kn(e)},On.decorators=[{type:f.Injectable}],On.ctorParameters=function(){return[{type:void 0,decorators:[{type:f.Inject,args:[Ge]}]}]};function On(e){var t=Pn.call(this)||this;return t._doc=e,t}var Tn=(kn.prototype.toString=function(){return"SafeValue must use [property]=binding: "+this.changingThisBreaksApplicationSecurity+" (see http://g.co/ng/security#xss)"},kn);function kn(e){this.changingThisBreaksApplicationSecurity=e}var xn,Nn=(F(Ln,xn=Tn),Ln.prototype.getTypeName=function(){return"HTML"},Ln);function Ln(){return null!==xn&&xn.apply(this,arguments)||this}var Mn,Rn=(F(Un,Mn=Tn),Un.prototype.getTypeName=function(){return"Style"},Un);function Un(){return null!==Mn&&Mn.apply(this,arguments)||this}var Dn,Fn=(F(jn,Dn=Tn),jn.prototype.getTypeName=function(){return"Script"},jn);function jn(){return null!==Dn&&Dn.apply(this,arguments)||this}var Bn,Vn=(F(zn,Bn=Tn),zn.prototype.getTypeName=function(){return"URL"},zn);function zn(){return null!==Bn&&Bn.apply(this,arguments)||this}var qn,Kn=(F(Hn,qn=Tn),Hn.prototype.getTypeName=function(){return"ResourceURL"},Hn);function Hn(){return null!==qn&&qn.apply(this,arguments)||this}b=[{provide:f.PLATFORM_ID,useValue:t["ɵPLATFORM_BROWSER_ID"]},{provide:f.PLATFORM_INITIALIZER,useValue:function(){ze.makeCurrent(),Qe.init()},multi:!0},{provide:t.PlatformLocation,useClass:Ye,deps:[Ge]},{provide:Ge,useFactory:function(){return document},deps:[]}],f.createPlatformFactory(f.platformCore,"browser",b);Gn.init=function(e){var t=new Gn;return t.store=e,t},Gn.prototype.get=function(e,t){return void 0!==this.store[e]?this.store[e]:t},Gn.prototype.set=function(e,t){this.store[e]=t},Gn.prototype.remove=function(e){delete this.store[e]},Gn.prototype.hasKey=function(e){return this.store.hasOwnProperty(e)},Gn.prototype.onSerialize=function(e,t){this.onSerializeCallbacks[e]=t},Gn.prototype.toJson=function(){for(var e in this.onSerializeCallbacks)if(this.onSerializeCallbacks.hasOwnProperty(e))try{this.store[e]=this.onSerializeCallbacks[e]()}catch(e){console.warn("Exception in onSerialize callback: ",e)}return JSON.stringify(this.store)},Gn.decorators=[{type:f.Injectable}],Gn.ctorParameters=function(){return[]};function Gn(){this.store={},this.onSerializeCallbacks={}}new f.Version("5.2.11");Object.defineProperty(Wn.prototype,"value",{get:function(){return this.control?this.control.value:null},enumerable:!0,configurable:!0}),Object.defineProperty(Wn.prototype,"valid",{get:function(){return this.control?this.control.valid:null},enumerable:!0,configurable:!0}),Object.defineProperty(Wn.prototype,"invalid",{get:function(){return this.control?this.control.invalid:null},enumerable:!0,configurable:!0}),Object.defineProperty(Wn.prototype,"pending",{get:function(){return this.control?this.control.pending:null},enumerable:!0,configurable:!0}),Object.defineProperty(Wn.prototype,"disabled",{get:function(){return this.control?this.control.disabled:null},enumerable:!0,configurable:!0}),Object.defineProperty(Wn.prototype,"enabled",{get:function(){return this.control?this.control.enabled:null},enumerable:!0,configurable:!0}),Object.defineProperty(Wn.prototype,"errors",{get:function(){return this.control?this.control.errors:null},enumerable:!0,configurable:!0}),Object.defineProperty(Wn.prototype,"pristine",{get:function(){return this.control?this.control.pristine:null},enumerable:!0,configurable:!0}),Object.defineProperty(Wn.prototype,"dirty",{get:function(){return this.control?this.control.dirty:null},enumerable:!0,configurable:!0}),Object.defineProperty(Wn.prototype,"touched",{get:function(){return this.control?this.control.touched:null},enumerable:!0,configurable:!0}),Object.defineProperty(Wn.prototype,"status",{get:function(){return this.control?this.control.status:null},enumerable:!0,configurable:!0}),Object.defineProperty(Wn.prototype,"untouched",{get:function(){return this.control?this.control.untouched:null},enumerable:!0,configurable:!0}),Object.defineProperty(Wn.prototype,"statusChanges",{get:function(){return this.control?this.control.statusChanges:null},enumerable:!0,configurable:!0}),Object.defineProperty(Wn.prototype,"valueChanges",{get:function(){return this.control?this.control.valueChanges:null},enumerable:!0,configurable:!0}),Object.defineProperty(Wn.prototype,"path",{get:function(){return null},enumerable:!0,configurable:!0}),Wn.prototype.reset=function(e){void 0===e&&(e=void 0),this.control&&this.control.reset(e)},Wn.prototype.hasError=function(e,t){return!!this.control&&this.control.hasError(e,t)},Wn.prototype.getError=function(e,t){return this.control?this.control.getError(e,t):null},S=Wn;function Wn(){}var $n,C=(F(Yn,$n=S),Object.defineProperty(Yn.prototype,"formDirective",{get:function(){return null},enumerable:!0,configurable:!0}),Object.defineProperty(Yn.prototype,"path",{get:function(){return null},enumerable:!0,configurable:!0}),Yn);function Yn(){return null!==$n&&$n.apply(this,arguments)||this}function Jn(e){return null==e||0===e.length}var Ne=new f.InjectionToken("NgValidators"),Re=new f.InjectionToken("NgAsyncValidators"),Zn=/^(?=.{1,254}$)(?=.{1,64}@)[-!#$%&'*+/0-9=?A-Z^_`a-z{|}~]+(\.[-!#$%&'*+/0-9=?A-Z^_`a-z{|}~]+)*@[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?(\.[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?)*$/,Qn=(Xn.min=function(n){return function(e){if(Jn(e.value)||Jn(n))return null;var t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}},Xn.max=function(n){return function(e){if(Jn(e.value)||Jn(n))return null;var t=parseFloat(e.value);return!isNaN(t)&&n<t?{max:{max:n,actual:e.value}}:null}},Xn.required=function(e){return Jn(e.value)?{required:!0}:null},Xn.requiredTrue=function(e){return!0===e.value?null:{required:!0}},Xn.email=function(e){return Jn(e.value)||Zn.test(e.value)?null:{email:!0}},Xn.minLength=function(t){return function(e){if(Jn(e.value))return null;e=e.value?e.value.length:0;return e<t?{minlength:{requiredLength:t,actualLength:e}}:null}},Xn.maxLength=function(t){return function(e){e=e.value?e.value.length:0;return t<e?{maxlength:{requiredLength:t,actualLength:e}}:null}},Xn.pattern=function(e){if(!e)return Xn.nullValidator;var t,n="string"==typeof e?(t="","^"!==e.charAt(0)&&(t+="^"),t+=e,"$"!==e.charAt(e.length-1)&&(t+="$"),new RegExp(t)):(t=e.toString(),e);return function(e){if(Jn(e.value))return null;e=e.value;return n.test(e)?null:{pattern:{requiredPattern:t,actualValue:e}}}},Xn.nullValidator=function(e){return null},Xn.compose=function(e){if(!e)return null;var n=e.filter(er);return 0==n.length?null:function(e){return nr((t=e,n.map(function(e){return e(t)})));var t}},Xn.composeAsync=function(e){if(!e)return null;var n=e.filter(er);return 0==n.length?null:function(e){var t;return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(1===e.length){var n=e[0];if(re(n))return ke(n,null);if(ie(n)&&Object.getPrototypeOf(n)===Object.prototype){var r=Object.keys(n);return ke(r.map(function(e){return n[e]}),r)}}if("function"!=typeof e[e.length-1])return ke(e,null);var i=e.pop();return ke(e=1===e.length&&re(e[0])?e[0]:e,null).pipe(Se(function(e){return i.apply(void 0,e)}))}((t=e,n.map(function(e){return e(t)}).map(tr))).pipe(Se(nr))}},Xn);function Xn(){}function er(e){return null!=e}function tr(e){e=f["ɵisPromise"](e)?Te(e):e;if(!f["ɵisObservable"](e))throw new Error("Expected validator to return Promise or Observable.");return e}function nr(e){e=e.reduce(function(e,t){return null!=t?j({},e,t):e},{});return 0===Object.keys(e).length?null:e}var ct=new f.InjectionToken("NgValueAccessor"),jt={provide:ct,useExisting:f.forwardRef(function(){return rr}),multi:!0},rr=(ir.prototype.writeValue=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"checked",e)},ir.prototype.registerOnChange=function(e){this.onChange=e},ir.prototype.registerOnTouched=function(e){this.onTouched=e},ir.prototype.setDisabledState=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)},V([f.Directive({selector:"input[type=checkbox][formControlName],input[type=checkbox][formControl],input[type=checkbox][ngModel]",host:{"(change)":"onChange($event.target.checked)","(blur)":"onTouched()"},providers:[jt]}),q("design:paramtypes",[f.Renderer2,f.ElementRef])],ir));function ir(e,t){this._renderer=e,this._elementRef=t,this.onChange=function(e){},this.onTouched=function(){}}at={provide:ct,useExisting:f.forwardRef(function(){return or}),multi:!0};var cn=new f.InjectionToken("CompositionEventMode"),or=(sr.prototype.writeValue=function(e){e=null==e?"":e;this._renderer.setProperty(this._elementRef.nativeElement,"value",e)},sr.prototype.registerOnChange=function(e){this.onChange=e},sr.prototype.registerOnTouched=function(e){this.onTouched=e},sr.prototype.setDisabledState=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)},sr.prototype._handleInput=function(e){this._compositionMode&&(!this._compositionMode||this._composing)||this.onChange(e)},sr.prototype._compositionStart=function(){this._composing=!0},sr.prototype._compositionEnd=function(e){this._composing=!1,this._compositionMode&&this.onChange(e)},V([f.Directive({selector:"input:not([type=checkbox])[formControlName],textarea[formControlName],input:not([type=checkbox])[formControl],textarea[formControl],input:not([type=checkbox])[ngModel],textarea[ngModel],[ngDefaultControl]",host:{"(input)":"$any(this)._handleInput($event.target.value)","(blur)":"onTouched()","(compositionstart)":"$any(this)._compositionStart()","(compositionend)":"$any(this)._compositionEnd($event.target.value)"},providers:[at]}),z(2,f.Optional()),z(2,f.Inject(cn)),q("design:paramtypes",[f.Renderer2,f.ElementRef,Boolean])],sr));function sr(e,t,n){this._renderer=e,this._elementRef=t,this._compositionMode=n,this.onChange=function(e){},this.onTouched=function(){},this._composing=!1,null==this._compositionMode&&(this._compositionMode=(n=xe?xe.getUserAgent():"",!/android (\d+)/.test(n.toLowerCase())))}function ar(t){return t.validate?function(e){return t.validate(e)}:t}function ur(t){return t.validate?function(e){return t.validate(e)}:t}var ln={provide:ct,useExisting:f.forwardRef(function(){return cr}),multi:!0},cr=(lr.prototype.writeValue=function(e){e=null==e?"":e;this._renderer.setProperty(this._elementRef.nativeElement,"value",e)},lr.prototype.registerOnChange=function(t){this.onChange=function(e){t(""==e?null:parseFloat(e))}},lr.prototype.registerOnTouched=function(e){this.onTouched=e},lr.prototype.setDisabledState=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)},V([f.Directive({selector:"input[type=number][formControlName],input[type=number][formControl],input[type=number][ngModel]",host:{"(change)":"onChange($event.target.value)","(input)":"onChange($event.target.value)","(blur)":"onTouched()"},providers:[ln]}),q("design:paramtypes",[f.Renderer2,f.ElementRef])],lr));function lr(e,t){this._renderer=e,this._elementRef=t,this.onChange=function(e){},this.onTouched=function(){}}function pr(){throw new Error("unimplemented")}var dr,fr=(F(hr,dr=S),Object.defineProperty(hr.prototype,"validator",{get:pr,enumerable:!0,configurable:!0}),Object.defineProperty(hr.prototype,"asyncValidator",{get:pr,enumerable:!0,configurable:!0}),hr);function hr(){var e=null!==dr&&dr.apply(this,arguments)||this;return e._parent=null,e.name=null,e.valueAccessor=null,e._rawValidators=[],e._rawAsyncValidators=[],e}dn={provide:ct,useExisting:f.forwardRef(function(){return mr}),multi:!0},gr.prototype.add=function(e,t){this._accessors.push([e,t])},gr.prototype.remove=function(e){for(var t=this._accessors.length-1;0<=t;--t)if(this._accessors[t][1]===e)return void this._accessors.splice(t,1)},gr.prototype.select=function(t){var n=this;this._accessors.forEach(function(e){n._isSameGroup(e,t)&&e[1]!==t&&e[1].fireUncheck(t.value)})},gr.prototype._isSameGroup=function(e,t){return!!e[0].control&&(e[0]._parent===t._control._parent&&e[1].name===t.name)},fn=V([f.Injectable()],gr);function gr(){this._accessors=[]}var mr=(yr.prototype.ngOnInit=function(){this._control=this._injector.get(fr),this._checkName(),this._registry.add(this._control,this)},yr.prototype.ngOnDestroy=function(){this._registry.remove(this)},yr.prototype.writeValue=function(e){this._state=e===this.value,this._renderer.setProperty(this._elementRef.nativeElement,"checked",this._state)},yr.prototype.registerOnChange=function(e){var t=this;this._fn=e,this.onChange=function(){e(t.value),t._registry.select(t)}},yr.prototype.fireUncheck=function(e){this.writeValue(e)},yr.prototype.registerOnTouched=function(e){this.onTouched=e},yr.prototype.setDisabledState=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)},yr.prototype._checkName=function(){this.name&&this.formControlName&&this.name!==this.formControlName&&this._throwNameError(),!this.name&&this.formControlName&&(this.name=this.formControlName)},yr.prototype._throwNameError=function(){throw new Error('\n      If you define both a name and a formControlName attribute on your radio button, their values\n      must match. Ex: <input type="radio" formControlName="food" name="food">\n    ')},V([f.Input(),q("design:type",String)],yr.prototype,"name",void 0),V([f.Input(),q("design:type",String)],yr.prototype,"formControlName",void 0),V([f.Input(),q("design:type",Object)],yr.prototype,"value",void 0),V([f.Directive({selector:"input[type=radio][formControlName],input[type=radio][formControl],input[type=radio][ngModel]",host:{"(change)":"onChange()","(blur)":"onTouched()"},providers:[dn]}),q("design:paramtypes",[f.Renderer2,f.ElementRef,fn,f.Injector])],yr));function yr(e,t,n,r){this._renderer=e,this._elementRef=t,this._registry=n,this._injector=r,this.onChange=function(){},this.onTouched=function(){}}var pn={provide:ct,useExisting:f.forwardRef(function(){return vr}),multi:!0},vr=(br.prototype.writeValue=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"value",parseFloat(e))},br.prototype.registerOnChange=function(t){this.onChange=function(e){t(""==e?null:parseFloat(e))}},br.prototype.registerOnTouched=function(e){this.onTouched=e},br.prototype.setDisabledState=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)},V([f.Directive({selector:"input[type=range][formControlName],input[type=range][formControl],input[type=range][ngModel]",host:{"(change)":"onChange($event.target.value)","(input)":"onChange($event.target.value)","(blur)":"onTouched()"},providers:[pn]}),q("design:paramtypes",[f.Renderer2,f.ElementRef])],br));function br(e,t){this._renderer=e,this._elementRef=t,this.onChange=function(e){},this.onTouched=function(){}}var Sr='\n    <div [formGroup]="myGroup">\n      <input formControlName="firstName">\n    </div>\n\n    In your class:\n\n    this.myGroup = new FormGroup({\n       firstName: new FormControl()\n    });',wr='\n    <div [formGroup]="myGroup">\n       <div formGroupName="person">\n          <input formControlName="firstName">\n       </div>\n    </div>\n\n    In your class:\n\n    this.myGroup = new FormGroup({\n       person: new FormGroup({ firstName: new FormControl() })\n    });',Cr='\n    <div [formGroup]="myGroup">\n      <div formArrayName="cities">\n        <div *ngFor="let city of cityArray.controls; index as i">\n          <input [formControlName]="i">\n        </div>\n      </div>\n    </div>\n\n    In your class:\n\n    this.cityArray = new FormArray([new FormControl(\'SF\')]);\n    this.myGroup = new FormGroup({\n      cities: this.cityArray\n    });',_r='\n    <form>\n       <div ngModelGroup="person">\n          <input [(ngModel)]="person.name" name="firstName">\n       </div>\n    </form>',Er='\n    <div [formGroup]="myGroup">\n       <input formControlName="firstName">\n       <input [(ngModel)]="showMoreControls" [ngModelOptions]="{standalone: true}">\n    </div>\n  ',Ir=(Ar.controlParentException=function(){throw new Error("formControlName must be used with a parent formGroup directive.  You'll want to add a formGroup\n       directive and pass it an existing FormGroup instance (you can create one in your class).\n\n      Example:\n\n      "+Sr)},Ar.ngModelGroupException=function(){throw new Error('formControlName cannot be used with an ngModelGroup parent. It is only compatible with parents\n       that also have a "form" prefix: formGroupName, formArrayName, or formGroup.\n\n       Option 1:  Update the parent to be formGroupName (reactive form strategy)\n\n        '+wr+"\n\n        Option 2: Use ngModel instead of formControlName (template-driven strategy)\n\n        "+_r)},Ar.missingFormException=function(){throw new Error("formGroup expects a FormGroup instance. Please pass one in.\n\n       Example:\n\n       "+Sr)},Ar.groupParentException=function(){throw new Error("formGroupName must be used with a parent formGroup directive.  You'll want to add a formGroup\n      directive and pass it an existing FormGroup instance (you can create one in your class).\n\n      Example:\n\n      "+wr)},Ar.arrayParentException=function(){throw new Error("formArrayName must be used with a parent formGroup directive.  You'll want to add a formGroup\n       directive and pass it an existing FormGroup instance (you can create one in your class).\n\n        Example:\n\n        "+Cr)},Ar.disabledAttrWarning=function(){console.warn("\n      It looks like you're using the disabled attribute with a reactive form directive. If you set disabled to true\n      when you set up this control in your component class, the disabled attribute will actually be set in the DOM for\n      you. We recommend using this approach to avoid 'changed after checked' errors.\n       \n      Example: \n      form = new FormGroup({\n        first: new FormControl({value: 'Nancy', disabled: true}, Validators.required),\n        last: new FormControl('Drew', Validators.required)\n      });\n    ")},Ar.ngModelWarning=function(e){console.warn("\n    It looks like you're using ngModel on the same form field as "+e+". \n    Support for using the ngModel input property and ngModelChange event with \n    reactive form directives has been deprecated in Angular v6 and will be removed \n    in Angular v7.\n    \n    For more information on this, see our API docs here:\n    https://angular.io/api/forms/"+("formControl"===e?"FormControlDirective":"FormControlName")+"#use-with-ngmodel\n    ")},Ar);function Ar(){}p={provide:ct,useExisting:f.forwardRef(function(){return Or}),multi:!0};function Pr(e,t){return null==e?""+t:(e+": "+(t=t&&"object"==typeof t?"Object":t)).slice(0,50)}var Or=(Object.defineProperty(Tr.prototype,"compareWith",{set:function(e){if("function"!=typeof e)throw new Error("compareWith must be a function, but received "+JSON.stringify(e));this._compareWith=e},enumerable:!0,configurable:!0}),Tr.prototype.writeValue=function(e){this.value=e;var t=this._getOptionId(e);null==t&&this._renderer.setProperty(this._elementRef.nativeElement,"selectedIndex",-1);e=Pr(t,e);this._renderer.setProperty(this._elementRef.nativeElement,"value",e)},Tr.prototype.registerOnChange=function(t){var n=this;this.onChange=function(e){n.value=n._getOptionValue(e),t(n.value)}},Tr.prototype.registerOnTouched=function(e){this.onTouched=e},Tr.prototype.setDisabledState=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)},Tr.prototype._registerOption=function(){return(this._idCounter++).toString()},Tr.prototype._getOptionId=function(e){var t,n;try{for(var r=G(Array.from(this._optionMap.keys())),i=r.next();!i.done;i=r.next()){var o=i.value;if(this._compareWith(this._optionMap.get(o),e))return o}}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}return null},Tr.prototype._getOptionValue=function(e){var t=e.split(":")[0];return this._optionMap.has(t)?this._optionMap.get(t):e},V([f.Input(),q("design:type",Function),q("design:paramtypes",[Function])],Tr.prototype,"compareWith",null),V([f.Directive({selector:"select:not([multiple])[formControlName],select:not([multiple])[formControl],select:not([multiple])[ngModel]",host:{"(change)":"onChange($event.target.value)","(blur)":"onTouched()"},providers:[p]}),q("design:paramtypes",[f.Renderer2,f.ElementRef])],Tr));function Tr(e,t){this._renderer=e,this._elementRef=t,this._optionMap=new Map,this._idCounter=0,this.onChange=function(e){},this.onTouched=function(){},this._compareWith=f["ɵlooseIdentical"]}Object.defineProperty(kr.prototype,"ngValue",{set:function(e){null!=this._select&&(this._select._optionMap.set(this.id,e),this._setElementValue(Pr(this.id,e)),this._select.writeValue(this._select.value))},enumerable:!0,configurable:!0}),Object.defineProperty(kr.prototype,"value",{set:function(e){this._setElementValue(e),this._select&&this._select.writeValue(this._select.value)},enumerable:!0,configurable:!0}),kr.prototype._setElementValue=function(e){this._renderer.setProperty(this._element.nativeElement,"value",e)},kr.prototype.ngOnDestroy=function(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))},V([f.Input("ngValue"),q("design:type",Object),q("design:paramtypes",[Object])],kr.prototype,"ngValue",null),V([f.Input("value"),q("design:type",Object),q("design:paramtypes",[Object])],kr.prototype,"value",null),Ye=V([f.Directive({selector:"option"}),z(2,f.Optional()),z(2,f.Host()),q("design:paramtypes",[f.ElementRef,f.Renderer2,Or])],kr);function kr(e,t,n){this._element=e,this._renderer=t,this._select=n,this._select&&(this.id=this._select._registerOption())}b={provide:ct,useExisting:f.forwardRef(function(){return Nr}),multi:!0};function xr(e,t){return null==e?""+t:(e+": "+(t=(t="string"==typeof t?"'"+t+"'":t)&&"object"==typeof t?"Object":t)).slice(0,50)}var Nr=(Object.defineProperty(Lr.prototype,"compareWith",{set:function(e){if("function"!=typeof e)throw new Error("compareWith must be a function, but received "+JSON.stringify(e));this._compareWith=e},enumerable:!0,configurable:!0}),Lr.prototype.writeValue=function(e){var n,t=this;this.value=e,e=Array.isArray(e)?(n=e.map(function(e){return t._getOptionId(e)}),function(e,t){e._setSelected(-1<n.indexOf(t.toString()))}):function(e,t){e._setSelected(!1)},this._optionMap.forEach(e)},Lr.prototype.registerOnChange=function(s){var a=this;this.onChange=function(e){var t=[];if(e.hasOwnProperty("selectedOptions"))for(var n=e.selectedOptions,r=0;r<n.length;r++){var i=n.item(r),o=a._getOptionValue(i.value);t.push(o)}else for(n=e.options,r=0;r<n.length;r++)(i=n.item(r)).selected&&(o=a._getOptionValue(i.value),t.push(o));a.value=t,s(t)}},Lr.prototype.registerOnTouched=function(e){this.onTouched=e},Lr.prototype.setDisabledState=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)},Lr.prototype._registerOption=function(e){var t=(this._idCounter++).toString();return this._optionMap.set(t,e),t},Lr.prototype._getOptionId=function(e){var t,n;try{for(var r=G(Array.from(this._optionMap.keys())),i=r.next();!i.done;i=r.next()){var o=i.value;if(this._compareWith(this._optionMap.get(o)._value,e))return o}}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}return null},Lr.prototype._getOptionValue=function(e){var t=e.split(":")[0];return this._optionMap.has(t)?this._optionMap.get(t)._value:e},V([f.Input(),q("design:type",Function),q("design:paramtypes",[Function])],Lr.prototype,"compareWith",null),V([f.Directive({selector:"select[multiple][formControlName],select[multiple][formControl],select[multiple][ngModel]",host:{"(change)":"onChange($event.target)","(blur)":"onTouched()"},providers:[b]}),q("design:paramtypes",[f.Renderer2,f.ElementRef])],Lr));function Lr(e,t){this._renderer=e,this._elementRef=t,this._optionMap=new Map,this._idCounter=0,this.onChange=function(e){},this.onTouched=function(){},this._compareWith=f["ɵlooseIdentical"]}Object.defineProperty(Mr.prototype,"ngValue",{set:function(e){null!=this._select&&(this._value=e,this._setElementValue(xr(this.id,e)),this._select.writeValue(this._select.value))},enumerable:!0,configurable:!0}),Object.defineProperty(Mr.prototype,"value",{set:function(e){this._select?(this._value=e,this._setElementValue(xr(this.id,e)),this._select.writeValue(this._select.value)):this._setElementValue(e)},enumerable:!0,configurable:!0}),Mr.prototype._setElementValue=function(e){this._renderer.setProperty(this._element.nativeElement,"value",e)},Mr.prototype._setSelected=function(e){this._renderer.setProperty(this._element.nativeElement,"selected",e)},Mr.prototype.ngOnDestroy=function(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))},V([f.Input("ngValue"),q("design:type",Object),q("design:paramtypes",[Object])],Mr.prototype,"ngValue",null),V([f.Input("value"),q("design:type",Object),q("design:paramtypes",[Object])],Mr.prototype,"value",null),jt=V([f.Directive({selector:"option"}),z(2,f.Optional()),z(2,f.Host()),q("design:paramtypes",[f.ElementRef,f.Renderer2,Nr])],Mr);function Mr(e,t,n){this._element=e,this._renderer=t,this._select=n,this._select&&(this.id=this._select._registerOption(this))}function Rr(e,t){return $(t.path,[e])}function Ur(t,n){var r,i,o,e,s;t||Br(n,"Cannot find control with"),n.valueAccessor||Br(n,"No value accessor for form control with"),t.validator=Qn.compose([t.validator,n.validator]),t.asyncValidator=Qn.composeAsync([t.asyncValidator,n.asyncValidator]),n.valueAccessor.writeValue(t.value),r=t,(i=n).valueAccessor.registerOnChange(function(e){r._pendingValue=e,r._pendingChange=!0,r._pendingDirty=!0,"change"===r.updateOn&&Dr(r,i)}),o=n,t.registerOnChange(function(e,t){o.valueAccessor.writeValue(e),t&&o.viewToModelUpdate(e)}),e=t,(s=n).valueAccessor.registerOnTouched(function(){e._pendingTouched=!0,"blur"===e.updateOn&&e._pendingChange&&Dr(e,s),"submit"!==e.updateOn&&e.markAsTouched()}),n.valueAccessor.setDisabledState&&t.registerOnDisabledChange(function(e){n.valueAccessor.setDisabledState(e)}),n._rawValidators.forEach(function(e){e.registerOnValidatorChange&&e.registerOnValidatorChange(function(){return t.updateValueAndValidity()})}),n._rawAsyncValidators.forEach(function(e){e.registerOnValidatorChange&&e.registerOnValidatorChange(function(){return t.updateValueAndValidity()})})}function Dr(e,t){e._pendingDirty&&e.markAsDirty(),e.setValue(e._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1}function Fr(e,t){null==e&&Br(t,"Cannot find control with"),e.validator=Qn.compose([e.validator,t.validator]),e.asyncValidator=Qn.composeAsync([e.asyncValidator,t.asyncValidator])}function jr(e){return Br(e,"There is no FormControl instance attached to form control element with")}function Br(e,t){e=1<e.path.length?"path: '"+e.path.join(" -> ")+"'":e.path[0]?"name: '"+e.path+"'":"unspecified name attribute";throw new Error(t+" "+e)}function Vr(e){return null!=e?Qn.compose(e.map(ar)):null}function zr(e){return null!=e?Qn.composeAsync(e.map(ur)):null}function qr(e,t){if(e.hasOwnProperty("model")){e=e.model;return e.isFirstChange()||!f["ɵlooseIdentical"](t,e.currentValue)}}var Kr=[rr,vr,cr,Or,Nr,mr];function Hr(e,t){e._syncPendingControls(),t.forEach(function(e){var t=e.control;"submit"===t.updateOn&&t._pendingChange&&(e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1)})}function Gr(n,e){if(!e)return null;Array.isArray(e)||Br(n,"Value accessor was not provided as an array for form control with");var r=void 0,i=void 0,o=void 0;return e.forEach(function(e){var t;e.constructor===or?r=e:(t=e,Kr.some(function(e){return t.constructor===e})?(i&&Br(n,"More than one built-in value accessor matches form control with"),i=e):(o&&Br(n,"More than one custom value accessor matches form control with"),o=e))}),o||i||r||(Br(n,"No valid value accessor for form control with"),null)}function Wr(e,t){t=e.indexOf(t);-1<t&&e.splice(t,1)}function $r(e,t,n,r){f.isDevMode()&&"never"!==r&&((null!==r&&"once"!==r||t._ngModelWarningSentOnce)&&("always"!==r||n._ngModelWarningSent)||(Ir.ngModelWarning(e),t._ngModelWarningSentOnce=!0,n._ngModelWarningSent=!0))}var Yr,Jr=(F(Zr,Yr=C),Zr.prototype.ngOnInit=function(){this._checkParentType(),this.formDirective.addFormGroup(this)},Zr.prototype.ngOnDestroy=function(){this.formDirective&&this.formDirective.removeFormGroup(this)},Object.defineProperty(Zr.prototype,"control",{get:function(){return this.formDirective.getFormGroup(this)},enumerable:!0,configurable:!0}),Object.defineProperty(Zr.prototype,"path",{get:function(){return Rr(this.name,this._parent)},enumerable:!0,configurable:!0}),Object.defineProperty(Zr.prototype,"formDirective",{get:function(){return this._parent?this._parent.formDirective:null},enumerable:!0,configurable:!0}),Object.defineProperty(Zr.prototype,"validator",{get:function(){return Vr(this._validators)},enumerable:!0,configurable:!0}),Object.defineProperty(Zr.prototype,"asyncValidator",{get:function(){return zr(this._asyncValidators)},enumerable:!0,configurable:!0}),Zr.prototype._checkParentType=function(){},Zr);function Zr(){return null!==Yr&&Yr.apply(this,arguments)||this}Object.defineProperty(Qr.prototype,"ngClassUntouched",{get:function(){return!!this._cd.control&&this._cd.control.untouched},enumerable:!0,configurable:!0}),Object.defineProperty(Qr.prototype,"ngClassTouched",{get:function(){return!!this._cd.control&&this._cd.control.touched},enumerable:!0,configurable:!0}),Object.defineProperty(Qr.prototype,"ngClassPristine",{get:function(){return!!this._cd.control&&this._cd.control.pristine},enumerable:!0,configurable:!0}),Object.defineProperty(Qr.prototype,"ngClassDirty",{get:function(){return!!this._cd.control&&this._cd.control.dirty},enumerable:!0,configurable:!0}),Object.defineProperty(Qr.prototype,"ngClassValid",{get:function(){return!!this._cd.control&&this._cd.control.valid},enumerable:!0,configurable:!0}),Object.defineProperty(Qr.prototype,"ngClassInvalid",{get:function(){return!!this._cd.control&&this._cd.control.invalid},enumerable:!0,configurable:!0}),Object.defineProperty(Qr.prototype,"ngClassPending",{get:function(){return!!this._cd.control&&this._cd.control.pending},enumerable:!0,configurable:!0}),at=Qr;function Qr(e){this._cd=e}var Xr,cn={"[class.ng-untouched]":"ngClassUntouched","[class.ng-touched]":"ngClassTouched","[class.ng-pristine]":"ngClassPristine","[class.ng-dirty]":"ngClassDirty","[class.ng-valid]":"ngClassValid","[class.ng-invalid]":"ngClassInvalid","[class.ng-pending]":"ngClassPending"},ln=(F(ei,Xr=at),V([f.Directive({selector:"[formControlName],[ngModel],[formControl]",host:cn}),z(0,f.Self()),q("design:paramtypes",[fr])],ei));function ei(e){return Xr.call(this,e)||this}var ti,S=(F(ni,ti=at),V([f.Directive({selector:"[formGroupName],[formArrayName],[ngModelGroup],[formGroup],form:not([ngNoForm]),[ngForm]",host:cn}),z(0,f.Self()),q("design:paramtypes",[C])],ni));function ni(e){return ti.call(this,e)||this}var ri="VALID",ii="INVALID",oi="PENDING",si="DISABLED";function ai(e){e=ci(e)?e.validators:e;return Array.isArray(e)?Vr(e):e||null}function ui(e,t){e=ci(t)?t.asyncValidators:e;return Array.isArray(e)?zr(e):e||null}function ci(e){return null!=e&&!Array.isArray(e)&&"object"==typeof e}Object.defineProperty(li.prototype,"parent",{get:function(){return this._parent},enumerable:!0,configurable:!0}),Object.defineProperty(li.prototype,"valid",{get:function(){return this.status===ri},enumerable:!0,configurable:!0}),Object.defineProperty(li.prototype,"invalid",{get:function(){return this.status===ii},enumerable:!0,configurable:!0}),Object.defineProperty(li.prototype,"pending",{get:function(){return this.status==oi},enumerable:!0,configurable:!0}),Object.defineProperty(li.prototype,"disabled",{get:function(){return this.status===si},enumerable:!0,configurable:!0}),Object.defineProperty(li.prototype,"enabled",{get:function(){return this.status!==si},enumerable:!0,configurable:!0}),Object.defineProperty(li.prototype,"dirty",{get:function(){return!this.pristine},enumerable:!0,configurable:!0}),Object.defineProperty(li.prototype,"untouched",{get:function(){return!this.touched},enumerable:!0,configurable:!0}),Object.defineProperty(li.prototype,"updateOn",{get:function(){return this._updateOn||(this.parent?this.parent.updateOn:"change")},enumerable:!0,configurable:!0}),li.prototype.setValidators=function(e){this.validator=ai(e)},li.prototype.setAsyncValidators=function(e){this.asyncValidator=ui(e)},li.prototype.clearValidators=function(){this.validator=null},li.prototype.clearAsyncValidators=function(){this.asyncValidator=null},li.prototype.markAsTouched=function(e){void 0===e&&(e={}),this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)},li.prototype.markAsUntouched=function(e){void 0===e&&(e={}),this.touched=!1,this._pendingTouched=!1,this._forEachChild(function(e){e.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)},li.prototype.markAsDirty=function(e){void 0===e&&(e={}),this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)},li.prototype.markAsPristine=function(e){void 0===e&&(e={}),this.pristine=!0,this._pendingDirty=!1,this._forEachChild(function(e){e.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)},li.prototype.markAsPending=function(e){void 0===e&&(e={}),!(this.status=oi)!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)},li.prototype.disable=function(t){void 0===t&&(t={}),this.status=si,this.errors=null,this._forEachChild(function(e){e.disable(j({},t,{onlySelf:!0}))}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(t),this._onDisabledChange.forEach(function(e){return e(!0)})},li.prototype.enable=function(t){void 0===t&&(t={}),this.status=ri,this._forEachChild(function(e){e.enable(j({},t,{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(t),this._onDisabledChange.forEach(function(e){return e(!1)})},li.prototype._updateAncestors=function(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),this._parent._updatePristine(),this._parent._updateTouched())},li.prototype.setParent=function(e){this._parent=e},li.prototype.updateValueAndValidity=function(e){void 0===e&&(e={}),this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),this.status!==ri&&this.status!==oi||this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)},li.prototype._updateTreeValidity=function(t){void 0===t&&(t={emitEvent:!0}),this._forEachChild(function(e){return e._updateTreeValidity(t)}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})},li.prototype._setInitialStatus=function(){this.status=this._allControlsDisabled()?si:ri},li.prototype._runValidator=function(){return this.validator?this.validator(this):null},li.prototype._runAsyncValidator=function(t){var e,n=this;this.asyncValidator&&(this.status=oi,e=tr(this.asyncValidator(this)),this._asyncValidationSubscription=e.subscribe(function(e){return n.setErrors(e,{emitEvent:t})}))},li.prototype._cancelExistingSubscription=function(){this._asyncValidationSubscription&&this._asyncValidationSubscription.unsubscribe()},li.prototype.setErrors=function(e,t){void 0===t&&(t={}),this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)},li.prototype.get=function(e){return t=this,n=".",null==(e=e)||(e=!(e instanceof Array)?e.split(n):e)instanceof Array&&0===e.length?null:e.reduce(function(e,t){return e instanceof gi?e.controls.hasOwnProperty(t)?e.controls[t]:null:e instanceof vi&&e.at(t)||null},t);var t,n},li.prototype.getError=function(e,t){t=t?this.get(t):this;return t&&t.errors?t.errors[e]:null},li.prototype.hasError=function(e,t){return!!this.getError(e,t)},Object.defineProperty(li.prototype,"root",{get:function(){for(var e=this;e._parent;)e=e._parent;return e},enumerable:!0,configurable:!0}),li.prototype._updateControlsErrors=function(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)},li.prototype._initObservables=function(){this.valueChanges=new f.EventEmitter,this.statusChanges=new f.EventEmitter},li.prototype._calculateStatus=function(){return this._allControlsDisabled()?si:this.errors?ii:this._anyControlsHaveStatus(oi)?oi:this._anyControlsHaveStatus(ii)?ii:ri},li.prototype._anyControlsHaveStatus=function(t){return this._anyControls(function(e){return e.status===t})},li.prototype._anyControlsDirty=function(){return this._anyControls(function(e){return e.dirty})},li.prototype._anyControlsTouched=function(){return this._anyControls(function(e){return e.touched})},li.prototype._updatePristine=function(e){void 0===e&&(e={}),this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)},li.prototype._updateTouched=function(e){void 0===e&&(e={}),this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)},li.prototype._isBoxedValue=function(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e},li.prototype._registerOnCollectionChange=function(e){this._onCollectionChange=e},li.prototype._setUpdateStrategy=function(e){ci(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)},dn=li;function li(e,t){this.validator=e,this.asyncValidator=t,this._onCollectionChange=function(){},this.pristine=!0,this.touched=!1,this._onDisabledChange=[]}var pi,di=(F(fi,pi=dn),fi.prototype.setValue=function(e,t){var n=this;void 0===t&&(t={}),this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(function(e){return e(n.value,!1!==t.emitViewToModelChange)}),this.updateValueAndValidity(t)},fi.prototype.patchValue=function(e,t){void 0===t&&(t={}),this.setValue(e,t)},fi.prototype.reset=function(e,t){void 0===e&&(e=null),void 0===t&&(t={}),this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1},fi.prototype._updateValue=function(){},fi.prototype._anyControls=function(e){return!1},fi.prototype._allControlsDisabled=function(){return this.disabled},fi.prototype.registerOnChange=function(e){this._onChange.push(e)},fi.prototype._clearChangeFns=function(){this._onChange=[],this._onDisabledChange=[],this._onCollectionChange=function(){}},fi.prototype.registerOnDisabledChange=function(e){this._onDisabledChange.push(e)},fi.prototype._forEachChild=function(e){},fi.prototype._syncPendingControls=function(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange))&&(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0)},fi.prototype._applyFormState=function(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e},fi);function fi(e,t,n){void 0===e&&(e=null);n=pi.call(this,ai(t),ui(n,t))||this;return n._onChange=[],n._applyFormState(e),n._setUpdateStrategy(t),n.updateValueAndValidity({onlySelf:!0,emitEvent:!1}),n._initObservables(),n}var hi,gi=(F(mi,hi=dn),mi.prototype.registerControl=function(e,t){return this.controls[e]||((this.controls[e]=t).setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)},mi.prototype.addControl=function(e,t){this.registerControl(e,t),this.updateValueAndValidity(),this._onCollectionChange()},mi.prototype.removeControl=function(e){this.controls[e]&&this.controls[e]._registerOnCollectionChange(function(){}),delete this.controls[e],this.updateValueAndValidity(),this._onCollectionChange()},mi.prototype.setControl=function(e,t){this.controls[e]&&this.controls[e]._registerOnCollectionChange(function(){}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity(),this._onCollectionChange()},mi.prototype.contains=function(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled},mi.prototype.setValue=function(t,n){var r=this;void 0===n&&(n={}),this._checkAllValuesPresent(t),Object.keys(t).forEach(function(e){r._throwIfControlMissing(e),r.controls[e].setValue(t[e],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)},mi.prototype.patchValue=function(t,n){var r=this;void 0===n&&(n={}),Object.keys(t).forEach(function(e){r.controls[e]&&r.controls[e].patchValue(t[e],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)},mi.prototype.reset=function(n,r){void 0===n&&(n={}),void 0===r&&(r={}),this._forEachChild(function(e,t){e.reset(n[t],{onlySelf:!0,emitEvent:r.emitEvent})}),this.updateValueAndValidity(r),this._updatePristine(r),this._updateTouched(r)},mi.prototype.getRawValue=function(){return this._reduceChildren({},function(e,t,n){return e[n]=t instanceof di?t.value:t.getRawValue(),e})},mi.prototype._syncPendingControls=function(){var e=this._reduceChildren(!1,function(e,t){return!!t._syncPendingControls()||e});return e&&this.updateValueAndValidity({onlySelf:!0}),e},mi.prototype._throwIfControlMissing=function(e){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet.  If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[e])throw new Error("Cannot find form control with name: "+e+".")},mi.prototype._forEachChild=function(t){var n=this;Object.keys(this.controls).forEach(function(e){return t(n.controls[e],e)})},mi.prototype._setUpControls=function(){var t=this;this._forEachChild(function(e){e.setParent(t),e._registerOnCollectionChange(t._onCollectionChange)})},mi.prototype._updateValue=function(){this.value=this._reduceValue()},mi.prototype._anyControls=function(n){var r=this,i=!1;return this._forEachChild(function(e,t){i=i||r.contains(t)&&n(e)}),i},mi.prototype._reduceValue=function(){var r=this;return this._reduceChildren({},function(e,t,n){return(t.enabled||r.disabled)&&(e[n]=t.value),e})},mi.prototype._reduceChildren=function(e,n){var r=e;return this._forEachChild(function(e,t){r=n(r,e,t)}),r},mi.prototype._allControlsDisabled=function(){var t,e;try{for(var n=G(Object.keys(this.controls)),r=n.next();!r.done;r=n.next()){var i=r.value;if(this.controls[i].enabled)return!1}}catch(e){t={error:e}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}return 0<Object.keys(this.controls).length||this.disabled},mi.prototype._checkAllValuesPresent=function(n){this._forEachChild(function(e,t){if(void 0===n[t])throw new Error("Must supply a value for form control with name: '"+t+"'.")})},mi);function mi(e,t,n){n=hi.call(this,ai(t),ui(n,t))||this;return n.controls=e,n._initObservables(),n._setUpdateStrategy(t),n._setUpControls(),n.updateValueAndValidity({onlySelf:!0,emitEvent:!1}),n}var yi,vi=(F(bi,yi=dn),bi.prototype.at=function(e){return this.controls[e]},bi.prototype.push=function(e){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity(),this._onCollectionChange()},bi.prototype.insert=function(e,t){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity()},bi.prototype.removeAt=function(e){this.controls[e]&&this.controls[e]._registerOnCollectionChange(function(){}),this.controls.splice(e,1),this.updateValueAndValidity()},bi.prototype.setControl=function(e,t){this.controls[e]&&this.controls[e]._registerOnCollectionChange(function(){}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity(),this._onCollectionChange()},Object.defineProperty(bi.prototype,"length",{get:function(){return this.controls.length},enumerable:!0,configurable:!0}),bi.prototype.setValue=function(e,n){var r=this;void 0===n&&(n={}),this._checkAllValuesPresent(e),e.forEach(function(e,t){r._throwIfControlMissing(t),r.at(t).setValue(e,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)},bi.prototype.patchValue=function(e,n){var r=this;void 0===n&&(n={}),e.forEach(function(e,t){r.at(t)&&r.at(t).patchValue(e,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)},bi.prototype.reset=function(n,r){void 0===n&&(n=[]),void 0===r&&(r={}),this._forEachChild(function(e,t){e.reset(n[t],{onlySelf:!0,emitEvent:r.emitEvent})}),this.updateValueAndValidity(r),this._updatePristine(r),this._updateTouched(r)},bi.prototype.getRawValue=function(){return this.controls.map(function(e){return e instanceof di?e.value:e.getRawValue()})},bi.prototype._syncPendingControls=function(){var e=this.controls.reduce(function(e,t){return!!t._syncPendingControls()||e},!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e},bi.prototype._throwIfControlMissing=function(e){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet.  If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(e))throw new Error("Cannot find form control at index "+e)},bi.prototype._forEachChild=function(n){this.controls.forEach(function(e,t){n(e,t)})},bi.prototype._updateValue=function(){var t=this;this.value=this.controls.filter(function(e){return e.enabled||t.disabled}).map(function(e){return e.value})},bi.prototype._anyControls=function(t){return this.controls.some(function(e){return e.enabled&&t(e)})},bi.prototype._setUpControls=function(){var t=this;this._forEachChild(function(e){return t._registerControl(e)})},bi.prototype._checkAllValuesPresent=function(n){this._forEachChild(function(e,t){if(void 0===n[t])throw new Error("Must supply a value for form control at index: "+t+".")})},bi.prototype._allControlsDisabled=function(){var t,e;try{for(var n=G(this.controls),r=n.next();!r.done;r=n.next())if(r.value.enabled)return!1}catch(e){t={error:e}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}return 0<this.controls.length||this.disabled},bi.prototype._registerControl=function(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)},bi);function bi(e,t,n){n=yi.call(this,ai(t),ui(n,t))||this;return n.controls=e,n._initObservables(),n._setUpdateStrategy(t),n._setUpControls(),n.updateValueAndValidity({onlySelf:!0,emitEvent:!1}),n}var Si,pn={provide:C,useExisting:f.forwardRef(function(){return Ci})},wi=Promise.resolve(null),Ci=(F(_i,Si=C),_i.prototype.ngAfterViewInit=function(){this._setUpdateStrategy()},Object.defineProperty(_i.prototype,"formDirective",{get:function(){return this},enumerable:!0,configurable:!0}),Object.defineProperty(_i.prototype,"control",{get:function(){return this.form},enumerable:!0,configurable:!0}),Object.defineProperty(_i.prototype,"path",{get:function(){return[]},enumerable:!0,configurable:!0}),Object.defineProperty(_i.prototype,"controls",{get:function(){return this.form.controls},enumerable:!0,configurable:!0}),_i.prototype.addControl=function(t){var n=this;wi.then(function(){var e=n._findContainer(t.path);t.control=e.registerControl(t.name,t.control),Ur(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),n._directives.push(t)})},_i.prototype.getControl=function(e){return this.form.get(e.path)},_i.prototype.removeControl=function(t){var n=this;wi.then(function(){var e=n._findContainer(t.path);e&&e.removeControl(t.name),Wr(n._directives,t)})},_i.prototype.addFormGroup=function(n){var r=this;wi.then(function(){var e=r._findContainer(n.path),t=new gi({});Fr(t,n),e.registerControl(n.name,t),t.updateValueAndValidity({emitEvent:!1})})},_i.prototype.removeFormGroup=function(t){var n=this;wi.then(function(){var e=n._findContainer(t.path);e&&e.removeControl(t.name)})},_i.prototype.getFormGroup=function(e){return this.form.get(e.path)},_i.prototype.updateModel=function(e,t){var n=this;wi.then(function(){n.form.get(e.path).setValue(t)})},_i.prototype.setValue=function(e){this.control.setValue(e)},_i.prototype.onSubmit=function(e){return this.submitted=!0,Hr(this.form,this._directives),this.ngSubmit.emit(e),!1},_i.prototype.onReset=function(){this.resetForm()},_i.prototype.resetForm=function(e){void 0===e&&(e=void 0),this.form.reset(e),this.submitted=!1},_i.prototype._setUpdateStrategy=function(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)},_i.prototype._findContainer=function(e){return e.pop(),e.length?this.form.get(e):this.form},V([f.Input("ngFormOptions"),q("design:type",Object)],_i.prototype,"options",void 0),V([f.Directive({selector:"form:not([ngNoForm]):not([formGroup]),ngForm,[ngForm]",providers:[pn],host:{"(submit)":"onSubmit($event)","(reset)":"onReset()"},outputs:["ngSubmit"],exportAs:"ngForm"}),z(0,f.Optional()),z(0,f.Self()),z(0,f.Inject(Ne)),z(1,f.Optional()),z(1,f.Self()),z(1,f.Inject(Re)),q("design:paramtypes",[Array,Array])],_i));function _i(e,t){var n=Si.call(this)||this;return n.submitted=!1,n._directives=[],n.ngSubmit=new f.EventEmitter,n.form=new gi({},Vr(e),zr(t)),n}var Ei=(Ii.modelParentException=function(){throw new Error('\n      ngModel cannot be used to register form controls with a parent formGroup directive.  Try using\n      formGroup\'s partner directive "formControlName" instead.  Example:\n\n      '+Sr+"\n\n      Or, if you'd like to avoid registering this form control, indicate that it's standalone in ngModelOptions:\n\n      Example:\n\n      "+Er)},Ii.formGroupNameException=function(){throw new Error("\n      ngModel cannot be used to register form controls with a parent formGroupName or formArrayName directive.\n\n      Option 1: Use formControlName instead of ngModel (reactive strategy):\n\n      "+wr+"\n\n      Option 2:  Update ngModel's parent be ngModelGroup (template-driven strategy):\n\n      "+_r)},Ii.missingNameException=function(){throw new Error('If ngModel is used within a form tag, either the name attribute must be set or the form\n      control must be defined as \'standalone\' in ngModelOptions.\n\n      Example 1: <input [(ngModel)]="person.firstName" name="first">\n      Example 2: <input [(ngModel)]="person.firstName" [ngModelOptions]="{standalone: true}">')},Ii.modelGroupParentException=function(){throw new Error("\n      ngModelGroup cannot be used with a parent formGroup directive.\n\n      Option 1: Use formGroupName instead of ngModelGroup (reactive strategy):\n\n      "+wr+"\n\n      Option 2:  Use a regular form tag instead of the formGroup directive (template-driven strategy):\n\n      "+_r)},Ii);function Ii(){}var Ai,Pi,p={provide:C,useExisting:f.forwardRef(function(){return Oi})},Oi=(F(Ti,Ai=Jr),(Pi=Ti).prototype._checkParentType=function(){this._parent instanceof Pi||this._parent instanceof Ci||Ei.modelGroupParentException()},V([f.Input("ngModelGroup"),q("design:type",String)],Ti.prototype,"name",void 0),Pi=V([f.Directive({selector:"[ngModelGroup]",providers:[p],exportAs:"ngModelGroup"}),z(0,f.Host()),z(0,f.SkipSelf()),z(1,f.Optional()),z(1,f.Self()),z(1,f.Inject(Ne)),z(2,f.Optional()),z(2,f.Self()),z(2,f.Inject(Re)),q("design:paramtypes",[C,Array,Array])],Ti));function Ti(e,t,n){var r=Ai.call(this)||this;return r._parent=e,r._validators=t,r._asyncValidators=n,r}var ki,b={provide:fr,useExisting:f.forwardRef(function(){return Ni})},xi=Promise.resolve(null),Ni=(F(Li,ki=fr),Li.prototype.ngOnChanges=function(e){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in e&&this._updateDisabled(e),qr(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)},Li.prototype.ngOnDestroy=function(){this.formDirective&&this.formDirective.removeControl(this)},Object.defineProperty(Li.prototype,"path",{get:function(){return this._parent?Rr(this.name,this._parent):[this.name]},enumerable:!0,configurable:!0}),Object.defineProperty(Li.prototype,"formDirective",{get:function(){return this._parent?this._parent.formDirective:null},enumerable:!0,configurable:!0}),Object.defineProperty(Li.prototype,"validator",{get:function(){return Vr(this._rawValidators)},enumerable:!0,configurable:!0}),Object.defineProperty(Li.prototype,"asyncValidator",{get:function(){return zr(this._rawAsyncValidators)},enumerable:!0,configurable:!0}),Li.prototype.viewToModelUpdate=function(e){this.viewModel=e,this.update.emit(e)},Li.prototype._setUpControl=function(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0},Li.prototype._setUpdateStrategy=function(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)},Li.prototype._isStandalone=function(){return!this._parent||!(!this.options||!this.options.standalone)},Li.prototype._setUpStandalone=function(){Ur(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})},Li.prototype._checkForErrors=function(){this._isStandalone()||this._checkParentType(),this._checkName()},Li.prototype._checkParentType=function(){!(this._parent instanceof Oi)&&this._parent instanceof Jr?Ei.formGroupNameException():this._parent instanceof Oi||this._parent instanceof Ci||Ei.modelParentException()},Li.prototype._checkName=function(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()||this.name||Ei.missingNameException()},Li.prototype._updateValue=function(e){var t=this;xi.then(function(){t.control.setValue(e,{emitViewToModelChange:!1})})},Li.prototype._updateDisabled=function(e){var t=this,e=e.isDisabled.currentValue,n=""===e||e&&"false"!==e;xi.then(function(){n&&!t.control.disabled?t.control.disable():!n&&t.control.disabled&&t.control.enable()})},V([f.Input(),q("design:type",String)],Li.prototype,"name",void 0),V([f.Input("disabled"),q("design:type",Boolean)],Li.prototype,"isDisabled",void 0),V([f.Input("ngModel"),q("design:type",Object)],Li.prototype,"model",void 0),V([f.Input("ngModelOptions"),q("design:type",Object)],Li.prototype,"options",void 0),V([f.Output("ngModelChange"),q("design:type",Object)],Li.prototype,"update",void 0),V([f.Directive({selector:"[ngModel]:not([formControlName]):not([formControl])",providers:[b],exportAs:"ngModel"}),z(0,f.Optional()),z(0,f.Host()),z(1,f.Optional()),z(1,f.Self()),z(1,f.Inject(Ne)),z(2,f.Optional()),z(2,f.Self()),z(2,f.Inject(Re)),z(3,f.Optional()),z(3,f.Self()),z(3,f.Inject(ct)),q("design:paramtypes",[C,Array,Array,Array])],Li));function Li(e,t,n,r){var i=ki.call(this)||this;return i.control=new di,i._registered=!1,i.update=new f.EventEmitter,i._parent=e,i._rawValidators=t||[],i._rawAsyncValidators=n||[],i.valueAccessor=Gr(i,r),i}var Mi,Ri,Ui=new f.InjectionToken("NgModelWithFormControlWarning"),at={provide:fr,useExisting:f.forwardRef(function(){return Di})},Di=(F(Fi,Mi=fr),Ri=Fi,Object.defineProperty(Fi.prototype,"isDisabled",{set:function(e){Ir.disabledAttrWarning()},enumerable:!0,configurable:!0}),Fi.prototype.ngOnChanges=function(e){this._isControlChanged(e)&&(Ur(this.form,this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this.form.updateValueAndValidity({emitEvent:!1})),qr(e,this.viewModel)&&($r("formControl",Ri,this,this._ngModelWarningConfig),this.form.setValue(this.model),this.viewModel=this.model)},Object.defineProperty(Fi.prototype,"path",{get:function(){return[]},enumerable:!0,configurable:!0}),Object.defineProperty(Fi.prototype,"validator",{get:function(){return Vr(this._rawValidators)},enumerable:!0,configurable:!0}),Object.defineProperty(Fi.prototype,"asyncValidator",{get:function(){return zr(this._rawAsyncValidators)},enumerable:!0,configurable:!0}),Object.defineProperty(Fi.prototype,"control",{get:function(){return this.form},enumerable:!0,configurable:!0}),Fi.prototype.viewToModelUpdate=function(e){this.viewModel=e,this.update.emit(e)},Fi.prototype._isControlChanged=function(e){return e.hasOwnProperty("form")},Fi._ngModelWarningSentOnce=!1,V([f.Input("formControl"),q("design:type",di)],Fi.prototype,"form",void 0),V([f.Input("disabled"),q("design:type",Boolean),q("design:paramtypes",[Boolean])],Fi.prototype,"isDisabled",null),V([f.Input("ngModel"),q("design:type",Object)],Fi.prototype,"model",void 0),V([f.Output("ngModelChange"),q("design:type",Object)],Fi.prototype,"update",void 0),Ri=V([f.Directive({selector:"[formControl]",providers:[at],exportAs:"ngForm"}),z(0,f.Optional()),z(0,f.Self()),z(0,f.Inject(Ne)),z(1,f.Optional()),z(1,f.Self()),z(1,f.Inject(Re)),z(2,f.Optional()),z(2,f.Self()),z(2,f.Inject(ct)),z(3,f.Optional()),z(3,f.Inject(Ui)),q("design:paramtypes",[Array,Array,Array,Object])],Fi));function Fi(e,t,n,r){var i=Mi.call(this)||this;return i._ngModelWarningConfig=r,i.update=new f.EventEmitter,i._ngModelWarningSent=!1,i._rawValidators=e||[],i._rawAsyncValidators=t||[],i.valueAccessor=Gr(i,n),i}var ji,cn={provide:C,useExisting:f.forwardRef(function(){return Bi})},Bi=(F(Vi,ji=C),Vi.prototype.ngOnChanges=function(e){this._checkFormPresent(),e.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations())},Object.defineProperty(Vi.prototype,"formDirective",{get:function(){return this},enumerable:!0,configurable:!0}),Object.defineProperty(Vi.prototype,"control",{get:function(){return this.form},enumerable:!0,configurable:!0}),Object.defineProperty(Vi.prototype,"path",{get:function(){return[]},enumerable:!0,configurable:!0}),Vi.prototype.addControl=function(e){var t=this.form.get(e.path);return Ur(t,e),t.updateValueAndValidity({emitEvent:!1}),this.directives.push(e),t},Vi.prototype.getControl=function(e){return this.form.get(e.path)},Vi.prototype.removeControl=function(e){Wr(this.directives,e)},Vi.prototype.addFormGroup=function(e){var t=this.form.get(e.path);Fr(t,e),t.updateValueAndValidity({emitEvent:!1})},Vi.prototype.removeFormGroup=function(e){},Vi.prototype.getFormGroup=function(e){return this.form.get(e.path)},Vi.prototype.addFormArray=function(e){var t=this.form.get(e.path);Fr(t,e),t.updateValueAndValidity({emitEvent:!1})},Vi.prototype.removeFormArray=function(e){},Vi.prototype.getFormArray=function(e){return this.form.get(e.path)},Vi.prototype.updateModel=function(e,t){this.form.get(e.path).setValue(t)},Vi.prototype.onSubmit=function(e){return this.submitted=!0,Hr(this.form,this.directives),this.ngSubmit.emit(e),!1},Vi.prototype.onReset=function(){this.resetForm()},Vi.prototype.resetForm=function(e){void 0===e&&(e=void 0),this.form.reset(e),this.submitted=!1},Vi.prototype._updateDomValue=function(){var i=this;this.directives.forEach(function(e){var t,n,r=i.form.get(e.path);e.control!==r&&(t=e.control,(n=e).valueAccessor.registerOnChange(function(){return jr(n)}),n.valueAccessor.registerOnTouched(function(){return jr(n)}),n._rawValidators.forEach(function(e){e.registerOnValidatorChange&&e.registerOnValidatorChange(null)}),n._rawAsyncValidators.forEach(function(e){e.registerOnValidatorChange&&e.registerOnValidatorChange(null)}),t&&t._clearChangeFns(),r&&Ur(r,e),e.control=r)}),this.form._updateTreeValidity({emitEvent:!1})},Vi.prototype._updateRegistrations=function(){var e=this;this.form._registerOnCollectionChange(function(){return e._updateDomValue()}),this._oldForm&&this._oldForm._registerOnCollectionChange(function(){}),this._oldForm=this.form},Vi.prototype._updateValidators=function(){var e=Vr(this._validators);this.form.validator=Qn.compose([this.form.validator,e]);e=zr(this._asyncValidators);this.form.asyncValidator=Qn.composeAsync([this.form.asyncValidator,e])},Vi.prototype._checkFormPresent=function(){this.form||Ir.missingFormException()},V([f.Input("formGroup"),q("design:type",gi)],Vi.prototype,"form",void 0),V([f.Output(),q("design:type",Object)],Vi.prototype,"ngSubmit",void 0),V([f.Directive({selector:"[formGroup]",providers:[cn],host:{"(submit)":"onSubmit($event)","(reset)":"onReset()"},exportAs:"ngForm"}),z(0,f.Optional()),z(0,f.Self()),z(0,f.Inject(Ne)),z(1,f.Optional()),z(1,f.Self()),z(1,f.Inject(Re)),q("design:paramtypes",[Array,Array])],Vi));function Vi(e,t){var n=ji.call(this)||this;return n._validators=e,n._asyncValidators=t,n.submitted=!1,n.directives=[],n.form=null,n.ngSubmit=new f.EventEmitter,n}var zi,dn={provide:C,useExisting:f.forwardRef(function(){return qi})},qi=(F(Ki,zi=Jr),Ki.prototype._checkParentType=function(){$i(this._parent)&&Ir.groupParentException()},V([f.Input("formGroupName"),q("design:type",String)],Ki.prototype,"name",void 0),V([f.Directive({selector:"[formGroupName]",providers:[dn]}),z(0,f.Optional()),z(0,f.Host()),z(0,f.SkipSelf()),z(1,f.Optional()),z(1,f.Self()),z(1,f.Inject(Ne)),z(2,f.Optional()),z(2,f.Self()),z(2,f.Inject(Re)),q("design:paramtypes",[C,Array,Array])],Ki));function Ki(e,t,n){var r=zi.call(this)||this;return r._parent=e,r._validators=t,r._asyncValidators=n,r}var Hi,pn={provide:C,useExisting:f.forwardRef(function(){return Gi})},Gi=(F(Wi,Hi=C),Wi.prototype.ngOnInit=function(){this._checkParentType(),this.formDirective.addFormArray(this)},Wi.prototype.ngOnDestroy=function(){this.formDirective&&this.formDirective.removeFormArray(this)},Object.defineProperty(Wi.prototype,"control",{get:function(){return this.formDirective.getFormArray(this)},enumerable:!0,configurable:!0}),Object.defineProperty(Wi.prototype,"formDirective",{get:function(){return this._parent?this._parent.formDirective:null},enumerable:!0,configurable:!0}),Object.defineProperty(Wi.prototype,"path",{get:function(){return Rr(this.name,this._parent)},enumerable:!0,configurable:!0}),Object.defineProperty(Wi.prototype,"validator",{get:function(){return Vr(this._validators)},enumerable:!0,configurable:!0}),Object.defineProperty(Wi.prototype,"asyncValidator",{get:function(){return zr(this._asyncValidators)},enumerable:!0,configurable:!0}),Wi.prototype._checkParentType=function(){$i(this._parent)&&Ir.arrayParentException()},V([f.Input("formArrayName"),q("design:type",String)],Wi.prototype,"name",void 0),V([f.Directive({selector:"[formArrayName]",providers:[pn]}),z(0,f.Optional()),z(0,f.Host()),z(0,f.SkipSelf()),z(1,f.Optional()),z(1,f.Self()),z(1,f.Inject(Ne)),z(2,f.Optional()),z(2,f.Self()),z(2,f.Inject(Re)),q("design:paramtypes",[C,Array,Array])],Wi));function Wi(e,t,n){var r=Hi.call(this)||this;return r._parent=e,r._validators=t,r._asyncValidators=n,r}function $i(e){return!(e instanceof qi||e instanceof Bi||e instanceof Gi)}var Yi,Ji,p={provide:fr,useExisting:f.forwardRef(function(){return Zi})},Zi=(F(Qi,Yi=fr),Ji=Qi,Object.defineProperty(Qi.prototype,"isDisabled",{set:function(e){Ir.disabledAttrWarning()},enumerable:!0,configurable:!0}),Qi.prototype.ngOnChanges=function(e){this._added||this._setUpControl(),qr(e,this.viewModel)&&($r("formControlName",Ji,this,this._ngModelWarningConfig),this.viewModel=this.model,this.formDirective.updateModel(this,this.model))},Qi.prototype.ngOnDestroy=function(){this.formDirective&&this.formDirective.removeControl(this)},Qi.prototype.viewToModelUpdate=function(e){this.viewModel=e,this.update.emit(e)},Object.defineProperty(Qi.prototype,"path",{get:function(){return Rr(this.name,this._parent)},enumerable:!0,configurable:!0}),Object.defineProperty(Qi.prototype,"formDirective",{get:function(){return this._parent?this._parent.formDirective:null},enumerable:!0,configurable:!0}),Object.defineProperty(Qi.prototype,"validator",{get:function(){return Vr(this._rawValidators)},enumerable:!0,configurable:!0}),Object.defineProperty(Qi.prototype,"asyncValidator",{get:function(){return zr(this._rawAsyncValidators)},enumerable:!0,configurable:!0}),Qi.prototype._checkParentType=function(){!(this._parent instanceof qi)&&this._parent instanceof Jr?Ir.ngModelGroupException():this._parent instanceof qi||this._parent instanceof Bi||this._parent instanceof Gi||Ir.controlParentException()},Qi.prototype._setUpControl=function(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0},Qi._ngModelWarningSentOnce=!1,V([f.Input("formControlName"),q("design:type",String)],Qi.prototype,"name",void 0),V([f.Input("disabled"),q("design:type",Boolean),q("design:paramtypes",[Boolean])],Qi.prototype,"isDisabled",null),V([f.Input("ngModel"),q("design:type",Object)],Qi.prototype,"model",void 0),V([f.Output("ngModelChange"),q("design:type",Object)],Qi.prototype,"update",void 0),Ji=V([f.Directive({selector:"[formControlName]",providers:[p]}),z(0,f.Optional()),z(0,f.Host()),z(0,f.SkipSelf()),z(1,f.Optional()),z(1,f.Self()),z(1,f.Inject(Ne)),z(2,f.Optional()),z(2,f.Self()),z(2,f.Inject(Re)),z(3,f.Optional()),z(3,f.Self()),z(3,f.Inject(ct)),z(4,f.Optional()),z(4,f.Inject(Ui)),q("design:paramtypes",[C,Array,Array,Array,Object])],Qi));function Qi(e,t,n,r,i){var o=Yi.call(this)||this;return o._ngModelWarningConfig=i,o._added=!1,o.update=new f.EventEmitter,o._ngModelWarningSent=!1,o._parent=e,o._rawValidators=t||[],o._rawAsyncValidators=n||[],o.valueAccessor=Gr(o,r),o}var b={provide:Ne,useExisting:f.forwardRef(function(){return Xi}),multi:!0},at={provide:Ne,useExisting:f.forwardRef(function(){return no}),multi:!0},Xi=(Object.defineProperty(eo.prototype,"required",{get:function(){return this._required},set:function(e){this._required=null!=e&&!1!==e&&""+e!="false",this._onChange&&this._onChange()},enumerable:!0,configurable:!0}),eo.prototype.validate=function(e){return this.required?Qn.required(e):null},eo.prototype.registerOnValidatorChange=function(e){this._onChange=e},V([f.Input(),q("design:type",Object),q("design:paramtypes",[Object])],eo.prototype,"required",null),V([f.Directive({selector:":not([type=checkbox])[required][formControlName],:not([type=checkbox])[required][formControl],:not([type=checkbox])[required][ngModel]",providers:[b],host:{"[attr.required]":'required ? "" : null'}})],eo));function eo(){}var to,no=(F(ro,to=Xi),ro.prototype.validate=function(e){return this.required?Qn.requiredTrue(e):null},V([f.Directive({selector:"input[type=checkbox][required][formControlName],input[type=checkbox][required][formControl],input[type=checkbox][required][ngModel]",providers:[at],host:{"[attr.required]":'required ? "" : null'}})],ro));function ro(){return null!==to&&to.apply(this,arguments)||this}var cn={provide:Ne,useExisting:f.forwardRef(function(){return io}),multi:!0},io=(Object.defineProperty(oo.prototype,"email",{set:function(e){this._enabled=""===e||!0===e||"true"===e,this._onChange&&this._onChange()},enumerable:!0,configurable:!0}),oo.prototype.validate=function(e){return this._enabled?Qn.email(e):null},oo.prototype.registerOnValidatorChange=function(e){this._onChange=e},V([f.Input(),q("design:type",Object),q("design:paramtypes",[Object])],oo.prototype,"email",null),V([f.Directive({selector:"[email][formControlName],[email][formControl],[email][ngModel]",providers:[cn]})],oo));function oo(){}var dn={provide:Ne,useExisting:f.forwardRef(function(){return so}),multi:!0},so=(ao.prototype.ngOnChanges=function(e){"minlength"in e&&(this._createValidator(),this._onChange&&this._onChange())},ao.prototype.validate=function(e){return null==this.minlength?null:this._validator(e)},ao.prototype.registerOnValidatorChange=function(e){this._onChange=e},ao.prototype._createValidator=function(){this._validator=Qn.minLength(parseInt(this.minlength,10))},V([f.Input(),q("design:type",String)],ao.prototype,"minlength",void 0),V([f.Directive({selector:"[minlength][formControlName],[minlength][formControl],[minlength][ngModel]",providers:[dn],host:{"[attr.minlength]":"minlength ? minlength : null"}})],ao));function ao(){}var pn={provide:Ne,useExisting:f.forwardRef(function(){return uo}),multi:!0},uo=(co.prototype.ngOnChanges=function(e){"maxlength"in e&&(this._createValidator(),this._onChange&&this._onChange())},co.prototype.validate=function(e){return null!=this.maxlength?this._validator(e):null},co.prototype.registerOnValidatorChange=function(e){this._onChange=e},co.prototype._createValidator=function(){this._validator=Qn.maxLength(parseInt(this.maxlength,10))},V([f.Input(),q("design:type",String)],co.prototype,"maxlength",void 0),V([f.Directive({selector:"[maxlength][formControlName],[maxlength][formControl],[maxlength][ngModel]",providers:[pn],host:{"[attr.maxlength]":"maxlength ? maxlength : null"}})],co));function co(){}var p={provide:Ne,useExisting:f.forwardRef(function(){return lo}),multi:!0},lo=(po.prototype.ngOnChanges=function(e){"pattern"in e&&(this._createValidator(),this._onChange&&this._onChange())},po.prototype.validate=function(e){return this._validator(e)},po.prototype.registerOnValidatorChange=function(e){this._onChange=e},po.prototype._createValidator=function(){this._validator=Qn.pattern(this.pattern)},V([f.Input(),q("design:type",Object)],po.prototype,"pattern",void 0),V([f.Directive({selector:"[pattern][formControlName],[pattern][formControl],[pattern][ngModel]",providers:[p],host:{"[attr.pattern]":"pattern ? pattern : null"}})],po));function po(){}fo.prototype.group=function(e,t){void 0===t&&(t=null);var n=this._reduceControls(e),e=null!=t?t.validator:null,t=null!=t?t.asyncValidator:null;return new gi(n,e,t)},fo.prototype.control=function(e,t,n){return new di(e,t,n)},fo.prototype.array=function(e,t,n){var r=this,e=e.map(function(e){return r._createControl(e)});return new vi(e,t,n)},fo.prototype._reduceControls=function(t){var n=this,r={};return Object.keys(t).forEach(function(e){r[e]=n._createControl(t[e])}),r},fo.prototype._createControl=function(e){if(e instanceof di||e instanceof gi||e instanceof vi)return e;if(Array.isArray(e)){var t=e[0],n=1<e.length?e[1]:null,r=2<e.length?e[2]:null;return this.control(t,n,r)}return this.control(e)},Re=V([f.Injectable()],fo);function fo(){}new f.Version("6.1.10");function ho(){}ct=[V([f.Directive({selector:"form:not([ngNoForm]):not([ngNativeValidate])",host:{novalidate:""}})],ho),Ye,jt,or,cr,vr,rr,Or,Nr,mr,ln,S,Xi,so,uo,lo,no,io],C=[Ni,Oi,Ci],b=[Di,Bi,Zi,qi,Gi],at=V([f.NgModule({declarations:ct,exports:ct})],go);function go(){}cn=V([f.NgModule({declarations:C,providers:[fn],exports:[at,C]})],mo);function mo(){}var yo;(yo=vo).withConfig=function(e){return{ngModule:yo,providers:[{provide:Ui,useValue:e.warnOnNgModelWithFormControl}]}},yo=V([f.NgModule({declarations:[b],providers:[Re,fn],exports:[at,b]})],vo);function vo(){}bo.decorators=[{type:f.Directive,args:[{selector:"[component-host]"}]}],bo.ctorParameters=function(){return[{type:f.ViewContainerRef}]},dn=bo;function bo(e){this.viewContainerRef=e}var So=function(e,t){this.component=e,this.data=t},wo=new E.Logger("AuthDecorator");function Co(e,t){var n,r,i,o,s,a,u,c,l,p,d,f,h,g,m;n=e,t.currentAuthenticatedUser().then(function(e){wo.debug("has authenticated user",e),n.next({state:"signedIn",user:e})}).catch(function(e){wo.debug("no authenticated user",e),n.next({state:"signedOut",user:null})}),r=e,i=E.Amplify.configure(null),y.has(i,"Auth.oauth")&&E.Hub.listen("auth",{onHubCapsule:function(e){var t=e.channel,e=e.payload;"auth"===t&&(t=e.data.username,wo.debug("authentication oauth event",e),r.next({state:e.event,user:{username:t}}))}},"angularAuthListener"),o=e,a=(s=t).signIn,s.signIn=function(e,t){return a.call(s,e,t).then(function(e){return wo.debug("signIn success"),e.challengeName?(wo.debug("signIn challenge: "+e.challengeName),"NEW_PASSWORD_REQUIRED"===e.challengeName?o.next({state:"requireNewPassword",user:e}):"MFA_SETUP"===e.challengeName?o.next({state:"setupMFA",user:e}):"SMS_MFA"===e.challengeName||"SOFTWARE_TOKEN_MFA"===e.challengeName?o.next({state:"confirmSignIn",user:e}):wo.debug("warning: unhandled challengeName "+e.challengeName)):o.next({state:"signedIn",user:e}),e}).catch(function(e){throw wo.debug("signIn error",e),e})},u=e,l=(c=t).signOut,c.signOut=function(e){return l.call(c,e).then(function(e){return wo.debug("signOut success"),u.next({state:"signedOut",user:null}),e}).catch(function(e){throw wo.debug("signOut error",e),e})},p=e,f=(d=t).signUp,d.signUp=function(t,e,n,r){return f.call(d,t,e,n,r).then(function(e){return wo.debug("signUp success"),p.next({state:"confirmSignUp",user:{username:t}}),e}).catch(function(e){throw wo.debug("signUp error",e),e})},h=e,m=(g=t).confirmSignUp,g.confirmSignUp=function(t,e){return m.call(g,t,e).then(function(e){return wo.debug("confirmSignUp success"),h.next({state:"signIn",user:{username:t}}),e}).catch(function(e){throw wo.debug("confirmSignUp error",e),e})}}var _o=function(e,t){return(_o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function Eo(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}_o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var Io=function(){return(Io=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function Ao(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{o(u.next(e))}catch(e){t(e)}}function i(e){try{o(u.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,i)}o((u=u.apply(e,s||[])).next())})}function Po(n,r){var i,o,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,o&&(s=2&t[0]?o.return:t[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,t[1])).done)return s;switch(o=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,o=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],o=0}finally{i=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}}function Oo(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function To(e){var t;return j(j({},e),{tls:null===(t=e.tls)||void 0===t||t,endpoint:e.endpoint?xo(e):function(){return No(e)},isCustomEndpoint:!!e.endpoint})}function ko(e){if(!e.region)throw new Error("Region is missing");return j(j({},e),{region:Lo(e.region)})}var pn="@aws-sdk/client-pinpoint",Ne="1.0.0-rc.4",xo=function(e){var t=e.endpoint,e=e.urlParser;if("string"==typeof t){var n=Promise.resolve(e(t));return function(){return n}}if("object"!=typeof t)return t;var r=Promise.resolve(t);return function(){return r}},No=function(r){return K(void 0,void 0,void 0,function(){var t,n;return H(this,function(e){switch(e.label){case 0:return t=r.tls,t=void 0===t||t,[4,r.region()];case 1:if(n=e.sent(),!new RegExp(/^([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9-]{0,61}[a-zA-Z0-9])$/).test(n))throw new Error("Invalid region in client config");return[4,r.regionInfoProvider(n)];case 2:if(!(n=(null!==(n=e.sent())&&void 0!==n?n:{}).hostname))throw new Error("Cannot resolve hostname from client config");return[2,r.urlParser((t?"https:":"http:")+"//"+n)]}})})},p={environmentVariableSelector:function(e){return e.AWS_REGION},configFileSelector:function(e){return e.region},default:function(){throw new Error("Region is missing")}},Ye={preferredFile:"credentials"},Lo=function(e){if("string"!=typeof e)return e;var t=Promise.resolve(e);return function(){return t}},jt="undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{};function Mo(){throw new Error("setTimeout has not been defined")}function Ro(){throw new Error("clearTimeout has not been defined")}var Uo=Mo,Do=Ro;function Fo(t){if(Uo===setTimeout)return setTimeout(t,0);if((Uo===Mo||!Uo)&&setTimeout)return Uo=setTimeout,setTimeout(t,0);try{return Uo(t,0)}catch(e){try{return Uo.call(null,t,0)}catch(e){return Uo.call(this,t,0)}}}"function"==typeof jt.setTimeout&&(Uo=setTimeout),"function"==typeof jt.clearTimeout&&(Do=clearTimeout);var jo,Bo=[],Vo=!1,zo=-1;function qo(){Vo&&jo&&(Vo=!1,jo.length?Bo=jo.concat(Bo):zo=-1,Bo.length&&Ko())}function Ko(){if(!Vo){var e=Fo(qo);Vo=!0;for(var t=Bo.length;t;){for(jo=Bo,Bo=[];++zo<t;)jo&&jo[zo].run();zo=-1,t=Bo.length}jo=null,Vo=!1,function(t){if(Do===clearTimeout)return clearTimeout(t);if((Do===Ro||!Do)&&clearTimeout)return Do=clearTimeout,clearTimeout(t);try{Do(t)}catch(e){try{return Do.call(null,t)}catch(e){return Do.call(this,t)}}}(e)}}function Ho(e,t){this.fun=e,this.array=t}Ho.prototype.run=function(){this.fun.apply(null,this.array)};function Go(){}ln=Go,S=Go,ct=Go,C=Go,Re=Go,fn=Go,at=Go;var Wo=jt.performance||{},$o=Wo.now||Wo.mozNow||Wo.msNow||Wo.oNow||Wo.webkitNow||function(){return(new Date).getTime()};var Yo=new Date;var Jo,Zo={nextTick:function(e){var t=new Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];Bo.push(new Ho(e,t)),1!==Bo.length||Vo||Fo(Ko)},title:"browser",browser:!0,env:{},argv:[],version:"",versions:{},on:ln,addListener:S,once:ct,off:C,removeListener:Re,removeAllListeners:fn,emit:at,binding:function(e){throw new Error("process.binding is not supported")},cwd:function(){return"/"},chdir:function(e){throw new Error("process.chdir is not supported")},umask:function(){return 0},hrtime:function(e){var t=.001*$o.call(Wo),n=Math.floor(t),t=Math.floor(t%1*1e9);return e&&(n-=e[0],(t-=e[1])<0&&(n--,t+=1e9)),[n,t]},platform:"browser",release:{},config:{},uptime:function(){return(new Date-Yo)/1e3}},Qo=(F(Xo,Jo=Error),Xo);function Xo(e,t){void 0===t&&(t=!0);e=Jo.call(this,e)||this;return e.tryNextLink=t,e}function es(){for(var o=[],e=0;e<arguments.length;e++)o[e]=arguments[e];return function(){var t,e,n=Promise.reject(new Qo("No providers in chain"));try{for(var r=G(o),i=r.next();!i.done;i=r.next())!function(t){n=n.catch(function(e){if(null!=e&&e.tryNextLink)return t();throw e})}(i.value)}catch(e){t={error:e}}finally{try{i&&!i.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}return n}}function ts(n,r,i){var o,s;if(void 0===r)return function(){return s||(o=n(),s=!0),o};var a=!1;return function(){return K(void 0,void 0,void 0,function(){var t;return H(this,function(e){switch(e.label){case 0:return s||(o=n(),s=!0),a?[2,o]:[4,o];case 1:return t=e.sent(),i&&!i(t)?(a=!0,[2,t]):r(t)?[2,o=n()]:[2,t]}})})}}var ns="AWS_ACCESS_KEY_ID",rs="AWS_SECRET_ACCESS_KEY",is="AWS_SESSION_TOKEN",os="AWS_CREDENTIAL_EXPIRATION";function ss(t){return new Promise(function(r,i){var e=g.request(j({method:"GET"},t));e.on("error",function(e){i(Object.assign(new Qo("Unable to connect to instance metadata service"),e))}),e.on("timeout",function(){i(new Error("TimeoutError"))}),e.on("response",function(e){var t=e.statusCode,t=void 0===t?400:t;(t<200||300<=t)&&i(Object.assign(new Qo("Error response received from instance metadata service"),{statusCode:t}));var n=[];e.on("data",function(e){n.push(e)}),e.on("end",function(){r(d.Buffer.concat(n))})}),e.end()})}var as=function(e){return Boolean(e)&&"object"==typeof e&&"string"==typeof e.AccessKeyId&&"string"==typeof e.SecretAccessKey&&"string"==typeof e.Token&&"string"==typeof e.Expiration},us=function(e){return{accessKeyId:e.AccessKeyId,secretAccessKey:e.SecretAccessKey,sessionToken:e.Token,expiration:new Date(e.Expiration)}},cs=function(e){var t=e.maxRetries,t=void 0===t?0:t,e=e.timeout;return{maxRetries:t,timeout:void 0===e?1e3:e}},ls=function(e,t){for(var n=e(),r=0;r<t;r++)n=n.catch(e);return n},ps="AWS_CONTAINER_CREDENTIALS_FULL_URI",ds="AWS_CONTAINER_CREDENTIALS_RELATIVE_URI",fs="AWS_CONTAINER_AUTHORIZATION_TOKEN";function hs(e){var t=this,e=cs(e=void 0===e?{}:e),i=e.timeout,n=e.maxRetries;return function(){return function(){if(Zo.env[ds])return Promise.resolve({hostname:gs,path:Zo.env[ds]});if(Zo.env[ps]){var e=h.parse(Zo.env[ps]);return e.hostname&&e.hostname in ms?e.protocol&&e.protocol in ys?Promise.resolve(j(j({},e),{port:e.port?parseInt(e.port,10):void 0})):Promise.reject(new Qo(e.protocol+" is not a valid container metadata service protocol",!1)):Promise.reject(new Qo(e.hostname+" is not a valid container metadata service hostname",!1))}return Promise.reject(new Qo("The container metadata credential provider cannot be used unless the "+ds+" or "+ps+" environment variable is set",!1))}().then(function(r){return ls(function(){return K(t,void 0,void 0,function(){var t,n;return H(this,function(e){switch(e.label){case 0:return n=(t=JSON).parse,[4,function(e,t){{var n;Zo.env[fs]&&(n=t.headers,(n=void 0===n?{}:n).Authorization=Zo.env[fs],t.headers=n)}return ss(j(j({},t),{timeout:e})).then(function(e){return e.toString()})}(i,r)];case 1:if(t=n.apply(t,[e.sent()]),!as(t))throw new Qo("Invalid response received from instance metadata service.");return[2,us(t)]}})})},n)})}}var gs="169.254.170.2",ms={localhost:!0,"127.0.0.1":!0},ys={"http:":!0,"https:":!0};var vs="169.254.169.254",bs="/latest/meta-data/iam/security-credentials/",Ss=function(e){function r(t,i){return K(void 0,void 0,void 0,function(){var r;return H(this,function(e){switch(e.label){case 0:return[4,ls(function(){return K(void 0,void 0,void 0,function(){var t,n;return H(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,Cs(i)];case 1:return t=e.sent(),[3,3];case 2:throw 401===(n=e.sent()).statusCode&&(o=!1),n;case 3:return[2,t]}})})},t)];case 1:return r=e.sent().trim(),[2,ls(function(){return K(void 0,void 0,void 0,function(){var t,n;return H(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,_s(r,i)];case 1:return t=e.sent(),[3,3];case 2:throw 401===(n=e.sent()).statusCode&&(o=!1),n;case 3:return[2,t]}})})},t)]}})})}var o=!1,e=cs(e=void 0===e?{}:e),i=e.timeout,s=e.maxRetries;return function(){return K(void 0,void 0,void 0,function(){var t,n;return H(this,function(e){switch(e.label){case 0:return o?[2,r(s,{timeout:i})]:[3,1];case 1:t=void 0,e.label=2;case 2:return e.trys.push([2,4,,5]),[4,ws({timeout:i})];case 3:return t=e.sent().toString(),[3,5];case 4:if(400===(null==(n=e.sent())?void 0:n.statusCode))throw Object.assign(n,{message:"EC2 Metadata token request returned error"});return"TimeoutError"!==n.message&&![403,404,405].includes(n.statusCode)||(o=!0),[2,r(s,{timeout:i})];case 5:return[2,r(s,{timeout:i,headers:{"x-aws-ec2-metadata-token":t}})]}})})}},ws=function(t){return K(void 0,void 0,void 0,function(){return H(this,function(e){return[2,ss(j(j({},t),{host:vs,path:"/latest/api/token",method:"PUT",headers:{"x-aws-ec2-metadata-token-ttl-seconds":"21600"}}))]})})},Cs=function(t){return K(void 0,void 0,void 0,function(){return H(this,function(e){switch(e.label){case 0:return[4,ss(j(j({},t),{host:vs,path:bs}))];case 1:return[2,e.sent().toString()]}})})},_s=function(r,i){return K(void 0,void 0,void 0,function(){var t,n;return H(this,function(e){switch(e.label){case 0:return n=(t=JSON).parse,[4,ss(j(j({},i),{host:vs,path:bs+r}))];case 1:if(t=n.apply(t,[e.sent().toString()]),!as(t))throw new Qo("Invalid response received from instance metadata service.");return[2,us(t)]}})})},Es="AWS_SHARED_CREDENTIALS_FILE",Is="AWS_CONFIG_FILE",As=function(){return{}};function Ps(e){var t=(e=void 0===e?{}:e).filepath,t=void 0===t?Zo.env[Es]||o.join(Ns(),".aws","credentials"):t,e=e.configFilepath,e=void 0===e?Zo.env[Is]||o.join(Ns(),".aws","config"):e;return Promise.all([xs(e).then(ks).then(Ts).catch(As),xs(t).then(ks).catch(As)]).then(function(e){e=W(e,2);return{configFile:e[0],credentialsFile:e[1]}})}var Os=/^profile\s(["'])?([^\1]+)\1$/;function Ts(e){var t,n,r={};try{for(var i=G(Object.keys(e)),o=i.next();!o.done;o=i.next()){var s=o.value,a=void 0;"default"===s?r.default=e.default:(a=Os.exec(s))&&((a=W(a,3))[0],a[1],(a=a[2])&&(r[a]=e[s]))}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return r}function ks(e){var t,n,r,i={};try{for(var o=G(e.split(/\r?\n/)),s=o.next();!s.done;s=o.next()){var a=s.value,u=(a=a.split(/(^|\s)[;#]/)[0]).match(/^\s*\[([^\[\]]+)]\s*$/);u?r=u[1]:!r||(a=a.match(/^\s*(.+?)\s*=\s*(.+?)\s*$/))&&(i[r]=i[r]||{},i[r][a[1]]=a[2])}}catch(e){t={error:e}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return i}function xs(e){return new Promise(function(n,r){a.readFile(e,"utf8",function(e,t){e?r(e):n(t)})})}function Ns(){var e=Zo.env,t=e.HOME,n=e.USERPROFILE,r=e.HOMEPATH,e=e.HOMEDRIVE,e=void 0===e?"C:"+o.sep:e;return t||n||(r?""+e+r:i.homedir())}var Ls="default",Ms="AWS_PROFILE";function Rs(e){return Boolean(e)&&"object"==typeof e&&"string"==typeof e.aws_access_key_id&&"string"==typeof e.aws_secret_access_key&&-1<["undefined","string"].indexOf(typeof e.aws_session_token)}function Us(e){return Boolean(e)&&"object"==typeof e&&"string"==typeof e.role_arn&&"string"==typeof e.source_profile&&-1<["undefined","string"].indexOf(typeof e.role_session_name)&&-1<["undefined","string"].indexOf(typeof e.external_id)&&-1<["undefined","string"].indexOf(typeof e.mfa_serial)}function Ds(t){return void 0===t&&(t={}),function(){return js(t).then(function(e){return function l(p,d,f,h){void 0===h&&(h={});return K(this,void 0,void 0,function(){var t,n,r,i,o,s,a,u,c;return H(this,function(e){switch(e.label){case 0:if(t=d[p],0<Object.keys(h).length&&Rs(t))return[2,Bs(t)];if(!Us(t))return[3,4];if(s=t.external_id,n=t.mfa_serial,r=t.role_arn,c=t.role_session_name,o=void 0===c?"aws-sdk-js-"+Date.now():c,i=t.source_profile,!f.roleAssumer)throw new Qo("Profile "+p+" requires a role to be assumed, but no role assumption callback was provided.",!1);if(i in h)throw new Qo("Detected a cycle attempting to resolve credentials for profile "+Fs(f)+". Profiles visited: "+Object.keys(h).join(", "),!1);if(c=l(i,d,f,j(j({},h),((c={})[i]=!0,c))),o={RoleArn:r,RoleSessionName:o,ExternalId:s},!n)return[3,2];if(!f.mfaCodeProvider)throw new Qo("Profile "+p+" requires multi-factor authentication, but no MFA code callback was provided.",!1);return o.SerialNumber=n,s=o,[4,f.mfaCodeProvider(n)];case 1:s.TokenCode=e.sent(),e.label=2;case 2:return u=(a=f).roleAssumer,[4,c];case 3:return[2,u.apply(a,[e.sent(),o])];case 4:if(Rs(t))return[2,Bs(t)];throw new Qo("Profile "+p+" could not be found or parsed in shared credentials file.")}})})}(Fs(t),e,t)})}}function Fs(e){return e.profile||Zo.env[Ms]||Ls}function js(e){var t=e.loadedConfig;return(void 0===t?Ps(e):t).then(function(e){var t=e.configFile,e=e.credentialsFile;return j(j({},t),e)})}function Bs(e){return Promise.resolve({accessKeyId:e.aws_access_key_id,secretAccessKey:e.aws_secret_access_key,sessionToken:e.aws_session_token})}function Vs(t){return void 0===t&&(t={}),function(){return js(t).then(function(e){return function(u,r){return K(this,void 0,void 0,function(){var n;return H(this,function(e){switch(e.label){case 0:return(n=r[u],r[u])?void 0===(n=n.credential_process)?[3,2]:[4,(t=n,new Promise(function(n,r){s.exec(t,function(e,t){e?r(e):n(t.trim())})}).then(function(e){var t;try{t=JSON.parse(e)}catch(e){throw Error("Profile "+u+" credential_process returned invalid JSON.")}var n=t.Version,r=t.AccessKeyId,i=t.SecretAccessKey,o=t.SessionToken,s=t.Expiration;if(1!==n)throw Error("Profile "+u+" credential_process did not return Version 1.");if(void 0===r||void 0===i)throw Error("Profile "+u+" credential_process returned invalid credentials.");if(s){var a=new Date;if(new Date(s)<a)throw Error("Profile "+u+" credential_process returned expired credentials.");a=Math.floor(new Date(s).valueOf()/1e3)}return{accessKeyId:r,secretAccessKey:i,sessionToken:o,expirationUnix:a}}).catch(function(e){throw new Qo(e.message)}))]:[3,4];case 1:return[2,e.sent()];case 2:throw new Qo("Profile "+u+" did not contain credential_process.");case 3:return[3,5];case 4:throw new Qo("Profile "+u+" could not be found in shared credentials file.");case 5:return[2]}var t})})}(Fs(t),e)})}}var zs="AWS_EC2_METADATA_DISABLED";function qs(e){var t=(e=void 0===e?{}:e).profile,e=(void 0===t?Zo.env[Ms]:t)?Ds(e):es(function(){var e=Zo.env[ns],t=Zo.env[rs],n=Zo.env[os];return e&&t?Promise.resolve({accessKeyId:e,secretAccessKey:t,sessionToken:Zo.env[is],expiration:n?new Date(n):void 0}):Promise.reject(new Qo("Unable to find environment variable credentials."))},Ds(e),Vs(e),function(e){if(Zo.env[ds]||Zo.env[ps])return hs(e);if(Zo.env[zs])return function(){return Promise.reject(new Qo("EC2 Instance Metadata Service access disabled"))};return Ss(e)}(e));return ts(e,function(e){return void 0!==e.expiration&&e.expiration.getTime()-Date.now()<3e5},function(e){return void 0!==e.expiration})}function Ks(e){return"function"==typeof ArrayBuffer&&e instanceof ArrayBuffer||"[object ArrayBuffer]"===Object.prototype.toString.call(e)}var Hs=function(e,t,n){if(void 0===t&&(t=0),void 0===n&&(n=e.byteLength-t),!Ks(e))throw new TypeError('The "input" argument must be ArrayBuffer. Received type '+typeof e+" ("+e+")");return d.Buffer.from(e,t,n)},Gs=function(e,t){if("string"!=typeof e)throw new TypeError('The "input" argument must be of type string. Received type '+typeof e+" ("+e+")");return t?d.Buffer.from(e,t):d.Buffer.from(e)},b=(Ws.prototype.update=function(e,t){this.hash.update($s(e,t))},Ws.prototype.digest=function(){return Promise.resolve(this.hash.digest())},Ws);function Ws(e,t){this.hash=t?n.createHmac(e,$s(t)):n.createHash(e)}function $s(e,t){return d.Buffer.isBuffer(e)?e:"string"==typeof e?Gs(e,t):ArrayBuffer.isView(e)?Hs(e.buffer,e.byteOffset,e.byteLength):Hs(e)}function Ys(t){return{applyToStack:function(e){var r;e.add((r=t,function(n){return function(t){return K(void 0,void 0,void 0,function(){return H(this,function(e){return[2,r.retryStrategy.retry(n,t)]})})}}),Js)}}}var Js={name:"retryMiddleware",tags:["RETRY"],step:"finalizeRequest",priority:"high"},Zs=(Qs.isInstance=function(e){if(!e)return!1;return"number"==typeof e.statusCode&&"object"==typeof e.headers},Qs);function Qs(e){this.statusCode=e.statusCode,this.headers=e.headers||{},this.body=e.body}var Xs=(ea.isInstance=function(e){if(!e)return!1;return"method"in e&&"protocol"in e&&"hostname"in e&&"path"in e&&"object"==typeof e.query&&"object"==typeof e.headers},ea.prototype.clone=function(){var r,e=new ea(j(j({},this),{headers:j({},this.headers)}));return e.query&&(e.query=(r=e.query,Object.keys(r).reduce(function(e,t){var n=r[t];return j(j({},e),((e={})[t]=Array.isArray(n)?$(n):n,e))},{}))),e},ea);function ea(e){this.method=e.method||"GET",this.hostname=e.hostname||"localhost",this.port=e.port,this.query=e.query||{},this.headers=e.headers||{},this.body=e.body,this.protocol=e.protocol?":"!==e.protocol.substr(-1)?e.protocol+":":e.protocol:"https:",this.path=e.path?"/"!==e.path.charAt(0)?"/"+e.path:e.path:"/"}function ta(e){return sa.includes(e.name)||1==(null===(e=e.$retryable)||void 0===e?void 0:e.throttling)}function na(e){function t(e){return"TimeoutError"===e.name?10:5}function n(e){return t(e)<=i}var r=e,i=e;return Object.freeze({hasRetryTokens:n,retrieveRetryTokens:function(e){if(!n(e))throw new Error("No retry token available");e=t(e);return i-=e,e},releaseRetryTokens:function(e){i+=null!=e?e:1,i=Math.min(i,r)}})}function ra(e,t){return Math.floor(Math.min(2e4,Math.random()*Math.pow(2,t)*e))}function ia(e){return!!e&&(void 0!==e.$retryable||(t=e,oa.includes(t.name))||ta(e)||(e=e,aa.includes(e.name)||ua.includes((null===(e=e.$metadata)||void 0===e?void 0:e.httpStatusCode)||0)));var t}var oa=["AuthFailure","InvalidSignatureException","RequestExpired","RequestInTheFuture","RequestTimeTooSkewed","SignatureDoesNotMatch"],sa=["Throttling","ThrottlingException","ThrottledException","RequestThrottledException","TooManyRequestsException","ProvisionedThroughputExceededException","TransactionInProgressException","RequestLimitExceeded","BandwidthLimitExceeded","LimitExceededException","RequestThrottled","SlowDown","PriorRequestNotComplete","EC2ThrottledException"],aa=["AbortError","TimeoutError","RequestTimeout","RequestTimeoutException"],ua=[500,502,503,504],ca=(la.prototype.shouldRetry=function(e,t,n){return t<n&&this.retryDecider(e)&&this.retryQuota.hasRetryTokens(e)},la.prototype.getMaxAttempts=function(){return K(this,void 0,void 0,function(){var t;return H(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,this.maxAttemptsProvider()];case 1:return t=e.sent(),[3,3];case 2:return e.sent(),[t=3,3];case 3:return[2,t]}})})},la.prototype.retry=function(p,d){return K(this,void 0,void 0,function(){var o,s,a,u,c,l,t;return H(this,function(e){switch(e.label){case 0:return a=s=0,[4,this.getMaxAttempts()];case 1:u=e.sent(),c=d.request,Xs.isInstance(c)&&(c.headers["amz-sdk-invocation-id"]=m.v4()),t=function(){var t,n,r,i;return H(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,5]),Xs.isInstance(c)&&(c.headers["amz-sdk-request"]="attempt="+(s+1)+"; max="+u),[4,p(d)];case 1:return n=e.sent(),t=n.response,n=n.output,l.retryQuota.releaseRetryTokens(o),n.$metadata.attempts=s+1,n.$metadata.totalRetryDelay=a,[2,{value:{response:t,output:n}}];case 2:return(r=e.sent(),s++,l.shouldRetry(r,s,u))?(o=l.retryQuota.retrieveRetryTokens(r),i=l.delayDecider(ta(r)?500:100,s),a+=i,[4,new Promise(function(e){return setTimeout(e,i)})]):[3,4];case 3:return e.sent(),[2,"continue"];case 4:throw r.$metadata||(r.$metadata={}),r.$metadata.attempts=s,r.$metadata.totalRetryDelay=a,r;case 5:return[2]}})},l=this,e.label=2;case 2:return[5,t()];case 3:return"object"==typeof(t=e.sent())?[2,t.value]:[3,2];case 4:return[2]}})})},la);function la(e,t){this.maxAttemptsProvider=e,this.retryDecider=null!==(e=null==t?void 0:t.retryDecider)&&void 0!==e?e:ia,this.delayDecider=null!==(e=null==t?void 0:t.delayDecider)&&void 0!==e?e:ra,this.retryQuota=null!==(t=null==t?void 0:t.retryQuota)&&void 0!==t?t:na(500)}function pa(e){var t=ga(e.maxAttempts);return j(j({},e),{maxAttempts:t,retryStrategy:e.retryStrategy||new ca(t)})}function da(t){return"function"==typeof t?function(){return K(void 0,void 0,void 0,function(){return H(this,function(e){return[2,t()]})})}:(e=t,function(){return Promise.resolve(e)});var e}var fa="AWS_MAX_ATTEMPTS",ha="max_attempts",ln={environmentVariableSelector:function(e){var t=e[fa];if(t){e=parseInt(t);if(Number.isNaN(e))throw new Error("Environment variable "+fa+' mast be a number, got "'+t+'"');return e}},configFileSelector:function(e){var t=e[ha];if(t){e=parseInt(t);if(Number.isNaN(e))throw new Error("Shared config file entry "+ha+' mast be a number, got "'+t+'"');return e}},default:3},ga=function(e){if("number"!=typeof(e=void 0===e?3:e))return e;var t=Promise.resolve(e);return function(){return t}},S=function(e,t){var s,a,u,n,r=e.environmentVariableSelector,i=e.configFileSelector,e=e.default;return ts(es((n=r,function(){return K(void 0,void 0,void 0,function(){var t;return H(this,function(e){try{if(void 0===(t=n(Zo.env)))throw new Error;return[2,t]}catch(e){throw new Qo(e.message||"Cannot load config from environment variables with getter: "+n)}return[2]})})}),(s=i,t=(i=void 0===(i=t=void 0===t?{}:t)?{}:i).preferredFile,a=void 0===t?"config":t,u=B(i,["preferredFile"]),function(){return K(void 0,void 0,void 0,function(){var t,n,r,i,o;return H(this,function(e){switch(e.label){case 0:return t=u.loadedConfig,r=void 0===t?Ps(u):t,n=u.profile,t=void 0===n?Zo.env.AWS_PROFILE||"default":n,[4,r];case 1:n=e.sent(),r=n.configFile,n=n.credentialsFile,n=n[t]||{},r=r[t]||{},i="config"===a?j(j({},n),r):j(j({},r),n);try{if(void 0===(o=s(i)))throw new Error;return[2,o]}catch(e){throw new Qo(e.message||"Cannot load config for profile "+t+" in SDK configuration files with getter: "+s)}return[2]}})})}),da(e)))},ma=function(e){return encodeURIComponent(e).replace(/[!'()*]/g,ya)},ya=function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()};function va(e){var t,n,r=[];try{for(var i=G(Object.keys(e).sort()),o=i.next();!o.done;o=i.next()){var s=e[a=o.value],a=ma(a);if(Array.isArray(s))for(var u=0,c=s.length;u<c;u++)r.push(a+"="+ma(s[u]));else{var l=a;!s&&"string"!=typeof s||(l+="="+ma(s)),r.push(l)}}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return r.join("&")}var ba=[],Sa=[],wa="undefined"!=typeof Uint8Array?Uint8Array:Array,Ca=!1;function _a(){Ca=!0;for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t=0,n=e.length;t<n;++t)ba[t]=e[t],Sa[e.charCodeAt(t)]=t;Sa["-".charCodeAt(0)]=62,Sa["_".charCodeAt(0)]=63}function Ea(e,t,n){for(var r,i=[],o=t;o<n;o+=3)r=(e[o]<<16)+(e[o+1]<<8)+e[o+2],i.push(ba[(r=r)>>18&63]+ba[r>>12&63]+ba[r>>6&63]+ba[63&r]);return i.join("")}function Ia(e){var t;Ca||_a();for(var n=e.length,r=n%3,i="",o=[],s=0,a=n-r;s<a;s+=16383)o.push(Ea(e,s,a<s+16383?a:s+16383));return 1==r?(t=e[n-1],i+=ba[t>>2],i+=ba[t<<4&63],i+="=="):2==r&&(t=(e[n-2]<<8)+e[n-1],i+=ba[t>>10],i+=ba[t>>4&63],i+=ba[t<<2&63],i+="="),o.push(i),o.join("")}function Aa(e,t,n,r,i){var o,s,a=8*i-r-1,u=(1<<a)-1,c=u>>1,l=-7,p=n?i-1:0,d=n?-1:1,n=e[t+p];for(p+=d,o=n&(1<<-l)-1,n>>=-l,l+=a;0<l;o=256*o+e[t+p],p+=d,l-=8);for(s=o&(1<<-l)-1,o>>=-l,l+=r;0<l;s=256*s+e[t+p],p+=d,l-=8);if(0===o)o=1-c;else{if(o===u)return s?NaN:1/0*(n?-1:1);s+=Math.pow(2,r),o-=c}return(n?-1:1)*s*Math.pow(2,o-r)}function Pa(e,t,n,r,i,o){var s,a,u=8*o-i-1,c=(1<<u)-1,l=c>>1,p=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,d=r?0:o-1,f=r?1:-1,o=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=c):(s=Math.floor(Math.log(t)/Math.LN2),t*(r=Math.pow(2,-s))<1&&(s--,r*=2),2<=(t+=1<=s+l?p/r:p*Math.pow(2,1-l))*r&&(s++,r/=2),c<=s+l?(a=0,s=c):1<=s+l?(a=(t*r-1)*Math.pow(2,i),s+=l):(a=t*Math.pow(2,l-1)*Math.pow(2,i),s=0));8<=i;e[n+d]=255&a,d+=f,a/=256,i-=8);for(s=s<<i|a,u+=i;0<u;e[n+d]=255&s,d+=f,s/=256,u-=8);e[n+d-f]|=128*o}var Oa={}.toString,Ta=Array.isArray||function(e){return"[object Array]"==Oa.call(e)};function ka(){return Na.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function xa(e,t){if(ka()<t)throw new RangeError("Invalid typed array length");return Na.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=Na.prototype:(e=null===e?new Na(t):e).length=t,e}function Na(e,t,n){if(!(Na.TYPED_ARRAY_SUPPORT||this instanceof Na))return new Na(e,t,n);if("number"!=typeof e)return La(this,e,t,n);if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return Ra(this,e)}function La(e,t,n,r){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,n,r){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");t=void 0===n&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,n):new Uint8Array(t,n,r);Na.TYPED_ARRAY_SUPPORT?(e=t).__proto__=Na.prototype:e=Ua(e,t);return e}(e,t,n,r):"string"==typeof t?function(e,t,n){"string"==typeof n&&""!==n||(n="utf8");if(!Na.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|ja(t,n),n=(e=xa(e,r)).write(t,n);n!==r&&(e=e.slice(0,n));return e}(e,t,n):function(e,t){if(Fa(t)){var n=0|Da(t.length);return 0===(e=xa(e,n)).length?e:(t.copy(e,0,0,n),e)}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||function(e){return e!=e}(t.length)?xa(e,0):Ua(e,t);if("Buffer"===t.type&&Ta(t.data))return Ua(e,t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function Ma(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function Ra(e,t){if(Ma(t),e=xa(e,t<0?0:0|Da(t)),!Na.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function Ua(e,t){var n=t.length<0?0:0|Da(t.length);e=xa(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function Da(e){if(e>=ka())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+ka().toString(16)+" bytes");return 0|e}function Fa(e){return null!=e&&e._isBuffer}function ja(e,t){if(Fa(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;var n=(e="string"!=typeof e?""+e:e).length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return nu(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return ru(e).length;default:if(r)return nu(e).length;t=(""+t).toLowerCase(),r=!0}}function Ba(e,t,n){var r,i,o,s=!1;if((t=void 0===t||t<0?0:t)>this.length)return"";if((n=void 0===n||n>this.length?this.length:n)<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e=e||"utf8";;)switch(e){case"hex":return function(e,t,n){var r=e.length;(!t||t<0)&&(t=0);(!n||n<0||r<n)&&(n=r);for(var i="",o=t;o<n;++o)i+=function(e){return e<16?"0"+e.toString(16):e.toString(16)}(e[o]);return i}(this,t,n);case"utf8":case"utf-8":return Ga(this,t,n);case"ascii":return function(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}(this,t,n);case"latin1":case"binary":return function(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}(this,t,n);case"base64":return r=this,o=n,0===(i=t)&&o===r.length?Ia(r):Ia(r.slice(i,o));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return function(e,t,n){for(var r=e.slice(t,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}(this,t,n);default:if(s)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),s=!0}}function Va(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function za(e,t,n,r,i){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):2147483647<n?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,(n=(n=isNaN(n)?i?0:e.length-1:n)<0?e.length+n:n)>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if(Fa(t="string"==typeof t?Na.from(t,r):t))return 0===t.length?-1:qa(e,t,n,r,i);if("number"==typeof t)return t&=255,Na.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?(i?Uint8Array.prototype.indexOf:Uint8Array.prototype.lastIndexOf).call(e,t,n):qa(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function qa(e,t,n,r,i){var o=1,s=e.length,a=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;s/=o=2,a/=2,n/=2}function u(e,t){return 1===o?e[t]:e.readUInt16BE(t*o)}if(i)for(var c=-1,l=n;l<s;l++)if(u(e,l)===u(t,-1===c?0:l-c)){if(l-(c=-1===c?l:c)+1===a)return c*o}else-1!==c&&(l-=l-c),c=-1;else for(l=n=s<n+a?s-a:n;0<=l;l--){for(var p=!0,d=0;d<a;d++)if(u(e,l+d)!==u(t,d)){p=!1;break}if(p)return l}return-1}function Ka(e,t,n,r){return iu(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function Ha(e,t,n,r){return iu(function(e,t){for(var n,r,i=[],o=0;o<e.length&&!((t-=2)<0);++o)r=e.charCodeAt(o),n=r>>8,r=r%256,i.push(r),i.push(n);return i}(t,e.length-n),e,n,r)}function Ga(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;i<n;){var o,s,a,u,c=e[i],l=null,p=239<c?4:223<c?3:191<c?2:1;if(i+p<=n)switch(p){case 1:c<128&&(l=c);break;case 2:128==(192&(o=e[i+1]))&&127<(u=(31&c)<<6|63&o)&&(l=u);break;case 3:o=e[i+1],s=e[i+2],128==(192&o)&&128==(192&s)&&2047<(u=(15&c)<<12|(63&o)<<6|63&s)&&(u<55296||57343<u)&&(l=u);break;case 4:o=e[i+1],s=e[i+2],a=e[i+3],128==(192&o)&&128==(192&s)&&128==(192&a)&&65535<(u=(15&c)<<18|(63&o)<<12|(63&s)<<6|63&a)&&u<1114112&&(l=u)}null===l?(l=65533,p=1):65535<l&&(l-=65536,r.push(l>>>10&1023|55296),l=56320|1023&l),r.push(l),i+=p}return function(e){var t=e.length;if(t<=Wa)return String.fromCharCode.apply(String,e);var n="",r=0;for(;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=Wa));return n}(r)}Na.TYPED_ARRAY_SUPPORT=void 0===jt.TYPED_ARRAY_SUPPORT||jt.TYPED_ARRAY_SUPPORT,Na.poolSize=8192,Na._augment=function(e){return e.__proto__=Na.prototype,e},Na.from=function(e,t,n){return La(null,e,t,n)},Na.TYPED_ARRAY_SUPPORT&&(Na.prototype.__proto__=Uint8Array.prototype,Na.__proto__=Uint8Array),Na.alloc=function(e,t,n){return r=null,t=t,n=n,Ma(e=e),!(e<=0)&&void 0!==t?"string"==typeof n?xa(r,e).fill(t,n):xa(r,e).fill(t):xa(r,e);var r},Na.allocUnsafe=function(e){return Ra(null,e)},Na.allocUnsafeSlow=function(e){return Ra(null,e)},Na.isBuffer=function(e){return null!=e&&(!!e._isBuffer||ou(e)||function(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&ou(e.slice(0,0))}(e))},Na.compare=function(e,t){if(!Fa(e)||!Fa(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,i=0,o=Math.min(n,r);i<o;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},Na.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},Na.concat=function(e,t){if(!Ta(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return Na.alloc(0);if(void 0===t)for(i=t=0;i<e.length;++i)t+=e[i].length;for(var n=Na.allocUnsafe(t),r=0,i=0;i<e.length;++i){var o=e[i];if(!Fa(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(n,r),r+=o.length}return n},Na.byteLength=ja,Na.prototype._isBuffer=!0,Na.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)Va(this,t,t+1);return this},Na.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)Va(this,t,t+3),Va(this,t+1,t+2);return this},Na.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)Va(this,t,t+7),Va(this,t+1,t+6),Va(this,t+2,t+5),Va(this,t+3,t+4);return this},Na.prototype.toString=function(){var e=0|this.length;return 0==e?"":0===arguments.length?Ga(this,0,e):Ba.apply(this,arguments)},Na.prototype.equals=function(e){if(!Fa(e))throw new TypeError("Argument must be a Buffer");return this===e||0===Na.compare(this,e)},Na.prototype.inspect=function(){var e="";return 0<this.length&&(e=this.toString("hex",0,50).match(/.{2}/g).join(" "),50<this.length&&(e+=" ... ")),"<Buffer "+e+">"},Na.prototype.compare=function(e,t,n,r,i){if(!Fa(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(i<=r&&n<=t)return 0;if(i<=r)return-1;if(n<=t)return 1;if(this===e)return 0;for(var o=(i>>>=0)-(r>>>=0),s=(n>>>=0)-(t>>>=0),a=Math.min(o,s),u=this.slice(r,i),c=e.slice(t,n),l=0;l<a;++l)if(u[l]!==c[l]){o=u[l],s=c[l];break}return o<s?-1:s<o?1:0},Na.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},Na.prototype.indexOf=function(e,t,n){return za(this,e,t,n,!0)},Na.prototype.lastIndexOf=function(e,t,n){return za(this,e,t,n,!1)},Na.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-t;if((void 0===n||i<n)&&(n=i),0<e.length&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r=r||"utf8";for(var o,s,a,u=!1;;)switch(r){case"hex":return function(e,t,n,r){n=Number(n)||0;var i=e.length-n;if((!r||i<(r=Number(r)))&&(r=i),(i=t.length)%2!=0)throw new TypeError("Invalid hex string");i/2<r&&(r=i/2);for(var o=0;o<r;++o){var s=parseInt(t.substr(2*o,2),16);if(isNaN(s))return o;e[n+o]=s}return o}(this,e,t,n);case"utf8":case"utf-8":return s=t,a=n,iu(nu(e,(o=this).length-s),o,s,a);case"ascii":return Ka(this,e,t,n);case"latin1":case"binary":return Ka(this,e,t,n);case"base64":return o=this,s=t,a=n,iu(ru(e),o,s,a);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Ha(this,e,t,n);default:if(u)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),u=!0}},Na.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var Wa=4096;function $a(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(n<e+t)throw new RangeError("Trying to access beyond buffer length")}function Ya(e,t,n,r,i,o){if(!Fa(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(i<t||t<o)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function Ja(e,t,n,r){t<0&&(t=65535+t+1);for(var i=0,o=Math.min(e.length-n,2);i<o;++i)e[n+i]=(t&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function Za(e,t,n,r){t<0&&(t=4294967295+t+1);for(var i=0,o=Math.min(e.length-n,4);i<o;++i)e[n+i]=t>>>8*(r?i:3-i)&255}function Qa(e,t,n,r){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function Xa(e,t,n,r,i){return i||Qa(e,0,n,4),Pa(e,t,n,r,23,4),n+4}function eu(e,t,n,r,i){return i||Qa(e,0,n,8),Pa(e,t,n,r,52,8),n+8}Na.prototype.slice=function(e,t){var n=this.length;if((e=~~e)<0?(e+=n)<0&&(e=0):n<e&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):n<t&&(t=n),t<e&&(t=e),Na.TYPED_ARRAY_SUPPORT)(i=this.subarray(e,t)).__proto__=Na.prototype;else for(var r=t-e,i=new Na(r,void 0),o=0;o<r;++o)i[o]=this[o+e];return i},Na.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||$a(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r},Na.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||$a(e,t,this.length);for(var r=this[e+--t],i=1;0<t&&(i*=256);)r+=this[e+--t]*i;return r},Na.prototype.readUInt8=function(e,t){return t||$a(e,1,this.length),this[e]},Na.prototype.readUInt16LE=function(e,t){return t||$a(e,2,this.length),this[e]|this[e+1]<<8},Na.prototype.readUInt16BE=function(e,t){return t||$a(e,2,this.length),this[e]<<8|this[e+1]},Na.prototype.readUInt32LE=function(e,t){return t||$a(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},Na.prototype.readUInt32BE=function(e,t){return t||$a(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},Na.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||$a(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return(i*=128)<=r&&(r-=Math.pow(2,8*t)),r},Na.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||$a(e,t,this.length);for(var r=t,i=1,o=this[e+--r];0<r&&(i*=256);)o+=this[e+--r]*i;return(i*=128)<=o&&(o-=Math.pow(2,8*t)),o},Na.prototype.readInt8=function(e,t){return t||$a(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},Na.prototype.readInt16LE=function(e,t){t||$a(e,2,this.length);e=this[e]|this[e+1]<<8;return 32768&e?4294901760|e:e},Na.prototype.readInt16BE=function(e,t){t||$a(e,2,this.length);e=this[e+1]|this[e]<<8;return 32768&e?4294901760|e:e},Na.prototype.readInt32LE=function(e,t){return t||$a(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},Na.prototype.readInt32BE=function(e,t){return t||$a(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},Na.prototype.readFloatLE=function(e,t){return t||$a(e,4,this.length),Aa(this,e,!0,23,4)},Na.prototype.readFloatBE=function(e,t){return t||$a(e,4,this.length),Aa(this,e,!1,23,4)},Na.prototype.readDoubleLE=function(e,t){return t||$a(e,8,this.length),Aa(this,e,!0,52,8)},Na.prototype.readDoubleBE=function(e,t){return t||$a(e,8,this.length),Aa(this,e,!1,52,8)},Na.prototype.writeUIntLE=function(e,t,n,r){e=+e,t|=0,n|=0,r||Ya(this,e,t,n,Math.pow(2,8*n)-1,0);var i=1,o=0;for(this[t]=255&e;++o<n&&(i*=256);)this[t+o]=e/i&255;return t+n},Na.prototype.writeUIntBE=function(e,t,n,r){e=+e,t|=0,n|=0,r||Ya(this,e,t,n,Math.pow(2,8*n)-1,0);var i=n-1,o=1;for(this[t+i]=255&e;0<=--i&&(o*=256);)this[t+i]=e/o&255;return t+n},Na.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||Ya(this,e,t,1,255,0),Na.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},Na.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||Ya(this,e,t,2,65535,0),Na.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):Ja(this,e,t,!0),t+2},Na.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||Ya(this,e,t,2,65535,0),Na.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):Ja(this,e,t,!1),t+2},Na.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||Ya(this,e,t,4,4294967295,0),Na.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):Za(this,e,t,!0),t+4},Na.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||Ya(this,e,t,4,4294967295,0),Na.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):Za(this,e,t,!1),t+4},Na.prototype.writeIntLE=function(e,t,n,r){e=+e,t|=0,r||Ya(this,e,t,n,(r=Math.pow(2,8*n-1))-1,-r);var i=0,o=1,s=0;for(this[t]=255&e;++i<n&&(o*=256);)e<0&&0===s&&0!==this[t+i-1]&&(s=1),this[t+i]=(e/o>>0)-s&255;return t+n},Na.prototype.writeIntBE=function(e,t,n,r){e=+e,t|=0,r||Ya(this,e,t,n,(r=Math.pow(2,8*n-1))-1,-r);var i=n-1,o=1,s=0;for(this[t+i]=255&e;0<=--i&&(o*=256);)e<0&&0===s&&0!==this[t+i+1]&&(s=1),this[t+i]=(e/o>>0)-s&255;return t+n},Na.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||Ya(this,e,t,1,127,-128),(e=!Na.TYPED_ARRAY_SUPPORT?Math.floor(e):e)<0&&(e=255+e+1),this[t]=255&e,t+1},Na.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||Ya(this,e,t,2,32767,-32768),Na.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):Ja(this,e,t,!0),t+2},Na.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||Ya(this,e,t,2,32767,-32768),Na.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):Ja(this,e,t,!1),t+2},Na.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||Ya(this,e,t,4,2147483647,-2147483648),Na.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):Za(this,e,t,!0),t+4},Na.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||Ya(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),Na.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):Za(this,e,t,!1),t+4},Na.prototype.writeFloatLE=function(e,t,n){return Xa(this,e,t,!0,n)},Na.prototype.writeFloatBE=function(e,t,n){return Xa(this,e,t,!1,n)},Na.prototype.writeDoubleLE=function(e,t,n){return eu(this,e,t,!0,n)},Na.prototype.writeDoubleBE=function(e,t,n){return eu(this,e,t,!1,n)},Na.prototype.copy=function(e,t,n,r){if(n=n||0,r||0===r||(r=this.length),t=(t=t>=e.length?e.length:t)||0,(r=0<r&&r<n?n:r)===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length);var i,o=(r=e.length-t<r-n?e.length-t+n:r)-n;if(this===e&&n<t&&t<r)for(i=o-1;0<=i;--i)e[i+t]=this[i+n];else if(o<1e3||!Na.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)e[i+t]=this[i+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+o),t);return o},Na.prototype.fill=function(e,t,n,r){if("string"==typeof e){var i;if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1!==e.length||(i=e.charCodeAt(0))<256&&(e=i),void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!Na.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;if(t>>>=0,n=void 0===n?this.length:n>>>0,"number"==typeof(e=e||0))for(a=t;a<n;++a)this[a]=e;else for(var o=Fa(e)?e:nu(new Na(e,r).toString()),s=o.length,a=0;a<n-t;++a)this[a+t]=o[a%s];return this};var tu=/[^+\/0-9A-Za-z-_]/g;function nu(e,t){var n;t=t||1/0;for(var r=e.length,i=null,o=[],s=0;s<r;++s){if(55295<(n=e.charCodeAt(s))&&n<57344){if(!i){if(56319<n){-1<(t-=3)&&o.push(239,191,189);continue}if(s+1===r){-1<(t-=3)&&o.push(239,191,189);continue}i=n;continue}if(n<56320){-1<(t-=3)&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&-1<(t-=3)&&o.push(239,191,189);if(i=null,n<128){if(--t<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function ru(e){return function(e){var t,n,r,i;Ca||_a();var o=e.length;if(0<o%4)throw new Error("Invalid string. Length must be a multiple of 4");r="="===e[o-2]?2:"="===e[o-1]?1:0,i=new wa(3*o/4-r),t=0<r?o-4:o;for(var s=0,a=0;a<t;a+=4,0)n=Sa[e.charCodeAt(a)]<<18|Sa[e.charCodeAt(a+1)]<<12|Sa[e.charCodeAt(a+2)]<<6|Sa[e.charCodeAt(a+3)],i[s++]=n>>16&255,i[s++]=n>>8&255,i[s++]=255&n;return 2==r?(n=Sa[e.charCodeAt(a)]<<2|Sa[e.charCodeAt(a+1)]>>4,i[s++]=255&n):1==r&&(n=Sa[e.charCodeAt(a)]<<10|Sa[e.charCodeAt(a+1)]<<4|Sa[e.charCodeAt(a+2)]>>2,i[s++]=n>>8&255,i[s++]=255&n),i}(function(e){var t;if((e=((t=e).trim?t.trim():t.replace(/^\s+|\s+$/g,"")).replace(tu,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function iu(e,t,n,r){for(var i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}function ou(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}function su(e,t){t instanceof u.Readable?t.pipe(e):t?e.end(Na.from(t)):e.end()}au.prototype.destroy=function(){this.httpAgent.destroy(),this.httpsAgent.destroy()},au.prototype.handle=function(p,e){var d=this,f=e.abortSignal;return new Promise(function(t,n){if(null!=f&&f.aborted){var e=new Error("Request aborted");return e.name="AbortError",void n(e)}var r,i,o,s,a,u,c="https:"===p.protocol,e=va(p.query||{}),e={headers:p.headers,host:p.hostname,method:p.method,path:e?p.path+"?"+e:p.path,port:p.port,agent:c?d.httpsAgent:d.httpAgent},l=(0,(c?v:g).request)(e,function(e){e=new Zs({statusCode:e.statusCode||-1,headers:function(e){var t,n,r={};try{for(var i=G(Object.keys(e)),o=i.next();!o.done;o=i.next()){var s=o.value,a=e[s];r[s]=Array.isArray(a)?a.join(","):a}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return r}(e.headers),body:e});t({response:e})});l.on("error",n),e=l,r=n,(i=void 0===(i=d.connectionTimeout)?0:i)&&e.on("socket",function(e){var t,n=this;e.connecting&&(t=setTimeout(function(){n.abort();var e=new Error("Socket timed out without establishing a connection within "+i+" ms");e.name="TimeoutError",r(e)},i),e.on("connect",function(){clearTimeout(t)}))}),e=l,o=n,void 0===(s=d.socketTimeout)&&(s=0),e.setTimeout(s,function(){this.abort();var e=new Error("Connection timed out after "+s+" ms");e.name="TimeoutError",o(e)}),f&&(f.onabort=function(){l.abort();var e=new Error("Request aborted");e.name="AbortError",n(e)}),a=l,"100-continue"===((u=p).headers.Expect||u.headers.expect)?a.on("continue",function(){su(a,u.body)}):su(a,u.body)})},ct=au;function au(e){var t=void 0===e?{}:e,n=t.connectionTimeout,r=t.socketTimeout,e=t.httpAgent,t=t.httpsAgent;this.metadata={handlerProtocol:"http/1.1"},this.connectionTimeout=n,this.socketTimeout=r;this.httpAgent=e||new g.Agent({keepAlive:!0}),this.httpsAgent=t||new v.Agent({keepAlive:!0})}var uu,cu=(F(lu,uu=u.Writable),lu.prototype._write=function(e,t,n){this.bufferedBytes.push(e),n()},lu);function lu(){var e=null!==uu&&uu.apply(this,arguments)||this;return e.bufferedBytes=[],e}C=function(e){return new Promise(function(t,n){var r=new cu;e.pipe(r),e.on("error",function(e){r.end(),n(e)}),r.on("error",n),r.on("finish",function(){var e=new Uint8Array(Na.concat(this.bufferedBytes));t(e)})})};function pu(e){var t,n=h.parse(e),r=void 0===(i=n.hostname)?"localhost":i,e=void 0===(o=n.pathname)?"/":o,i=n.port,o=void 0===(o=n.protocol)?"https:":o;return(n=n.search)&&(t=function(e){var t,n,r={};if(e=e.replace(/^\?/,""))try{for(var i=G(e.split("&")),o=i.next();!o.done;o=i.next()){var s=W(o.value.split("="),2),a=s[0],s=s[1],s=void 0===s?null:s,a=decodeURIComponent(a),s=s&&decodeURIComponent(s);a in r?Array.isArray(r[a])?r[a].push(s):r[a]=[r[a],s]:r[a]=s}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return r}(n)),{hostname:r,port:i?parseInt(i):void 0,protocol:o,path:e,query:t}}function du(e){e=Gs(e,"base64");return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}function fu(e){return Hs(e.buffer,e.byteOffset,e.byteLength).toString("base64")}function hu(e){return e?"string"==typeof e?Na.from(e).length:"number"==typeof e.byteLength?e.byteLength:"number"==typeof e.size?e.size:"string"==typeof e.path?a.lstatSync(e.path).size:void 0:0}function gu(e,t){var n=c.platform+"/"+c.version;return c.env.AWS_EXECUTION_ENV&&(n+=" exec-env/"+c.env.AWS_EXECUTION_ENV),"aws-sdk-nodejs-v3-"+e+"/"+t+" "+n}var Re=function(e){e=Gs(e,"utf8");return new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT)},fn=function(e){return Hs(e.buffer,e.byteOffset,e.byteLength).toString("utf8")},mu="pinpoint.{region}.amazonaws.com",yu=new Set(["ap-east-1","ap-northeast-1","ap-northeast-2","ap-south-1","ap-southeast-1","ap-southeast-2","ca-central-1","eu-central-1","eu-north-1","eu-west-1","eu-west-2","eu-west-3","me-south-1","sa-east-1","us-east-1","us-east-2","us-west-1","us-west-2"]),vu=new Set(["cn-north-1","cn-northwest-1"]),bu=new Set(["us-iso-east-1"]),Su=new Set(["us-isob-east-1"]),wu=new Set(["us-gov-east-1","us-gov-west-1"]),Cu=Io(Io({},{apiVersion:"2016-12-01",disableHostPrefix:!1,logger:{},regionInfoProvider:function(e,t){var n=void 0;switch(e){case"ap-south-1":n={hostname:"pinpoint.ap-south-1.amazonaws.com",partition:"aws",signingService:"mobiletargeting"};break;case"ap-southeast-2":n={hostname:"pinpoint.ap-southeast-2.amazonaws.com",partition:"aws",signingService:"mobiletargeting"};break;case"eu-central-1":n={hostname:"pinpoint.eu-central-1.amazonaws.com",partition:"aws",signingService:"mobiletargeting"};break;case"eu-west-1":n={hostname:"pinpoint.eu-west-1.amazonaws.com",partition:"aws",signingService:"mobiletargeting"};break;case"us-east-1":n={hostname:"pinpoint.us-east-1.amazonaws.com",partition:"aws",signingService:"mobiletargeting"};break;case"us-west-2":n={hostname:"pinpoint.us-west-2.amazonaws.com",partition:"aws",signingService:"mobiletargeting"};break;default:yu.has(e)&&(n={hostname:mu.replace("{region}",e),partition:"aws",signingService:"mobiletargeting"}),vu.has(e)&&(n={hostname:"pinpoint.{region}.amazonaws.com.cn".replace("{region}",e),partition:"aws-cn"}),bu.has(e)&&(n={hostname:"pinpoint.{region}.c2s.ic.gov".replace("{region}",e),partition:"aws-iso"}),Su.has(e)&&(n={hostname:"pinpoint.{region}.sc2s.sgov.gov".replace("{region}",e),partition:"aws-iso-b"}),void 0===(n=wu.has(e)?{hostname:"pinpoint.{region}.amazonaws.com".replace("{region}",e),partition:"aws-us-gov"}:n)&&(n={hostname:mu.replace("{region}",e),partition:"aws",signingService:"mobiletargeting"})}return Promise.resolve(n)},signingName:"mobiletargeting"}),{runtime:"node",base64Decoder:du,base64Encoder:fu,bodyLengthChecker:hu,credentialDefaultProvider:qs,defaultUserAgent:gu(pn,Ne),maxAttempts:S(ln),region:S(p,Ye),requestHandler:new ct,sha256:b.bind(null,"sha256"),streamCollector:C,urlParser:pu,utf8Decoder:Re,utf8Encoder:fn}),_u="content-length";function Eu(t){return{applyToStack:function(e){e.add(function(a){var e=this;return function(s){return function(o){return K(e,void 0,void 0,function(){var t,n,r,i;return H(this,function(e){return t=o.request,Xs.isInstance(t)&&(i=t.body,n=t.headers,i&&-1===Object.keys(n).map(function(e){return e.toLowerCase()}).indexOf(_u)&&void 0!==(r=a(i))&&(t.headers=j(j({},t.headers),((i={})[_u]=String(r),i)))),[2,s(j(j({},o),{request:t}))]})})}}}(t.bodyLengthChecker),Iu)}}}var Iu={step:"build",tags:["SET_CONTENT_LENGTH","CONTENT_LENGTH"],name:"contentLengthMiddleware"};function Au(t){return{applyToStack:function(e){var o;e.add((o=t,function(i){return function(r){return K(void 0,void 0,void 0,function(){var t,n;return H(this,function(e){return Xs.isInstance(r.request)&&(t=r.request,n=(o.requestHandler.metadata||{}).handlerProtocol,0<=(void 0===n?"":n).indexOf("h2")&&!t.headers[":authority"]?(delete t.headers.host,t.headers[":authority"]=""):t.headers.host||(t.headers.host=t.hostname)),[2,i(r)]})})}}),Ou)}}}function Pu(e){return{applyToStack:function(e){e.add(function(o,s){return function(i){return K(void 0,void 0,void 0,function(){var t,n,r;return H(this,function(e){switch(e.label){case 0:return r=s.logger,[4,o(i)];case 1:return(t=e.sent(),r)?(n=t.response,"function"==typeof r.info&&r.info({metadata:{statusCode:n.statusCode,requestId:null!==(r=n.headers["x-amzn-requestid"])&&void 0!==r?r:n.headers["x-amzn-request-id"],extendedRequestId:n.headers["x-amz-id-2"],cfId:n.headers["x-amz-cf-id"]}}),[2,t]):[2,t]}})})}},Tu)}}}var Ou={name:"hostHeaderMiddleware",step:"build",priority:"low",tags:["HOST"]},Tu={name:"loggerMiddleware",tags:["LOGGER"],step:"initialize"},ku="X-Amz-Date",xu="X-Amz-Signature",Nu="X-Amz-Security-Token",Lu="authorization",Mu=ku.toLowerCase(),Ru=[Lu,Mu,"date"],Uu=xu.toLowerCase(),Du="x-amz-content-sha256",Fu=Nu.toLowerCase(),ju={authorization:!0,"cache-control":!0,connection:!0,expect:!0,from:!0,"keep-alive":!0,"max-forwards":!0,pragma:!0,referer:!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0,"user-agent":!0,"x-amzn-trace-id":!0},Bu=/^proxy-/,Vu=/^sec-/,zu="AWS4-HMAC-SHA256",qu="AWS4-HMAC-SHA256-PAYLOAD",Ku="aws4_request",Hu={},Gu=[];function Wu(e,t,n){return e+"/"+t+"/"+n+"/"+Ku}function $u(a,u,c,l,p){var d=c+":"+l+":"+p+":"+u.accessKeyId+":"+u.sessionToken;if(d in Hu)return Hu[d];for(Gu.push(d);50<Gu.length;)delete Hu[Gu.shift()];return Hu[d]=new Promise(function(e,t){var n,r,i=Promise.resolve("AWS4"+u.secretAccessKey);try{for(var o=G([c,l,p,Ku]),s=o.next();!s.done;s=o.next())!function(t){(i=i.then(function(e){return function(e,t,n){t=new e(t);return t.update(n),t.digest()}(a,e,t)})).catch(function(){})}(s.value)}catch(e){n={error:e}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}i.then(e,function(e){delete Hu[d],t(e)})})}for(var Yu={},Ju={},Zu=0;Zu<256;Zu++){var Qu=Zu.toString(16).toLowerCase();1===Qu.length&&(Qu="0"+Qu),Yu[Zu]=Qu,Ju[Qu]=Zu}function Xu(e){for(var t="",n=0;n<e.byteLength;n++)t+=Yu[e[n]];return t}function ec(e,t,n){var r,i,o=e.headers,s={};try{for(var a=G(Object.keys(o).sort()),u=a.next();!u.done;u=a.next()){var c=u.value,l=c.toLowerCase();(l in ju||null!=t&&t.has(l)||Bu.test(l)||Vu.test(l))&&(!n||n&&!n.has(l))||(s[l]=o[c].trim().replace(/\s+/g," "))}}catch(e){r={error:e}}finally{try{u&&!u.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}return s}function tc(e){var t,n,e=e.query,r=void 0===e?{}:e,i=[],o={};try{for(var s=G(Object.keys(r).sort()),a=s.next();!a.done;a=s.next())!function(n){var e;n.toLowerCase()!==Uu&&(i.push(n),"string"==typeof(e=r[n])?o[n]=ma(n)+"="+ma(e):Array.isArray(e)&&(o[n]=e.slice(0).sort().reduce(function(e,t){return e.concat([ma(n)+"="+ma(t)])},[]).join("&")))}(a.value)}catch(e){t={error:e}}finally{try{a&&!a.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}return i.map(function(e){return o[e]}).filter(function(e){return e}).join("&")}function nc(e,u){var c=e.headers,l=e.body;return K(this,void 0,void 0,function(){var t,n,r,i,o,s,a;return H(this,function(e){switch(e.label){case 0:try{for(t=G(Object.keys(c)),n=t.next();!n.done;n=t.next())if((r=n.value).toLowerCase()===Du)return[2,c[r]]}catch(e){s={error:e}}finally{try{n&&!n.done&&(a=t.return)&&a.call(t)}finally{if(s)throw s.error}}return null!=l?[3,1]:[2,"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855"];case 1:return"string"==typeof l||ArrayBuffer.isView(l)||Ks(l)?((i=new u).update(l),o=Xu,[4,i.digest()]):[3,3];case 2:return[2,o.apply(void 0,[e.sent()])];case 3:return[2,"UNSIGNED-PAYLOAD"]}})})}function rc(e){var r,t=e.headers,n=e.query,e=B(e,["headers","query"]);return j(j({},e),{headers:j({},t),query:n?(r=n,Object.keys(r).reduce(function(e,t){var n=r[t];return j(j({},e),((e={})[t]=Array.isArray(n)?$(n):n,e))},{})):void 0})}function ic(e){var t,n;e="function"==typeof e.clone?e.clone():rc(e);try{for(var r=G(Object.keys(e.headers)),i=r.next();!i.done;i=r.next()){var o=i.value;-1<Ru.indexOf(o.toLowerCase())&&delete e.headers[o]}}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}return e}function oc(e){return function(e){if("number"==typeof e)return new Date(1e3*e);if("string"!=typeof e)return e;if(Number(e))return new Date(1e3*Number(e));return new Date(e)}(e).toISOString().replace(/\.\d{3}Z$/,"Z")}var sc=(ac.prototype.presign=function(m,y){return void 0===y&&(y={}),K(this,void 0,void 0,function(){var t,n,r,i,o,s,a,u,c,l,p,d,f,h,g;return H(this,function(e){switch(e.label){case 0:return s=y.signingDate,a=void 0===s?new Date:s,i=y.expiresIn,t=void 0===i?3600:i,n=y.unsignableHeaders,r=y.signableHeaders,s=y.signingRegion,i=y.signingService,[4,this.credentialProvider()];case 1:return(o=e.sent(),null==s)?[3,2]:(u=s,[3,4]);case 2:return[4,this.regionProvider()];case 3:u=e.sent(),e.label=4;case 4:return(s=u,u=uc(a),a=u.longDate,u=u.shortDate,604800<t)?[2,Promise.reject("Signature version 4 presigned URLs must have an expiration date less than one week in the future")]:(h=Wu(u,s,null!=i?i:this.service),c=function(e){var t,n,r="function"==typeof e.clone?e.clone():rc(e),i=r.headers,o=void 0===(r=r.query)?{}:r;try{for(var s=G(Object.keys(i)),a=s.next();!a.done;a=s.next()){var u=a.value;"x-amz-"===u.toLowerCase().substr(0,6)&&(o[u]=i[u],delete i[u])}}catch(e){t={error:e}}finally{try{a&&!a.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}return j(j({},e),{headers:i,query:o})}(ic(m)),o.sessionToken&&(c.query[Nu]=o.sessionToken),c.query["X-Amz-Algorithm"]=zu,c.query["X-Amz-Credential"]=o.accessKeyId+"/"+h,c.query[ku]=a,c.query["X-Amz-Expires"]=t.toString(10),g=ec(c,n,r),c.query["X-Amz-SignedHeaders"]=cc(g),l=c.query,p=xu,d=this.getSignature,f=[a,h,this.getSigningKey(o,s,u,i)],h=this.createCanonicalRequest,g=[c,g],[4,nc(m,this.sha256)]);case 5:return[4,d.apply(this,f.concat([h.apply(this,g.concat([e.sent()]))]))];case 6:return l[p]=e.sent(),[2,c]}})})},ac.prototype.sign=function(t,n){return K(this,void 0,void 0,function(){return H(this,function(e){return"string"==typeof t?[2,this.signString(t,n)]:t.headers&&t.payload?[2,this.signEvent(t,n)]:[2,this.signRequest(t,n)]})})},ac.prototype.signEvent=function(e,t){var u=e.headers,c=e.payload,e=t.signingDate,l=void 0===e?new Date:e,p=t.priorSignature,d=t.signingRegion,f=t.signingService;return K(this,void 0,void 0,function(){var t,n,r,i,o,s,a;return H(this,function(e){switch(e.label){case 0:return null==d?[3,1]:(n=d,[3,3]);case 1:return[4,this.regionProvider()];case 2:n=e.sent(),e.label=3;case 3:return t=n,i=uc(l),o=i.shortDate,r=i.longDate,i=Wu(o,t,null!=f?f:this.service),[4,nc({headers:{},body:c},this.sha256)];case 4:return a=e.sent(),(o=new this.sha256).update(u),s=Xu,[4,o.digest()];case 5:return s=s.apply(void 0,[e.sent()]),a=[qu,r,i,p,s,a].join("\n"),[2,this.signString(a,{signingDate:l,signingRegion:t,signingService:f})]}})})},ac.prototype.signString=function(a,e){var t=void 0===e?{}:e,e=t.signingDate,u=void 0===e?new Date:e,c=t.signingRegion,l=t.signingService;return K(this,void 0,void 0,function(){var t,n,r,i,o,s;return H(this,function(e){switch(e.label){case 0:return[4,this.credentialProvider()];case 1:return(t=e.sent(),null==c)?[3,2]:(r=c,[3,4]);case 2:return[4,this.regionProvider()];case 3:r=e.sent(),e.label=4;case 4:return n=r,r=uc(u).shortDate,o=(i=this.sha256).bind,[4,this.getSigningKey(t,n,r,l)];case 5:return(i=new(o.apply(i,[void 0,e.sent()]))).update(a),s=Xu,[4,i.digest()];case 6:return[2,s.apply(void 0,[e.sent()])]}})})},ac.prototype.signRequest=function(l,e){var t=void 0===e?{}:e,e=t.signingDate,p=void 0===e?new Date:e,d=t.signableHeaders,f=t.unsignableHeaders,h=t.signingRegion,g=t.signingService;return K(this,void 0,void 0,function(){var t,n,r,i,o,s,a,u,c;return H(this,function(e){switch(e.label){case 0:return[4,this.credentialProvider()];case 1:return(t=e.sent(),null==h)?[3,2]:(r=h,[3,4]);case 2:return[4,this.regionProvider()];case 3:r=e.sent(),e.label=4;case 4:return n=r,i=ic(l),a=uc(p),o=a.longDate,s=a.shortDate,a=Wu(s,n,null!=g?g:this.service),i.headers[Mu]=o,t.sessionToken&&(i.headers[Fu]=t.sessionToken),[4,nc(i,this.sha256)];case 5:return c=e.sent(),!function(e,t){var n,r;e=e.toLowerCase();try{for(var i=G(Object.keys(t)),o=i.next();!o.done;o=i.next())if(e===o.value.toLowerCase())return 1}catch(e){n={error:e}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}}(Du,i.headers)&&this.applyChecksum&&(i.headers[Du]=c),u=ec(i,f,d),[4,this.getSignature(o,a,this.getSigningKey(t,n,s,g),this.createCanonicalRequest(i,u,c))];case 6:return c=e.sent(),i.headers[Lu]=zu+" Credential="+t.accessKeyId+"/"+a+", SignedHeaders="+cc(u)+", Signature="+c,[2,i]}})})},ac.prototype.createCanonicalRequest=function(e,t,n){var r=Object.keys(t).sort();return e.method+"\n"+this.getCanonicalPath(e)+"\n"+tc(e)+"\n"+r.map(function(e){return e+":"+t[e]}).join("\n")+"\n\n"+r.join(";")+"\n"+n},ac.prototype.createStringToSign=function(n,r,i){return K(this,void 0,void 0,function(){var t;return H(this,function(e){switch(e.label){case 0:return(t=new this.sha256).update(i),[4,t.digest()];case 1:return t=e.sent(),[2,zu+"\n"+n+"\n"+r+"\n"+Xu(t)]}})})},ac.prototype.getCanonicalPath=function(e){e=e.path;return this.uriEscapePath?"/"+encodeURIComponent(e.replace(/^\//,"")).replace(/%2F/g,"/"):e},ac.prototype.getSignature=function(o,s,a,u){return K(this,void 0,void 0,function(){var t,n,r,i;return H(this,function(e){switch(e.label){case 0:return[4,this.createStringToSign(o,s,u)];case 1:return t=e.sent(),r=(n=this.sha256).bind,[4,a];case 2:return(n=new(r.apply(n,[void 0,e.sent()]))).update(t),i=Xu,[4,n.digest()];case 3:return[2,i.apply(void 0,[e.sent()])]}})})},ac.prototype.getSigningKey=function(e,t,n,r){return $u(this.sha256,e,n,t,r||this.service)},ac);function ac(e){var t=e.applyChecksum,n=e.credentials,r=e.region,i=e.service,o=e.sha256,e=e.uriEscapePath,e=void 0===e||e;this.service=i,this.sha256=o,this.uriEscapePath=e,this.applyChecksum="boolean"!=typeof t||t,this.regionProvider=lc(r),this.credentialProvider=pc(n)}var uc=function(e){e=oc(e).replace(/[\-:]/g,"");return{longDate:e,shortDate:e.substr(0,8)}},cc=function(e){return Object.keys(e).sort().join(";")},lc=function(e){if("string"!=typeof e)return e;var t=Promise.resolve(e);return function(){return t}},pc=function(e){if("object"!=typeof e)return e;var t=Promise.resolve(e);return function(){return t}};function dc(r){var e=this,i=fc(r.credentials||r.credentialDefaultProvider(r)),t=r.signingEscapePath,o=void 0===t||t,n=r.systemClockOffset,t=void 0===n?r.systemClockOffset||0:n,s=r.sha256,n=r.signer?fc(r.signer):function(){return fc(r.region)().then(function(t){return K(e,void 0,void 0,function(){return H(this,function(e){switch(e.label){case 0:return[4,r.regionInfoProvider(t)];case 1:return[2,[e.sent()||{},t]]}})})}).then(function(e){var t=W(e,2),n=t[0],e=t[1],t=n.signingRegion,t=void 0===t?r.signingRegion:t,n=n.signingService,n=void 0===n?r.signingName:n;return r.signingRegion=r.signingRegion||t||e,r.signingName=r.signingName||n,new sc({credentials:i,region:r.signingRegion,service:r.signingName,sha256:s,uriEscapePath:o})})};return j(j({},r),{systemClockOffset:t,signingEscapePath:o,credentials:i,signer:n})}function fc(e){if("object"!=typeof e)return e;var t=Promise.resolve(e);return function(){return t}}var hc=function(e){return new Date(Date.now()+e)};function gc(l){return function(u,c){return function(a){return K(this,void 0,void 0,function(){var r,i,o,s;return H(this,function(e){switch(e.label){case 0:return Xs.isInstance(a.request)?"function"!=typeof l.signer?[3,2]:[4,l.signer()]:[2,u(a)];case 1:return r=e.sent(),[3,3];case 2:r=l.signer,e.label=3;case 3:return r=r,i=u,o=[j({},a)],s={},[4,r.sign(a.request,{signingDate:new Date(Date.now()+l.systemClockOffset),signingRegion:c.signing_region,signingService:c.signing_service})];case 4:return[4,i.apply(void 0,[j.apply(void 0,o.concat([(s.request=e.sent(),s)]))])];case 5:return o=e.sent(),s=o.response.headers,(s=s&&(s.date||s.Date))&&(s=Date.parse(s),t=s,n=l.systemClockOffset,3e5<=Math.abs(hc(n).getTime()-t)&&(l.systemClockOffset=s-Date.now())),[2,o]}var t,n})})}}}function mc(t){return{applyToStack:function(e){e.addRelativeTo(gc(t),yc)}}}var yc={name:"awsAuthMiddleware",tags:["SIGNATURE","AWSAUTH"],relation:"after",toMiddleware:"retryMiddleware"};function vc(t){return{applyToStack:function(e){var o;e.add((o=t,function(i){return function(e){var t=e.request;if(!Xs.isInstance(t))return i(e);var n=t.headers,r="node"===o.runtime?"user-agent":"x-amz-user-agent";return n[r]?n[r]+=" "+o.defaultUserAgent:n[r]=""+o.defaultUserAgent,o.customUserAgent&&(n[r]+=" "+o.customUserAgent),i(j(j({},e),{request:t}))}}),bc)}}}var bc={name:"getUserAgentMiddleware",step:"build",tags:["SET_USER_AGENT","USER_AGENT"]},Sc=function(){function t(t){function e(e){return!e.name||e.name!==t||(n=!0,a.delete(t),!1)}var n=!1;return i=i.filter(e),o=o.filter(e),n}function n(t){function e(e){return e.middleware!==t||(n=!0,e.name&&a.delete(e.name),!1)}var n=!1;return i=i.filter(e),o=o.filter(e),n}function r(t){return i.forEach(function(e){t.add(e.middleware,j({},e))}),o.forEach(function(e){t.addRelativeTo(e.middleware,j({},e))}),t}function s(){var t=[],n=[],r={};return i.forEach(function(e){e=j(j({},e),{before:[],after:[]});e.name&&(r[e.name]=e),t.push(e)}),o.forEach(function(e){e=j(j({},e),{before:[],after:[]});e.name&&(r[e.name]=e),n.push(e)}),n.forEach(function(e){if(e.toMiddleware){var t=r[e.toMiddleware];if(void 0===t)throw new Error(e.toMiddleware+" is not found when adding "+(e.name||"anonymous")+" middleware "+e.relation+" "+e.toMiddleware);"after"===e.relation&&t.after.push(e),"before"===e.relation&&t.before.push(e)}}),t.sort(function(e,t){return wc[t.step]-wc[e.step]||Cc[t.priority||"normal"]-Cc[e.priority||"normal"]}).map(u).reduce(function(e,t){return e.push.apply(e,$(t)),e},[]).map(function(e){return e.middleware})}var i=[],o=[],a=new Set,u=function(e){var t=[];return e.before.forEach(function(e){0===e.before.length&&0===e.after.length?t.push(e):t.push.apply(t,$(u(e)))}),t.push(e),e.after.reverse().forEach(function(e){0===e.before.length&&0===e.after.length?t.push(e):t.push.apply(t,$(u(e)))}),t},c={add:function(e,t){var n=(t=void 0===t?{}:t).name,t=j({step:"initialize",priority:"normal",middleware:e},t);if(n){if(a.has(n))throw new Error("Duplicate middleware name '"+n+"'");a.add(n)}i.push(t)},addRelativeTo:function(e,t){var n=t.name,t=j({middleware:e},t);if(n){if(a.has(n))throw new Error("Duplicated middleware name '"+n+"'");a.add(n)}o.push(t)},clone:function(){return r(Sc())},use:function(e){e.applyToStack(c)},remove:function(e){return("string"==typeof e?t:n)(e)},removeByTag:function(n){function e(e){var t=e.tags,e=e.name;return!t||!t.includes(n)||(e&&a.delete(e),!(r=!0))}var r=!1;return i=i.filter(e),o=o.filter(e),r},concat:function(e){var t=r(Sc());return t.use(e),t},applyToStack:r,resolve:function(e,t){var n,r;try{for(var i=G(s().reverse()),o=i.next();!o.done;o=i.next())e=(0,o.value)(e,t)}catch(e){n={error:e}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}return e}};return c},wc={initialize:5,serialize:4,build:3,finalizeRequest:2,deserialize:1},Cc={high:3,normal:2,low:1},at=(_c.prototype.send=function(e,t,n){var r="function"!=typeof t?t:void 0,i="function"==typeof t?t:n,r=e.resolveMiddleware(this.middlewareStack,this.config,r);if(!i)return r(e).then(function(e){return e.output});r(e).then(function(e){return i(null,e.output)},function(e){return i(e)}).catch(function(){})},_c.prototype.destroy=function(){this.config.requestHandler.destroy&&this.config.requestHandler.destroy()},_c);function _c(e){this.middlewareStack=Sc(),this.config=e}pn=function(){this.middlewareStack=Sc()};function Ec(e){return encodeURIComponent(e).replace(/[!'()*]/g,function(e){return"%"+e.charCodeAt(0).toString(16)})}function Ic(e){return Array.isArray(e)?e:[e]}var Ac=function(e){for(var t in e)e.hasOwnProperty(t)&&void 0!==e[t]["#text"]?e[t]=e[t]["#text"]:"object"==typeof e[t]&&null!==e[t]&&(e[t]=Ac(e[t]));return e},Ne=function(){var e=Object.getPrototypeOf(this).constructor,t=new(Function.bind.apply(String,$([null],arguments)));return Object.setPrototypeOf(t,e.prototype),t};Ne.prototype=Object.create(String.prototype,{constructor:{value:Ne,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf(Ne,String);var Pc,Oc=(F(Tc,Pc=Ne),Tc.prototype.deserializeJSON=function(){return JSON.parse(Pc.prototype.toString.call(this))},Tc.prototype.toJSON=function(){return Pc.prototype.toString.call(this)},Tc.fromObject=function(e){return e instanceof Tc?e:e instanceof String||"string"==typeof e?new Tc(e):new Tc(JSON.stringify(e))},Tc);function Tc(){return null!==Pc&&Pc.apply(this,arguments)||this}var kc=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],xc=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function Nc(e){var t=e.getUTCFullYear(),n=e.getUTCMonth(),r=e.getUTCDay(),i=e.getUTCDate(),o=e.getUTCHours(),s=e.getUTCMinutes(),e=e.getUTCSeconds();return kc[r]+", "+(i<10?"0"+i:""+i)+" "+xc[n]+" "+t+" "+(o<10?"0"+o:""+o)+":"+(s<10?"0"+s:""+s)+":"+(e<10?"0"+e:""+e)+" GMT"}var Lc,Mc="***SensitiveInformation***",Rc=(Eo(Uc,Lc=at),Uc.prototype.destroy=function(){Lc.prototype.destroy.call(this)},Uc);function Uc(e){var t=this,e=Io(Io({},Cu),e),e=ko(e),e=dc(To(e)),e=pa(e);return(t=Lc.call(this,e)||this).config=e,t.middlewareStack.use(mc(t.config)),t.middlewareStack.use(Ys(t.config)),t.middlewareStack.use(vc(t.config)),t.middlewareStack.use(Eu(t.config)),t.middlewareStack.use(Au(t.config)),t.middlewareStack.use(Pu(t.config)),t}function Dc(e,t){return Io(Io(Io(Io(Io(Io(Io(Io({},void 0!==e.AppVersion&&{AppVersion:e.AppVersion}),void 0!==e.Locale&&{Locale:e.Locale}),void 0!==e.Make&&{Make:e.Make}),void 0!==e.Model&&{Model:e.Model}),void 0!==e.ModelVersion&&{ModelVersion:e.ModelVersion}),void 0!==e.Platform&&{Platform:e.Platform}),void 0!==e.PlatformVersion&&{PlatformVersion:e.PlatformVersion}),void 0!==e.Timezone&&{Timezone:e.Timezone})}function Fc(e,t){return Io(Io(Io(Io(Io(Io({},void 0!==e.City&&{City:e.City}),void 0!==e.Country&&{Country:e.Country}),void 0!==e.Latitude&&{Latitude:e.Latitude}),void 0!==e.Longitude&&{Longitude:e.Longitude}),void 0!==e.PostalCode&&{PostalCode:e.PostalCode}),void 0!==e.Region&&{Region:e.Region})}function jc(e,t){return n=t,((e=void 0===(e=e)?new Uint8Array:e)instanceof Uint8Array?Promise.resolve(e):n.streamCollector(e)||Promise.resolve(new Uint8Array)).then(function(e){return t.utf8Encoder(e)});var n}var Bc,Vc,zc,qc,Kc,Hc,Gc,Wc,$c,Yc,Jc,Zc,Qc,Xc,el,tl,nl,rl,il,ol,sl,al,ul,cl,ll,pl,dl,fl,hl,gl,ml,yl,vl,bl,Sl,wl,Cl,_l,El,Il,Al,Pl,Ol,Tl,kl,xl,Nl,Ll,Ml,Rl,Ul,Dl,Fl,jl,Bl,Vl,zl,ql,Kl,Hl,Gl,Wl,$l,Yl,Jl,Zl,Ql,Xl,ep,tp,np,rp,ip,op,sp,ap,up,cp,lp,pp,dp,fp,hp,gp,mp,yp,vp,bp,Sp,wp,Cp,_p,Ep,Ip,Ap,Pp,Op,Tp,kp,xp,Np,Lp,Mp,Rp,Up,Dp,Fp,jp,Bp,Vp,zp,qp,Kp,Hp,Gp,Wp,$p,Yp,Jp,Zp,Qp,Xp,ed,td,nd,rd,id,od,sd=function(f,h){return Ao(void 0,void 0,void 0,function(){var t,n,r,i,o,s,a,u,c,l,p,d;return Po(this,function(e){switch(e.label){case 0:return t=[Io({},f)],d={},[4,kd(f.body,h)];case 1:switch(l=Io.apply(void 0,t.concat([(d.body=e.sent(),d)])),p="UnknownError",p=xd(f,l.body)){case"BadRequestException":case"com.amazonaws.pinpoint#BadRequestException":return[3,2];case"ForbiddenException":case"com.amazonaws.pinpoint#ForbiddenException":return[3,4];case"InternalServerErrorException":case"com.amazonaws.pinpoint#InternalServerErrorException":return[3,6];case"MethodNotAllowedException":case"com.amazonaws.pinpoint#MethodNotAllowedException":return[3,8];case"NotFoundException":case"com.amazonaws.pinpoint#NotFoundException":return[3,10];case"PayloadTooLargeException":case"com.amazonaws.pinpoint#PayloadTooLargeException":return[3,12];case"TooManyRequestsException":case"com.amazonaws.pinpoint#TooManyRequestsException":return[3,14]}return[3,16];case 2:return r=[{}],[4,ud(l)];case 3:return n=Io.apply(void 0,[Io.apply(void 0,r.concat([e.sent()])),{name:p,$metadata:Td(f)}]),[3,17];case 4:return i=[{}],[4,cd(l)];case 5:return n=Io.apply(void 0,[Io.apply(void 0,i.concat([e.sent()])),{name:p,$metadata:Td(f)}]),[3,17];case 6:return o=[{}],[4,ld(l)];case 7:return n=Io.apply(void 0,[Io.apply(void 0,o.concat([e.sent()])),{name:p,$metadata:Td(f)}]),[3,17];case 8:return s=[{}],[4,pd(l)];case 9:return n=Io.apply(void 0,[Io.apply(void 0,s.concat([e.sent()])),{name:p,$metadata:Td(f)}]),[3,17];case 10:return a=[{}],[4,dd(l)];case 11:return n=Io.apply(void 0,[Io.apply(void 0,a.concat([e.sent()])),{name:p,$metadata:Td(f)}]),[3,17];case 12:return u=[{}],[4,fd(l)];case 13:return n=Io.apply(void 0,[Io.apply(void 0,u.concat([e.sent()])),{name:p,$metadata:Td(f)}]),[3,17];case 14:return c=[{}],[4,hd(l)];case 15:return n=Io.apply(void 0,[Io.apply(void 0,c.concat([e.sent()])),{name:p,$metadata:Td(f)}]),[3,17];case 16:l=l.body,p=l.code||l.Code||p,n=Io(Io({},l),{name:""+p,message:l.message||l.Message||p,$fault:"client",$metadata:Td(f)}),e.label=17;case 17:return p=n.message||n.Message||p,n.message=p,delete n.Message,[2,Promise.reject(Object.assign(new Error(p),n))]}})})},ad=function(f,h){return Ao(void 0,void 0,void 0,function(){var t,n,r,i,o,s,a,u,c,l,p,d;return Po(this,function(e){switch(e.label){case 0:return t=[Io({},f)],d={},[4,kd(f.body,h)];case 1:switch(l=Io.apply(void 0,t.concat([(d.body=e.sent(),d)])),p="UnknownError",p=xd(f,l.body)){case"BadRequestException":case"com.amazonaws.pinpoint#BadRequestException":return[3,2];case"ForbiddenException":case"com.amazonaws.pinpoint#ForbiddenException":return[3,4];case"InternalServerErrorException":case"com.amazonaws.pinpoint#InternalServerErrorException":return[3,6];case"MethodNotAllowedException":case"com.amazonaws.pinpoint#MethodNotAllowedException":return[3,8];case"NotFoundException":case"com.amazonaws.pinpoint#NotFoundException":return[3,10];case"PayloadTooLargeException":case"com.amazonaws.pinpoint#PayloadTooLargeException":return[3,12];case"TooManyRequestsException":case"com.amazonaws.pinpoint#TooManyRequestsException":return[3,14]}return[3,16];case 2:return r=[{}],[4,ud(l)];case 3:return n=Io.apply(void 0,[Io.apply(void 0,r.concat([e.sent()])),{name:p,$metadata:Td(f)}]),[3,17];case 4:return i=[{}],[4,cd(l)];case 5:return n=Io.apply(void 0,[Io.apply(void 0,i.concat([e.sent()])),{name:p,$metadata:Td(f)}]),[3,17];case 6:return o=[{}],[4,ld(l)];case 7:return n=Io.apply(void 0,[Io.apply(void 0,o.concat([e.sent()])),{name:p,$metadata:Td(f)}]),[3,17];case 8:return s=[{}],[4,pd(l)];case 9:return n=Io.apply(void 0,[Io.apply(void 0,s.concat([e.sent()])),{name:p,$metadata:Td(f)}]),[3,17];case 10:return a=[{}],[4,dd(l)];case 11:return n=Io.apply(void 0,[Io.apply(void 0,a.concat([e.sent()])),{name:p,$metadata:Td(f)}]),[3,17];case 12:return u=[{}],[4,fd(l)];case 13:return n=Io.apply(void 0,[Io.apply(void 0,u.concat([e.sent()])),{name:p,$metadata:Td(f)}]),[3,17];case 14:return c=[{}],[4,hd(l)];case 15:return n=Io.apply(void 0,[Io.apply(void 0,c.concat([e.sent()])),{name:p,$metadata:Td(f)}]),[3,17];case 16:l=l.body,p=l.code||l.Code||p,n=Io(Io({},l),{name:""+p,message:l.message||l.Message||p,$fault:"client",$metadata:Td(f)}),e.label=17;case 17:return p=n.message||n.Message||p,n.message=p,delete n.Message,[2,Promise.reject(Object.assign(new Error(p),n))]}})})},ud=function(r,e){return Ao(void 0,void 0,void 0,function(){var t,n;return Po(this,function(e){return t={name:"BadRequestException",$fault:"client",$metadata:Td(r),Message:void 0,RequestID:void 0},void 0!==(n=r.body).Message&&null!==n.Message&&(t.Message=n.Message),void 0!==n.RequestID&&null!==n.RequestID&&(t.RequestID=n.RequestID),[2,t]})})},cd=function(r,e){return Ao(void 0,void 0,void 0,function(){var t,n;return Po(this,function(e){return t={name:"ForbiddenException",$fault:"client",$metadata:Td(r),Message:void 0,RequestID:void 0},void 0!==(n=r.body).Message&&null!==n.Message&&(t.Message=n.Message),void 0!==n.RequestID&&null!==n.RequestID&&(t.RequestID=n.RequestID),[2,t]})})},ld=function(r,e){return Ao(void 0,void 0,void 0,function(){var t,n;return Po(this,function(e){return t={name:"InternalServerErrorException",$fault:"server",$metadata:Td(r),Message:void 0,RequestID:void 0},void 0!==(n=r.body).Message&&null!==n.Message&&(t.Message=n.Message),void 0!==n.RequestID&&null!==n.RequestID&&(t.RequestID=n.RequestID),[2,t]})})},pd=function(r,e){return Ao(void 0,void 0,void 0,function(){var t,n;return Po(this,function(e){return t={name:"MethodNotAllowedException",$fault:"client",$metadata:Td(r),Message:void 0,RequestID:void 0},void 0!==(n=r.body).Message&&null!==n.Message&&(t.Message=n.Message),void 0!==n.RequestID&&null!==n.RequestID&&(t.RequestID=n.RequestID),[2,t]})})},dd=function(r,e){return Ao(void 0,void 0,void 0,function(){var t,n;return Po(this,function(e){return t={name:"NotFoundException",$fault:"client",$metadata:Td(r),Message:void 0,RequestID:void 0},void 0!==(n=r.body).Message&&null!==n.Message&&(t.Message=n.Message),void 0!==n.RequestID&&null!==n.RequestID&&(t.RequestID=n.RequestID),[2,t]})})},fd=function(r,e){return Ao(void 0,void 0,void 0,function(){var t,n;return Po(this,function(e){return t={name:"PayloadTooLargeException",$fault:"client",$metadata:Td(r),Message:void 0,RequestID:void 0},void 0!==(n=r.body).Message&&null!==n.Message&&(t.Message=n.Message),void 0!==n.RequestID&&null!==n.RequestID&&(t.RequestID=n.RequestID),[2,t]})})},hd=function(r,e){return Ao(void 0,void 0,void 0,function(){var t,n;return Po(this,function(e){return t={name:"TooManyRequestsException",$fault:"client",$metadata:Td(r),Message:void 0,RequestID:void 0},void 0!==(n=r.body).Message&&null!==n.Message&&(t.Message=n.Message),void 0!==n.RequestID&&null!==n.RequestID&&(t.RequestID=n.RequestID),[2,t]})})},gd=function(e,t){return Io(Io(Io(Io(Io(Io(Io(Io(Io(Io(Io({},void 0!==e.Address&&{Address:e.Address}),void 0!==e.Attributes&&{Attributes:Cd(e.Attributes)}),void 0!==e.ChannelType&&{ChannelType:e.ChannelType}),void 0!==e.Demographic&&{Demographic:Dc(e.Demographic)}),void 0!==e.EffectiveDate&&{EffectiveDate:e.EffectiveDate}),void 0!==e.EndpointStatus&&{EndpointStatus:e.EndpointStatus}),void 0!==e.Location&&{Location:Fc(e.Location)}),void 0!==e.Metrics&&{Metrics:vd(e.Metrics)}),void 0!==e.OptOut&&{OptOut:e.OptOut}),void 0!==e.RequestId&&{RequestId:e.RequestId}),void 0!==e.User&&{User:md(e.User)})},md=function(e,t){return Io(Io({},void 0!==e.UserAttributes&&{UserAttributes:Cd(e.UserAttributes)}),void 0!==e.UserId&&{UserId:e.UserId})},yd=function(e,t){return Io({},void 0!==e.BatchItem&&{BatchItem:wd(e.BatchItem)})},vd=function(e,t){return Object.entries(e).reduce(function(e,t){var n=Oo(t,2),t=n[0],n=n[1];return Io(Io({},e),((e={})[t]=n,e))},{})},bd=function(e,t){return Object.entries(e).reduce(function(e,t){var n=Oo(t,2),t=n[0],n=n[1];return Io(Io({},e),((e={})[t]=n,e))},{})},Sd=function(e,t){return Object.entries(e).reduce(function(e,t){var n=Oo(t,2),t=n[0],n=n[1];return Io(Io({},e),((e={})[t]=Io(Io(Io(Io(Io(Io(Io(Io(Io(Io({},void 0!==(n=n).AppPackageName&&{AppPackageName:n.AppPackageName}),void 0!==n.AppTitle&&{AppTitle:n.AppTitle}),void 0!==n.AppVersionCode&&{AppVersionCode:n.AppVersionCode}),void 0!==n.Attributes&&{Attributes:bd(n.Attributes)}),void 0!==n.ClientSdkVersion&&{ClientSdkVersion:n.ClientSdkVersion}),void 0!==n.EventType&&{EventType:n.EventType}),void 0!==n.Metrics&&{Metrics:vd(n.Metrics)}),void 0!==n.SdkName&&{SdkName:n.SdkName}),void 0!==n.Session&&{Session:Ed(n.Session)}),void 0!==n.Timestamp&&{Timestamp:n.Timestamp}),e))},{})},wd=function(e,t){return Object.entries(e).reduce(function(e,t){var n=Oo(t,2),t=n[0],n=n[1];return Io(Io({},e),((e={})[t]=Io(Io({},void 0!==(n=n).Endpoint&&{Endpoint:_d(n.Endpoint)}),void 0!==n.Events&&{Events:Sd(n.Events)}),e))},{})},Cd=function(e,t){return Object.entries(e).reduce(function(e,t){var n=Oo(t,2),t=n[0],n=n[1];return Io(Io({},e),((e={})[t]=n.map(function(e){return e}),e))},{})},_d=function(e,t){return Io(Io(Io(Io(Io(Io(Io(Io(Io(Io(Io({},void 0!==e.Address&&{Address:e.Address}),void 0!==e.Attributes&&{Attributes:Cd(e.Attributes)}),void 0!==e.ChannelType&&{ChannelType:e.ChannelType}),void 0!==e.Demographic&&{Demographic:Dc(e.Demographic)}),void 0!==e.EffectiveDate&&{EffectiveDate:e.EffectiveDate}),void 0!==e.EndpointStatus&&{EndpointStatus:e.EndpointStatus}),void 0!==e.Location&&{Location:Fc(e.Location)}),void 0!==e.Metrics&&{Metrics:vd(e.Metrics)}),void 0!==e.OptOut&&{OptOut:e.OptOut}),void 0!==e.RequestId&&{RequestId:e.RequestId}),void 0!==e.User&&{User:md(e.User)})},Ed=function(e,t){return Io(Io(Io(Io({},void 0!==e.Duration&&{Duration:e.Duration}),void 0!==e.Id&&{Id:e.Id}),void 0!==e.StartTimestamp&&{StartTimestamp:e.StartTimestamp}),void 0!==e.StopTimestamp&&{StopTimestamp:e.StopTimestamp})},Id=function(e,t){return{Results:void 0!==e.Results&&null!==e.Results?Pd(e.Results):void 0}},Ad=function(e,t){return Object.entries(e).reduce(function(e,t){var n=Oo(t,2),t=n[0],n=n[1];return Io(Io({},e),((e={})[t]={Message:void 0!==(n=n).Message&&null!==n.Message?n.Message:void 0,StatusCode:void 0!==n.StatusCode&&null!==n.StatusCode?n.StatusCode:void 0},e))},{})},Pd=function(e,t){return Object.entries(e).reduce(function(e,t){var n=Oo(t,2),t=n[0],n=n[1];return Io(Io({},e),((e={})[t]={EndpointItemResponse:void 0!==(t=n).EndpointItemResponse&&null!==t.EndpointItemResponse?{Message:void 0!==(n=t.EndpointItemResponse).Message&&null!==n.Message?n.Message:void 0,StatusCode:void 0!==n.StatusCode&&null!==n.StatusCode?n.StatusCode:void 0}:void 0,EventsItemResponse:void 0!==t.EventsItemResponse&&null!==t.EventsItemResponse?Ad(t.EventsItemResponse):void 0},e))},{})},Od=function(e,t){return{Message:void 0!==e.Message&&null!==e.Message?e.Message:void 0,RequestID:void 0!==e.RequestID&&null!==e.RequestID?e.RequestID:void 0}},Td=function(e){return{httpStatusCode:e.statusCode,httpHeaders:e.headers,requestId:e.headers["x-amzn-requestid"]}},kd=function(e,t){return jc(e,t).then(function(e){return e.length?JSON.parse(e):{}})},xd=function(e,t){function n(e){return e=0<=(e=0<=e.indexOf(":")?e.split(":")[0]:e).indexOf("#")?e.split("#")[1]:e}var r,i,o=(r=e.headers,i="x-amzn-errortype",Object.keys(r).find(function(e){return e.toLowerCase()===i.toLowerCase()}));return void 0!==o?n(e.headers[o]):void 0!==t.code?n(t.code):void 0!==t.__type?n(t.__type):""},Nd={name:"deserializerMiddleware",step:"deserialize",tags:["DESERIALIZER"]},Ld={name:"serializerMiddleware",step:"serialize",tags:["SERIALIZER"]};function Md(t,n,r){return{applyToStack:function(e){var c,l,s,a;e.add((c=t,l=r,function(a,u){return function(s){return K(void 0,void 0,void 0,function(){var t,n,r,i,o;return H(this,function(e){switch(e.label){case 0:return t=u.logger,n=u.outputFilterSensitiveLog,[4,a(s)];case 1:return r=e.sent().response,"function"==typeof(null==t?void 0:t.debug)&&t.debug({httpResponse:r}),[4,l(r,c)];case 2:return i=e.sent(),i.$metadata,o=B(i,["$metadata"]),"function"==typeof(null==t?void 0:t.info)&&t.info({output:n(o)}),[2,{response:r,output:i}]}})})}}),Nd),e.add((s=t,a=n,function(i,o){return function(r){return K(void 0,void 0,void 0,function(){var t,n;return H(this,function(e){switch(e.label){case 0:return t=o.logger,n=o.inputFilterSensitiveLog,"function"==typeof(null==t?void 0:t.info)&&t.info({input:n(r.input)}),[4,a(r.input,s)];case 1:return n=e.sent(),"function"==typeof(null==t?void 0:t.debug)&&t.debug({httpRequest:n}),[2,i(j(j({},r),{request:n}))]}})})}}),Ld)}}}(Bc||{}).filterSensitiveLog=function(e){return Io({},e)},(Vc||{}).filterSensitiveLog=function(e){return Io({},e)},(zc||{}).filterSensitiveLog=function(e){return Io({},e)},(qc||{}).filterSensitiveLog=function(e){return Io({},e)},(Kc||{}).filterSensitiveLog=function(e){return Io({},e)},(Hc||{}).filterSensitiveLog=function(e){return Io({},e)},(Gc||{}).filterSensitiveLog=function(e){return Io({},e)},(Wc||{}).filterSensitiveLog=function(e){return Io({},e)},($c||{}).filterSensitiveLog=function(e){return Io({},e)},(Yc||{}).filterSensitiveLog=function(e){return Io({},e)},(Jc||{}).filterSensitiveLog=function(e){return Io({},e)},(Zc||{}).filterSensitiveLog=function(e){return Io({},e)},(Qc||{}).filterSensitiveLog=function(e){return Io({},e)},(Xc||{}).filterSensitiveLog=function(e){return Io({},e)},(el||{}).filterSensitiveLog=function(e){return Io({},e)},(tl||{}).filterSensitiveLog=function(e){return Io({},e)},(nl||{}).filterSensitiveLog=function(e){return Io({},e)},(rl||{}).filterSensitiveLog=function(e){return Io({},e)},(il||{}).filterSensitiveLog=function(e){return Io({},e)},(ol||{}).filterSensitiveLog=function(e){return Io({},e)},(sl||{}).filterSensitiveLog=function(e){return Io({},e)},(al||{}).filterSensitiveLog=function(e){return Io({},e)},(ul||{}).filterSensitiveLog=function(e){return Io({},e)},(cl||{}).filterSensitiveLog=function(e){return Io({},e)},(ll||{}).filterSensitiveLog=function(e){return Io({},e)},(pl||{}).filterSensitiveLog=function(e){return Io({},e)},(dl||{}).filterSensitiveLog=function(e){return Io({},e)},(fl||{}).filterSensitiveLog=function(e){return Io({},e)},(hl||{}).filterSensitiveLog=function(e){return Io({},e)},(gl||{}).filterSensitiveLog=function(e){return Io({},e)},(ml||{}).filterSensitiveLog=function(e){return Io({},e)},(yl||{}).filterSensitiveLog=function(e){return Io({},e)},(vl||{}).filterSensitiveLog=function(e){return Io({},e)},(bl||{}).filterSensitiveLog=function(e){return Io({},e)},(Sl||{}).filterSensitiveLog=function(e){return Io({},e)},(wl||{}).filterSensitiveLog=function(e){return Io({},e)},(Cl||{}).filterSensitiveLog=function(e){return Io({},e)},(_l||{}).filterSensitiveLog=function(e){return Io({},e)},(El||{}).filterSensitiveLog=function(e){return Io({},e)},(Il||{}).filterSensitiveLog=function(e){return Io({},e)},(Al||{}).filterSensitiveLog=function(e){return Io({},e)},(Pl||{}).filterSensitiveLog=function(e){return Io({},e)},(Ol||{}).filterSensitiveLog=function(e){return Io({},e)},(Tl||{}).filterSensitiveLog=function(e){return Io({},e)},(kl||{}).filterSensitiveLog=function(e){return Io({},e)},(xl||{}).filterSensitiveLog=function(e){return Io({},e)},(Nl||{}).filterSensitiveLog=function(e){return Io({},e)},(Ll||{}).filterSensitiveLog=function(e){return Io({},e)},(Ml||{}).filterSensitiveLog=function(e){return Io({},e)},(Rl||{}).filterSensitiveLog=function(e){return Io({},e)},(Ul||{}).filterSensitiveLog=function(e){return Io({},e)},(Dl||{}).filterSensitiveLog=function(e){return Io({},e)},(Fl||{}).filterSensitiveLog=function(e){return Io({},e)},(jl||{}).filterSensitiveLog=function(e){return Io({},e)},(Bl||{}).filterSensitiveLog=function(e){return Io({},e)},(Vl||{}).filterSensitiveLog=function(e){return Io({},e)},(zl||{}).filterSensitiveLog=function(e){return Io({},e)},(ql||{}).filterSensitiveLog=function(e){return Io({},e)},(Kl||{}).filterSensitiveLog=function(e){return Io({},e)},(Hl||{}).filterSensitiveLog=function(e){return Io({},e)},(Gl||{}).filterSensitiveLog=function(e){return Io({},e)},(Wl||{}).filterSensitiveLog=function(e){return Io({},e)},($l||{}).filterSensitiveLog=function(e){return Io({},e)},(Yl||{}).filterSensitiveLog=function(e){return Io({},e)},(Jl||(Jl={})).filterSensitiveLog=function(e){return Io({},e)},(Zl||(Zl={})).filterSensitiveLog=function(e){return Io({},e)},(Ql||{}).filterSensitiveLog=function(e){return Io({},e)},(Xl||{}).filterSensitiveLog=function(e){return Io({},e)},(ep||{}).filterSensitiveLog=function(e){return Io({},e)},(tp||{}).filterSensitiveLog=function(e){return Io({},e)},(np||{}).filterSensitiveLog=function(e){return Io({},e)},(rp||{}).filterSensitiveLog=function(e){return Io({},e)},(ip||{}).filterSensitiveLog=function(e){return Io({},e)},(op||{}).filterSensitiveLog=function(e){return Io({},e)},(sp||{}).filterSensitiveLog=function(e){return Io({},e)},(ap||{}).filterSensitiveLog=function(e){return Io({},e)},(up||{}).filterSensitiveLog=function(e){return Io({},e)},(cp||{}).filterSensitiveLog=function(e){return Io({},e)},(lp||{}).filterSensitiveLog=function(e){return Io({},e)},(pp||{}).filterSensitiveLog=function(e){return Io({},e)},(dp||{}).filterSensitiveLog=function(e){return Io({},e)},(fp||{}).filterSensitiveLog=function(e){return Io({},e)},(hp||{}).filterSensitiveLog=function(e){return Io({},e)},(gp||{}).filterSensitiveLog=function(e){return Io({},e)},(mp||{}).filterSensitiveLog=function(e){return Io({},e)},(yp||{}).filterSensitiveLog=function(e){return Io({},e)},(vp||{}).filterSensitiveLog=function(e){return Io({},e)},(bp||{}).filterSensitiveLog=function(e){return Io({},e)},(Sp||{}).filterSensitiveLog=function(e){return Io({},e)},(wp||{}).filterSensitiveLog=function(e){return Io({},e)},(Cp||{}).filterSensitiveLog=function(e){return Io({},e)},(_p||{}).filterSensitiveLog=function(e){return Io({},e)},(Ep||{}).filterSensitiveLog=function(e){return Io({},e)},(Ip||{}).filterSensitiveLog=function(e){return Io({},e)},(Ap||{}).filterSensitiveLog=function(e){return Io({},e)},(Pp||{}).filterSensitiveLog=function(e){return Io({},e)},(Op||{}).filterSensitiveLog=function(e){return Io({},e)},(Tp||{}).filterSensitiveLog=function(e){return Io({},e)},(kp||{}).filterSensitiveLog=function(e){return Io({},e)},(xp||{}).filterSensitiveLog=function(e){return Io({},e)},(Np||{}).filterSensitiveLog=function(e){return Io({},e)},(Lp||(Lp={})).filterSensitiveLog=function(e){return Io({},e)},(Mp||(Mp={})).filterSensitiveLog=function(e){return Io({},e)},(Rp||{}).filterSensitiveLog=function(e){return Io({},e)},(Up||{}).filterSensitiveLog=function(e){return Io({},e)},(Dp||{}).filterSensitiveLog=function(e){return Io({},e)},(Fp||{}).filterSensitiveLog=function(e){return Io({},e)},(jp||{}).filterSensitiveLog=function(e){return Io({},e)},(Bp||{}).filterSensitiveLog=function(e){return Io({},e)},(Vp||{}).filterSensitiveLog=function(e){return Io({},e)},(zp||{}).filterSensitiveLog=function(e){return Io({},e)},(qp||{}).filterSensitiveLog=function(e){return Io({},e)},(Kp||{}).filterSensitiveLog=function(e){return Io({},e)},(Hp||{}).filterSensitiveLog=function(e){return Io({},e)},(Gp||{}).filterSensitiveLog=function(e){return Io({},e)},(Wp||{}).filterSensitiveLog=function(e){return Io({},e)},($p||{}).filterSensitiveLog=function(e){return Io({},e)},(Yp||{}).filterSensitiveLog=function(e){return Io({},e)},(Jp||{}).filterSensitiveLog=function(e){return Io({},e)},(Zp||{}).filterSensitiveLog=function(e){return Io({},e)},(Qp||{}).filterSensitiveLog=function(e){return Io({},e)},(Xp||{}).filterSensitiveLog=function(e){return Io({},e)},(ed||{}).filterSensitiveLog=function(e){return Io({},e)},(td||{}).filterSensitiveLog=function(e){return Io({},e)},(nd||{}).filterSensitiveLog=function(e){return Io({},e)},(rd||{}).filterSensitiveLog=function(e){return Io({},e)},(id||{}).filterSensitiveLog=function(e){return Io({},e)},(od||{}).filterSensitiveLog=function(e){return Io({},e)},(Gd||{}).filterSensitiveLog=function(e){return Io({},e)},(Jd||(Jd={})).filterSensitiveLog=function(e){return Io({},e)},(Rf||{}).filterSensitiveLog=function(e){return Io({},e)};var Rd,Ud=(Eo(Dd,Rd=pn),Dd.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Md(t,this.serialize,this.deserialize));var r=e.concat(this.middlewareStack),i=t.logger,o="PinpointClient",s="PutEventsCommand",e={logger:i,clientName:o,commandName:s,inputFilterSensitiveLog:Jl.filterSensitiveLog,outputFilterSensitiveLog:Zl.filterSensitiveLog};"function"==typeof i.info&&i.info({clientName:o,commandName:s});var a=t.requestHandler;return r.resolve(function(e){return a.handle(e.request,n||{})},e)},Dd.prototype.serialize=function(e,t){return a=e,u=t,Ao(void 0,void 0,void 0,function(){var t,n,r,i,o,s;return Po(this,function(e){switch(e.label){case 0:if(t={"Content-Type":"application/json"},n="/v1/apps/{ApplicationId}/events",void 0===a.ApplicationId)throw new Error("No value provided for input HTTP label: ApplicationId.");if((o=a.ApplicationId).length<=0)throw new Error("Empty value provided for input HTTP label: ApplicationId.");return n=n.replace("{ApplicationId}",Ec(o)),void 0===(r=void 0!==a.EventsRequest?yd(a.EventsRequest):r)&&(r={}),r=JSON.stringify(r),[4,u.endpoint()];case 1:return s=e.sent(),i=s.hostname,o=s.protocol,o=void 0===o?"https":o,s=s.port,[2,new Xs({protocol:o,hostname:i,port:s,method:"POST",headers:t,path:n,body:r})]}})});var a,u},Dd.prototype.deserialize=function(e,t){return r=e,i=t,Ao(void 0,void 0,void 0,function(){var t,n;return Po(this,function(e){switch(e.label){case 0:return 202!==r.statusCode&&300<=r.statusCode?[2,sd(r,i)]:(t={$metadata:Td(r),EventsResponse:void 0},[4,kd(r.body,i)]);case 1:return n=e.sent(),t.EventsResponse=Id(n),[2,Promise.resolve(t)]}})});var r,i},Dd);function Dd(e){var t=Rd.call(this)||this;return t.input=e,t}var Fd,jd=(Eo(Bd,Fd=pn),Bd.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Md(t,this.serialize,this.deserialize));var r=e.concat(this.middlewareStack),i=t.logger,o="PinpointClient",s="UpdateEndpointCommand",e={logger:i,clientName:o,commandName:s,inputFilterSensitiveLog:Lp.filterSensitiveLog,outputFilterSensitiveLog:Mp.filterSensitiveLog};"function"==typeof i.info&&i.info({clientName:o,commandName:s});var a=t.requestHandler;return r.resolve(function(e){return a.handle(e.request,n||{})},e)},Bd.prototype.serialize=function(e,t){return a=e,u=t,Ao(void 0,void 0,void 0,function(){var t,n,r,i,o,s;return Po(this,function(e){switch(e.label){case 0:if(t={"Content-Type":"application/json"},n="/v1/apps/{ApplicationId}/endpoints/{EndpointId}",void 0===a.ApplicationId)throw new Error("No value provided for input HTTP label: ApplicationId.");if((o=a.ApplicationId).length<=0)throw new Error("Empty value provided for input HTTP label: ApplicationId.");if(n=n.replace("{ApplicationId}",Ec(o)),void 0===a.EndpointId)throw new Error("No value provided for input HTTP label: EndpointId.");if((o=a.EndpointId).length<=0)throw new Error("Empty value provided for input HTTP label: EndpointId.");return n=n.replace("{EndpointId}",Ec(o)),void 0===(r=void 0!==a.EndpointRequest?gd(a.EndpointRequest):r)&&(r={}),r=JSON.stringify(r),[4,u.endpoint()];case 1:return s=e.sent(),i=s.hostname,o=s.protocol,o=void 0===o?"https":o,s=s.port,[2,new Xs({protocol:o,hostname:i,port:s,method:"PUT",headers:t,path:n,body:r})]}})});var a,u},Bd.prototype.deserialize=function(e,t){return r=e,i=t,Ao(void 0,void 0,void 0,function(){var t,n;return Po(this,function(e){switch(e.label){case 0:return 202!==r.statusCode&&300<=r.statusCode?[2,ad(r,i)]:(t={$metadata:Td(r),MessageBody:void 0},[4,kd(r.body,i)]);case 1:return n=e.sent(),t.MessageBody=Od(n),[2,Promise.resolve(t)]}})});var r,i},Bd);function Bd(e){var t=Fd.call(this)||this;return t.input=e,t}var Vd={keyPrefix:"aws-amplify-cache",capacityInBytes:1048576,itemMaxSize:21e4,defaultTTL:2592e5,defaultPriority:5,warningThreshold:.8,storage:(new E.StorageHelper).getStorage()};function zd(e){for(var t=0,t=e.length,n=e.length;0<=n;--n){var r=e.charCodeAt(n);127<r&&r<=2047?t+=1:2047<r&&r<=65535&&(t+=2),56320<=r&&r<=57343&&--n}return t}function qd(){return(new Date).getTime()}function Kd(e){return Number.isInteger?Number.isInteger(e):"number"==typeof(e=e)&&isFinite(e)&&Math.floor(e)===e}var Hd=new E.ConsoleLogger("StorageCache"),Gd=(Wd.prototype.getModuleName=function(){return"Cache"},Wd.prototype.checkConfig=function(){Kd(this.config.capacityInBytes)||(Hd.error("Invalid parameter: capacityInBytes. It should be an Integer. Setting back to default."),this.config.capacityInBytes=Vd.capacityInBytes),Kd(this.config.itemMaxSize)||(Hd.error("Invalid parameter: itemMaxSize. It should be an Integer. Setting back to default."),this.config.itemMaxSize=Vd.itemMaxSize),Kd(this.config.defaultTTL)||(Hd.error("Invalid parameter: defaultTTL. It should be an Integer. Setting back to default."),this.config.defaultTTL=Vd.defaultTTL),Kd(this.config.defaultPriority)||(Hd.error("Invalid parameter: defaultPriority. It should be an Integer. Setting back to default."),this.config.defaultPriority=Vd.defaultPriority),this.config.itemMaxSize>this.config.capacityInBytes&&(Hd.error("Invalid parameter: itemMaxSize. It should be smaller than capacityInBytes. Setting back to default."),this.config.itemMaxSize=Vd.itemMaxSize),(5<this.config.defaultPriority||this.config.defaultPriority<1)&&(Hd.error("Invalid parameter: defaultPriority. It should be between 1 and 5. Setting back to default."),this.config.defaultPriority=Vd.defaultPriority),(1<Number(this.config.warningThreshold)||Number(this.config.warningThreshold)<0)&&(Hd.error("Invalid parameter: warningThreshold. It should be between 0 and 1. Setting back to default."),this.config.warningThreshold=Vd.warningThreshold);5242880<this.config.capacityInBytes&&(Hd.error("Cache Capacity should be less than 5MB. Setting back to default. Setting back to default."),this.config.capacityInBytes=Vd.capacityInBytes)},Wd.prototype.fillCacheItem=function(e,t,n){t={key:e,data:t,timestamp:qd(),visitedTime:qd(),priority:n.priority,expires:n.expires,type:typeof t,byteSize:0};return t.byteSize=zd(JSON.stringify(t)),t.byteSize=zd(JSON.stringify(t)),t},Wd.prototype.configure=function(e){return e&&(e.keyPrefix&&Hd.warn("Don't try to configure keyPrefix!"),this.config=Object.assign({},this.config,e,e.Cache),this.checkConfig()),this.config},Wd);function Wd(e){this.config=Object.assign({},e),this.cacheCurSizeKey=this.config.keyPrefix+"CurSize",this.checkConfig()}var $d,Yd,Jd=($d=function(e,t){return($d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}$d(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),Zd=new E.ConsoleLogger("Cache");function Qd(e){var t=this,e=e?Object.assign({},Vd,e):Vd;return(t=Yd.call(this,e)||this).config.storage=e.storage,t.getItem=t.getItem.bind(t),t.setItem=t.setItem.bind(t),t.removeItem=t.removeItem.bind(t),t}var Xd=new(Jd(Qd,Yd=Gd),Qd.prototype._decreaseCurSizeInBytes=function(e){var t=this.getCacheCurSize();this.config.storage.setItem(this.cacheCurSizeKey,(t-e).toString())},Qd.prototype._increaseCurSizeInBytes=function(e){var t=this.getCacheCurSize();this.config.storage.setItem(this.cacheCurSizeKey,(t+e).toString())},Qd.prototype._refreshItem=function(e,t){return e.visitedTime=qd(),this.config.storage.setItem(t,JSON.stringify(e)),e},Qd.prototype._isExpired=function(e){e=this.config.storage.getItem(e),e=JSON.parse(e);return qd()>=e.expires},Qd.prototype._removeItem=function(e,t){t=t||JSON.parse(this.config.storage.getItem(e)).byteSize;this._decreaseCurSizeInBytes(t),this.config.storage.removeItem(e)},Qd.prototype._setItem=function(e,t){this._increaseCurSizeInBytes(t.byteSize);try{this.config.storage.setItem(e,JSON.stringify(t))}catch(e){this._decreaseCurSizeInBytes(t.byteSize),Zd.error("Failed to set item "+e)}},Qd.prototype._sizeToPop=function(e){var t=this.getCacheCurSize()+e-this.config.capacityInBytes,e=(1-this.config.warningThreshold)*this.config.capacityInBytes;return e<t?t:e},Qd.prototype._isCacheFull=function(e){return e+this.getCacheCurSize()>this.config.capacityInBytes},Qd.prototype._findValidKeys=function(){for(var e=[],t=[],n=0;n<this.config.storage.length;n+=1)t.push(this.config.storage.key(n));for(n=0;n<t.length;n+=1){var r=t[n];0===r.indexOf(this.config.keyPrefix)&&r!==this.cacheCurSizeKey&&(this._isExpired(r)?this._removeItem(r):e.push(r))}return e},Qd.prototype._popOutItems=function(e,t){for(var n=[],r=t,i=0;i<e.length;i+=1){var o=this.config.storage.getItem(e[i]);null!=o&&(o=JSON.parse(o),n.push(o))}n.sort(function(e,t){return e.priority>t.priority||!(e.priority<t.priority)&&e.visitedTime<t.visitedTime?-1:1});for(i=0;i<n.length;i+=1)if(this._removeItem(n[i].key,n[i].byteSize),(r-=n[i].byteSize)<=0)return},Qd.prototype.setItem=function(e,t,n){Zd.log("Set item: key is "+e+", value is "+t+" with options: "+n);var r=this.config.keyPrefix+e;if(r!==this.config.keyPrefix&&r!==this.cacheCurSizeKey)if(void 0!==t){n={priority:n&&void 0!==n.priority?n.priority:this.config.defaultPriority,expires:n&&void 0!==n.expires?n.expires:this.config.defaultTTL+qd()};if(n.priority<1||5<n.priority)Zd.warn("Invalid parameter: priority due to out or range. It should be within 1 and 5.");else{var i=this.fillCacheItem(r,t,n);if(i.byteSize>this.config.itemMaxSize)Zd.warn("Item with key: "+e+" you are trying to put into is too big!");else try{var o,s=this.config.storage.getItem(r);s&&this._removeItem(r,JSON.parse(s).byteSize),this._isCacheFull(i.byteSize)&&(o=this._findValidKeys(),this._isCacheFull(i.byteSize)&&(s=this._sizeToPop(i.byteSize),this._popOutItems(o,s))),this._setItem(r,i)}catch(e){Zd.warn("setItem failed! "+e)}}}else Zd.warn("The value of item should not be undefined!");else Zd.warn("Invalid key: should not be empty or 'CurSize'")},Qd.prototype.getItem=function(e,t){Zd.log("Get item: key is "+e+" with options "+t);var n=null,r=this.config.keyPrefix+e;if(r===this.config.keyPrefix||r===this.cacheCurSizeKey)return Zd.warn("Invalid key: should not be empty or 'CurSize'"),null;try{if(null!=(n=this.config.storage.getItem(r))){if(!this._isExpired(r)){var i=JSON.parse(n);return(i=this._refreshItem(i,r)).data}this._removeItem(r,JSON.parse(n).byteSize),n=null}if(t&&void 0!==t.callback){i=t.callback();return null!==i&&this.setItem(e,i,t),i}return null}catch(e){return Zd.warn("getItem failed! "+e),null}},Qd.prototype.removeItem=function(e){Zd.log("Remove item: key is "+e);var t=this.config.keyPrefix+e;if(t!==this.config.keyPrefix&&t!==this.cacheCurSizeKey)try{var n=this.config.storage.getItem(t);n&&this._removeItem(t,JSON.parse(n).byteSize)}catch(e){Zd.warn("removeItem failed! "+e)}},Qd.prototype.clear=function(){Zd.log("Clear Cache");for(var e=[],t=0;t<this.config.storage.length;t+=1){var n=this.config.storage.key(t);0===n.indexOf(this.config.keyPrefix)&&e.push(n)}try{for(t=0;t<e.length;t+=1)this.config.storage.removeItem(e[t])}catch(e){Zd.warn("clear failed! "+e)}},Qd.prototype.getAllKeys=function(){for(var e=[],t=0;t<this.config.storage.length;t+=1){var n=this.config.storage.key(t);0===n.indexOf(this.config.keyPrefix)&&n!==this.cacheCurSizeKey&&e.push(n.substring(this.config.keyPrefix.length))}return e},Qd.prototype.getCacheCurSize=function(){var e=this.config.storage.getItem(this.cacheCurSizeKey);return e||(this.config.storage.setItem(this.cacheCurSizeKey,"0"),e="0"),Number(e)},Qd.prototype.createInstance=function(e){return e.keyPrefix&&e.keyPrefix!==Vd.keyPrefix||(Zd.error("invalid keyPrefix, setting keyPrefix with timeStamp"),e.keyPrefix=qd.toString()),new Qd(e)},Qd);E.Amplify.register(Xd);var ef=function(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{o(u.next(e))}catch(e){t(e)}}function i(e){try{o(u.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,i)}o((u=u.apply(e,s||[])).next())})},tf=function(n,r){var i,o,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,o&&(s=2&t[0]?o.return:t[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,t[1])).done)return s;switch(o=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,o=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],o=0}finally{i=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},nf=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},rf=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(nf(arguments[t]));return e},of=new E.ConsoleLogger("EventsBuffer"),sf=[429,500],af=[202],uf=(cf.prototype.push=function(e){if(this._buffer>this._config.bufferSize)return of.debug("Exceeded analytics events buffer size"),e.handlers.reject(new Error("Exceeded the size of analytics events buffer"));var t=((t={})[e.params.event.eventId]=e,t);this._buffer.push(t)},cf.prototype.pause=function(){this._pause=!0},cf.prototype.resume=function(){this._pause=!1},cf.prototype.updateClient=function(e){this._client=e},cf.prototype.flush=function(){this._flush=!0},cf.prototype._startLoop=function(){this._interval&&clearInterval(this._interval);var e=this._config.flushInterval;this._interval=setInterval(this._sendBatch,e)},cf.prototype._sendBatch=function(){var e,t=this._buffer.length;this._flush&&!t&&clearInterval(this._interval),!this._pause&&t&&(e=this._config.flushSize,t=Math.min(e,t),t=this._buffer.splice(0,t),this._putEvents(t))},cf.prototype._putEvents=function(i){return ef(this,void 0,void 0,function(){var t,n,r;return tf(this,function(e){switch(e.label){case 0:t=this._bufferToMap(i),n=this._generateBatchEventParams(t),e.label=1;case 1:return e.trys.push([1,3,,4]),n=new Ud(n),[4,this._client.send(n)];case 2:return r=e.sent(),this._processPutEventsSuccessResponse(r,t),[3,4];case 3:return r=e.sent(),[2,this._handlePutEventsFailure(r,t)];case 4:return[2]}})})},cf.prototype._generateBatchEventParams=function(e){var c={ApplicationId:"",EventsRequest:{BatchItem:{}}};return Object.values(e).forEach(function(e){var t=e.params,n=t.event,r=t.timestamp,i=t.config,o=n.name,s=n.attributes,a=n.metrics,u=n.eventId,e=n.session,t=i.appId,n=i.endpointId,i=c.EventsRequest.BatchItem;c.ApplicationId=c.ApplicationId||t,i[n]||(i[n]={Endpoint:{},Events:{}}),i[n].Events[u]={EventType:o,Timestamp:new Date(r).toISOString(),Attributes:s,Metrics:a,Session:e}}),c},cf.prototype._handlePutEventsFailure=function(e,t){of.debug("_putEvents Failed: ",e);e=e.$metadata&&e.$metadata.httpStatusCode;sf.includes(e)&&(t=Object.values(t),this._retry(t))},cf.prototype._processPutEventsSuccessResponse=function(e,a){var e=e.EventsResponse.Results,u=[];Object.entries(e).forEach(function(e){var e=nf(e,2),s=e[0],e=e[1].EventsItemResponse;Object.entries(e).forEach(function(e){var t=nf(e,2),n=t[0],r=t[1],i=r.StatusCode,o=r.Message,e=a[n],t={EventsResponse:{Results:((t={})[s]={EventsItemResponse:((r={})[n]={StatusCode:i,Message:o},r)},t)}};if(af.includes(i))e.handlers.resolve(t);else{if(!sf.includes(i)){i=e.params.event.name;return of.error("event "+n+" : "+i+" failed with error: "+o),e.handlers.reject(t)}u.push(e)}})}),u.length&&this._retry(u)},cf.prototype._retry=function(e){var i=[];e.forEach(function(e){var t=e.params,n=t.event,r=n.eventId,n=n.name;if(0<t.resendLimit--)return of.debug("resending event "+r+" : "+n+" with "+t.resendLimit+" retry attempts remaining"),void i.push(((t={})[r]=e,t));of.debug("no retry attempts remaining for event "+r+" : "+n)}),(e=this._buffer).unshift.apply(e,rf(i))},cf.prototype._bufferToMap=function(e){return e.reduce(function(e,t){var n=nf(Object.entries(t),1),t=nf(n[0],2),n=t[0],t=t[1];return e[n]=t,e},{})},cf);function cf(e,t){this._pause=!1,this._flush=!1,of.debug("Instantiating buffer with config:",t),this._buffer=[],this._client=e,this._config=t,this._sendBatch=this._sendBatch.bind(this),this._startLoop()}function lf(e,t){E.Hub.dispatch("analytics",{event:e,data:t},"Analytics",gf)}var pf=function(){return(pf=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},df=function(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{o(u.next(e))}catch(e){t(e)}}function i(e){try{o(u.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,i)}o((u=u.apply(e,s||[])).next())})},ff=function(n,r){var i,o,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,o&&(s=2&t[0]?o.return:t[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,t[1])).done)return s;switch(o=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,o=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],o=0}finally{i=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},hf=function(e,t){var n={};for(i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]]);return n},gf="undefined"!=typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("amplify_default"):"@@amplify_default",mf=new E.ConsoleLogger("AWSPinpointProvider"),yf=[429,500],vf=[202],bf="_update_endpoint",Sf="_session.stop",wf="undefined"!=typeof navigator&&navigator&&"function"==typeof navigator.sendBeacon,Cf=(_f.prototype.getCategory=function(){return _f.category},_f.prototype.getProviderName=function(){return _f.providerName},_f.prototype.configure=function(e){var t=this;mf.debug("configure Analytics",e);var n=e||{};return this._config=Object.assign({},this._config,n),this._endpointGenerating=!!e.autoSessionRecord,this._config.appId&&!this._config.disabled?this._config.endpointId?lf("pinpointProvider_configured",null):(e=this.getProviderName()+"_"+this._config.appId,this._getEndpointId(e).then(function(e){mf.debug("setting endpoint id from the cache",e),t._config.endpointId=e,lf("pinpointProvider_configured",null)}).catch(function(e){mf.debug("Failed to generate endpointId",e)})):this._flushBuffer(),this._config},_f.prototype.record=function(n,r){return df(this,void 0,void 0,function(){var t;return ff(this,function(e){switch(e.label){case 0:return mf.debug("_public record",n),[4,this._getCredentials()];case 1:return(t=e.sent())&&this._config.appId&&this._config.region?(this._initClients(t),t=(new Date).getTime(),this._generateSession(n),n.event.eventId=m.v1(),Object.assign(n,{timestamp:t,config:this._config}),n.event.immediate?[2,this._send(n,r)]:(this._putToBuffer(n,r),[2])):(mf.debug("cannot send events without credentials, applicationId or region"),[2,r.reject(new Error("No credentials, applicationId or region"))])}})})},_f.prototype._sendEndpointUpdate=function(n){return df(this,void 0,void 0,function(){var t;return ff(this,function(e){switch(e.label){case 0:return this._endpointUpdateInProgress?(this._endpointBuffer.push(n),[2]):(this._endpointUpdateInProgress=!0,[4,this._updateEndpoint(n)]);case 1:return e.sent(),t=this._endpointBuffer.shift(),this._endpointUpdateInProgress=!1,t&&this._sendEndpointUpdate(t),[2]}})})},_f.prototype._putToBuffer=function(e,t){e.event.name!==bf?this._buffer&&this._buffer.push({params:e,handlers:t}):this._sendEndpointUpdate({params:e,handlers:t})},_f.prototype._generateSession=function(e){this._sessionId=this._sessionId||m.v1();var t=e.event;switch(t.name){case"_session.start":this._sessionStartTimestamp=(new Date).getTime(),this._sessionId=m.v1(),t.session={Id:this._sessionId,StartTimestamp:new Date(this._sessionStartTimestamp).toISOString()};break;case Sf:var n=(new Date).getTime();this._sessionStartTimestamp=this._sessionStartTimestamp||(new Date).getTime(),this._sessionId=this._sessionId||m.v1(),t.session={Id:this._sessionId,Duration:n-this._sessionStartTimestamp,StartTimestamp:new Date(this._sessionStartTimestamp).toISOString(),StopTimestamp:new Date(n).toISOString()},this._sessionId=void 0,this._sessionStartTimestamp=void 0;break;default:this._sessionStartTimestamp=this._sessionStartTimestamp||(new Date).getTime(),this._sessionId=this._sessionId||m.v1(),t.session={Id:this._sessionId,StartTimestamp:new Date(this._sessionStartTimestamp).toISOString()}}},_f.prototype._send=function(t,n){return df(this,void 0,void 0,function(){return ff(this,function(e){switch(t.event.name){case bf:return[2,this._updateEndpoint({params:t,handlers:n})];case Sf:return[2,this._pinpointSendStopSession(t,n)];default:return[2,this._pinpointPutEvents(t,n)]}})})},_f.prototype._generateBatchItemContext=function(e){var t=e.event,n=e.timestamp,r=e.config,i=t.name,o=t.attributes,s=t.metrics,a=t.eventId,u=t.session,c=r.appId,e=r.endpointId,t={ApplicationId:c,EventsRequest:{BatchItem:{}}},r={Endpoint:{}};return r.Events=((c={})[a]={EventType:i,Timestamp:new Date(n).toISOString(),Attributes:o,Metrics:s,Session:u},c),t.EventsRequest.BatchItem[e]=r,t},_f.prototype._pinpointPutEvents=function(o,s){return df(this,void 0,void 0,function(){var t,n,r,i;return ff(this,function(e){switch(e.label){case 0:t=o.event.eventId,n=o.config.endpointId,r=this._generateBatchItemContext(o),r=new Ud(r),e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this.pinpointClient.send(r)];case 2:return(i=e.sent(),r=i.EventsResponse.Results[n].EventsItemResponse[t],n=r.StatusCode,r=r.Message,vf.includes(n))?(mf.debug("record event success. ",i),[2,s.resolve(i)]):yf.includes(n)?(this._retry(o,s),[3,4]):(mf.error("Event "+t+" is not accepted, the error is "+r),[2,s.reject(i)]);case 3:return i=e.sent(),this._eventError(i),[2,s.reject(i)];case 4:return[2]}})})},_f.prototype._pinpointSendStopSession=function(e,t){if(wf){var n=this._generateBatchItemContext(e),r=this._config.region,i=n.ApplicationId,o=n.EventsRequest,n={secret_key:this._config.credentials.secretAccessKey,access_key:this._config.credentials.accessKeyId,session_token:this._config.credentials.sessionToken},i="https://pinpoint."+r+".amazonaws.com/v1/apps/"+i+"/events/legacy",o=JSON.stringify(o),i={url:i,body:o,method:"POST"},r={region:r,service:"mobiletargeting"},r=E.Signer.signUrl(i,n,r,null);return navigator.sendBeacon(r,o)?t.resolve("sendBeacon success"):t.reject("sendBeacon failure")}this._pinpointPutEvents(e,t)},_f.prototype._retry=function(e,t){var n=e.config.resendLimit;e.resendLimit="number"==typeof e.resendLimit?e.resendLimit:n,0<e.resendLimit--?(mf.debug("resending event "+e.eventName+" with "+e.resendLimit+" retry times left"),this._pinpointPutEvents(e,t)):mf.debug("retry times used up for event "+e.eventName)},_f.prototype._updateEndpoint=function(a){return df(this,void 0,void 0,function(){var t,n,r,i,o,s;return ff(this,function(e){switch(e.label){case 0:s=a.params,t=a.handlers,n=s.config,i=s.event,r=n.appId,s=n.endpointId,i=this._endpointRequest(n,E.JS.transferKeyToLowerCase(i,[],["attributes","userAttributes","Attributes","UserAttributes"])),s={ApplicationId:r,EndpointId:s,EndpointRequest:i},e.label=1;case 1:return e.trys.push([1,3,,4]),i=new jd(s),[4,this.pinpointClient.send(i)];case 2:return o=e.sent(),mf.debug("updateEndpoint success",o),this._endpointGenerating=!1,this._resumeBuffer(),t.resolve(o),[2];case 3:return o=e.sent(),s={err:o,update_params:s,endpointObject:a},[2,this._handleEndpointUpdateFailure(s)];case 4:return[2]}})})},_f.prototype._handleEndpointUpdateFailure=function(i){return df(this,void 0,void 0,function(){var t,n,r;return ff(this,function(e){return t=i.err,n=i.endpointObject,r=t.$metadata&&t.$metadata.httpStatusCode,mf.debug("updateEndpoint error",t),403===r?[2,this._handleEndpointUpdateForbidden(i)]:yf.includes(r)?[2,this._retryEndpointUpdate(n,!0)]:(mf.error("updateEndpoint failed",t),n.handlers.reject(t),[2])})})},_f.prototype._handleEndpointUpdateForbidden=function(e){var t=e.err,n=e.endpointObject,r=t.code,e=t.retryable;if("ExpiredTokenException"!==r&&!e)return n.handlers.reject(t);this._retryEndpointUpdate(n)},_f.prototype._retryEndpointUpdate=function(e,t){mf.debug("_retryEndpointUpdate",e);var n=e.params,r=n.config.resendLimit;if(n.resendLimit="number"==typeof n.resendLimit?n.resendLimit:r,0<n.resendLimit--)return mf.debug("resending endpoint update "+n.event.eventId+" with "+n.resendLimit+" retry attempts remaining"),void(this._endpointBuffer.length?this._endpointBuffer.unshift(e):this._updateEndpoint(e));mf.warn("resending endpoint update "+n.event.eventId+" failed after "+n.config.resendLimit+" attempts"),this._endpointGenerating&&mf.error("Initial endpoint update failed. ")},_f.prototype._initClients=function(r){return df(this,void 0,void 0,function(){var t,n;return ff(this,function(e){return mf.debug("init clients"),this.pinpointClient&&this._config.credentials&&this._config.credentials.sessionToken===r.sessionToken&&this._config.credentials.identityId===r.identityId?mf.debug("no change for aws credentials, directly return from init"):(t=this._config.credentials?this._config.credentials.identityId:null,this._config.credentials=r,n=this._config.region,mf.debug("init clients with credentials",r),this.pinpointClient=new Rc({region:n,credentials:r,customUserAgent:E.getAmplifyUserAgent()}),this.pinpointClient.middlewareStack.addRelativeTo(function(t){return function(e){return delete e.request.headers["amz-sdk-invocation-id"],delete e.request.headers["amz-sdk-request"],t(e)}},{step:"finalizeRequest",relation:"after",toMiddleware:"retryMiddleware"}),this._bufferExists()&&t===r.identityId?this._updateBufferClient():this._initBuffer(),this._customizePinpointClientReq()),[2]})})},_f.prototype._bufferExists=function(){return this._buffer&&this._buffer instanceof uf},_f.prototype._initBuffer=function(){this._bufferExists()&&this._flushBuffer(),this._buffer=new uf(this.pinpointClient,this._config),this._endpointGenerating&&this._buffer.pause()},_f.prototype._updateBufferClient=function(){this._bufferExists()&&this._buffer.updateClient(this.pinpointClient)},_f.prototype._flushBuffer=function(){this._bufferExists()&&(this._buffer.flush(),this._buffer=null)},_f.prototype._resumeBuffer=function(){this._bufferExists()&&this._buffer.resume()},_f.prototype._customizePinpointClientReq=function(){},_f.prototype._getEndpointId=function(n){return df(this,void 0,void 0,function(){var t;return ff(this,function(e){switch(e.label){case 0:return[4,Xd.getItem(n)];case 1:return t=e.sent(),mf.debug("endpointId from cache",t,"type",typeof t),t||(t=m.v1(),Xd.setItem(n,t)),[2,t]}})})},_f.prototype._endpointRequest=function(e,t){var n=e.credentials,r=this._clientInfo||{},i=e.clientContext||{},o=e.endpoint||{},e={appVersion:r.appVersion,make:r.make,model:r.model,modelVersion:r.version,platform:r.platform},i=hf(i,["clientId","appTitle","appVersionName","appVersionCode","appPackageName"]),r=t.address?"android"===r.platform?"GCM":"APNS":void 0,t=pf(pf(pf({channelType:r,requestId:m.v1(),effectiveDate:(new Date).toISOString()},o),t),{attributes:pf(pf({},o.attributes),t.attributes),demographic:pf(pf(pf(pf({},e),i),o.demographic),t.demographic),location:pf(pf({},o.location),t.location),metrics:pf(pf({},o.metrics),t.metrics),user:{userId:t.userId||o.userId||n.identityId,userAttributes:pf(pf({},o.userAttributes),t.userAttributes)}}),t=(t.userId,t.userAttributes,t.name,t.session,t.eventId,t.immediate,hf(t,["userId","userAttributes","name","session","eventId","immediate"]));return E.JS.transferKeyToUpperCase(t,[],["metrics","userAttributes","attributes"])},_f.prototype._eventError=function(e){mf.error("record event failed.",e),mf.warn('Please ensure you have updated your Pinpoint IAM Policy with the Action: "mobiletargeting:PutEvents" in order to record events')},_f.prototype._getCredentials=function(){return df(this,void 0,void 0,function(){var t;return ff(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,E.Credentials.get()];case 1:return(t=e.sent())?(mf.debug("set credentials for analytics",t),[2,E.Credentials.shear(t)]):[2,null];case 2:return t=e.sent(),mf.debug("ensure credentials error",t),[2,null];case 3:return[2]}})})},_f.category="Analytics",_f.providerName="AWSPinpoint",_f);function _f(e){this._endpointGenerating=!0,this._endpointUpdateInProgress=!1,this._buffer=null,this._endpointBuffer=[],this._config=e||{},this._config.bufferSize=this._config.bufferSize||1e3,this._config.flushSize=this._config.flushSize||100,this._config.flushInterval=this._config.flushInterval||5e3,this._config.resendLimit=this._config.resendLimit||5,this._clientInfo=E.ClientDevice.clientInfo()}var Ef=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},If=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(Ef(arguments[t]));return e},Af=[],Pf=(Of.add=function(e,t,n){Tf(e,t).set(n)},Of.remove=function(e,t){Tf(e,t).remove()},Of.prototype.set=function(n){var r=this;this.context[this.methodName]=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return n(r._originalMethod.apply(r,If(e)))}},Of.prototype.remove=function(){this.context[this.methodName]=this._originalMethod},Of);function Of(e,t){this.context=e,this.methodName=t,this._originalMethod=e[t].bind(e)}function Tf(t,n){var e=Af.filter(function(e){return e.context===t&&e.methodName===n})[0];return e||(e=new Pf(t,n),Af.push(e)),e}var kf=function(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{o(u.next(e))}catch(e){t(e)}}function i(e){try{o(u.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,i)}o((u=u.apply(e,s||[])).next())})},xf=function(n,r){var i,o,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,o&&(s=2&t[0]?o.return:t[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,t[1])).done)return s;switch(o=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,o=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],o=0}finally{i=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},Nf=new E.ConsoleLogger("PageViewTracker"),Lf="aws-amplify-analytics-prevUrl",Mf={enable:!1,provider:"AWSPinpoint",getUrl:function(){return E.JS.browserOrNode().isBrowser?window.location.origin+window.location.pathname:""}},Rf=(Uf.prototype.configure=function(e){return Object.assign(this._config,e),"SPA"===this._config.type&&this._pageViewTrackSPA(),this._config},Uf.prototype._isSameUrl=function(){return sessionStorage.getItem(Lf)===this._config.getUrl()&&(Nf.debug("the url is same"),!0)},Uf.prototype._pageViewTrackDefault=function(){return kf(this,void 0,void 0,function(){var t,n;return xf(this,function(e){switch(e.label){case 0:return E.JS.browserOrNode().isBrowser&&window.addEventListener&&window.sessionStorage?(t=this._config.getUrl(),"function"!=typeof this._config.attributes?[3,2]:[4,this._config.attributes()]):(Nf.debug("not in the supported web enviroment"),[2]);case 1:return n=e.sent(),[3,3];case 2:n=this._config.attributes,e.label=3;case 3:return n=Object.assign({url:t},n),this._config.enable&&!this._isSameUrl()&&(this._tracker({name:this._config.eventName||"pageView",attributes:n},this._config.provider).catch(function(e){Nf.debug("Failed to record the page view event",e)}),sessionStorage.setItem(Lf,t)),[2]}})})},Uf.prototype._trackFunc=function(){return kf(this,void 0,void 0,function(){var t,n;return xf(this,function(e){switch(e.label){case 0:return E.JS.browserOrNode().isBrowser&&window.addEventListener&&history.pushState&&window.sessionStorage?(t=this._config.getUrl(),"function"!=typeof this._config.attributes?[3,2]:[4,this._config.attributes()]):(Nf.debug("not in the supported web enviroment"),[2]);case 1:return n=e.sent(),[3,3];case 2:n=this._config.attributes,e.label=3;case 3:return n=Object.assign({url:t},n),this._isSameUrl()||(this._tracker({name:this._config.eventName||"pageView",attributes:n},this._config.provider).catch(function(e){Nf.debug("Failed to record the page view event",e)}),sessionStorage.setItem(Lf,t)),[2]}})})},Uf.prototype._pageViewTrackSPA=function(){E.JS.browserOrNode().isBrowser&&window.addEventListener&&history.pushState?this._config.enable&&!this._hasEnabled?(Pf.add(history,"pushState",this._trackFunc),Pf.add(history,"replaceState",this._trackFunc),window.addEventListener("popstate",this._trackFunc),this._trackFunc(),this._hasEnabled=!0):(Pf.remove(history,"pushState"),Pf.remove(history,"replaceState"),window.removeEventListener("popstate",this._trackFunc),this._hasEnabled=!1):Nf.debug("not in the supported web enviroment")},Uf);function Uf(e,t){Nf.debug("initialize pageview tracker with opts",t),this._config=Object.assign({},Mf,t),this._tracker=e,this._hasEnabled=!1,this._trackFunc=this._trackFunc.bind(this),"SPA"===this._config.type?this._pageViewTrackSPA():this._pageViewTrackDefault()}var Jd=E.JS.browserOrNode().isBrowser&&window.Element?window.Element.prototype:null,Df=Jd?Jd.matches||Jd.matchesSelector||Jd.webkitMatchesSelector||Jd.mozMatchesSelector||Jd.msMatchesSelector||Jd.oMatchesSelector:null;function Ff(e,t){if(e&&1===e.nodeType&&t){if("string"==typeof t||1===t.nodeType)return e===t||jf(e,t);if("length"in t)for(var n,r=0;n=t[r];r++)if(e===n||jf(e,n))return 1}}function jf(e,t){if("string"!=typeof t)return!1;if(Df)return Df.call(e,t);for(var n,r=e.parentNode.querySelectorAll(t),i=0;n=r[i];i++)if(n===e)return!0;return!1}function Bf(e,t,n){if(void 0===n&&(n=!1),e&&1===e.nodeType&&t)for(var r,i=(n?[e]:[]).concat(function(e){for(var t=[],n=e;n&&n.parentNode&&1===n.parentNode.nodeType;)n=n.parentNode,t.push(n);return t}(e)),o=0;r=i[o];o++)if(Ff(r,t))return r}function Vf(e,t,o,s,a){void 0===a&&(a={});function n(e){var t;if(a.composed&&"function"==typeof e.composedPath)for(var n,r=e.composedPath(),i=0;n=r[i];i++)1===n.nodeType&&Ff(n,o)&&(t=n);else t=Bf(e.target,o,!0);t&&s.call(t,e,t)}return e.addEventListener(t,n,a.useCapture),{destroy:function(){e.removeEventListener(t,n,a.useCapture)}}}var zf=function(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{o(u.next(e))}catch(e){t(e)}}function i(e){try{o(u.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,i)}o((u=u.apply(e,s||[])).next())})},qf=function(n,r){var i,o,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,o&&(s=2&t[0]?o.return:t[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,t[1])).done)return s;switch(o=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,o=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],o=0}finally{i=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},Kf=new E.ConsoleLogger("EventTracker"),Hf={enable:!1,events:["click"],selectorPrefix:"data-amplify-analytics-",provider:"AWSPinpoint"},Gd=(Gf.prototype.configure=function(e){var t,n=this;return Object.assign(this._config,e),this._config.enable?this._config.enable&&0===Object.keys(this._delegates).length&&(t="["+this._config.selectorPrefix+"on]",this._config.events.forEach(function(e){n._delegates[e]=Vf(document,e,t,n._trackFunc,{composed:!0,useCapture:!0})})):(Object.keys(this._delegates).forEach(function(e){"function"==typeof n._delegates[e].destroy&&n._delegates[e].destroy()}),this._delegates={}),this._config},Gf.prototype._trackFunc=function(s,a){return zf(this,void 0,void 0,function(){var t,n,r,i,o;return qf(this,function(e){switch(e.label){case 0:return t={},n=a.getAttribute(this._config.selectorPrefix+"on").split(/\s*,\s*/),r=a.getAttribute(this._config.selectorPrefix+"name"),(i=a.getAttribute(this._config.selectorPrefix+"attrs"))&&i.split(/\s*,\s*/).forEach(function(e){e=e.trim().split(/\s*:\s*/);t[e[0]]=e[1]}),"function"!=typeof this._config.attributes?[3,2]:[4,this._config.attributes()];case 1:return o=e.sent(),[3,3];case 2:o=this._config.attributes,e.label=3;case 3:return(o=Object.assign({type:s.type,target:s.target.localName+" with id "+s.target.id},o,t),Kf.debug("events needed to be recorded",n),Kf.debug("attributes needed to be attached",t),n.indexOf(s.type)<0)?(Kf.debug("event "+s.type+" is not selected to be recorded"),[2]):(this._tracker({name:r||"event",attributes:o},this._config.provider).catch(function(e){Kf.debug("Failed to record the "+s.type+" event', "+e)}),[2])}})})},Gf);function Gf(e,t){E.JS.browserOrNode().isBrowser&&window.addEventListener?(this._config=Object.assign({},Hf,t),this._tracker=e,this._delegates={},this._trackFunc=this._trackFunc.bind(this),Kf.debug("initialize pageview tracker with opts",this._config),this.configure(this._config)):Kf.debug("not in the supported web environment")}var Wf=function(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{o(u.next(e))}catch(e){t(e)}}function i(e){try{o(u.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,i)}o((u=u.apply(e,s||[])).next())})},$f=function(n,r){var i,o,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,o&&(s=2&t[0]?o.return:t[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,t[1])).done)return s;switch(o=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,o=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],o=0}finally{i=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},Yf=new E.ConsoleLogger("SessionTracker"),Jf={enable:!1,provider:"AWSPinpoint"},Zf=!1,Jd=(Qf.prototype._envCheck=function(){if(!E.JS.browserOrNode().isBrowser)return!1;if(!document||!document.addEventListener)return Yf.debug("not in the supported web environment"),!1;if(void 0!==document.hidden)this._hidden="hidden",this._visibilityChange="visibilitychange";else if(void 0!==document.msHidden)this._hidden="msHidden",this._visibilityChange="msvisibilitychange";else{if(void 0===document.webkitHidden)return Yf.debug("not in the supported web environment"),!1;this._hidden="webkitHidden",this._visibilityChange="webkitvisibilitychange"}return!0},Qf.prototype._trackFunc=function(){return Wf(this,void 0,void 0,function(){var t;return $f(this,function(e){switch(e.label){case 0:return"function"!=typeof this._config.attributes?[3,2]:[4,this._config.attributes()];case 1:return t=e.sent(),[3,3];case 2:t=this._config.attributes,e.label=3;case 3:return t=Object.assign({},t),document.visibilityState===this._hidden?this._tracker({name:"_session.stop",attributes:t},this._config.provider).catch(function(e){Yf.debug("record session stop event failed.",e)}):this._tracker({name:"_session.start",attributes:t},this._config.provider).catch(function(e){Yf.debug("record session start event failed.",e)}),[2]}})})},Qf.prototype._trackBeforeUnload=function(e){var t=this;("function"==typeof this._config.attributes?Promise.resolve(this._config.attributes()):Promise.resolve(this._config.attributes)).then(function(e){e=Object.assign({},e);t._tracker({name:"_session.stop",attributes:e,immediate:!0},t._config.provider).catch(function(e){Yf.debug("record session stop event failed.",e)})})},Qf.prototype._sendInitialEvent=function(){return Wf(this,void 0,void 0,function(){var t;return $f(this,function(e){switch(e.label){case 0:return Zf?(Yf.debug("the start session has been sent when the page is loaded"),[2]):(Zf=!0,"function"!=typeof this._config.attributes?[3,2]:[4,this._config.attributes()]);case 1:return t=e.sent(),[3,3];case 2:t=this._config.attributes,e.label=3;case 3:return t=Object.assign({},t),this._tracker({name:"_session.start",attributes:t},this._config.provider).catch(function(e){Yf.debug("record session start event failed.",e)}),[2]}})})},Qf.prototype.configure=function(e){return this._envCheck()&&(Object.assign(this._config,e),this._config.enable&&!this._hasEnabled?(this._sendInitialEvent(),document.addEventListener(this._visibilityChange,this._trackFunc,!1),window.addEventListener("beforeunload",this._trackBeforeUnload,!1),this._hasEnabled=!0):!this._config.enable&&this._hasEnabled&&(document.removeEventListener(this._visibilityChange,this._trackFunc,!1),window.removeEventListener("beforeunload",this._trackBeforeUnload,!1),this._hasEnabled=!1)),this._config},Qf);function Qf(e,t){this._config=Object.assign({},Jf,t),this._tracker=e,this._hasEnabled=!1,this._trackFunc=this._trackFunc.bind(this),this._trackBeforeUnload=this._trackBeforeUnload.bind(this),this.configure(this._config)}var Xf=function(){return(Xf=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},eh=function(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{o(u.next(e))}catch(e){t(e)}}function i(e){try{o(u.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,i)}o((u=u.apply(e,s||[])).next())})},th=function(n,r){var i,o,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,o&&(s=2&t[0]?o.return:t[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,t[1])).done)return s;switch(o=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,o=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],o=0}finally{i=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},nh=new E.ConsoleLogger("AnalyticsClass"),rh="undefined"!=typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("amplify_default"):"@@amplify_default",ih={pageView:Rf,event:Gd,session:Jd},oh=null,Jd=(sh.prototype.getModuleName=function(){return"Analytics"},sh.prototype.configure=function(e){var n=this;if(!e)return this._config;nh.debug("configure Analytics",e);var t=E.Parser.parseMobilehubConfig(e);return this._config=Object.assign({},this._config,t.Analytics,e),this._config.disabled&&(this._disabled=!0),void 0===this._config.autoSessionRecord&&(this._config.autoSessionRecord=!0),this._pluggables.forEach(function(e){var t="AWSPinpoint"!==e.getProviderName()||n._config.AWSPinpoint?n._config[e.getProviderName()]:n._config;e.configure(Xf({disabled:n._config.disabled,autoSessionRecord:n._config.autoSessionRecord},t))}),0===this._pluggables.length&&this.addPluggable(new Cf),E.Hub.dispatch("analytics",{event:"configured",data:null,message:"The Analytics category has been configured successfully"},"Analytics",rh),nh.debug("current configuration",this._config),this._config},sh.prototype.addPluggable=function(e){if(e&&"Analytics"===e.getCategory()){this._pluggables.push(e);var t="AWSPinpoint"!==e.getProviderName()||this._config.AWSPinpoint?this._config[e.getProviderName()]:this._config,t=Xf({disabled:this._config.disabled},t);return e.configure(t),t}},sh.prototype.getPluggable=function(e){for(var t=0;t<this._pluggables.length;t+=1){var n=this._pluggables[t];if(n.getProviderName()===e)return n}return nh.debug("No plugin found with providerName",e),null},sh.prototype.removePluggable=function(e){for(var t=0;t<this._pluggables.length&&this._pluggables[t].getProviderName()!==e;)t+=1;t===this._pluggables.length?nh.debug("No plugin found with providerName",e):this._pluggables.splice(t,t+1)},sh.prototype.disable=function(){this._disabled=!0},sh.prototype.enable=function(){this._disabled=!1},sh.prototype.startSession=function(n){return eh(this,void 0,void 0,function(){var t;return th(this,function(e){return t={event:{name:"_session.start"},provider:n},[2,this._sendEvent(t)]})})},sh.prototype.stopSession=function(n){return eh(this,void 0,void 0,function(){var t;return th(this,function(e){return t={event:{name:"_session.stop"},provider:n},[2,this._sendEvent(t)]})})},sh.prototype.record=function(n,r,i){return eh(this,void 0,void 0,function(){var t;return th(this,function(e){return t=null,t="string"==typeof n?{event:{name:n,attributes:r,metrics:i},provider:"AWSPinpoint"}:{event:n,provider:r},[2,this._sendEvent(t)]})})},sh.prototype.updateEndpoint=function(n,r){return eh(this,void 0,void 0,function(){var t;return th(this,function(e){return t=Xf(Xf({},n),{name:"_update_endpoint"}),[2,this.record(t,r)]})})},sh.prototype._sendEvent=function(r){var e=this;if(this._disabled)return nh.debug("Analytics has been disabled"),Promise.resolve();var i=r.provider||"AWSPinpoint";return new Promise(function(t,n){e._pluggables.forEach(function(e){e.getProviderName()===i&&e.record(r,{resolve:t,reject:n})})})},sh.prototype.autoTrack=function(e,t){var n;ih[e]?("session"===e&&(this._config.autoSessionRecord=t.enable),(n=this._trackers[e])?n.configure(t):this._trackers[e]=new ih[e](this.record,t)):nh.debug("invalid tracker type")},sh);function sh(){this._config={},this._pluggables=[],this._disabled=!1,this._trackers={},(oh=this).record=this.record.bind(this),E.Hub.listen("auth",lh),E.Hub.listen("storage",lh),E.Hub.listen("analytics",lh)}var ah=!1,uh=!1,ch=!1,lh=function(e){var t=e.channel,n=e.payload;switch(nh.debug("on hub capsule "+t,n),t){case"auth":dh(n);break;case"storage":ph(n);break;case"analytics":fh(n)}},ph=function(e){var t=e.data,e=t.attrs,t=t.metrics;e&&ch&&oh.record({name:"Storage",attributes:e,metrics:t}).catch(function(e){nh.debug("Failed to send the storage event automatically",e)})},dh=function(e){e=e.event;if(e){var t=function(n){return eh(void 0,void 0,void 0,function(){var t;return th(this,function(e){switch(e.label){case 0:if(!uh||!ch)return[3,4];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,oh.record({name:"_userauth."+n})];case 2:return[2,e.sent()];case 3:return t=e.sent(),nh.debug("Failed to send the "+n+" event automatically",t),[3,4];case 4:return[2]}})})};switch(e){case"signIn":return t("sign_in");case"signUp":return t("sign_up");case"signOut":return t("sign_out");case"signIn_failure":return t("auth_fail");case"configured":(uh=!0)&&ch&&hh()}}},fh=function(e){e=e.event;e&&"pinpointProvider_configured"===e&&(ch=!0,uh&&ch&&hh())},hh=function(){var e=oh.configure();!ah&&e.autoSessionRecord&&(oh.updateEndpoint({immediate:!0}).catch(function(e){nh.debug("Failed to update the endpoint",e)}),ah=!0),oh.autoTrack("session",{enable:e.autoSessionRecord})},gh=new Jd;E.Amplify.register(gh);var mh=(yh.fromNumber=function(e){if(0x8000000000000000<e||e<-0x8000000000000000)throw new Error(e+" is too large (or, if negative, too small) to represent as an Int64");for(var t=new Uint8Array(8),n=7,r=Math.abs(Math.round(e));-1<n&&0<r;n--,r/=256)t[n]=r;return e<0&&vh(t),new yh(t)},yh.prototype.valueOf=function(){var e=this.bytes.slice(0),t=128&e[0];return t&&vh(e),parseInt(Xu(e),16)*(t?-1:1)},yh.prototype.toString=function(){return String(this.valueOf())},yh);function yh(e){if(8!==(this.bytes=e).byteLength)throw new Error("Int64 buffers must be exactly 8 bytes")}function vh(e){for(var t=0;t<8;t++)e[t]^=255;for(t=7;-1<t&&(e[t]++,0===e[t]);t--);}var bh=(Sh.prototype.format=function(e){var t,n,r,i,o=[];try{for(var s=G(Object.keys(e)),a=s.next();!a.done;a=s.next()){var u=a.value,c=this.fromUtf8(u);o.push(Uint8Array.from([c.byteLength]),c,this.formatHeaderValue(e[u]))}}catch(e){t={error:e}}finally{try{a&&!a.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}var l=new Uint8Array(o.reduce(function(e,t){return e+t.byteLength},0)),p=0;try{for(var d=G(o),f=d.next();!f.done;f=d.next()){var h=f.value;l.set(h,p),p+=h.byteLength}}catch(e){r={error:e}}finally{try{f&&!f.done&&(i=d.return)&&i.call(d)}finally{if(r)throw r.error}}return l},Sh.prototype.formatHeaderValue=function(e){switch(e.type){case"boolean":return Uint8Array.from([e.value?0:1]);case"byte":return Uint8Array.from([2,e.value]);case"short":var t=new DataView(new ArrayBuffer(3));return t.setUint8(0,3),t.setInt16(1,e.value,!1),new Uint8Array(t.buffer);case"integer":var n=new DataView(new ArrayBuffer(5));return n.setUint8(0,4),n.setInt32(1,e.value,!1),new Uint8Array(n.buffer);case"long":n=new Uint8Array(9);return n[0]=5,n.set(e.value.bytes,1),n;case"binary":var r=new DataView(new ArrayBuffer(3+e.value.byteLength));r.setUint8(0,6),r.setUint16(1,e.value.byteLength,!1);var i=new Uint8Array(r.buffer);return i.set(e.value,3),i;case"string":r=this.fromUtf8(e.value),i=new DataView(new ArrayBuffer(3+r.byteLength));i.setUint8(0,7),i.setUint16(1,r.byteLength,!1);i=new Uint8Array(i.buffer);return i.set(r,3),i;case"timestamp":var o=new Uint8Array(9);return o[0]=8,o.set(mh.fromNumber(e.value.valueOf()).bytes,1),o;case"uuid":if(!kh.test(e.value))throw new Error("Invalid UUID received: "+e.value);o=new Uint8Array(17);return o[0]=9,o.set(function(e){if(e.length%2!=0)throw new Error("Hex encoded strings must have an even number length");for(var t=new Uint8Array(e.length/2),n=0;n<e.length;n+=2){var r=e.substr(n,2).toLowerCase();if(!(r in Ju))throw new Error("Cannot decode unrecognized sequence "+r+" as hexadecimal");t[n/2]=Ju[r]}return t}(e.value.replace(/\-/g,"")),1),o}},Sh.prototype.parse=function(e){for(var t={},n=0;n<e.byteLength;){var r=e.getUint8(n++),i=this.toUtf8(new Uint8Array(e.buffer,e.byteOffset+n,r));switch(n+=r,e.getUint8(n++)){case 0:t[i]={type:wh,value:!0};break;case 1:t[i]={type:wh,value:!1};break;case 2:t[i]={type:Ch,value:e.getInt8(n++)};break;case 3:t[i]={type:_h,value:e.getInt16(n,!1)},n+=2;break;case 4:t[i]={type:Eh,value:e.getInt32(n,!1)},n+=4;break;case 5:t[i]={type:Ih,value:new mh(new Uint8Array(e.buffer,e.byteOffset+n,8))},n+=8;break;case 6:var o=e.getUint16(n,!1);n+=2,t[i]={type:Ah,value:new Uint8Array(e.buffer,e.byteOffset+n,o)},n+=o;break;case 7:var s=e.getUint16(n,!1);n+=2,t[i]={type:Ph,value:this.toUtf8(new Uint8Array(e.buffer,e.byteOffset+n,s))},n+=s;break;case 8:t[i]={type:Oh,value:new Date(new mh(new Uint8Array(e.buffer,e.byteOffset+n,8)).valueOf())},n+=8;break;case 9:s=new Uint8Array(e.buffer,e.byteOffset+n,16);n+=16,t[i]={type:Th,value:Xu(s.subarray(0,4))+"-"+Xu(s.subarray(4,6))+"-"+Xu(s.subarray(6,8))+"-"+Xu(s.subarray(8,10))+"-"+Xu(s.subarray(10))};break;default:throw new Error("Unrecognized header type tag")}}return t},Sh);function Sh(e,t){this.toUtf8=e,this.fromUtf8=t}(Jd={})[Jd.boolTrue=0]="boolTrue",Jd[Jd.boolFalse=1]="boolFalse",Jd[Jd.byte=2]="byte",Jd[Jd.short=3]="short",Jd[Jd.integer=4]="integer",Jd[Jd.long=5]="long",Jd[Jd.byteArray=6]="byteArray",Jd[Jd.string=7]="string",Jd[Jd.timestamp=8]="timestamp",Jd[Jd.uuid=9]="uuid";var wh="boolean",Ch="byte",_h="short",Eh="integer",Ih="long",Ah="binary",Ph="string",Oh="timestamp",Th="uuid",kh=/^[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}$/;var xh=(Nh.prototype.marshall=function(e){var t=e.headers,n=e.body,r=this.headerMarshaller.format(t),i=r.byteLength+n.byteLength+16,o=new Uint8Array(i),e=new DataView(o.buffer,o.byteOffset,o.byteLength),t=new l.Crc32;return e.setUint32(0,i,!1),e.setUint32(4,r.byteLength,!1),e.setUint32(8,t.update(o.subarray(0,8)).digest(),!1),o.set(r,12),o.set(n,r.byteLength+12),e.setUint32(i-4,t.update(o.subarray(8,i-4)).digest(),!1),o},Nh.prototype.unmarshall=function(e){var t=function(e){var t=e.byteLength,n=e.byteOffset,r=e.buffer;if(t<16)throw new Error("Provided message too short to accommodate event stream message overhead");var i=(a=new DataView(r,n,t)).getUint32(0,!1);if(t!==i)throw new Error("Reported message length does not match received message length");var o=a.getUint32(4,!1),s=a.getUint32(8,!1),e=a.getUint32(t-4,!1),a=(new l.Crc32).update(new Uint8Array(r,n,8));if(s!==a.digest())throw new Error("The prelude checksum specified in the message ("+s+") does not match the calculated CRC32 checksum ("+a.digest()+")");if(a.update(new Uint8Array(r,n+8,t-12)),e!==a.digest())throw new Error("The message checksum ("+a.digest()+") did not match the expected value of "+e);return{headers:new DataView(r,n+8+4,o),body:new Uint8Array(r,n+8+4+o,i-o-16)}}(e),e=t.headers,t=t.body;return{headers:this.headerMarshaller.parse(e),body:t}},Nh.prototype.formatHeaders=function(e){return this.headerMarshaller.format(e)},Nh);function Nh(e,t){this.headerMarshaller=new bh(e,t)}function Lh(s){var a=0,u=0,c=null,l=null,e={};return e[Symbol.asyncIterator]=function(){return J(this,arguments,function(){var t,n,r,i,o;return H(this,function(e){switch(e.label){case 0:t=s[Symbol.asyncIterator](),e.label=1;case 1:return[4,Y(t.next())];case 2:return i=e.sent(),n=i.value,i.done?a?[3,4]:[4,Y(void 0)]:[3,10];case 3:return[2,e.sent()];case 4:return a!==u?[3,7]:[4,Y(c)];case 5:return[4,e.sent()];case 6:return e.sent(),[3,8];case 7:throw new Error("Truncated event message received.");case 8:return[4,Y(void 0)];case 9:return[2,e.sent()];case 10:o=n.length,r=0,e.label=11;case 11:if(!(r<o))return[3,15];if(!c){if(i=o-r,l=l||new Uint8Array(4),i=Math.min(4-u,i),l.set(n.slice(r,r+i),u),r+=i,(u+=i)<4)return[3,15];!function(e){if("number"!=typeof e)throw new Error("Attempted to allocate an event message where size was not a number: "+e);a=e,u=4,c=new Uint8Array(e),new DataView(c.buffer).setUint32(0,e,!1)}(new DataView(l.buffer).getUint32(0,!1)),l=null}return o=Math.min(a-u,o-r),c.set(n.slice(r,r+o),u),u+=o,r+=o,a&&a===u?[4,Y(c)]:[3,14];case 12:return[4,e.sent()];case 13:e.sent(),c=null,u=a=0,e.label=14;case 14:return[3,11];case 15:return[3,1];case 16:return[2]}})})},e}var Mh=(Rh.prototype.deserialize=function(e,t){var p,d,e=Lh(e);return p=e,d={eventMarshaller:this.eventMarshaller,deserializer:t,toUtf8:this.utfEncoder},(t={})[Symbol.asyncIterator]=function(){return J(this,arguments,function(){var t,n,r,i,o,s,a,u,c,l;return H(this,function(e){switch(e.label){case 0:e.trys.push([0,12,13,18]),t=Z(p),e.label=1;case 1:return[4,Y(t.next())];case 2:if((n=e.sent()).done)return[3,11];if(s=n.value,r=d.eventMarshaller.unmarshall(s),"error"!==(i=r.headers[":message-type"].value))return[3,3];throw(s=new Error(r.headers[":error-message"].value||"UnknownError")).name=r.headers[":error-code"].value,s;case 3:return"exception"!==i?[3,5]:(o=r.headers[":exception-type"].value,(a={})[o]=r,[4,Y(d.deserializer(a))]);case 4:if((s=e.sent()).$unknown)throw(a=new Error(d.toUtf8(r.body))).name=o,a;throw s[o];case 5:return"event"!==i?[3,9]:((u={})[r.headers[":event-type"].value]=r,[4,Y(d.deserializer(u))]);case 6:return(u=e.sent()).$unknown?[3,10]:[4,Y(u)];case 7:return[4,e.sent()];case 8:return e.sent(),[3,10];case 9:throw Error("Unrecognizable event type: "+r.headers[":event-type"].value);case 10:return[3,1];case 11:return[3,18];case 12:return c=e.sent(),c={error:c},[3,18];case 13:return e.trys.push([13,,16,17]),n&&!n.done&&(l=t.return)?[4,Y(l.call(t))]:[3,15];case 14:e.sent(),e.label=15;case 15:return[3,17];case 16:if(c)throw c.error;return[7];case 17:return[7];case 18:return[2]}})})},t},Rh.prototype.serialize=function(s,a){var u=this,e={};return e[Symbol.asyncIterator]=function(){return J(this,arguments,function(){var t,n,r,i,o;return H(this,function(e){switch(e.label){case 0:e.trys.push([0,7,8,13]),t=Z(s),e.label=1;case 1:return[4,Y(t.next())];case 2:return(n=e.sent()).done?[3,6]:(r=n.value,[4,Y(u.eventMarshaller.marshall(a(r)))]);case 3:return[4,e.sent()];case 4:e.sent(),e.label=5;case 5:return[3,1];case 6:return[3,13];case 7:return i=e.sent(),i={error:i},[3,13];case 8:return e.trys.push([8,,11,12]),n&&!n.done&&(o=t.return)?[4,Y(o.call(t))]:[3,10];case 9:e.sent(),e.label=10;case 10:return[3,12];case 11:if(i)throw i.error;return[7];case 12:return[7];case 13:return[4,Y(new Uint8Array(0))];case 14:return[4,e.sent()];case 15:return e.sent(),[2]}})})},e},Rh);function Rh(e){var t=e.utf8Encoder,e=e.utf8Decoder;this.eventMarshaller=new xh(t,e),this.utfEncoder=t}var Uh=(Dh.prototype.deserialize=function(e,t){e="function"==typeof e[Symbol.asyncIterator]?e:function(o){return J(this,arguments,function(){var t,n,r,i;return H(this,function(e){switch(e.label){case 0:n=t=!1,r=new Array,o.on("error",function(e){if(t=t||!0,e)throw e}),o.on("data",function(e){r.push(e)}),o.on("end",function(){t=!0}),e.label=1;case 1:return n?[3,6]:[4,Y(new Promise(function(e){return setTimeout(function(){return e(r.shift())},0)}))];case 2:return(i=e.sent())?[4,Y(i)]:[3,5];case 3:return[4,e.sent()];case 4:e.sent(),e.label=5;case 5:return n=t&&0===r.length,[3,1];case 6:return[2]}})})}(e);return this.universalMarshaller.deserialize(e,t)},Dh.prototype.serialize=function(e,t){t=this.universalMarshaller.serialize(e,t);if("function"==typeof u.Readable.from)return u.Readable.from(t);var r=t[Symbol.asyncIterator](),n=new u.Readable({autoDestroy:!0,objectMode:!0,read:function(){return K(this,void 0,void 0,function(){var n=this;return H(this,function(e){return r.next().then(function(e){var t=e.done,e=e.value;t?n.push(null):n.push(e)}).catch(function(e){n.destroy(e)}),[2]})})}});return n.on("error",function(){n.destroy()}),n.on("end",function(){n.destroy()}),n},Dh);function Dh(e){var t=e.utf8Encoder,e=e.utf8Decoder;this.eventMarshaller=new xh(t,e),this.universalMarshaller=new Mh({utf8Decoder:e,utf8Encoder:t})}var Fh,jh;function Bh(t){return t&&["provider"].find(function(e){return t.hasOwnProperty(e)})}function Vh(e){return void 0!==e.redirectSignIn}(Jd=Fh=Fh||{}).Cognito="COGNITO",Jd.Google="Google",Jd.Facebook="Facebook",Jd.Amazon="LoginWithAmazon",Jd.Apple="SignInWithApple",(Jd=jh=jh||{}).NoConfig="noConfig",Jd.MissingAuthConfig="missingAuthConfig",Jd.EmptyUsername="emptyUsername",Jd.InvalidUsername="invalidUsername",Jd.EmptyPassword="emptyPassword",Jd.EmptyCode="emptyCode",Jd.SignUpError="signUpError",Jd.NoMFA="noMFA",Jd.InvalidMFA="invalidMFA",Jd.EmptyChallengeResponse="emptyChallengeResponse",Jd.NoUserSession="noUserSession",Jd.Default="default";var zh,qh=function(){function e(e){var t=e||{},n=t.ValidationData,r=t.Username,i=t.Password,e=t.AuthParameters,t=t.ClientMetadata;this.validationData=n||{},this.authParameters=e||{},this.clientMetadata=t||{},this.username=r,this.password=i}var t=e.prototype;return t.getUsername=function(){return this.username},t.getPassword=function(){return this.password},t.getValidationData=function(){return this.validationData},t.getAuthParameters=function(){return this.authParameters},t.getClientMetadata=function(){return this.clientMetadata},e}();if(!(zh=!(zh=!(zh="undefined"!=typeof window&&window.crypto?window.crypto:zh)&&"undefined"!=typeof window&&window.msCrypto?window.msCrypto:zh)&&void 0!==jt&&jt.crypto?jt.crypto:zh)&&"function"==typeof require)try{zh=require("crypto")}catch(e){}var Kh=function(){function r(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:4*e.length}var e=r.prototype;return e.random=function(e){for(var t=[],n=0;n<e;n+=4)t.push(function(){if(zh){if("function"==typeof zh.getRandomValues)try{return zh.getRandomValues(new Uint32Array(1))[0]}catch(e){}if("function"==typeof zh.randomBytes)try{return zh.randomBytes(4).readInt32LE()}catch(e){}}throw new Error("Native crypto module could not be used to get secure random number.")}());return new r(t,e)},e.toString=function(){return function(e){for(var t=e.words,n=e.sigBytes,r=[],i=0;i<n;i++){var o=t[i>>>2]>>>24-i%4*8&255;r.push((o>>>4).toString(16)),r.push((15&o).toString(16))}return r.join("")}(this)},r}();function Hh(e,t){null!=e&&this.fromString(e,t)}function Gh(){return new Hh(null)}Jd="undefined"!=typeof navigator,jt=Jd&&"Microsoft Internet Explorer"==navigator.appName?(Hh.prototype.am=function(e,t,n,r,i,o){for(var s=32767&t,a=t>>15;0<=--o;){var u=32767&this[e],c=this[e++]>>15,l=a*u+c*s;i=((u=s*u+((32767&l)<<15)+n[r]+(1073741823&i))>>>30)+(l>>>15)+a*c+(i>>>30),n[r++]=1073741823&u}return i},30):Jd&&"Netscape"!=navigator.appName?(Hh.prototype.am=function(e,t,n,r,i,o){for(;0<=--o;){var s=t*this[e++]+n[r]+i;i=Math.floor(s/67108864),n[r++]=67108863&s}return i},26):(Hh.prototype.am=function(e,t,n,r,i,o){for(var s=16383&t,a=t>>14;0<=--o;){var u=16383&this[e],c=this[e++]>>14,l=a*u+c*s;i=((u=s*u+((16383&l)<<14)+n[r]+i)>>28)+(l>>14)+a*c,n[r++]=268435455&u}return i},28);Hh.prototype.DB=jt,Hh.prototype.DM=(1<<jt)-1,Hh.prototype.DV=1<<jt;Hh.prototype.FV=Math.pow(2,52),Hh.prototype.F1=52-jt,Hh.prototype.F2=2*jt-52;for(var Wh="0123456789abcdefghijklmnopqrstuvwxyz",$h=new Array,Yh="0".charCodeAt(0),Jh=0;Jh<=9;++Jh)$h[Yh++]=Jh;for(Yh="a".charCodeAt(0),Jh=10;Jh<36;++Jh)$h[Yh++]=Jh;for(Yh="A".charCodeAt(0),Jh=10;Jh<36;++Jh)$h[Yh++]=Jh;function Zh(e){return Wh.charAt(e)}function Qh(e){var t=Gh();return t.fromInt(e),t}function Xh(e){var t,n=1;return 0!=(t=e>>>16)&&(e=t,n+=16),0!=(t=e>>8)&&(e=t,n+=8),0!=(t=e>>4)&&(e=t,n+=4),0!=(t=e>>2)&&(e=t,n+=2),0!=(t=e>>1)&&(e=t,n+=1),n}function eg(e){this.m=e,this.mp=e.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<e.DB-15)-1,this.mt2=2*e.t}eg.prototype.convert=function(e){var t=Gh();return e.abs().dlShiftTo(this.m.t,t),t.divRemTo(this.m,null,t),e.s<0&&0<t.compareTo(Hh.ZERO)&&this.m.subTo(t,t),t},eg.prototype.revert=function(e){var t=Gh();return e.copyTo(t),this.reduce(t),t},eg.prototype.reduce=function(e){for(;e.t<=this.mt2;)e[e.t++]=0;for(var t=0;t<this.m.t;++t){var n=32767&e[t],r=n*this.mpl+((n*this.mph+(e[t]>>15)*this.mpl&this.um)<<15)&e.DM;for(e[n=t+this.m.t]+=this.m.am(0,r,e,t,0,this.m.t);e[n]>=e.DV;)e[n]-=e.DV,e[++n]++}e.clamp(),e.drShiftTo(this.m.t,e),0<=e.compareTo(this.m)&&e.subTo(this.m,e)},eg.prototype.mulTo=function(e,t,n){e.multiplyTo(t,n),this.reduce(n)},eg.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)},Hh.prototype.copyTo=function(e){for(var t=this.t-1;0<=t;--t)e[t]=this[t];e.t=this.t,e.s=this.s},Hh.prototype.fromInt=function(e){this.t=1,this.s=e<0?-1:0,0<e?this[0]=e:e<-1?this[0]=e+this.DV:this.t=0},Hh.prototype.fromString=function(e,t){var n;if(16==t)n=4;else if(8==t)n=3;else if(2==t)n=1;else if(32==t)n=5;else{if(4!=t)throw new Error("Only radix 2, 4, 8, 16, 32 are supported");n=2}this.t=0,this.s=0;for(var r=e.length,i=!1,o=0;0<=--r;){var s=(s=r,null==(s=$h[e.charCodeAt(s)])?-1:s);s<0?"-"==e.charAt(r)&&(i=!0):(i=!1,0==o?this[this.t++]=s:o+n>this.DB?(this[this.t-1]|=(s&(1<<this.DB-o)-1)<<o,this[this.t++]=s>>this.DB-o):this[this.t-1]|=s<<o,(o+=n)>=this.DB&&(o-=this.DB))}this.clamp(),i&&Hh.ZERO.subTo(this,this)},Hh.prototype.clamp=function(){for(var e=this.s&this.DM;0<this.t&&this[this.t-1]==e;)--this.t},Hh.prototype.dlShiftTo=function(e,t){for(var n=this.t-1;0<=n;--n)t[n+e]=this[n];for(n=e-1;0<=n;--n)t[n]=0;t.t=this.t+e,t.s=this.s},Hh.prototype.drShiftTo=function(e,t){for(var n=e;n<this.t;++n)t[n-e]=this[n];t.t=Math.max(this.t-e,0),t.s=this.s},Hh.prototype.lShiftTo=function(e,t){for(var n=e%this.DB,r=this.DB-n,i=(1<<r)-1,o=Math.floor(e/this.DB),s=this.s<<n&this.DM,a=this.t-1;0<=a;--a)t[a+o+1]=this[a]>>r|s,s=(this[a]&i)<<n;for(a=o-1;0<=a;--a)t[a]=0;t[o]=s,t.t=this.t+o+1,t.s=this.s,t.clamp()},Hh.prototype.rShiftTo=function(e,t){t.s=this.s;var n=Math.floor(e/this.DB);if(n>=this.t)t.t=0;else{var r=e%this.DB,i=this.DB-r,o=(1<<r)-1;t[0]=this[n]>>r;for(var s=n+1;s<this.t;++s)t[s-n-1]|=(this[s]&o)<<i,t[s-n]=this[s]>>r;0<r&&(t[this.t-n-1]|=(this.s&o)<<i),t.t=this.t-n,t.clamp()}},Hh.prototype.subTo=function(e,t){for(var n=0,r=0,i=Math.min(e.t,this.t);n<i;)r+=this[n]-e[n],t[n++]=r&this.DM,r>>=this.DB;if(e.t<this.t){for(r-=e.s;n<this.t;)r+=this[n],t[n++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;n<e.t;)r-=e[n],t[n++]=r&this.DM,r>>=this.DB;r-=e.s}t.s=r<0?-1:0,r<-1?t[n++]=this.DV+r:0<r&&(t[n++]=r),t.t=n,t.clamp()},Hh.prototype.multiplyTo=function(e,t){var n=this.abs(),r=e.abs(),i=n.t;for(t.t=i+r.t;0<=--i;)t[i]=0;for(i=0;i<r.t;++i)t[i+n.t]=n.am(0,r[i],t,i,0,n.t);t.s=0,t.clamp(),this.s!=e.s&&Hh.ZERO.subTo(t,t)},Hh.prototype.squareTo=function(e){for(var t=this.abs(),n=e.t=2*t.t;0<=--n;)e[n]=0;for(n=0;n<t.t-1;++n){var r=t.am(n,t[n],e,2*n,0,1);(e[n+t.t]+=t.am(n+1,2*t[n],e,2*n+1,r,t.t-n-1))>=t.DV&&(e[n+t.t]-=t.DV,e[n+t.t+1]=1)}0<e.t&&(e[e.t-1]+=t.am(n,t[n],e,2*n,0,1)),e.s=0,e.clamp()},Hh.prototype.divRemTo=function(e,t,n){var r=e.abs();if(!(r.t<=0)){var i=this.abs();if(i.t<r.t)return null!=t&&t.fromInt(0),void(null!=n&&this.copyTo(n));null==n&&(n=Gh());var o=Gh(),s=this.s,a=e.s,e=this.DB-Xh(r[r.t-1]);0<e?(r.lShiftTo(e,o),i.lShiftTo(e,n)):(r.copyTo(o),i.copyTo(n));var u=o.t,c=o[u-1];if(0!=c){var i=c*(1<<this.F1)+(1<u?o[u-2]>>this.F2:0),l=this.FV/i,p=(1<<this.F1)/i,d=1<<this.F2,f=n.t,h=f-u,g=null==t?Gh():t;for(o.dlShiftTo(h,g),0<=n.compareTo(g)&&(n[n.t++]=1,n.subTo(g,n)),Hh.ONE.dlShiftTo(u,g),g.subTo(o,o);o.t<u;)o[o.t++]=0;for(;0<=--h;){var m=n[--f]==c?this.DM:Math.floor(n[f]*l+(n[f-1]+d)*p);if((n[f]+=o.am(0,m,n,h,0,u))<m)for(o.dlShiftTo(h,g),n.subTo(g,n);n[f]<--m;)n.subTo(g,n)}null!=t&&(n.drShiftTo(u,t),s!=a&&Hh.ZERO.subTo(t,t)),n.t=u,n.clamp(),0<e&&n.rShiftTo(e,n),s<0&&Hh.ZERO.subTo(n,n)}}},Hh.prototype.invDigit=function(){if(this.t<1)return 0;var e=this[0];if(0==(1&e))return 0;var t=3&e;return 0<(t=(t=(t=(t=t*(2-(15&e)*t)&15)*(2-(255&e)*t)&255)*(2-((65535&e)*t&65535))&65535)*(2-e*t%this.DV)%this.DV)?this.DV-t:-t},Hh.prototype.addTo=function(e,t){for(var n=0,r=0,i=Math.min(e.t,this.t);n<i;)r+=this[n]+e[n],t[n++]=r&this.DM,r>>=this.DB;if(e.t<this.t){for(r+=e.s;n<this.t;)r+=this[n],t[n++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;n<e.t;)r+=e[n],t[n++]=r&this.DM,r>>=this.DB;r+=e.s}t.s=r<0?-1:0,0<r?t[n++]=r:r<-1&&(t[n++]=this.DV+r),t.t=n,t.clamp()},Hh.prototype.toString=function(e){if(this.s<0)return"-"+this.negate().toString(e);var t;if(16==e)t=4;else if(8==e)t=3;else if(2==e)t=1;else if(32==e)t=5;else{if(4!=e)throw new Error("Only radix 2, 4, 8, 16, 32 are supported");t=2}var n,r=(1<<t)-1,i=!1,o="",s=this.t,a=this.DB-s*this.DB%t;if(0<s--)for(a<this.DB&&0<(n=this[s]>>a)&&(i=!0,o=Zh(n));0<=s;)a<t?(n=(this[s]&(1<<a)-1)<<t-a,n|=this[--s]>>(a+=this.DB-t)):(n=this[s]>>(a-=t)&r,a<=0&&(a+=this.DB,--s)),(i=0<n?!0:i)&&(o+=Zh(n));return i?o:"0"},Hh.prototype.negate=function(){var e=Gh();return Hh.ZERO.subTo(this,e),e},Hh.prototype.abs=function(){return this.s<0?this.negate():this},Hh.prototype.compareTo=function(e){var t=this.s-e.s;if(0!=t)return t;var n=this.t;if(0!=(t=n-e.t))return this.s<0?-t:t;for(;0<=--n;)if(0!=(t=this[n]-e[n]))return t;return 0},Hh.prototype.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+Xh(this[this.t-1]^this.s&this.DM)},Hh.prototype.mod=function(e){var t=Gh();return this.abs().divRemTo(e,null,t),this.s<0&&0<t.compareTo(Hh.ZERO)&&e.subTo(t,t),t},Hh.prototype.equals=function(e){return 0==this.compareTo(e)},Hh.prototype.add=function(e){var t=Gh();return this.addTo(e,t),t},Hh.prototype.subtract=function(e){var t=Gh();return this.subTo(e,t),t},Hh.prototype.multiply=function(e){var t=Gh();return this.multiplyTo(e,t),t},Hh.prototype.divide=function(e){var t=Gh();return this.divRemTo(e,t,null),t},Hh.prototype.modPow=function(e,t,n){var r,i=e.bitLength(),o=Qh(1),s=new eg(t);if(i<=0)return o;r=i<18?1:i<48?3:i<144?4:i<768?5:6;var a=new Array,u=3,c=r-1,l=(1<<r)-1;if(a[1]=s.convert(this),1<r){var p=Gh();for(s.sqrTo(a[1],p);u<=l;)a[u]=Gh(),s.mulTo(p,a[u-2],a[u]),u+=2}for(var d,f,h=e.t-1,g=!0,m=Gh(),i=Xh(e[h])-1;0<=h;){for(c<=i?d=e[h]>>i-c&l:(d=(e[h]&(1<<i+1)-1)<<c-i,0<h&&(d|=e[h-1]>>this.DB+i-c)),u=r;0==(1&d);)d>>=1,--u;if((i-=u)<0&&(i+=this.DB,--h),g)a[d].copyTo(o),g=!1;else{for(;1<u;)s.sqrTo(o,m),s.sqrTo(m,o),u-=2;0<u?s.sqrTo(o,m):(f=o,o=m,m=f),s.mulTo(m,a[d],o)}for(;0<=h&&0==(e[h]&1<<i);)s.sqrTo(o,m),f=o,o=m,m=f,--i<0&&(i=this.DB-1,--h)}return t=s.revert(o),n(null,t),t},Hh.ZERO=Qh(0),Hh.ONE=Qh(1);function tg(e){return d.Buffer.from((new Kh).random(e).toString(),"hex")}var ng=function(){function e(e){this.N=new Hh("FFFFFFFFFFFFFFFFC90FDAA22168C234C4C6628B80DC1CD129024E088A67CC74020BBEA63B139B22514A08798E3404DDEF9519B3CD3A431B302B0A6DF25F14374FE1356D6D51C245E485B576625E7EC6F44C42E9A637ED6B0BFF5CB6F406B7EDEE386BFB5A899FA5AE9F24117C4B1FE649286651ECE45B3DC2007CB8A163BF0598DA48361C55D39A69163FA8FD24CF5F83655D23DCA3AD961C62F356208552BB9ED529077096966D670C354E4ABC9804F1746C08CA18217C32905E462E36CE3BE39E772C180E86039B2783A2EC07A28FB5C55DF06F4C52C9DE2BCBF6955817183995497CEA956AE515D2261898FA051015728E5A8AAAC42DAD33170D04507A33A85521ABDF1CBA64ECFB850458DBEF0A8AEA71575D060C7DB3970F85A6E1E4C7ABF5AE8CDB0933D71E8C94E04A25619DCEE3D2261AD2EE6BF12FFA06D98A0864D87602733EC86A64521F2B18177B200CBBE117577A615D6C770988C0BAD946E208E24FA074E5AB3143DB5BFCE0FD108E4B82D120A93AD2CAFFFFFFFFFFFFFFFF",16),this.g=new Hh("2",16),this.k=new Hh(this.hexHash("00"+this.N.toString(16)+"0"+this.g.toString(16)),16),this.smallAValue=this.generateRandomSmallA(),this.getLargeAValue(function(){}),this.infoBits=d.Buffer.from("Caldera Derived Key","utf8"),this.poolName=e}var t=e.prototype;return t.getSmallAValue=function(){return this.smallAValue},t.getLargeAValue=function(n){var r=this;this.largeAValue?n(null,this.largeAValue):this.calculateA(this.smallAValue,function(e,t){e&&n(e,null),r.largeAValue=t,n(null,r.largeAValue)})},t.generateRandomSmallA=function(){return new Hh(tg(128).toString("hex"),16).mod(this.N)},t.generateRandomString=function(){return tg(40).toString("base64")},t.getRandomPassword=function(){return this.randomPassword},t.getSaltDevices=function(){return this.SaltToHashDevices},t.getVerifierDevices=function(){return this.verifierDevices},t.generateHashDevice=function(e,t,n){var r=this;this.randomPassword=this.generateRandomString();e=""+e+t+":"+this.randomPassword,t=this.hash(e),e=tg(16).toString("hex");this.SaltToHashDevices=this.padHex(new Hh(e,16)),this.g.modPow(new Hh(this.hexHash(this.SaltToHashDevices+t),16),this.N,function(e,t){e&&n(e,null),r.verifierDevices=r.padHex(t),n(null,null)})},t.calculateA=function(e,n){var r=this;this.g.modPow(e,this.N,function(e,t){e&&n(e,null),t.mod(r.N).equals(Hh.ZERO)&&n(new Error("Illegal paramater. A mod N cannot be 0."),null),n(null,t)})},t.calculateU=function(e,t){return this.UHexHash=this.hexHash(this.padHex(e)+this.padHex(t)),new Hh(this.UHexHash,16)},t.hash=function(e){e=e instanceof d.Buffer?w.lib.WordArray.create(e):e,e=_(e).toString();return new Array(64-e.length).join("0")+e},t.hexHash=function(e){return this.hash(d.Buffer.from(e,"hex"))},t.computehkdf=function(e,t){var n=w.lib.WordArray.create(d.Buffer.concat([this.infoBits,d.Buffer.from(String.fromCharCode(1),"utf8")])),e=e instanceof d.Buffer?w.lib.WordArray.create(e):e,t=t instanceof d.Buffer?w.lib.WordArray.create(t):t,t=I(e,t),t=I(n,t);return d.Buffer.from(t.toString(),"hex").slice(0,16)},t.getPasswordAuthenticationKey=function(e,t,n,r,i){var o=this;if(n.mod(this.N).equals(Hh.ZERO))throw new Error("B cannot be zero.");if(this.UValue=this.calculateU(this.largeAValue,n),this.UValue.equals(Hh.ZERO))throw new Error("U cannot be zero.");t=""+this.poolName+e+":"+t,t=this.hash(t),t=new Hh(this.hexHash(this.padHex(r)+t),16);this.calculateS(t,n,function(e,t){e&&i(e,null);t=o.computehkdf(d.Buffer.from(o.padHex(t),"hex"),d.Buffer.from(o.padHex(o.UValue.toString(16)),"hex"));i(null,t)})},t.calculateS=function(n,r,i){var o=this;this.g.modPow(n,this.N,function(e,t){e&&i(e,null),r.subtract(o.k.multiply(t)).modPow(o.smallAValue.add(o.UValue.multiply(n)),o.N,function(e,t){e&&i(e,null),i(null,t.mod(o.N))})})},t.getNewPasswordRequiredChallengeUserAttributePrefix=function(){return"userAttributes."},t.padHex=function(e){e=e.toString(16);return e.length%2==1?e="0"+e:-1!=="89ABCDEFabcdef".indexOf(e[0])&&(e="00"+e),e},e}(),Jd=function(){function e(e){this.jwtToken=e||"",this.payload=this.decodePayload()}var t=e.prototype;return t.getJwtToken=function(){return this.jwtToken},t.getExpiration=function(){return this.payload.exp},t.getIssuedAt=function(){return this.payload.iat},t.decodePayload=function(){var e=this.jwtToken.split(".")[1];try{return JSON.parse(d.Buffer.from(e,"base64").toString("utf8"))}catch(e){return{}}},e}();function rg(e,t){return(rg=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ig=function(t){var e,n;function r(e){e=(void 0===e?{}:e).AccessToken;return t.call(this,e||"")||this}return n=t,(e=r).prototype=Object.create(n.prototype),rg(e.prototype.constructor=e,n),r}(Jd);function og(e,t){return(og=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var sg=function(t){var e,n;function r(e){e=(void 0===e?{}:e).IdToken;return t.call(this,e||"")||this}return n=t,(e=r).prototype=Object.create(n.prototype),og(e.prototype.constructor=e,n),r}(Jd),ag=function(){function e(e){e=(void 0===e?{}:e).RefreshToken;this.token=e||""}return e.prototype.getToken=function(){return this.token},e}(),ug=function(){function e(e){var t=void 0===e?{}:e,n=t.IdToken,r=t.RefreshToken,e=t.AccessToken,t=t.ClockDrift;if(null==e||null==n)throw new Error("Id token and Access Token must be present.");this.idToken=n,this.refreshToken=r,this.accessToken=e,this.clockDrift=void 0===t?this.calculateClockDrift():t}var t=e.prototype;return t.getIdToken=function(){return this.idToken},t.getRefreshToken=function(){return this.refreshToken},t.getAccessToken=function(){return this.accessToken},t.getClockDrift=function(){return this.clockDrift},t.calculateClockDrift=function(){return Math.floor(new Date/1e3)-Math.min(this.accessToken.getIssuedAt(),this.idToken.getIssuedAt())},t.isValid=function(){var e=Math.floor(new Date/1e3)-this.clockDrift;return e<this.accessToken.getExpiration()&&e<this.idToken.getExpiration()},e}(),cg=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],lg=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],pg=function(){function e(){}return e.prototype.getNowString=function(){var e=new Date,t=lg[e.getUTCDay()],n=cg[e.getUTCMonth()],r=e.getUTCDate(),i=e.getUTCHours();i<10&&(i="0"+i);var o=e.getUTCMinutes();o<10&&(o="0"+o);var s=e.getUTCSeconds();return t+" "+n+" "+r+" "+i+":"+o+":"+(s=s<10?"0"+s:s)+" UTC "+e.getUTCFullYear()},e}(),dg=function(){function e(e){var t=void 0===e?{}:e,e=t.Name,t=t.Value;this.Name=e||"",this.Value=t||""}var t=e.prototype;return t.getValue=function(){return this.Value},t.setValue=function(e){return this.Value=e,this},t.getName=function(){return this.Name},t.setName=function(e){return this.Name=e,this},t.toString=function(){return JSON.stringify(this)},t.toJSON=function(){return{Name:this.Name,Value:this.Value}},e}(),fg={},hg=function(){function e(){}return e.setItem=function(e,t){return fg[e]=t,fg[e]},e.getItem=function(e){return Object.prototype.hasOwnProperty.call(fg,e)?fg[e]:void 0},e.removeItem=function(e){return delete fg[e]},e.clear=function(){return fg={}},e}(),gg=function(){function e(){try{this.storageWindow=window.localStorage,this.storageWindow.setItem("aws.cognito.test-ls",1),this.storageWindow.removeItem("aws.cognito.test-ls")}catch(e){this.storageWindow=hg}}return e.prototype.getStorage=function(){return this.storageWindow},e}(),mg="undefined"!=typeof navigator?navigator.userAgent:"nodejs",yg=function(){function e(e){if(null==e||null==e.Username||null==e.Pool)throw new Error("Username and Pool information are required.");this.username=e.Username||"",this.pool=e.Pool,this.Session=null,this.client=e.Pool.client,this.signInUserSession=null,this.authenticationFlowType="USER_SRP_AUTH",this.storage=e.Storage||(new gg).getStorage(),this.keyPrefix="CognitoIdentityServiceProvider."+this.pool.getClientId(),this.userDataKey=this.keyPrefix+"."+this.username+".userData"}var t=e.prototype;return t.setSignInUserSession=function(e){this.clearCachedUserData(),this.signInUserSession=e,this.cacheTokens()},t.getSignInUserSession=function(){return this.signInUserSession},t.getUsername=function(){return this.username},t.getAuthenticationFlowType=function(){return this.authenticationFlowType},t.setAuthenticationFlowType=function(e){this.authenticationFlowType=e},t.initiateAuth=function(e,r){var i=this,t=e.getAuthParameters();t.USERNAME=this.username;e=0!==Object.keys(e.getValidationData()).length?e.getValidationData():e.getClientMetadata(),e={AuthFlow:"CUSTOM_AUTH",ClientId:this.pool.getClientId(),AuthParameters:t,ClientMetadata:e};this.getUserContextData()&&(e.UserContextData=this.getUserContextData()),this.client.request("InitiateAuth",e,function(e,t){if(e)return r.onFailure(e);var n=t.ChallengeName,e=t.ChallengeParameters;return"CUSTOM_CHALLENGE"===n?(i.Session=t.Session,r.customChallenge(e)):(i.signInUserSession=i.getCognitoUserSession(t.AuthenticationResult),i.cacheTokens(),r.onSuccess(i.signInUserSession))})},t.authenticateUser=function(e,t){return"USER_PASSWORD_AUTH"===this.authenticationFlowType?this.authenticateUserPlainUsernamePassword(e,t):"USER_SRP_AUTH"===this.authenticationFlowType||"CUSTOM_AUTH"===this.authenticationFlowType?this.authenticateUserDefaultAuth(e,t):t.onFailure(new Error("Authentication flow type is invalid."))},t.authenticateUserDefaultAuth=function(n,a){var o,u,c=this,l=new ng(this.pool.getUserPoolId().split("_")[1]),p=new pg,r={};null!=this.deviceKey&&(r.DEVICE_KEY=this.deviceKey),r.USERNAME=this.username,l.getLargeAValue(function(e,t){e&&a.onFailure(e),r.SRP_A=t.toString(16),"CUSTOM_AUTH"===c.authenticationFlowType&&(r.CHALLENGE_NAME="SRP_A");var s=0!==Object.keys(n.getValidationData()).length?n.getValidationData():n.getClientMetadata(),t={AuthFlow:c.authenticationFlowType,ClientId:c.pool.getClientId(),AuthParameters:r,ClientMetadata:s};c.getUserContextData(c.username)&&(t.UserContextData=c.getUserContextData(c.username)),c.client.request("InitiateAuth",t,function(e,r){if(e)return a.onFailure(e);var i=r.ChallengeParameters;c.username=i.USER_ID_FOR_SRP,o=new Hh(i.SRP_B,16),u=new Hh(i.SALT,16),c.getCachedDeviceKeyAndPassword(),l.getPasswordAuthenticationKey(c.username,n.getPassword(),o,u,function(e,t){e&&a.onFailure(e);var n=p.getNowString(),e=w.lib.WordArray.create(d.Buffer.concat([d.Buffer.from(c.pool.getUserPoolId().split("_")[1],"utf8"),d.Buffer.from(c.username,"utf8"),d.Buffer.from(i.SECRET_BLOCK,"base64"),d.Buffer.from(n,"utf8")])),t=w.lib.WordArray.create(t),t=A.stringify(I(e,t)),o={};o.USERNAME=c.username,o.PASSWORD_CLAIM_SECRET_BLOCK=i.SECRET_BLOCK,o.TIMESTAMP=n,o.PASSWORD_CLAIM_SIGNATURE=t,null!=c.deviceKey&&(o.DEVICE_KEY=c.deviceKey);n=function n(r,i){return c.client.request("RespondToAuthChallenge",r,function(e,t){return e&&"ResourceNotFoundException"===e.code&&-1!==e.message.toLowerCase().indexOf("device")?(o.DEVICE_KEY=null,c.deviceKey=null,c.randomPassword=null,c.deviceGroupKey=null,c.clearCachedDeviceKeyAndPassword(),n(r,i)):i(e,t)})},t={ChallengeName:"PASSWORD_VERIFIER",ClientId:c.pool.getClientId(),ChallengeResponses:o,Session:r.Session,ClientMetadata:s};c.getUserContextData()&&(t.UserContextData=c.getUserContextData()),n(t,function(e,t){return e?a.onFailure(e):c.authenticateUserInternal(t,l,a)})})})})},t.authenticateUserPlainUsernamePassword=function(e,n){var r,i=this,t={};t.USERNAME=this.username,t.PASSWORD=e.getPassword(),t.PASSWORD?(r=new ng(this.pool.getUserPoolId().split("_")[1]),this.getCachedDeviceKeyAndPassword(),null!=this.deviceKey&&(t.DEVICE_KEY=this.deviceKey),e=0!==Object.keys(e.getValidationData()).length?e.getValidationData():e.getClientMetadata(),e={AuthFlow:"USER_PASSWORD_AUTH",ClientId:this.pool.getClientId(),AuthParameters:t,ClientMetadata:e},this.getUserContextData(this.username)&&(e.UserContextData=this.getUserContextData(this.username)),this.client.request("InitiateAuth",e,function(e,t){return e?n.onFailure(e):i.authenticateUserInternal(t,r,n)})):n.onFailure(new Error("PASSWORD parameter is required"))},t.authenticateUserInternal=function(n,t,r){var i=this,e=n.ChallengeName,o=n.ChallengeParameters;if("SMS_MFA"===e)return this.Session=n.Session,r.mfaRequired(e,o);if("SELECT_MFA_TYPE"===e)return this.Session=n.Session,r.selectMFAType(e,o);if("MFA_SETUP"===e)return this.Session=n.Session,r.mfaSetup(e,o);if("SOFTWARE_TOKEN_MFA"===e)return this.Session=n.Session,r.totpRequired(e,o);if("CUSTOM_CHALLENGE"===e)return this.Session=n.Session,r.customChallenge(o);if("NEW_PASSWORD_REQUIRED"===e){this.Session=n.Session;var s=null,a=null,u=[],c=t.getNewPasswordRequiredChallengeUserAttributePrefix();if(o&&(s=JSON.parse(n.ChallengeParameters.userAttributes),a=JSON.parse(n.ChallengeParameters.requiredAttributes)),a)for(var l=0;l<a.length;l++)u[l]=a[l].substr(c.length);return r.newPasswordRequired(s,u)}if("DEVICE_SRP_AUTH"!==e){this.signInUserSession=this.getCognitoUserSession(n.AuthenticationResult),this.challengeName=e,this.cacheTokens();var p=n.AuthenticationResult.NewDeviceMetadata;if(null==p)return r.onSuccess(this.signInUserSession);t.generateHashDevice(n.AuthenticationResult.NewDeviceMetadata.DeviceGroupKey,n.AuthenticationResult.NewDeviceMetadata.DeviceKey,function(e){if(e)return r.onFailure(e);e={Salt:d.Buffer.from(t.getSaltDevices(),"hex").toString("base64"),PasswordVerifier:d.Buffer.from(t.getVerifierDevices(),"hex").toString("base64")};i.verifierDevices=e.PasswordVerifier,i.deviceGroupKey=p.DeviceGroupKey,i.randomPassword=t.getRandomPassword(),i.client.request("ConfirmDevice",{DeviceKey:p.DeviceKey,AccessToken:i.signInUserSession.getAccessToken().getJwtToken(),DeviceSecretVerifierConfig:e,DeviceName:mg},function(e,t){return e?r.onFailure(e):(i.deviceKey=n.AuthenticationResult.NewDeviceMetadata.DeviceKey,i.cacheDeviceKeyAndPassword(),!0===t.UserConfirmationNecessary?r.onSuccess(i.signInUserSession,t.UserConfirmationNecessary):r.onSuccess(i.signInUserSession))})})}else this.getDeviceResponse(r)},t.completeNewPasswordChallenge=function(e,t,n,r){var i=this;if(!e)return n.onFailure(new Error("New password is required."));var o=new ng(this.pool.getUserPoolId().split("_")[1]),s=o.getNewPasswordRequiredChallengeUserAttributePrefix(),a={};t&&Object.keys(t).forEach(function(e){a[s+e]=t[e]}),a.NEW_PASSWORD=e,a.USERNAME=this.username;r={ChallengeName:"NEW_PASSWORD_REQUIRED",ClientId:this.pool.getClientId(),ChallengeResponses:a,Session:this.Session,ClientMetadata:r};this.getUserContextData()&&(r.UserContextData=this.getUserContextData()),this.client.request("RespondToAuthChallenge",r,function(e,t){return e?n.onFailure(e):i.authenticateUserInternal(t,o,n)})},t.getDeviceResponse=function(o,n){var s=this,a=new ng(this.deviceGroupKey),u=new pg,r={};r.USERNAME=this.username,r.DEVICE_KEY=this.deviceKey,a.getLargeAValue(function(e,t){e&&o.onFailure(e),r.SRP_A=t.toString(16);t={ChallengeName:"DEVICE_SRP_AUTH",ClientId:s.pool.getClientId(),ChallengeResponses:r,ClientMetadata:n};s.getUserContextData()&&(t.UserContextData=s.getUserContextData()),s.client.request("RespondToAuthChallenge",t,function(e,r){if(e)return o.onFailure(e);var i=r.ChallengeParameters,t=new Hh(i.SRP_B,16),e=new Hh(i.SALT,16);a.getPasswordAuthenticationKey(s.deviceKey,s.randomPassword,t,e,function(e,t){if(e)return o.onFailure(e);var n=u.getNowString(),e=w.lib.WordArray.create(d.Buffer.concat([d.Buffer.from(s.deviceGroupKey,"utf8"),d.Buffer.from(s.deviceKey,"utf8"),d.Buffer.from(i.SECRET_BLOCK,"base64"),d.Buffer.from(n,"utf8")])),t=w.lib.WordArray.create(t),e=A.stringify(I(e,t)),t={};t.USERNAME=s.username,t.PASSWORD_CLAIM_SECRET_BLOCK=i.SECRET_BLOCK,t.TIMESTAMP=n,t.PASSWORD_CLAIM_SIGNATURE=e,t.DEVICE_KEY=s.deviceKey;t={ChallengeName:"DEVICE_PASSWORD_VERIFIER",ClientId:s.pool.getClientId(),ChallengeResponses:t,Session:r.Session};s.getUserContextData()&&(t.UserContextData=s.getUserContextData()),s.client.request("RespondToAuthChallenge",t,function(e,t){return e?o.onFailure(e):(s.signInUserSession=s.getCognitoUserSession(t.AuthenticationResult),s.cacheTokens(),o.onSuccess(s.signInUserSession))})})})})},t.confirmRegistration=function(e,t,n,r){r={ClientId:this.pool.getClientId(),ConfirmationCode:e,Username:this.username,ForceAliasCreation:t,ClientMetadata:r};this.getUserContextData()&&(r.UserContextData=this.getUserContextData()),this.client.request("ConfirmSignUp",r,function(e){return e?n(e,null):n(null,"SUCCESS")})},t.sendCustomChallengeAnswer=function(e,n,t){var r=this,i={};i.USERNAME=this.username,i.ANSWER=e;var o=new ng(this.pool.getUserPoolId().split("_")[1]);this.getCachedDeviceKeyAndPassword(),null!=this.deviceKey&&(i.DEVICE_KEY=this.deviceKey);t={ChallengeName:"CUSTOM_CHALLENGE",ChallengeResponses:i,ClientId:this.pool.getClientId(),Session:this.Session,ClientMetadata:t};this.getUserContextData()&&(t.UserContextData=this.getUserContextData()),this.client.request("RespondToAuthChallenge",t,function(e,t){return e?n.onFailure(e):r.authenticateUserInternal(t,o,n)})},t.sendMFACode=function(e,r,t,n){var i=this,o={};o.USERNAME=this.username,o.SMS_MFA_CODE=e;t=t||"SMS_MFA";"SOFTWARE_TOKEN_MFA"===t&&(o.SOFTWARE_TOKEN_MFA_CODE=e),null!=this.deviceKey&&(o.DEVICE_KEY=this.deviceKey);n={ChallengeName:t,ChallengeResponses:o,ClientId:this.pool.getClientId(),Session:this.Session,ClientMetadata:n};this.getUserContextData()&&(n.UserContextData=this.getUserContextData()),this.client.request("RespondToAuthChallenge",n,function(e,n){if(e)return r.onFailure(e);if("DEVICE_SRP_AUTH"!==n.ChallengeName){if(i.signInUserSession=i.getCognitoUserSession(n.AuthenticationResult),i.cacheTokens(),null==n.AuthenticationResult.NewDeviceMetadata)return r.onSuccess(i.signInUserSession);var t=new ng(i.pool.getUserPoolId().split("_")[1]);t.generateHashDevice(n.AuthenticationResult.NewDeviceMetadata.DeviceGroupKey,n.AuthenticationResult.NewDeviceMetadata.DeviceKey,function(e){if(e)return r.onFailure(e);e={Salt:d.Buffer.from(t.getSaltDevices(),"hex").toString("base64"),PasswordVerifier:d.Buffer.from(t.getVerifierDevices(),"hex").toString("base64")};i.verifierDevices=e.PasswordVerifier,i.deviceGroupKey=n.AuthenticationResult.NewDeviceMetadata.DeviceGroupKey,i.randomPassword=t.getRandomPassword(),i.client.request("ConfirmDevice",{DeviceKey:n.AuthenticationResult.NewDeviceMetadata.DeviceKey,AccessToken:i.signInUserSession.getAccessToken().getJwtToken(),DeviceSecretVerifierConfig:e,DeviceName:mg},function(e,t){return e?r.onFailure(e):(i.deviceKey=n.AuthenticationResult.NewDeviceMetadata.DeviceKey,i.cacheDeviceKeyAndPassword(),!0===t.UserConfirmationNecessary?r.onSuccess(i.signInUserSession,t.UserConfirmationNecessary):r.onSuccess(i.signInUserSession))})})}else i.getDeviceResponse(r)})},t.changePassword=function(e,t,n,r){if(null==this.signInUserSession||!this.signInUserSession.isValid())return n(new Error("User is not authenticated"),null);this.client.request("ChangePassword",{PreviousPassword:e,ProposedPassword:t,AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),ClientMetadata:r},function(e){return e?n(e,null):n(null,"SUCCESS")})},t.enableMFA=function(t){if(null==this.signInUserSession||!this.signInUserSession.isValid())return t(new Error("User is not authenticated"),null);var e=[];e.push({DeliveryMedium:"SMS",AttributeName:"phone_number"}),this.client.request("SetUserSettings",{MFAOptions:e,AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(e){return e?t(e,null):t(null,"SUCCESS")})},t.setUserMfaPreference=function(e,t,n){if(null==this.signInUserSession||!this.signInUserSession.isValid())return n(new Error("User is not authenticated"),null);this.client.request("SetUserMFAPreference",{SMSMfaSettings:e,SoftwareTokenMfaSettings:t,AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(e){return e?n(e,null):n(null,"SUCCESS")})},t.disableMFA=function(t){if(null==this.signInUserSession||!this.signInUserSession.isValid())return t(new Error("User is not authenticated"),null);this.client.request("SetUserSettings",{MFAOptions:[],AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(e){return e?t(e,null):t(null,"SUCCESS")})},t.deleteUser=function(t,e){var n=this;if(null==this.signInUserSession||!this.signInUserSession.isValid())return t(new Error("User is not authenticated"),null);this.client.request("DeleteUser",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),ClientMetadata:e},function(e){return e?t(e,null):(n.clearCachedUser(),t(null,"SUCCESS"))})},t.updateAttributes=function(e,t,n){var r=this;if(null==this.signInUserSession||!this.signInUserSession.isValid())return t(new Error("User is not authenticated"),null);this.client.request("UpdateUserAttributes",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),UserAttributes:e,ClientMetadata:n},function(e){return e?t(e,null):r.getUserData(function(){return t(null,"SUCCESS")},{bypassCache:!0})})},t.getUserAttributes=function(o){if(null==this.signInUserSession||!this.signInUserSession.isValid())return o(new Error("User is not authenticated"),null);this.client.request("GetUser",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(e,t){if(e)return o(e,null);for(var n=[],r=0;r<t.UserAttributes.length;r++){var i={Name:t.UserAttributes[r].Name,Value:t.UserAttributes[r].Value},i=new dg(i);n.push(i)}return o(null,n)})},t.getMFAOptions=function(n){if(null==this.signInUserSession||!this.signInUserSession.isValid())return n(new Error("User is not authenticated"),null);this.client.request("GetUser",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(e,t){return e?n(e,null):n(null,t.MFAOptions)})},t.createGetUserRequest=function(){return this.client.promisifyRequest("GetUser",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken()})},t.refreshSessionIfPossible=function(n){var r=this;return void 0===n&&(n={}),new Promise(function(e){var t=r.signInUserSession.getRefreshToken();t&&t.getToken()?r.refreshSession(t,e,n.clientMetadata):e()})},t.getUserData=function(t,n){var r=this;if(null==this.signInUserSession||!this.signInUserSession.isValid())return this.clearCachedUserData(),t(new Error("User is not authenticated"),null);var e=this.getUserDataFromCache();if(e)if(this.isFetchUserDataAndTokenRequired(n))this.fetchUserData().then(function(e){return r.refreshSessionIfPossible(n).then(function(){return e})}).then(function(e){return t(null,e)}).catch(t);else try{return void t(null,JSON.parse(e))}catch(e){return this.clearCachedUserData(),void t(e,null)}else this.fetchUserData().then(function(e){t(null,e)}).catch(t)},t.getUserDataFromCache=function(){return this.storage.getItem(this.userDataKey)},t.isFetchUserDataAndTokenRequired=function(e){e=(e||{}).bypassCache;return void 0!==e&&e},t.fetchUserData=function(){var t=this;return this.createGetUserRequest().then(function(e){return t.cacheUserData(e),e})},t.deleteAttributes=function(e,t){if(null==this.signInUserSession||!this.signInUserSession.isValid())return t(new Error("User is not authenticated"),null);this.client.request("DeleteUserAttributes",{UserAttributeNames:e,AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(e){return e?t(e,null):t(null,"SUCCESS")})},t.resendConfirmationCode=function(n,e){e={ClientId:this.pool.getClientId(),Username:this.username,ClientMetadata:e};this.client.request("ResendConfirmationCode",e,function(e,t){return e?n(e,null):n(null,t)})},t.getSession=function(e,t){if(void 0===t&&(t={}),null==this.username)return e(new Error("Username is null. Cannot retrieve a new session"),null);if(null!=this.signInUserSession&&this.signInUserSession.isValid())return e(null,this.signInUserSession);var n="CognitoIdentityServiceProvider."+this.pool.getClientId()+"."+this.username,r=n+".idToken",i=n+".accessToken",o=n+".refreshToken",n=n+".clockDrift";if(this.storage.getItem(r)){r=new sg({IdToken:this.storage.getItem(r)}),i=new ig({AccessToken:this.storage.getItem(i)}),o=new ag({RefreshToken:this.storage.getItem(o)}),n=parseInt(this.storage.getItem(n),0)||0,n=new ug({IdToken:r,AccessToken:i,RefreshToken:o,ClockDrift:n});if(n.isValid())return this.signInUserSession=n,e(null,this.signInUserSession);if(!o.getToken())return e(new Error("Cannot retrieve a new session. Please authenticate."),null);this.refreshSession(o,e,t.clientMetadata)}else e(new Error("Local storage is missing an ID Token, Please authenticate"),null)},t.refreshSession=function(n,e,t){var r=this,i=this.pool.wrapRefreshSessionCallback?this.pool.wrapRefreshSessionCallback(e):e,o={};o.REFRESH_TOKEN=n.getToken();var s="CognitoIdentityServiceProvider."+this.pool.getClientId(),e=s+".LastAuthUser";this.storage.getItem(e)&&(this.username=this.storage.getItem(e),s=s+"."+this.username+".deviceKey",this.deviceKey=this.storage.getItem(s),o.DEVICE_KEY=this.deviceKey);t={ClientId:this.pool.getClientId(),AuthFlow:"REFRESH_TOKEN_AUTH",AuthParameters:o,ClientMetadata:t};this.getUserContextData()&&(t.UserContextData=this.getUserContextData()),this.client.request("InitiateAuth",t,function(e,t){if(e)return"NotAuthorizedException"===e.code&&r.clearCachedUser(),i(e,null);if(t){t=t.AuthenticationResult;return Object.prototype.hasOwnProperty.call(t,"RefreshToken")||(t.RefreshToken=n.getToken()),r.signInUserSession=r.getCognitoUserSession(t),r.cacheTokens(),i(null,r.signInUserSession)}})},t.cacheTokens=function(){var e="CognitoIdentityServiceProvider."+this.pool.getClientId(),t=e+"."+this.username+".idToken",n=e+"."+this.username+".accessToken",r=e+"."+this.username+".refreshToken",i=e+"."+this.username+".clockDrift",e=e+".LastAuthUser";this.storage.setItem(t,this.signInUserSession.getIdToken().getJwtToken()),this.storage.setItem(n,this.signInUserSession.getAccessToken().getJwtToken()),this.storage.setItem(r,this.signInUserSession.getRefreshToken().getToken()),this.storage.setItem(i,""+this.signInUserSession.getClockDrift()),this.storage.setItem(e,this.username)},t.cacheUserData=function(e){this.storage.setItem(this.userDataKey,JSON.stringify(e))},t.clearCachedUserData=function(){this.storage.removeItem(this.userDataKey)},t.clearCachedUser=function(){this.clearCachedTokens(),this.clearCachedUserData()},t.cacheDeviceKeyAndPassword=function(){var e="CognitoIdentityServiceProvider."+this.pool.getClientId()+"."+this.username,t=e+".deviceKey",n=e+".randomPasswordKey",e=e+".deviceGroupKey";this.storage.setItem(t,this.deviceKey),this.storage.setItem(n,this.randomPassword),this.storage.setItem(e,this.deviceGroupKey)},t.getCachedDeviceKeyAndPassword=function(){var e="CognitoIdentityServiceProvider."+this.pool.getClientId()+"."+this.username,t=e+".deviceKey",n=e+".randomPasswordKey",e=e+".deviceGroupKey";this.storage.getItem(t)&&(this.deviceKey=this.storage.getItem(t),this.randomPassword=this.storage.getItem(n),this.deviceGroupKey=this.storage.getItem(e))},t.clearCachedDeviceKeyAndPassword=function(){var e="CognitoIdentityServiceProvider."+this.pool.getClientId()+"."+this.username,t=e+".deviceKey",n=e+".randomPasswordKey",e=e+".deviceGroupKey";this.storage.removeItem(t),this.storage.removeItem(n),this.storage.removeItem(e)},t.clearCachedTokens=function(){var e="CognitoIdentityServiceProvider."+this.pool.getClientId(),t=e+"."+this.username+".idToken",n=e+"."+this.username+".accessToken",r=e+"."+this.username+".refreshToken",i=e+".LastAuthUser",e=e+"."+this.username+".clockDrift";this.storage.removeItem(t),this.storage.removeItem(n),this.storage.removeItem(r),this.storage.removeItem(i),this.storage.removeItem(e)},t.getCognitoUserSession=function(e){var t=new sg(e),n=new ig(e),e=new ag(e);return new ug({IdToken:t,AccessToken:n,RefreshToken:e})},t.forgotPassword=function(n,e){e={ClientId:this.pool.getClientId(),Username:this.username,ClientMetadata:e};this.getUserContextData()&&(e.UserContextData=this.getUserContextData()),this.client.request("ForgotPassword",e,function(e,t){return e?n.onFailure(e):"function"==typeof n.inputVerificationCode?n.inputVerificationCode(t):n.onSuccess(t)})},t.confirmPassword=function(e,t,n,r){r={ClientId:this.pool.getClientId(),Username:this.username,ConfirmationCode:e,Password:t,ClientMetadata:r};this.getUserContextData()&&(r.UserContextData=this.getUserContextData()),this.client.request("ConfirmForgotPassword",r,function(e){return e?n.onFailure(e):n.onSuccess()})},t.getAttributeVerificationCode=function(e,n,t){if(null==this.signInUserSession||!this.signInUserSession.isValid())return n.onFailure(new Error("User is not authenticated"));this.client.request("GetUserAttributeVerificationCode",{AttributeName:e,AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),ClientMetadata:t},function(e,t){return e?n.onFailure(e):"function"==typeof n.inputVerificationCode?n.inputVerificationCode(t):n.onSuccess()})},t.verifyAttribute=function(e,t,n){if(null==this.signInUserSession||!this.signInUserSession.isValid())return n.onFailure(new Error("User is not authenticated"));this.client.request("VerifyUserAttribute",{AttributeName:e,Code:t,AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(e){return e?n.onFailure(e):n.onSuccess("SUCCESS")})},t.getDevice=function(n){if(null==this.signInUserSession||!this.signInUserSession.isValid())return n.onFailure(new Error("User is not authenticated"));this.client.request("GetDevice",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),DeviceKey:this.deviceKey},function(e,t){return e?n.onFailure(e):n.onSuccess(t)})},t.forgetSpecificDevice=function(e,t){if(null==this.signInUserSession||!this.signInUserSession.isValid())return t.onFailure(new Error("User is not authenticated"));this.client.request("ForgetDevice",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),DeviceKey:e},function(e){return e?t.onFailure(e):t.onSuccess("SUCCESS")})},t.forgetDevice=function(t){var n=this;this.forgetSpecificDevice(this.deviceKey,{onFailure:t.onFailure,onSuccess:function(e){return n.deviceKey=null,n.deviceGroupKey=null,n.randomPassword=null,n.clearCachedDeviceKeyAndPassword(),t.onSuccess(e)}})},t.setDeviceStatusRemembered=function(t){if(null==this.signInUserSession||!this.signInUserSession.isValid())return t.onFailure(new Error("User is not authenticated"));this.client.request("UpdateDeviceStatus",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),DeviceKey:this.deviceKey,DeviceRememberedStatus:"remembered"},function(e){return e?t.onFailure(e):t.onSuccess("SUCCESS")})},t.setDeviceStatusNotRemembered=function(t){if(null==this.signInUserSession||!this.signInUserSession.isValid())return t.onFailure(new Error("User is not authenticated"));this.client.request("UpdateDeviceStatus",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),DeviceKey:this.deviceKey,DeviceRememberedStatus:"not_remembered"},function(e){return e?t.onFailure(e):t.onSuccess("SUCCESS")})},t.listDevices=function(e,t,n){if(null==this.signInUserSession||!this.signInUserSession.isValid())return n.onFailure(new Error("User is not authenticated"));e={AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),Limit:e};t&&(e.PaginationToken=t),this.client.request("ListDevices",e,function(e,t){return e?n.onFailure(e):n.onSuccess(t)})},t.globalSignOut=function(t){var n=this;if(null==this.signInUserSession||!this.signInUserSession.isValid())return t.onFailure(new Error("User is not authenticated"));this.client.request("GlobalSignOut",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(e){return e?t.onFailure(e):(n.clearCachedUser(),t.onSuccess("SUCCESS"))})},t.signOut=function(){this.signInUserSession=null,this.clearCachedUser()},t.sendMFASelectionAnswer=function(n,r){var i=this,e={};e.USERNAME=this.username,e.ANSWER=n;e={ChallengeName:"SELECT_MFA_TYPE",ChallengeResponses:e,ClientId:this.pool.getClientId(),Session:this.Session};this.getUserContextData()&&(e.UserContextData=this.getUserContextData()),this.client.request("RespondToAuthChallenge",e,function(e,t){return e?r.onFailure(e):(i.Session=t.Session,"SMS_MFA"===n?r.mfaRequired(t.ChallengeName,t.ChallengeParameters):"SOFTWARE_TOKEN_MFA"===n?r.totpRequired(t.ChallengeName,t.ChallengeParameters):void 0)})},t.getUserContextData=function(){return this.pool.getUserContextData(this.username)},t.associateSoftwareToken=function(n){var r=this;null!=this.signInUserSession&&this.signInUserSession.isValid()?this.client.request("AssociateSoftwareToken",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(e,t){return e?n.onFailure(e):n.associateSecretCode(t.SecretCode)}):this.client.request("AssociateSoftwareToken",{Session:this.Session},function(e,t){return e?n.onFailure(e):(r.Session=t.Session,n.associateSecretCode(t.SecretCode))})},t.verifySoftwareToken=function(e,t,n){var r=this;null!=this.signInUserSession&&this.signInUserSession.isValid()?this.client.request("VerifySoftwareToken",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),UserCode:e,FriendlyDeviceName:t},function(e,t){return e?n.onFailure(e):n.onSuccess(t)}):this.client.request("VerifySoftwareToken",{Session:this.Session,UserCode:e,FriendlyDeviceName:t},function(e,t){if(e)return n.onFailure(e);r.Session=t.Session;t={};t.USERNAME=r.username;t={ChallengeName:"MFA_SETUP",ClientId:r.pool.getClientId(),ChallengeResponses:t,Session:r.Session};r.getUserContextData()&&(t.UserContextData=r.getUserContextData()),r.client.request("RespondToAuthChallenge",t,function(e,t){return e?n.onFailure(e):(r.signInUserSession=r.getCognitoUserSession(t.AuthenticationResult),r.cacheTokens(),n.onSuccess(r.signInUserSession))})})},e}();function vg(){}function bg(e){var r="function"==typeof Map?new Map:void 0;return(bg=function(e){if(null===e||(t=e,-1===Function.toString.call(t).indexOf("[native code]")))return e;var t;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==r){if(r.has(e))return r.get(e);r.set(e,n)}function n(){return Sg(e,arguments,Cg(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),wg(n,e)})(e)}function Sg(e,t,n){return(Sg=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);r=new(Function.bind.apply(e,r));return n&&wg(r,n.prototype),r}).apply(null,arguments)}function wg(e,t){return(wg=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Cg(e){return(Cg=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}vg.prototype.userAgent="aws-amplify/0.1.x js";function _g(e){return(e=window.open(e,"_self"))?Promise.resolve(e):Promise.reject()}function Eg(e,t,n){E.Hub.dispatch("auth",{event:e,data:t,message:n},"Auth",Lg)}var Ig=function(i){var e,t;function n(e,t,n,r){e=i.call(this,e)||this;return e.code=t,e.name=n,e.statusCode=r,e}return t=i,(e=n).prototype=Object.create(t.prototype),wg(e.prototype.constructor=e,t),n}(bg(Error)),Ag=function(){function e(e,t,n){this.endpoint=t||"https://cognito-idp."+e+".amazonaws.com/";n=(n||{}).credentials;this.fetchOptions=n?{credentials:n}:{}}var t=e.prototype;return t.promisifyRequest=function(e,t){var i=this;return new Promise(function(n,r){i.request(e,t,function(e,t){e?r(new Ig(e.message,e.code,e.name,e.statusCode)):n(t)})})},t.request=function(e,t,r){var i,e={"Content-Type":"application/x-amz-json-1.1","X-Amz-Target":"AWSCognitoIdentityProviderService."+e,"X-Amz-User-Agent":vg.prototype.userAgent},t=Object.assign({},this.fetchOptions,{headers:e,method:"POST",mode:"cors",cache:"no-cache",body:JSON.stringify(t)});fetch(this.endpoint,t).then(function(e){return i=e},function(e){if(e instanceof TypeError)throw new Error("Network error");throw e}).then(function(e){return e.json().catch(function(){return{}})}).then(function(e){if(i.ok)return r(null,e);var t=(e.__type||e.code).split("#").pop(),e={code:t,name:t,message:e.message||e.Message||null};return r(e)}).catch(function(t){if(!(i&&i.headers&&i.headers.get("x-amzn-errortype"))){if(t instanceof Error&&"Network error"===t.message){var e={code:"NetworkError",name:t.name,message:t.message};return r(e)}return r(t)}try{var n=i.headers.get("x-amzn-errortype").split(":")[0],n={code:n,name:n,statusCode:i.status,message:i.status?i.status.toString():null};return r(n)}catch(e){return r(t)}})},e}(),Pg=function(){function e(e,t){var n=e||{},r=n.UserPoolId,i=n.ClientId,o=n.endpoint,s=n.fetchOptions,a=n.AdvancedSecurityDataCollectionFlag;if(!r||!i)throw new Error("Both UserPoolId and ClientId are required.");if(!/^[\w-]+_.+$/.test(r))throw new Error("Invalid UserPoolId format.");n=r.split("_")[0];this.userPoolId=r,this.clientId=i,this.client=new Ag(n,o,s),this.advancedSecurityDataCollectionFlag=!1!==a,this.storage=e.Storage||(new gg).getStorage(),t&&(this.wrapRefreshSessionCallback=t)}var t=e.prototype;return t.getUserPoolId=function(){return this.userPoolId},t.getClientId=function(){return this.clientId},t.signUp=function(n,e,t,r,i,o){var s=this,o={ClientId:this.clientId,Username:n,Password:e,UserAttributes:t,ValidationData:r,ClientMetadata:o};this.getUserContextData(n)&&(o.UserContextData=this.getUserContextData(n)),this.client.request("SignUp",o,function(e,t){if(e)return i(e,null);e={Username:n,Pool:s,Storage:s.storage},t={user:new yg(e),userConfirmed:t.UserConfirmed,userSub:t.UserSub,codeDeliveryDetails:t.CodeDeliveryDetails};return i(null,t)})},t.getCurrentUser=function(){var e="CognitoIdentityServiceProvider."+this.clientId+".LastAuthUser",e=this.storage.getItem(e);if(e){e={Username:e,Pool:this,Storage:this.storage};return new yg(e)}return null},t.getUserContextData=function(e){if("undefined"!=typeof AmazonCognitoAdvancedSecurityData){var t=AmazonCognitoAdvancedSecurityData;if(this.advancedSecurityDataCollectionFlag){e=t.getData(e,this.userPoolId,this.clientId);if(e)return{EncodedData:e}}return{}}},e}(),Og=function(){function e(e){if(!e.domain)throw new Error("The domain of cookieStorage can not be undefined.");if(this.domain=e.domain,e.path?this.path=e.path:this.path="/",Object.prototype.hasOwnProperty.call(e,"expires")?this.expires=e.expires:this.expires=365,Object.prototype.hasOwnProperty.call(e,"secure")?this.secure=e.secure:this.secure=!0,Object.prototype.hasOwnProperty.call(e,"sameSite")){if(!["strict","lax","none"].includes(e.sameSite))throw new Error('The sameSite value of cookieStorage must be "lax", "strict" or "none".');if("none"===e.sameSite&&!this.secure)throw new Error("sameSite = None requires the Secure attribute in latest browser versions.");this.sameSite=e.sameSite}else this.sameSite=null}var t=e.prototype;return t.setItem=function(e,t){var n={path:this.path,expires:this.expires,domain:this.domain,secure:this.secure};return this.sameSite&&(n.sameSite=this.sameSite),O.set(e,t,n),O.get(e)},t.getItem=function(e){return O.get(e)},t.removeItem=function(e){var t={path:this.path,expires:this.expires,domain:this.domain,secure:this.secure};return this.sameSite&&(t.sameSite=this.sameSite),O.remove(e,t)},t.clear=function(){for(var e=O.get(),t=0;t<e.length;++t)O.remove(e[t]);return{}},e}(),Tg=function(){return(Tg=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},kg=function(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{o(u.next(e))}catch(e){t(e)}}function i(e){try{o(u.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,i)}o((u=u.apply(e,s||[])).next())})},xg=function(n,r){var i,o,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,o&&(s=2&t[0]?o.return:t[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,t[1])).done)return s;switch(o=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,o=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],o=0}finally{i=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},Ng=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},Lg="undefined"!=typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("amplify_default"):"@@amplify_default",Mg=new E.ConsoleLogger("OAuth"),Rg=(Ug.prototype.isValidScopes=function(e){return Array.isArray(e)&&e.every(function(e){return"string"==typeof e})},Ug.prototype.oauthSignIn=function(e,t,n,r,i,o){void 0===e&&(e="code"),void 0===i&&(i=Fh.Cognito);var s=this._generateState(32),a=o?s+"-"+E.urlSafeEncode(o):s;o=a,window.sessionStorage.setItem("oauth_state",o);s=this._generateRandom(128);o=s,window.sessionStorage.setItem("ouath_pkce_key",o);o=this._generateChallenge(s),s=this._scopes.join(" "),e="https://"+t+"/oauth2/authorize?"+Object.entries(Tg(Tg({redirect_uri:n,response_type:e,client_id:r,identity_provider:i,scope:s,state:a},"code"===e?{code_challenge:o}:{}),"code"===e?{code_challenge_method:"S256"}:{})).map(function(e){var t=Ng(e,2),e=t[0],t=t[1];return encodeURIComponent(e)+"="+encodeURIComponent(t)}).join("&");Mg.debug("Redirecting to "+e),this._urlOpener(e,n)},Ug.prototype._handleCodeFlow=function(a){return kg(this,void 0,void 0,function(){var n,r,i,o,s;return xg(this,function(e){switch(e.label){case 0:return(n=(h.parse(a).query||"").split("&").map(function(e){return e.split("=")}).reduce(function(e,t){var n=Ng(t,2),t=n[0],n=n[1];return Tg(Tg({},e),((e={})[t]=n,e))},{code:void 0}).code)&&h.parse(a).pathname===h.parse(this._config.redirectSignIn).pathname?(i="https://"+this._config.domain+"/oauth2/token",Eg("codeFlow",{},"Retrieving tokens from "+i),r=Vh(this._config)?this._cognitoClientId:this._config.clientID,o=Vh(this._config)?this._config.redirectSignIn:this._config.redirectUri,t=window.sessionStorage.getItem("ouath_pkce_key"),window.sessionStorage.removeItem("ouath_pkce_key"),r=Tg({grant_type:"authorization_code",code:n,client_id:r,redirect_uri:o},(s=t)?{code_verifier:s}:{}),Mg.debug("Calling token endpoint: "+i+" with",r),o=Object.entries(r).map(function(e){var t=Ng(e,2),e=t[0],t=t[1];return encodeURIComponent(e)+"="+encodeURIComponent(t)}).join("&"),[4,fetch(i,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:o})]):[2];case 1:return[4,e.sent().json()];case 2:if(s=e.sent(),r=s.access_token,i=s.refresh_token,o=s.id_token,s=s.error)throw new Error(s);return[2,{accessToken:r,refreshToken:i,idToken:o}]}var t})})},Ug.prototype._handleImplicitFlow=function(r){return kg(this,void 0,void 0,function(){var t,n;return xg(this,function(e){return n=(h.parse(r).hash||"#").substr(1).split("&").map(function(e){return e.split("=")}).reduce(function(e,t){var n=Ng(t,2),t=n[0],n=n[1];return Tg(Tg({},e),((e={})[t]=n,e))},{id_token:void 0,access_token:void 0}),t=n.id_token,n=n.access_token,Eg("implicitFlow",{},"Got tokens from "+r),Mg.debug("Retrieving implicit tokens from "+r+" with"),[2,{accessToken:n,idToken:t,refreshToken:null}]})})},Ug.prototype.handleAuthResponse=function(s){return kg(this,void 0,void 0,function(){var t,n,r,i,o;return xg(this,function(e){switch(e.label){case 0:if(e.trys.push([0,5,,6]),o=s?Tg(Tg({},(h.parse(s).hash||"#").substr(1).split("&").map(function(e){return e.split("=")}).reduce(function(e,t){var n=Ng(t,2),t=n[0],n=n[1];return e[t]=n,e},{})),(h.parse(s).query||"").split("&").map(function(e){return e.split("=")}).reduce(function(e,t){var n=Ng(t,2),t=n[0],n=n[1];return e[t]=n,e},{})):{},t=o.error,n=o.error_description,t)throw new Error(n);return(o=this._validateState(o),Mg.debug("Starting "+this._config.responseType+" flow with "+s),"code"!==this._config.responseType)?[3,2]:(r=[{}],[4,this._handleCodeFlow(s)]);case 1:return[2,Tg.apply(void 0,[Tg.apply(void 0,r.concat([e.sent()])),{state:o}])];case 2:return i=[{}],[4,this._handleImplicitFlow(s)];case 3:return[2,Tg.apply(void 0,[Tg.apply(void 0,i.concat([e.sent()])),{state:o}])];case 4:return[3,6];case 5:throw o=e.sent(),Mg.error("Error handling auth response.",o),o;case 6:return[2]}})})},Ug.prototype._validateState=function(e){if(e){var t,t=(t=window.sessionStorage.getItem("oauth_state"),window.sessionStorage.removeItem("oauth_state"),t),e=e.state;if(t&&t!==e)throw new Error("Invalid state in OAuth flow");return e}},Ug.prototype.signOut=function(){return kg(this,void 0,void 0,function(){var t,n,r;return xg(this,function(e){return t="https://"+this._config.domain+"/logout?",n=Vh(this._config)?this._cognitoClientId:this._config.oauth.clientID,r=Vh(this._config)?this._config.redirectSignOut:this._config.returnTo,t+=Object.entries({client_id:n,logout_uri:encodeURIComponent(r)}).map(function(e){e=Ng(e,2);return e[0]+"="+e[1]}).join("&"),Eg("oAuthSignOut",{oAuth:"signOut"},"Signing out from "+t),Mg.debug("Signing out from "+t),[2,this._urlOpener(t)]})})},Ug.prototype._generateState=function(e){for(var t="",n=e,r="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";0<n;--n)t+=r[Math.round(Math.random()*(r.length-1))];return t},Ug.prototype._generateChallenge=function(e){return this._base64URL(_(e))},Ug.prototype._base64URL=function(e){return e.toString(A).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")},Ug.prototype._generateRandom=function(e){var t=new Uint8Array(e);if("undefined"!=typeof window&&window.crypto)window.crypto.getRandomValues(t);else for(var n=0;n<e;n+=1)t[n]=Math.random()*"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~".length|0;return this._bufferToString(t)},Ug.prototype._bufferToString=function(e){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=[],r=0;r<e.byteLength;r+=1){var i=e[r]%t.length;n.push(t[i])}return n.join("")},Ug);function Ug(e){var t=e.config,n=e.cognitoClientId,e=e.scopes,e=void 0===e?[]:e;if(this._urlOpener=t.urlOpener||_g,this._config=t,this._cognitoClientId=n,!this.isValidScopes(e))throw Error("scopes must be a String Array");this._scopes=e}(jt=xm=xm||{}).DEFAULT_MSG="Authentication Error",jt.EMPTY_USERNAME="Username cannot be empty",jt.INVALID_USERNAME="The username should either be a string or one of the sign in types",jt.EMPTY_PASSWORD="Password cannot be empty",jt.EMPTY_CODE="Confirmation code cannot be empty",jt.SIGN_UP_ERROR="Error creating account",jt.NO_MFA="No valid MFA method provided",jt.INVALID_MFA="Invalid MFA type",jt.EMPTY_CHALLENGE="Challenge response cannot be empty",jt.NO_USER_SESSION="Failed to get the session because the user is empty";var Dg,Fg,Jd=(Dg=function(e,t){return(Dg=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}Dg(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),jg=new E.ConsoleLogger("AuthError"),Bg=(Fg=Error,Jd(Vg,Fg),Vg);function Vg(e){var t=this,n=Gg[e],e=n.message,n=n.log;return(t=Fg.call(this,e)||this).constructor=Vg,Object.setPrototypeOf(t,Vg.prototype),t.name="AuthError",t.log=n||e,jg.error(t.log),t}var zg,qg=(Jd(Kg,zg=Bg),Kg);function Kg(e){e=zg.call(this,e)||this;return e.constructor=Kg,Object.setPrototypeOf(e,Kg.prototype),e.name="NoUserPoolError",e}function Hg(e,t,n){E.Hub.dispatch("auth",{event:e,data:t,message:n},"Auth",Xg)}var Gg={noConfig:{message:xm.DEFAULT_MSG,log:"\n            Error: Amplify has not been configured correctly.\n            This error is typically caused by one of the following scenarios:\n\n            1. Make sure you're passing the awsconfig object to Amplify.configure() in your app's entry point\n                See https://aws-amplify.github.io/docs/js/authentication#configure-your-app for more information\n            \n            2. There might be multiple conflicting versions of aws-amplify or amplify packages in your node_modules.\n                Try deleting your node_modules folder and reinstalling the dependencies with `yarn install`\n        "},missingAuthConfig:{message:xm.DEFAULT_MSG,log:"\n            Error: Amplify has not been configured correctly. \n            The configuration object is missing required auth properties. \n            Did you run `amplify push` after adding auth via `amplify add auth`?\n            See https://aws-amplify.github.io/docs/js/authentication#amplify-project-setup for more information\n        "},emptyUsername:{message:xm.EMPTY_USERNAME},invalidUsername:{message:xm.INVALID_USERNAME},emptyPassword:{message:xm.EMPTY_PASSWORD},emptyCode:{message:xm.EMPTY_CODE},signUpError:{message:xm.SIGN_UP_ERROR,log:"The first parameter should either be non-null string or object"},noMFA:{message:xm.NO_MFA},invalidMFA:{message:xm.INVALID_MFA},emptyChallengeResponse:{message:xm.EMPTY_CHALLENGE},noUserSession:{message:xm.NO_USER_SESSION},default:{message:xm.DEFAULT_MSG}},Wg=function(){return(Wg=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},$g=function(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{o(u.next(e))}catch(e){t(e)}}function i(e){try{o(u.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,i)}o((u=u.apply(e,s||[])).next())})},Yg=function(n,r){var i,o,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,o&&(s=2&t[0]?o.return:t[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,t[1])).done)return s;switch(o=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,o=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],o=0}finally{i=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},Jg=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},Zg=new E.ConsoleLogger("AuthClass"),Qg="aws.cognito.signin.user.admin",Xg="undefined"!=typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("amplify_default"):"@@amplify_default";function em(e){var t=this;this.userPool=null,this.user=null,this.oAuthFlowInProgress=!1,this.Credentials=E.Credentials,this.wrapRefreshSessionCallback=function(n){return function(e,t){return t?Hg("tokenRefresh",void 0,"New token retrieved"):Hg("tokenRefresh_failure",e,"Failed to retrieve new token"),n(e,t)}},this.configure(e),this.currentCredentials=this.currentCredentials.bind(this),this.currentUserCredentials=this.currentUserCredentials.bind(this),E.Hub.listen("auth",function(e){switch(e.payload.event){case"signIn":t._storage.setItem("amplify-signin-with-hostedUI","false");break;case"signOut":t._storage.removeItem("amplify-signin-with-hostedUI");break;case"cognitoHostedUI":t._storage.setItem("amplify-signin-with-hostedUI","true")}})}var tm=new(em.prototype.getModuleName=function(){return"Auth"},em.prototype.configure=function(e){var t=this;if(!e)return this._config||{};Zg.debug("configure Auth");var n=Object.assign({},this._config,E.Parser.parseMobilehubConfig(e).Auth,e);this._config=n;var r=this._config,i=r.userPoolId,o=r.userPoolWebClientId,s=r.cookieStorage,a=r.oauth,u=r.region,c=r.identityPoolId,l=r.mandatorySignIn,p=r.refreshHandlers,d=r.identityPoolRegion,n=r.clientMetadata,r=r.endpoint;if(this._config.storage){if(!this._isValidAuthStorage(this._config.storage))throw Zg.error("The storage in the Auth config is not valid!"),new Error("Empty storage object");this._storage=this._config.storage}else this._storage=s?new Og(s):e.ssr?new E.UniversalStorage:(new E.StorageHelper).getStorage();this._storageSync=Promise.resolve(),"function"==typeof this._storage.sync&&(this._storageSync=this._storage.sync()),i&&((r={UserPoolId:i,ClientId:o,endpoint:r}).Storage=this._storage,this.userPool=new Pg(r,this.wrapRefreshSessionCallback)),this.Credentials.configure({mandatorySignIn:l,region:d||u,userPoolId:i,identityPoolId:c,refreshHandlers:p,storage:this._storage});var f,a=a?Vh(this._config.oauth)?a:a.awsCognito:void 0;return a&&(a=Object.assign({cognitoClientId:o,UserPoolId:i,domain:a.domain,scopes:a.scope,redirectSignIn:a.redirectSignIn,redirectSignOut:a.redirectSignOut,responseType:a.responseType,Storage:this._storage,urlOpener:a.urlOpener,clientMetadata:n},a.options),this._oAuthHandler=new Rg({scopes:a.scopes,config:a,cognitoClientId:a.cognitoClientId}),f={},function(e){if(E.JS.browserOrNode().isBrowser&&window.location)e({url:window.location.href});else if(!E.JS.browserOrNode().isNode)throw new Error("Not supported")}(function(e){e=e.url;f[e]||(f[e]=!0,t._handleAuthResponse(e))})),Hg("configured",null,"The Auth category has been configured successfully"),this._config},em.prototype.signUp=function(e){for(var t=this,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];if(!this.userPool)return this.rejectNoUserPool();var i,o=null,s=null,a=[],u=null;if(e&&"string"==typeof e){o=e,s=n?n[0]:null;var c=n?n[1]:null,l=n?n[2]:null;c&&a.push(new dg({Name:"email",Value:c})),l&&a.push(new dg({Name:"phone_number",Value:l}))}else{if(!e||"object"!=typeof e)return this.rejectAuthError(jh.SignUpError);o=e.username,s=e.password,e&&e.clientMetadata?i=e.clientMetadata:this._config.clientMetadata&&(i=this._config.clientMetadata);var p=e.attributes;p&&Object.keys(p).map(function(e){a.push(new dg({Name:e,Value:p[e]}))});e=e.validationData;e&&(u=[],Object.keys(e).map(function(e){u.push(new dg({Name:e,Value:p[e]}))}))}return o?s?(Zg.debug("signUp attrs:",a),Zg.debug("signUp validation data:",u),new Promise(function(n,r){t.userPool.signUp(o,s,a,u,function(e,t){e?(Hg("signUp_failure",e,o+" failed to signup"),r(e)):(Hg("signUp",t,o+" has signed up successfully"),n(t))},i)})):this.rejectAuthError(jh.EmptyPassword):this.rejectAuthError(jh.EmptyUsername)},em.prototype.confirmSignUp=function(e,t,n){if(!this.userPool)return this.rejectNoUserPool();if(!e)return this.rejectAuthError(jh.EmptyUsername);if(!t)return this.rejectAuthError(jh.EmptyCode);var i,o=this.createCognitoUser(e),s=!n||"boolean"!=typeof n.forceAliasCreation||n.forceAliasCreation;return n&&n.clientMetadata?i=n.clientMetadata:this._config.clientMetadata&&(i=this._config.clientMetadata),new Promise(function(n,r){o.confirmRegistration(t,s,function(e,t){e?r(e):n(t)},i)})},em.prototype.resendSignUp=function(e,t){if(void 0===t&&(t=this._config.clientMetadata),!this.userPool)return this.rejectNoUserPool();if(!e)return this.rejectAuthError(jh.EmptyUsername);var i=this.createCognitoUser(e);return new Promise(function(n,r){i.resendConfirmationCode(function(e,t){e?r(e):n(t)},t)})},em.prototype.signIn=function(e,t,n){if(void 0===n&&(n=this._config.clientMetadata),!this.userPool)return this.rejectNoUserPool();var r=null,i=null,o={};if("string"==typeof e)r=e,i=t;else{if(!e.username)return this.rejectAuthError(jh.InvalidUsername);void 0!==t&&Zg.warn("The password should be defined under the first parameter object!"),r=e.username,i=e.password,o=e.validationData}if(!r)return this.rejectAuthError(jh.EmptyUsername);n=new qh({Username:r,Password:i,ValidationData:o,ClientMetadata:n});return i?this.signInWithPassword(n):this.signInWithoutPassword(n)},em.prototype.authCallbacks=function(i,o,s){var e=this,a=this;return{onSuccess:function(r){return $g(e,void 0,void 0,function(){var t,n;return Yg(this,function(e){switch(e.label){case 0:Zg.debug(r),delete i.challengeName,delete i.challengeParam,e.label=1;case 1:return e.trys.push([1,4,5,9]),[4,this.Credentials.clear()];case 2:return e.sent(),[4,this.Credentials.set(r,"session")];case 3:return t=e.sent(),Zg.debug("succeed to get cognito credentials",t),[3,9];case 4:return t=e.sent(),Zg.debug("cannot get cognito credentials",t),[3,9];case 5:return e.trys.push([5,7,,8]),[4,this.currentUserPoolUser()];case 6:return n=e.sent(),a.user=n,Hg("signIn",n,"A user "+i.getUsername()+" has been signed in"),o(n),[3,8];case 7:return n=e.sent(),Zg.error("Failed to get the signed in user",n),s(n),[3,8];case 8:return[7];case 9:return[2]}})})},onFailure:function(e){Zg.debug("signIn failure",e),Hg("signIn_failure",e,i.getUsername()+" failed to signin"),s(e)},customChallenge:function(e){Zg.debug("signIn custom challenge answer required"),i.challengeName="CUSTOM_CHALLENGE",i.challengeParam=e,o(i)},mfaRequired:function(e,t){Zg.debug("signIn MFA required"),i.challengeName=e,i.challengeParam=t,o(i)},mfaSetup:function(e,t){Zg.debug("signIn mfa setup",e),i.challengeName=e,i.challengeParam=t,o(i)},newPasswordRequired:function(e,t){Zg.debug("signIn new password"),i.challengeName="NEW_PASSWORD_REQUIRED",i.challengeParam={userAttributes:e,requiredAttributes:t},o(i)},totpRequired:function(e,t){Zg.debug("signIn totpRequired"),i.challengeName=e,i.challengeParam=t,o(i)},selectMFAType:function(e,t){Zg.debug("signIn selectMFAType",e),i.challengeName=e,i.challengeParam=t,o(i)}}},em.prototype.signInWithPassword=function(e){var r=this;if(this.pendingSignIn)throw new Error("Pending sign-in attempt already in progress");var i=this.createCognitoUser(e.getUsername());return this.pendingSignIn=new Promise(function(t,n){i.authenticateUser(e,r.authCallbacks(i,function(e){r.pendingSignIn=null,t(e)},function(e){r.pendingSignIn=null,n(e)}))}),this.pendingSignIn},em.prototype.signInWithoutPassword=function(n){var r=this,i=this.createCognitoUser(n.getUsername());return i.setAuthenticationFlowType("CUSTOM_AUTH"),new Promise(function(e,t){i.initiateAuth(n,r.authCallbacks(i,e,t))})},em.prototype.getMFAOptions=function(e){return new Promise(function(n,r){e.getMFAOptions(function(e,t){return e?(Zg.debug("get MFA Options failed",e),void r(e)):(Zg.debug("get MFA options success",t),void n(t))})})},em.prototype.getPreferredMFA=function(i,o){var s=this,a=this;return new Promise(function(n,r){var e=s._config.clientMetadata,t=!!o&&o.bypassCache;i.getUserData(function(e,t){if(e)return Zg.debug("getting preferred mfa failed",e),void r(e);t=a._getMfaTypeFromUserData(t);t?n(t):r("invalid MFA Type")},{bypassCache:t,clientMetadata:e})})},em.prototype._getMfaTypeFromUserData=function(e){var t=null,n=e.PreferredMfaSetting;return n?t=n:(n=e.UserMFASettingList)?0===n.length?t="NOMFA":Zg.debug("invalid case for getPreferredMFA",e):t=e.MFAOptions?"SMS_MFA":"NOMFA",t},em.prototype._getUserData=function(e,t){return new Promise(function(n,r){e.getUserData(function(e,t){e?(Zg.debug("getting user data failed",e),r(e)):n(t)},t)})},em.prototype.setPreferredMFA=function(s,a){return $g(this,void 0,void 0,function(){var t,n,o,r,i;return Yg(this,function(e){switch(e.label){case 0:return t=this._config.clientMetadata,[4,this._getUserData(s,{bypassCache:!0,clientMetadata:t})];case 1:switch(i=e.sent(),o=n=null,a){case"TOTP":return[3,2];case"SMS":return[3,3];case"NOMFA":return[3,4]}return[3,6];case 2:return o={PreferredMfa:!0,Enabled:!0},[3,7];case 3:return n={PreferredMfa:!0,Enabled:!0},[3,7];case 4:return r=i.UserMFASettingList,[4,this._getMfaTypeFromUserData(i)];case 5:if("NOMFA"===(i=e.sent()))return[2,Promise.resolve("No change for mfa type")];if("SMS_MFA"===i)n={PreferredMfa:!1,Enabled:!1};else{if("SOFTWARE_TOKEN_MFA"!==i)return[2,this.rejectAuthError(jh.InvalidMFA)];o={PreferredMfa:!1,Enabled:!1}}return r&&0!==r.length&&r.forEach(function(e){"SMS_MFA"===e?n={PreferredMfa:!1,Enabled:!1}:"SOFTWARE_TOKEN_MFA"===e&&(o={PreferredMfa:!1,Enabled:!1})}),[3,7];case 6:return Zg.debug("no validmfa method provided"),[2,this.rejectAuthError(jh.NoMFA)];case 7:return[2,new Promise(function(r,i){s.setUserMfaPreference(n,o,function(e,n){return e?(Zg.debug("Set user mfa preference error",e),i(e)):(Zg.debug("Set user mfa success",n),Zg.debug("Caching the latest user data into local"),void s.getUserData(function(e,t){return e?(Zg.debug("getting user data failed",e),i(e)):r(n)},{bypassCache:!0,clientMetadata:t}))})})]}})})},em.prototype.disableSMS=function(e){return new Promise(function(n,r){e.disableMFA(function(e,t){return e?(Zg.debug("disable mfa failed",e),void r(e)):(Zg.debug("disable mfa succeed",t),void n(t))})})},em.prototype.enableSMS=function(e){return new Promise(function(n,r){e.enableMFA(function(e,t){return e?(Zg.debug("enable mfa failed",e),void r(e)):(Zg.debug("enable mfa succeed",t),void n(t))})})},em.prototype.setupTOTP=function(e){return new Promise(function(t,n){e.associateSoftwareToken({onFailure:function(e){Zg.debug("associateSoftwareToken failed",e),n(e)},associateSecretCode:function(e){Zg.debug("associateSoftwareToken sucess",e),t(e)}})})},em.prototype.verifyTotpToken=function(r,e){return Zg.debug("verification totp token",r,e),new Promise(function(t,n){r.verifySoftwareToken(e,"My TOTP device",{onFailure:function(e){Zg.debug("verifyTotpToken failed",e),n(e)},onSuccess:function(e){Hg("signIn",r,"A user "+r.getUsername()+" has been signed in"),Zg.debug("verifyTotpToken success",e),t(e)}})})},em.prototype.confirmSignIn=function(i,e,n,o){var s=this;if(void 0===o&&(o=this._config.clientMetadata),!e)return this.rejectAuthError(jh.EmptyCode);var a=this;return new Promise(function(r,t){i.sendMFACode(e,{onSuccess:function(n){return $g(s,void 0,void 0,function(){var t;return Yg(this,function(e){switch(e.label){case 0:Zg.debug(n),e.label=1;case 1:return e.trys.push([1,4,5,6]),[4,this.Credentials.clear()];case 2:return e.sent(),[4,this.Credentials.set(n,"session")];case 3:return t=e.sent(),Zg.debug("succeed to get cognito credentials",t),[3,6];case 4:return t=e.sent(),Zg.debug("cannot get cognito credentials",t),[3,6];case 5:return a.user=i,Hg("signIn",i,"A user "+i.getUsername()+" has been signed in"),r(i),[7];case 6:return[2]}})})},onFailure:function(e){Zg.debug("confirm signIn failure",e),t(e)}},n,o)})},em.prototype.completeNewPassword=function(i,e,n,o){var s=this;if(void 0===n&&(n={}),void 0===o&&(o=this._config.clientMetadata),!e)return this.rejectAuthError(jh.EmptyPassword);var a=this;return new Promise(function(r,t){i.completeNewPasswordChallenge(e,n,{onSuccess:function(n){return $g(s,void 0,void 0,function(){var t;return Yg(this,function(e){switch(e.label){case 0:Zg.debug(n),e.label=1;case 1:return e.trys.push([1,4,5,6]),[4,this.Credentials.clear()];case 2:return e.sent(),[4,this.Credentials.set(n,"session")];case 3:return t=e.sent(),Zg.debug("succeed to get cognito credentials",t),[3,6];case 4:return t=e.sent(),Zg.debug("cannot get cognito credentials",t),[3,6];case 5:return a.user=i,Hg("signIn",i,"A user "+i.getUsername()+" has been signed in"),r(i),[7];case 6:return[2]}})})},onFailure:function(e){Zg.debug("completeNewPassword failure",e),Hg("completeNewPassword_failure",e,s.user+" failed to complete the new password flow"),t(e)},mfaRequired:function(e,t){Zg.debug("signIn MFA required"),i.challengeName=e,i.challengeParam=t,r(i)},mfaSetup:function(e,t){Zg.debug("signIn mfa setup",e),i.challengeName=e,i.challengeParam=t,r(i)},totpRequired:function(e,t){Zg.debug("signIn mfa setup",e),i.challengeName=e,i.challengeParam=t,r(i)}},o)})},em.prototype.sendCustomChallengeAnswer=function(n,r,i){var o=this;return void 0===i&&(i=this._config.clientMetadata),this.userPool?r?new Promise(function(e,t){n.sendCustomChallengeAnswer(r,o.authCallbacks(n,e,t),i)}):this.rejectAuthError(jh.EmptyChallengeResponse):this.rejectNoUserPool()},em.prototype.updateUserAttributes=function(o,s,a){void 0===a&&(a=this._config.clientMetadata);var u=[],e=this;return new Promise(function(r,i){e.userSession(o).then(function(e){for(var t in s){var n;"sub"!==t&&t.indexOf("_verified")<0&&(n={Name:t,Value:s[t]},u.push(n))}o.updateAttributes(u,function(e,t){return e?i(e):r(t)},a)})})},em.prototype.userAttributes=function(t){var e=this;return new Promise(function(n,r){e.userSession(t).then(function(e){t.getUserAttributes(function(e,t){e?r(e):n(t)})})})},em.prototype.verifiedContact=function(e){var r=this;return this.userAttributes(e).then(function(e){var t=r.attributesToObject(e),n={},e={};return t.email&&(t.email_verified?e.email=t.email:n.email=t.email),t.phone_number&&(t.phone_number_verified?e.phone_number=t.phone_number:n.phone_number=t.phone_number),{verified:e,unverified:n}})},em.prototype.currentUserPoolUser=function(l){var e=this;return this.userPool?new Promise(function(u,c){e._storageSync.then(function(){return $g(e,void 0,void 0,function(){var a,t,n=this;return Yg(this,function(e){switch(e.label){case 0:return this.isOAuthInProgress()?(Zg.debug("OAuth signIn in progress, waiting for resolution..."),[4,new Promise(function(t){var n=setTimeout(function(){Zg.debug("OAuth signIn in progress timeout"),E.Hub.remove("auth",r),t()},1e4);function r(e){e=e.payload.event;"cognitoHostedUI"!==e&&"cognitoHostedUI_failure"!==e||(Zg.debug("OAuth signIn resolved: "+e),clearTimeout(n),E.Hub.remove("auth",r),t())}E.Hub.listen("auth",r)})]):[3,2];case 1:e.sent(),e.label=2;case 2:return(a=this.userPool.getCurrentUser())?(t=this._config.clientMetadata,a.getSession(function(i,o){return $g(n,void 0,void 0,function(){var t,n,r,s=this;return Yg(this,function(e){switch(e.label){case 0:return i?(Zg.debug("Failed to get the user session",i),c(i),[2]):(t=!!l&&l.bypassCache)?[4,this.Credentials.clear()]:[3,2];case 1:e.sent(),e.label=2;case 2:return(n=this._config.clientMetadata,r=o.getAccessToken().decodePayload().scope,(void 0===r?"":r).split(" ").includes(Qg))?(a.getUserData(function(e,t){if(e)return Zg.debug("getting user data failed",e),void("User is disabled."===e.message||"User does not exist."===e.message||"Access Token has been revoked"===e.message?c(e):u(a));for(var n=t.PreferredMfaSetting||"NOMFA",r=[],i=0;i<t.UserAttributes.length;i++){var o={Name:t.UserAttributes[i].Name,Value:t.UserAttributes[i].Value},o=new dg(o);r.push(o)}e=s.attributesToObject(r);return Object.assign(a,{attributes:e,preferredMFA:n}),u(a)},{bypassCache:t,clientMetadata:n}),[2]):(Zg.debug("Unable to get the user data because the "+Qg+" is not in the scopes of the access token"),[2,u(a)])}})})},{clientMetadata:t}),[2]):(Zg.debug("Failed to get user from user pool"),c("No current user"),[2])}})})}).catch(function(e){return Zg.debug("Failed to sync cache info into memory",e),c(e)})}):this.rejectNoUserPool()},em.prototype.isOAuthInProgress=function(){return this.oAuthFlowInProgress},em.prototype.currentAuthenticatedUser=function(o){return $g(this,void 0,void 0,function(){var t,n,r,i;return Yg(this,function(e){switch(e.label){case 0:Zg.debug("getting current authenticated user"),t=null,e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this._storageSync];case 2:return e.sent(),[3,4];case 3:throw i=e.sent(),Zg.debug("Failed to sync cache info into memory",i),i;case 4:try{(n=JSON.parse(this._storage.getItem("aws-amplify-federatedInfo")))&&(t=Wg(Wg({},n.user),{token:n.token}))}catch(e){Zg.debug("cannot load federated user from auth storage")}return t?(this.user=t,Zg.debug("get current authenticated federated user",this.user),[2,this.user]):[3,5];case 5:Zg.debug("get current authenticated userpool user"),r=null,e.label=6;case 6:return e.trys.push([6,8,,9]),[4,this.currentUserPoolUser(o)];case 7:return r=e.sent(),[3,9];case 8:return"No userPool"===(i=e.sent())&&Zg.error("Cannot get the current user because the user pool is missing. Please make sure the Auth module is configured with a valid Cognito User Pool ID"),Zg.debug("The user is not authenticated by the error",i),[2,Promise.reject("The user is not authenticated")];case 9:return this.user=r,[2,this.user]}})})},em.prototype.currentSession=function(){var r=this;return Zg.debug("Getting current session"),this.userPool?new Promise(function(t,n){r.currentUserPoolUser().then(function(e){r.userSession(e).then(function(e){t(e)}).catch(function(e){Zg.debug("Failed to get the current session",e),n(e)})}).catch(function(e){Zg.debug("Failed to get the current user",e),n(e)})}):Promise.reject()},em.prototype.userSession=function(i){if(!i)return Zg.debug("the user is null"),this.rejectAuthError(jh.NoUserSession);var e=this._config.clientMetadata;return new Promise(function(n,r){Zg.debug("Getting the session from this user:",i),i.getSession(function(e,t){e?(Zg.debug("Failed to get the session from user",i),r(e)):(Zg.debug("Succeed to get the user session",t),n(t))},{clientMetadata:e})})},em.prototype.currentUserCredentials=function(){return $g(this,void 0,void 0,function(){var t,n,r=this;return Yg(this,function(e){switch(e.label){case 0:Zg.debug("Getting current user credentials"),e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this._storageSync];case 2:return e.sent(),[3,4];case 3:throw t=e.sent(),Zg.debug("Failed to sync cache info into memory",t),t;case 4:n=null;try{n=JSON.parse(this._storage.getItem("aws-amplify-federatedInfo"))}catch(e){Zg.debug("failed to get or parse item aws-amplify-federatedInfo",e)}return n?[2,this.Credentials.refreshFederatedToken(n)]:[2,this.currentSession().then(function(e){return Zg.debug("getting session success",e),r.Credentials.set(e,"session")}).catch(function(e){return Zg.debug("getting session failed",e),r.Credentials.set(null,"guest")})]}})})},em.prototype.currentCredentials=function(){return Zg.debug("getting current credentials"),this.Credentials.get()},em.prototype.verifyUserAttribute=function(n,r,i){return void 0===i&&(i=this._config.clientMetadata),new Promise(function(e,t){n.getAttributeVerificationCode(r,{onSuccess:function(){return e()},onFailure:function(e){return t(e)}},i)})},em.prototype.verifyUserAttributeSubmit=function(e,r,i){return i?new Promise(function(t,n){e.verifyAttribute(r,i,{onSuccess:function(e){t(e)},onFailure:function(e){n(e)}})}):this.rejectAuthError(jh.EmptyCode)},em.prototype.verifyCurrentUserAttribute=function(t){var n=this;return n.currentUserPoolUser().then(function(e){return n.verifyUserAttribute(e,t)})},em.prototype.verifyCurrentUserAttributeSubmit=function(t,n){var r=this;return r.currentUserPoolUser().then(function(e){return r.verifyUserAttributeSubmit(e,t,n)})},em.prototype.cognitoIdentitySignOut=function(s,a){return $g(this,void 0,void 0,function(){var t,i,o=this;return Yg(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,this._storageSync];case 1:return e.sent(),[3,3];case 2:throw t=e.sent(),Zg.debug("Failed to sync cache info into memory",t),t;case 3:return i=this._oAuthHandler&&"true"===this._storage.getItem("amplify-signin-with-hostedUI"),[2,new Promise(function(n,r){if(s&&s.global){Zg.debug("user global sign out",a);var e=o._config.clientMetadata;a.getSession(function(e,t){return e?(Zg.debug("failed to get the user session",e),r(e)):void a.globalSignOut({onSuccess:function(e){if(Zg.debug("global sign out success"),!i)return n();o.oAuthSignOutRedirect(n,r)},onFailure:function(e){return Zg.debug("global sign out failed",e),r(e)}})},{clientMetadata:e})}else{if(Zg.debug("user sign out",a),a.signOut(),!i)return n();o.oAuthSignOutRedirect(n,r)}})]}})})},em.prototype.oAuthSignOutRedirect=function(e,t){E.JS.browserOrNode().isBrowser?this.oAuthSignOutRedirectOrReject(t):this.oAuthSignOutAndResolve(e)},em.prototype.oAuthSignOutAndResolve=function(e){this._oAuthHandler.signOut(),e()},em.prototype.oAuthSignOutRedirectOrReject=function(e){this._oAuthHandler.signOut(),setTimeout(function(){return e("Signout timeout fail")},3e3)},em.prototype.signOut=function(n){return $g(this,void 0,void 0,function(){var t;return Yg(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,this.cleanCachedItems()];case 1:return e.sent(),[3,3];case 2:return e.sent(),Zg.debug("failed to clear cached items"),[3,3];case 3:return this.userPool?(t=this.userPool.getCurrentUser())?[4,this.cognitoIdentitySignOut(n,t)]:[3,5]:[3,7];case 4:return e.sent(),[3,6];case 5:Zg.debug("no current Cognito user"),e.label=6;case 6:return[3,8];case 7:Zg.debug("no Congito User pool"),e.label=8;case 8:return Hg("signOut",this.user,"A user has been signed out"),this.user=null,[2]}})})},em.prototype.cleanCachedItems=function(){return $g(this,void 0,void 0,function(){return Yg(this,function(e){switch(e.label){case 0:return[4,this.Credentials.clear()];case 1:return e.sent(),[2]}})})},em.prototype.changePassword=function(t,i,o,s){var e=this;return void 0===s&&(s=this._config.clientMetadata),new Promise(function(n,r){e.userSession(t).then(function(e){t.changePassword(i,o,function(e,t){return e?(Zg.debug("change password failure",e),r(e)):n(t)},s)})})},em.prototype.forgotPassword=function(r,e){if(void 0===e&&(e=this._config.clientMetadata),!this.userPool)return this.rejectNoUserPool();if(!r)return this.rejectAuthError(jh.EmptyUsername);var i=this.createCognitoUser(r);return new Promise(function(t,n){i.forgotPassword({onSuccess:function(){t()},onFailure:function(e){Zg.debug("forgot password failure",e),Hg("forgotPassword_failure",e,r+" forgotPassword failed"),n(e)},inputVerificationCode:function(e){Hg("forgotPassword",i,r+" has initiated forgot password flow"),t(e)}},e)})},em.prototype.forgotPasswordSubmit=function(n,r,i,o){if(void 0===o&&(o=this._config.clientMetadata),!this.userPool)return this.rejectNoUserPool();if(!n)return this.rejectAuthError(jh.EmptyUsername);if(!r)return this.rejectAuthError(jh.EmptyCode);if(!i)return this.rejectAuthError(jh.EmptyPassword);var s=this.createCognitoUser(n);return new Promise(function(e,t){s.confirmPassword(r,i,{onSuccess:function(){Hg("forgotPasswordSubmit",s,n+" forgotPasswordSubmit successful"),e()},onFailure:function(e){Hg("forgotPasswordSubmit_failure",e,n+" forgotPasswordSubmit failed"),t(e)}},o)})},em.prototype.currentUserInfo=function(){return $g(this,void 0,void 0,function(){var t,n,r,i,o;return Yg(this,function(e){switch(e.label){case 0:return(t=this.Credentials.getCredSource())&&"aws"!==t&&"userPool"!==t?[3,9]:[4,this.currentUserPoolUser().catch(function(e){return Zg.debug(e)})];case 1:if(!(o=e.sent()))return[2,null];e.label=2;case 2:return e.trys.push([2,8,,9]),[4,this.userAttributes(o)];case 3:r=e.sent(),i=this.attributesToObject(r),n=null,e.label=4;case 4:return e.trys.push([4,6,,7]),[4,this.currentCredentials()];case 5:return n=e.sent(),[3,7];case 6:return r=e.sent(),Zg.debug("Failed to retrieve credentials while getting current user info",r),[3,7];case 7:return[2,{id:n?n.identityId:void 0,username:o.getUsername(),attributes:i}];case 8:return i=e.sent(),Zg.debug("currentUserInfo error",i),[2,{}];case 9:return"federated"===t?[2,(o=this.user)||{}]:[2]}})})},em.prototype.federatedSignIn=function(l,p,d){return $g(this,void 0,void 0,function(){var r,i,o,s,a,u,c;return Yg(this,function(e){switch(e.label){case 0:if(!this._config.identityPoolId&&!this._config.userPoolId)throw new Error("Federation requires either a User Pool or Identity Pool in config");if(void 0===l&&this._config.identityPoolId&&!this._config.userPoolId)throw new Error("Federation with Identity Pools requires tokens passed as arguments");return Bh(l)||(n=l)&&["customProvider"].find(function(e){return n.hasOwnProperty(e)})||(t=l)&&["customState"].find(function(e){return t.hasOwnProperty(e)})||void 0===l?(r=l||{provider:Fh.Cognito},i=Bh(r)?r.provider:r.customProvider,Bh(r),a=r.customState,this._config.userPoolId&&(s=Vh(this._config.oauth)?this._config.userPoolWebClientId:this._config.oauth.clientID,r=Vh(this._config.oauth)?this._config.oauth.redirectSignIn:this._config.oauth.redirectUri,this._oAuthHandler.oauthSignIn(this._config.oauth.responseType,this._config.oauth.domain,r,s,i,a)),[3,4]):[3,1];case 1:i=l;try{(o=JSON.stringify(JSON.parse(this._storage.getItem("aws-amplify-federatedInfo")).user))&&Zg.warn("There is already a signed in user: "+o+" in your app.\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tYou should not call Auth.federatedSignIn method again as it may cause unexpected behavior.")}catch(e){}return s=p.token,a=p.identity_id,c=p.expires_at,[4,this.Credentials.set({provider:i,token:s,identity_id:a,user:d,expires_at:c},"federation")];case 2:return u=e.sent(),[4,this.currentAuthenticatedUser()];case 3:return c=e.sent(),Hg("signIn",c,"A user "+c.username+" has been signed in"),Zg.debug("federated sign in credentials",u),[2,u];case 4:return[2]}var t,n})})},em.prototype._handleAuthResponse=function(c){return $g(this,void 0,void 0,function(){var t,n,r,i,o,s,a,u;return Yg(this,function(e){switch(e.label){case 0:if(this.oAuthFlowInProgress)return Zg.debug("Skipping URL "+c+" current flow in progress"),[2];e.label=1;case 1:if(e.trys.push([1,,8,9]),this.oAuthFlowInProgress=!0,!this._config.userPoolId)throw new Error("OAuth responses require a User Pool defined in config");if(Hg("parsingCallbackUrl",{url:c},"The callback url is being parsed"),t=c||(E.JS.browserOrNode().isBrowser?window.location.href:""),n=!!(h.parse(t).query||"").split("&").map(function(e){return e.split("=")}).find(function(e){e=Jg(e,1)[0];return"code"===e||"error"===e}),r=!!(h.parse(t).hash||"#").substr(1).split("&").map(function(e){return e.split("=")}).find(function(e){e=Jg(e,1)[0];return"access_token"===e||"error"===e}),!n&&!r)return[3,7];this._storage.setItem("amplify-redirected-from-hosted-ui","true"),e.label=2;case 2:return e.trys.push([2,6,,7]),[4,this._oAuthHandler.handleAuthResponse(t)];case 3:return i=e.sent(),s=i.accessToken,u=i.idToken,o=i.refreshToken,a=i.state,i=new ug({IdToken:new sg({IdToken:u}),RefreshToken:new ag({RefreshToken:o}),AccessToken:new ig({AccessToken:s})}),u=void 0,this._config.identityPoolId?[4,this.Credentials.set(i,"session")]:[3,5];case 4:u=e.sent(),Zg.debug("AWS credentials",u),e.label=5;case 5:return o=/-/.test(a),(s=this.createCognitoUser(i.getIdToken().decodePayload()["cognito:username"])).setSignInUserSession(i),window&&void 0!==window.history&&window.history.replaceState({},null,this._config.oauth.redirectSignIn),Hg("signIn",s,"A user "+s.getUsername()+" has been signed in"),Hg("cognitoHostedUI",s,"A user "+s.getUsername()+" has been signed in via Cognito Hosted UI"),o&&(a=a.split("-").splice(1).join("-"),Hg("customOAuthState",E.urlSafeDecode(a),"State for user "+s.getUsername())),[2,u];case 6:return u=e.sent(),Zg.debug("Error in cognito hosted auth response",u),Hg("signIn_failure",u,"The OAuth response flow failed"),Hg("cognitoHostedUI_failure",u,"A failure occurred when returning to the Cognito Hosted UI"),Hg("customState_failure",u,"A failure occurred when returning state"),[3,7];case 7:return[3,9];case 8:return this.oAuthFlowInProgress=!1,[7];case 9:return[2]}})})},em.prototype.essentialCredentials=function(e){return{accessKeyId:e.accessKeyId,sessionToken:e.sessionToken,secretAccessKey:e.secretAccessKey,identityId:e.identityId,authenticated:e.authenticated}},em.prototype.attributesToObject=function(e){var t={};return e&&e.map(function(e){"email_verified"===e.Name||"phone_number_verified"===e.Name?t[e.Name]="true"===e.Value||!0===e.Value:t[e.Name]=e.Value}),t},em.prototype.createCognitoUser=function(e){var t={Username:e,Pool:this.userPool};t.Storage=this._storage;e=this._config.authenticationFlowType,t=new yg(t);return e&&t.setAuthenticationFlowType(e),t},em.prototype._isValidAuthStorage=function(e){return!!e&&"function"==typeof e.getItem&&"function"==typeof e.setItem&&"function"==typeof e.removeItem&&"function"==typeof e.clear},em.prototype.noUserPoolErrorHandler=function(e){return!e||e.userPoolId&&e.identityPoolId?jh.NoConfig:jh.MissingAuthConfig},em.prototype.rejectAuthError=function(e){return Promise.reject(new Bg(e))},em.prototype.rejectNoUserPool=function(){var e=this.noUserPoolErrorHandler(this._config);return Promise.reject(new qg(e))},em)(null);E.Amplify.register(tm);var nm=function(e,t){return(nm=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function rm(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}nm(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var im=function(){return(im=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function om(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{o(u.next(e))}catch(e){t(e)}}function i(e){try{o(u.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,i)}o((u=u.apply(e,s||[])).next())})}function sm(n,r){var i,o,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,o&&(s=2&t[0]?o.return:t[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,t[1])).done)return s;switch(o=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,o=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],o=0}finally{i=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}}var am,jt="@aws-sdk/client-s3",Jd="1.0.0-rc.4",um=(F(cm,am=u.Writable),cm.prototype._write=function(e,t,n){try{this.hash.update(e)}catch(e){return n(e)}n()},cm);function cm(e,t){t=am.call(this,t)||this;return t.hash=e,t}function lm(e){return"string"==typeof e&&0===e.indexOf("arn:")&&6<=e.split(":").length}function pm(e){return Em(e)?e.replace(/fips-|-fips/,""):e}function dm(e){var t=e.match(wm);return[t[2],e.replace(new RegExp("^"+t[0]),"")]}function fm(e,t){if(void 0===t&&(t={tlsCompatible:!0}),64<=e.length||!/^[a-z0-9][a-z0-9.-]+[a-z0-9]$/.test(e)||/(\d+\.){3}\d+/.test(e)||/[.-]{2}/.test(e)||null!=t&&t.tlsCompatible&&Sm.test(e))throw new Error("Invalid DNS label "+e)}function hm(e){var t=e.baseHostname;return wm.test(t)?("string"==typeof e.bucketName?Pm:Am)(e):{bucketEndpoint:!1,hostname:t}}function gm(h){return function(d,f){return function(p){return K(void 0,void 0,void 0,function(){var t,n,r,i,o,s,a,u,c,l;return H(this,function(e){switch(e.label){case 0:return(u=p.input.Bucket,t=h.bucketEndpoint,n=p.request,Xs.isInstance(n))?h.bucketEndpoint?(n.hostname=u,[3,6]):[3,1]:[3,7];case 1:return lm(u)?(a=function(e){e=e.split(":");if(e.length<6||"arn"!==e[0])throw new Error("Malformed ARN");e=W(e);return{partition:e[1],service:e[2],region:e[3],accountId:e[4],resource:e.slice(5).join(":")}}(u),i=pm,[4,h.region()]):[3,5];case 2:return r=i.apply(void 0,[e.sent()]),[4,h.regionInfoProvider(r)];case 3:return o=e.sent()||{},s=o.partition,o=void 0===(o=o.signingRegion)?r:o,[4,h.useArnRegion()];case 4:return l=e.sent(),a=hm({bucketName:a,baseHostname:n.hostname,accelerateEndpoint:h.useAccelerateEndpoint,dualstackEndpoint:h.useDualstackEndpoint,pathStyleEndpoint:h.forcePathStyle,tlsCompatible:"https:"===n.protocol,useArnRegion:l,clientPartition:s,clientSigningRegion:o}),c=a.hostname,l=a.bucketEndpoint,s=a.signingRegion,a=a.signingService,s&&s!==o&&(f.signing_region=s),a&&"s3"!==a&&(f.signing_service=a),n.hostname=c,t=l,[3,6];case 5:u=hm({bucketName:u,baseHostname:n.hostname,accelerateEndpoint:h.useAccelerateEndpoint,dualstackEndpoint:h.useDualstackEndpoint,pathStyleEndpoint:h.forcePathStyle,tlsCompatible:"https:"===n.protocol}),c=u.hostname,l=u.bucketEndpoint,n.hostname=c,t=l,e.label=6;case 6:t&&(n.path=n.path.replace(/^(\/)?[^\/]+/,""),""===n.path&&(n.path="/")),e.label=7;case 7:return[2,d(j(j({},p),{request:n}))]}})})}}}function mm(t){return{applyToStack:function(e){e.addRelativeTo(gm(t),Om)}}}var ym=/^[a-z0-9][a-z0-9\.\-]{1,61}[a-z0-9]$/,vm=/(\d+\.){3}\d+/,bm=/\.\./,Sm=/\./,wm=/^(.+\.)?s3[.-]([a-z0-9-]+)\./,Cm=/^s3(-external-1)?\.amazonaws\.com$/,_m="amazonaws.com",Em=function(e){return e.startsWith("fips-")||e.endsWith("-fips")},Im=function(e,t){return e===t||pm(e)===t||e===pm(t)},Am=function(e){var t=W((c=e.baseHostname,Cm.test(c)?[c.replace("."+_m,""),_m]:dm(c)),2),n=t[0],r=t[1],i=e.pathStyleEndpoint,o=e.dualstackEndpoint,s=void 0!==o&&o,a=e.accelerateEndpoint,u=void 0!==a&&a,c=e.tlsCompatible,t=void 0===c||c,o=e.useArnRegion,a=e.bucketName,c=e.clientPartition,c=void 0===c?"aws":c,e=e.clientSigningRegion,e=void 0===e?n:e;!function(e){if(e.pathStyleEndpoint)throw new Error("Path-style S3 endpoint is not supported when bucket is an ARN");if(e.accelerateEndpoint)throw new Error("Accelerate endpoint is not supported when bucket is an ARN");if(!e.tlsCompatible)throw new Error("HTTPS is required when bucket is an ARN")}({pathStyleEndpoint:i,accelerateEndpoint:u,tlsCompatible:t});var l=a.service,i=a.partition,p=a.accountId,u=a.region,a=a.resource;!function(e){if("s3"!==e&&"s3-outposts"!==e)throw new Error("Expect 's3' or 's3-outposts' in ARN service component")}(l),function(e,t){if(e!==t.clientPartition)throw new Error('Partition in ARN is incompatible, got "'+e+'" but expected "'+t.clientPartition+'"')}(i,{clientPartition:c}),function(){if(!/[0-9]{12}/.exec(p))throw new Error("Access point ARN accountID does not match regex '[0-9]{12}'")}(),function(e,t){if(""===e)throw new Error("ARN region is empty");if(!t.useArnRegion&&!Im(e,t.clientRegion)&&!Im(e,t.clientSigningRegion))throw new Error("Region in ARN is incompatible, got "+e+" but expected "+t.clientRegion);if(t.useArnRegion&&Em(e))throw new Error("Endpoint does not support FIPS region")}(u,{useArnRegion:o,clientRegion:n,clientSigningRegion:e});c=function(e){var t=e.includes(":")?":":"/",n=W(e.split(t)),e=n[0],n=n.slice(1);if("accesspoint"===e){if(1!==n.length||""===n[0])throw new Error("Access Point ARN should have one resource accesspoint"+t+"{accesspointname}");return{accesspointName:n[0]}}if("outpost"!==e)throw new Error("ARN resource should begin with 'accesspoint"+t+"' or 'outpost"+t+"'");if(!n[0]||"accesspoint"!==n[1]||!n[2]||3!==n.length)throw new Error("Outpost ARN should have resource outpost"+t+"{outpostId}"+t+"accesspoint"+t+"{accesspointName}");t=W(n,3),n=t[0],t[1];return{outpostId:n,accesspointName:t[2]}}(a),a=c.accesspointName,c=c.outpostId;fm(a+"-"+p,{tlsCompatible:t});n=o?u:n,e=o?u:e;return c?(function(){if("s3-outposts"!==l)throw new Error("Expect 's3-posts' in Outpost ARN service component")}(),fm(c,{tlsCompatible:t}),function(){if(s)throw new Error("Dualstack endpoint is not supported with Outpost")}(),function(e){if(Em(null!=e?e:""))throw new Error("FIPS region is not supported with Outpost, got "+e)}(n),{bucketEndpoint:!0,hostname:a+"-"+p+"."+c+".s3-outposts."+n+"."+r,signingRegion:e,signingService:"s3-outposts"}):(function(){if("s3"!==l)throw new Error("Expect 's3' in Accesspoint ARN service component")}(),{bucketEndpoint:!0,hostname:a+"-"+p+".s3-accesspoint"+(s?".dualstack":"")+"."+n+"."+r,signingRegion:e})},Pm=function(e){var t=e.accelerateEndpoint,n=void 0!==t&&t,r=e.baseHostname,i=e.bucketName,o=e.dualstackEndpoint,s=void 0!==o&&o,a=e.pathStyleEndpoint,t=void 0!==a&&a,o=e.tlsCompatible,a=void 0===o||o,o=W((e=r,Cm.test(e)?["us-east-1",_m]:dm(e)),2),e=o[0],o=o[1];return t||(t=i,!ym.test(t)||vm.test(t)||bm.test(t))||a&&Sm.test(i)?{bucketEndpoint:!1,hostname:s?"s3.dualstack."+e+"."+o:r}:(n?r="s3-accelerate"+(s?".dualstack":"")+"."+o:s&&(r="s3.dualstack."+e+"."+o),{bucketEndpoint:!0,hostname:i+"."+r})},Om={tags:["BUCKET_ENDPOINT"],name:"bucketEndpointMiddleware",relation:"before",toMiddleware:"hostHeaderMiddleware"};var Tm="AWS_S3_USE_ARN_REGION",km="s3_use_arn_region",xm={environmentVariableSelector:function(e){if(Object.prototype.hasOwnProperty.call(e,Tm)){if("true"===e[Tm])return!0;if("false"===e[Tm])return!1;throw new Error("Cannot load env "+Tm+'. Expected "true" or "false", got '+e[Tm]+".")}},configFileSelector:function(e){if(Object.prototype.hasOwnProperty.call(e,km)){if("true"===e[km])return!0;if("false"===e[km])return!1;throw new Error("Cannot load shared config entry "+km+'. Expected "true" or "false", got '+e[km]+".")}},default:!1},Nm="s3.{region}.amazonaws.com",Lm=new Set(["ap-east-1","ap-northeast-1","ap-northeast-2","ap-south-1","ap-southeast-1","ap-southeast-2","ca-central-1","eu-central-1","eu-north-1","eu-west-1","eu-west-2","eu-west-3","me-south-1","sa-east-1","us-east-1","us-east-2","us-west-1","us-west-2"]),Mm=new Set(["cn-north-1","cn-northwest-1"]),Rm=new Set(["us-iso-east-1"]),Um=new Set(["us-isob-east-1"]),Dm=new Set(["us-gov-east-1","us-gov-west-1"]),Fm=im(im({},{apiVersion:"2006-03-01",disableHostPrefix:!1,logger:{},regionInfoProvider:function(e,t){var n=void 0;switch(e){case"ap-east-1":n={hostname:"s3.ap-east-1.amazonaws.com",partition:"aws"};break;case"ap-northeast-1":n={hostname:"s3.ap-northeast-1.amazonaws.com",partition:"aws"};break;case"ap-northeast-2":n={hostname:"s3.ap-northeast-2.amazonaws.com",partition:"aws"};break;case"ap-south-1":n={hostname:"s3.ap-south-1.amazonaws.com",partition:"aws"};break;case"ap-southeast-1":n={hostname:"s3.ap-southeast-1.amazonaws.com",partition:"aws"};break;case"ap-southeast-2":n={hostname:"s3.ap-southeast-2.amazonaws.com",partition:"aws"};break;case"ca-central-1":n={hostname:"s3.ca-central-1.amazonaws.com",partition:"aws"};break;case"cn-north-1":n={hostname:"s3.cn-north-1.amazonaws.com.cn",partition:"aws-cn"};break;case"cn-northwest-1":n={hostname:"s3.cn-northwest-1.amazonaws.com.cn",partition:"aws-cn"};break;case"eu-central-1":n={hostname:"s3.eu-central-1.amazonaws.com",partition:"aws"};break;case"eu-north-1":n={hostname:"s3.eu-north-1.amazonaws.com",partition:"aws"};break;case"eu-west-1":n={hostname:"s3.eu-west-1.amazonaws.com",partition:"aws"};break;case"eu-west-2":n={hostname:"s3.eu-west-2.amazonaws.com",partition:"aws"};break;case"eu-west-3":n={hostname:"s3.eu-west-3.amazonaws.com",partition:"aws"};break;case"fips-us-gov-west-1":n={hostname:"s3-fips-us-gov-west-1.amazonaws.com",partition:"aws-us-gov",signingRegion:"us-gov-west-1"};break;case"me-south-1":n={hostname:"s3.me-south-1.amazonaws.com",partition:"aws"};break;case"s3-external-1":n={hostname:"s3-external-1.amazonaws.com",partition:"aws",signingRegion:"us-east-1"};break;case"sa-east-1":n={hostname:"s3.sa-east-1.amazonaws.com",partition:"aws"};break;case"us-east-1":n={hostname:"s3.amazonaws.com",partition:"aws"};break;case"us-east-2":n={hostname:"s3.us-east-2.amazonaws.com",partition:"aws"};break;case"us-gov-east-1":n={hostname:"s3.us-gov-east-1.amazonaws.com",partition:"aws-us-gov"};break;case"us-gov-west-1":n={hostname:"s3.us-gov-west-1.amazonaws.com",partition:"aws-us-gov"};break;case"us-iso-east-1":n={hostname:"s3.us-iso-east-1.c2s.ic.gov",partition:"aws-iso"};break;case"us-isob-east-1":n={hostname:"s3.us-isob-east-1.sc2s.sgov.gov",partition:"aws-iso-b"};break;case"us-west-1":n={hostname:"s3.us-west-1.amazonaws.com",partition:"aws"};break;case"us-west-2":n={hostname:"s3.us-west-2.amazonaws.com",partition:"aws"};break;default:Lm.has(e)&&(n={hostname:Nm.replace("{region}",e),partition:"aws"}),Mm.has(e)&&(n={hostname:"s3.{region}.amazonaws.com.cn".replace("{region}",e),partition:"aws-cn"}),Rm.has(e)&&(n={hostname:"s3.{region}.c2s.ic.gov".replace("{region}",e),partition:"aws-iso"}),Um.has(e)&&(n={hostname:"s3.{region}.sc2s.sgov.gov".replace("{region}",e),partition:"aws-iso-b"}),void 0===(n=Dm.has(e)?{hostname:"s3.{region}.amazonaws.com".replace("{region}",e),partition:"aws-us-gov"}:n)&&(n={hostname:Nm.replace("{region}",e),partition:"aws"})}return Promise.resolve(n)},signingEscapePath:!1,signingName:"s3",useArnRegion:!1}),{runtime:"node",base64Decoder:du,base64Encoder:fu,bodyLengthChecker:hu,credentialDefaultProvider:qs,defaultUserAgent:gu(jt,Jd),eventStreamSerdeProvider:function(e){return new Uh(e)},maxAttempts:S(ln),md5:b.bind(null,"md5"),region:S(p,Ye),requestHandler:new ct,sha256:b.bind(null,"sha256"),streamCollector:C,streamHasher:function(o,s){return new Promise(function(e,t){var n,r,i;"string"==typeof s.path?(n=a.createReadStream(s.path,{start:s.start,end:s.end}),r=new o,i=new um(r),n.pipe(i),n.on("error",function(e){i.end(),t(e)}),i.on("error",t),i.on("finish",function(){r.digest().then(e).catch(t)})):t(new Error("Unable to calculate hash for non-file streams."))})},urlParser:pu,useArnRegion:S(xm),utf8Decoder:Re,utf8Encoder:fn});function jm(t){return{applyToStack:function(e){e.add(function(i){var e=this;return function(r){return function(n){return K(e,void 0,void 0,function(){var t;return H(this,function(e){return t=n.request,Xs.isInstance(t)&&t.body&&"node"===i.runtime&&(t.headers=j(j({},t.headers),{Expect:"100-continue"})),[2,r(j(j({},n),{request:t}))]})})}}}(t),Bm)}}}var Bm={step:"build",tags:["SET_EXPECT_HEADER","EXPECT_HEADER"],name:"addExpectContinueMiddleware"};function Vm(e){return{applyToStack:function(e){e.add(function(){var e=this;return function(r){return function(n){return K(e,void 0,void 0,function(){var t;return H(this,function(e){if("string"==typeof(t=n.input.Bucket)&&!lm(t)&&0<=t.indexOf("/"))throw(t=new Error("Bucket name shouldn't contain '/', received '"+t+"'")).name="InvalidBucketName",t;return[2,r(j({},n))]})})}}}(),Ew)}}}function zm(t){return{applyToStack:function(e){var o;e.add((o=t,function(i){return function(r){return K(void 0,void 0,void 0,function(){var t,n;return H(this,function(e){switch(e.label){case 0:return(t=r.request,!Xs.isInstance(t)||o.isCustomEndpoint)?[2,i(j({},r))]:"s3.amazonaws.com"!==t.hostname?[3,1]:(t.hostname="s3.us-east-1.amazonaws.com",[3,3]);case 1:return n="aws-global",[4,o.region()];case 2:n===e.sent()&&(t.hostname="s3.amazonaws.com"),e.label=3;case 3:return[2,i(j({},r))]}})})}}),Iw)}}}var qm,Km,Hm,Gm,Wm,$m,Ym,Jm,Zm,Qm,Xm,ey,ty,ny,ry,iy,oy,sy,ay,uy,cy,ly,py,dy,fy,hy,gy,my,yy,vy,by,Sy,wy,Cy,_y,Ey,Iy,Ay,Py,Oy,Ty,ky,xy,Ny,Ly,My,Ry,Uy,Dy,Fy,jy,By,Vy,zy,qy,Ky,Hy,Gy,Wy,$y,Yy,Jy,Zy,Qy,Xy,ev,tv,nv,rv,iv,ov,sv,av,uv,cv,lv,pv,dv,fv,hv,gv,mv,yv,vv,bv,Sv,wv,Cv,_v,Ev,Iv,Av,Pv,Ov,Tv,kv,xv,Nv,Lv,Mv,Rv,Uv,Dv,Fv,jv,Bv,Vv,zv,qv,Kv,Hv,Gv,Wv,$v,Yv,Jv,Zv,Qv,Xv,eb,tb,nb,rb,ib,ob,sb,ab,ub,cb,lb,pb,db,fb,hb,gb,mb,yb,vb,bb,Sb,wb,Cb,_b,Eb,Ib,Ab,Pb,Ob,Tb,kb,xb,Nb,Lb,Mb,Rb,Ub,Db,Fb,jb,Bb,Vb,zb,qb,Kb,Hb,Gb,Wb,$b,Yb,Jb,Zb,Qb,Xb,eS,tS,nS,rS,iS,oS,sS,aS,uS,cS,lS,pS,dS,fS,hS,gS,mS,yS,vS,bS,SS,wS,CS,_S,ES,IS,AS,PS,OS,TS,kS,xS,NS,LS,MS,RS,US,DS,FS,jS,BS,VS,zS,qS,KS,HS,GS,WS,$S,YS,JS,ZS,QS,XS,ew,tw,nw,rw,iw,ow,sw,aw,uw,cw,lw,pw,dw,fw,hw,gw,mw,yw,vw,bw,Sw,ww,Cw,_w,Ew={step:"initialize",tags:["VALIDATE_BUCKET_NAME"],name:"validateBucketNameMiddleware"},Iw={step:"build",tags:["USE_REGIONAL_ENDPOINT","S3"],name:"useRegionalEndpointMiddleware"},Aw=(rm(Pw,qm=at),Pw.prototype.destroy=function(){qm.prototype.destroy.call(this)},Pw);function Pw(e){var t,n,r=this,i=im(im({},Fm),e),o=ko(i),s=dc(To(o)),a=pa(s),a=(i=void 0!==(e=(t=a).bucketEndpoint)&&e,o=t.forcePathStyle,s=void 0!==o&&o,e=void 0!==(a=t.useAccelerateEndpoint)&&a,a=void 0!==(o=t.useDualstackEndpoint)&&o,n=void 0!==(o=t.useArnRegion)&&o,j(j({},t),{bucketEndpoint:i,forcePathStyle:s,useAccelerateEndpoint:e,useDualstackEndpoint:a,useArnRegion:"function"==typeof n?n:function(){return Promise.resolve(n)}})),a=j(j({},a=a),{eventStreamMarshaller:a.eventStreamSerdeProvider(a)});return(r=qm.call(this,a)||this).config=a,r.middlewareStack.use(mc(r.config)),r.middlewareStack.use(Ys(r.config)),r.middlewareStack.use(vc(r.config)),r.middlewareStack.use(Eu(r.config)),r.middlewareStack.use(Vm(r.config)),r.middlewareStack.use(zm(r.config)),r.middlewareStack.use(jm(r.config)),r.middlewareStack.use(Au(r.config)),r.middlewareStack.use(Pu(r.config)),r}(Km||{}).filterSensitiveLog=function(e){return im({},e)},(Hm||(Hm={})).filterSensitiveLog=function(e){return im({},e)},(Gm||(Gm={})).filterSensitiveLog=function(e){return im({},e)},(Wm||{}).filterSensitiveLog=function(e){return im({},e)},($m||{}).filterSensitiveLog=function(e){return im({},e)},(Ym||{}).filterSensitiveLog=function(e){return im({},e)},(Jm||{}).filterSensitiveLog=function(e){return im({},e)},(Zm||{}).filterSensitiveLog=function(e){return im({},e)},(Qm||{}).filterSensitiveLog=function(e){return im({},e)},(Xm||{}).filterSensitiveLog=function(e){return im({},e)},(ey||(ey={})).filterSensitiveLog=function(e){return im(im({},e),e.SSEKMSKeyId&&{SSEKMSKeyId:Mc})},(ty||{}).filterSensitiveLog=function(e){return im({},e)},(ny||{}).filterSensitiveLog=function(e){return im({},e)},(ry||(ry={})).filterSensitiveLog=function(e){return im({},e)},(iy||{}).filterSensitiveLog=function(e){return im({},e)},(oy||{}).filterSensitiveLog=function(e){return im(im(im({},e),e.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:Mc}),e.SSEKMSKeyId&&{SSEKMSKeyId:Mc})},(sy||{}).filterSensitiveLog=function(e){return im(im(im(im(im({},e),e.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:Mc}),e.SSECustomerKey&&{SSECustomerKey:Mc}),e.CopySourceSSECustomerKey&&{CopySourceSSECustomerKey:Mc}),e.SSEKMSKeyId&&{SSEKMSKeyId:Mc})},(ay||{}).filterSensitiveLog=function(e){return im({},e)},(uy||{}).filterSensitiveLog=function(e){return im({},e)},(cy||{}).filterSensitiveLog=function(e){return im({},e)},(ly||{}).filterSensitiveLog=function(e){return im({},e)},(py||{}).filterSensitiveLog=function(e){return im({},e)},(dy||{}).filterSensitiveLog=function(e){return im({},e)},(fy||(fy={})).filterSensitiveLog=function(e){return im(im(im({},e),e.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:Mc}),e.SSEKMSKeyId&&{SSEKMSKeyId:Mc})},(hy||(hy={})).filterSensitiveLog=function(e){return im(im(im(im({},e),e.SSEKMSKeyId&&{SSEKMSKeyId:Mc}),e.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:Mc}),e.SSECustomerKey&&{SSECustomerKey:Mc})},(gy||{}).filterSensitiveLog=function(e){return im({},e)},(my||{}).filterSensitiveLog=function(e){return im({},e)},(yy||{}).filterSensitiveLog=function(e){return im({},e)},(vy||{}).filterSensitiveLog=function(e){return im({},e)},(by||{}).filterSensitiveLog=function(e){return im({},e)},(Sy||{}).filterSensitiveLog=function(e){return im({},e)},(wy||{}).filterSensitiveLog=function(e){return im({},e)},(Cy||{}).filterSensitiveLog=function(e){return im({},e)},(_y||{}).filterSensitiveLog=function(e){return im({},e)},(Ey||{}).filterSensitiveLog=function(e){return im({},e)},(Iy||{}).filterSensitiveLog=function(e){return im({},e)},(Ay||{}).filterSensitiveLog=function(e){return im({},e)},(Py||(Py={})).filterSensitiveLog=function(e){return im({},e)},(Oy||(Oy={})).filterSensitiveLog=function(e){return im({},e)},(Ty||{}).filterSensitiveLog=function(e){return im({},e)},(ky||{}).filterSensitiveLog=function(e){return im({},e)},(xy||{}).filterSensitiveLog=function(e){return im({},e)},(Ny||{}).filterSensitiveLog=function(e){return im({},e)},(Ly||{}).filterSensitiveLog=function(e){return im({},e)},(My||{}).filterSensitiveLog=function(e){return im({},e)},(Ry||{}).filterSensitiveLog=function(e){return im({},e)},(Uy||{}).filterSensitiveLog=function(e){return im({},e)},(Dy||{}).filterSensitiveLog=function(e){return im({},e)},(Fy||{}).filterSensitiveLog=function(e){return im({},e)},(jy||{}).filterSensitiveLog=function(e){return im({},e)},(By||{}).filterSensitiveLog=function(e){return im({},e)},(Vy||{}).filterSensitiveLog=function(e){return im({},e)},(zy||{}).filterSensitiveLog=function(e){return im({},e)},(qy||{}).filterSensitiveLog=function(e){return im({},e)},(Ky||{}).filterSensitiveLog=function(e){return im({},e)},(Hy||{}).filterSensitiveLog=function(e){return im({},e)},(Gy||{}).filterSensitiveLog=function(e){return im({},e)},(Wy||{}).filterSensitiveLog=function(e){return im({},e)},($y||{}).filterSensitiveLog=function(e){return im({},e)},(Yy||{}).filterSensitiveLog=function(e){return im({},e)},(Jy||{}).filterSensitiveLog=function(e){return im({},e)},(Zy||{}).filterSensitiveLog=function(e){return im({},e)},(Qy||{}).filterSensitiveLog=function(e){return im({},e)},(Xy||{}).filterSensitiveLog=function(e){return im({},e)},(ev||{}).filterSensitiveLog=function(e){return im({},e)},(tv||(tv={})).filterSensitiveLog=function(e){return im(im({},e),e.KMSMasterKeyID&&{KMSMasterKeyID:Mc})},(nv||(nv={})).filterSensitiveLog=function(e){return im(im({},e),e.ApplyServerSideEncryptionByDefault&&{ApplyServerSideEncryptionByDefault:tv.filterSensitiveLog(e.ApplyServerSideEncryptionByDefault)})},(rv||(rv={})).filterSensitiveLog=function(e){return im(im({},e),e.Rules&&{Rules:e.Rules.map(function(e){return nv.filterSensitiveLog(e)})})},(iv||{}).filterSensitiveLog=function(e){return im(im({},e),e.ServerSideEncryptionConfiguration&&{ServerSideEncryptionConfiguration:rv.filterSensitiveLog(e.ServerSideEncryptionConfiguration)})},(ov||{}).filterSensitiveLog=function(e){return im({},e)},(sv||(sv={})).filterSensitiveLog=function(e){return im(im({},e),e.KeyId&&{KeyId:Mc})},(av||{}).filterSensitiveLog=function(e){return im({},e)},(uv||(uv={})).filterSensitiveLog=function(e){return im(im({},e),e.SSEKMS&&{SSEKMS:sv.filterSensitiveLog(e.SSEKMS)})},(cv||(cv={})).filterSensitiveLog=function(e){return im(im({},e),e.Encryption&&{Encryption:uv.filterSensitiveLog(e.Encryption)})},(lv||(lv={})).filterSensitiveLog=function(e){return im(im({},e),e.S3BucketDestination&&{S3BucketDestination:cv.filterSensitiveLog(e.S3BucketDestination)})},(pv||{}).filterSensitiveLog=function(e){return im({},e)},(dv||{}).filterSensitiveLog=function(e){return im({},e)},(fv||(fv={})).filterSensitiveLog=function(e){return im(im({},e),e.Destination&&{Destination:lv.filterSensitiveLog(e.Destination)})},(hv||{}).filterSensitiveLog=function(e){return im(im({},e),e.InventoryConfiguration&&{InventoryConfiguration:fv.filterSensitiveLog(e.InventoryConfiguration)})},(gv||{}).filterSensitiveLog=function(e){return im({},e)},(mv||{}).filterSensitiveLog=function(e){return im({},e)},(yv||{}).filterSensitiveLog=function(e){return im({},e)},(vv||{}).filterSensitiveLog=function(e){return im({},e)},(bv||{}).filterSensitiveLog=function(e){return im({},e)},(Sv||{}).filterSensitiveLog=function(e){return im({},e)},(wv||{}).filterSensitiveLog=function(e){return im({},e)},(Cv||{}).filterSensitiveLog=function(e){return im({},e)},(_v||{}).filterSensitiveLog=function(e){return im({},e)},(Ev||{}).filterSensitiveLog=function(e){return im({},e)},(Iv||{}).filterSensitiveLog=function(e){return im({},e)},(Av||{}).filterSensitiveLog=function(e){return im({},e)},(Pv||{}).filterSensitiveLog=function(e){return im({},e)},(Ov||{}).filterSensitiveLog=function(e){return im({},e)},(Tv||{}).filterSensitiveLog=function(e){return im({},e)},(kv||{}).filterSensitiveLog=function(e){return im({},e)},(xv||{}).filterSensitiveLog=function(e){return im({},e)},(Nv||{}).filterSensitiveLog=function(e){return im({},e)},(Lv||{}).filterSensitiveLog=function(e){return im({},e)},(Mv||{}).filterSensitiveLog=function(e){return im({},e)},(Rv||{}).filterSensitiveLog=function(e){return im({},e)},(Uv||{}).filterSensitiveLog=function(e){return im({},e)},(Dv||{}).filterSensitiveLog=function(e){return im({},e)},(Fv||{}).filterSensitiveLog=function(e){return im({},e)},(jv||{}).filterSensitiveLog=function(e){return im({},e)},(Bv||{}).filterSensitiveLog=function(e){return im({},e)},(Vv||{}).filterSensitiveLog=function(e){return im({},e)},(zv||{}).filterSensitiveLog=function(e){return im({},e)},(qv||{}).filterSensitiveLog=function(e){return im({},e)},(Kv||{}).filterSensitiveLog=function(e){return im({},e)},(Hv||{}).filterSensitiveLog=function(e){return im({},e)},(Gv||{}).filterSensitiveLog=function(e){return im({},e)},(Wv||{}).filterSensitiveLog=function(e){return im({},e)},($v||{}).filterSensitiveLog=function(e){return im({},e)},(Yv||{}).filterSensitiveLog=function(e){return im({},e)},(Jv||{}).filterSensitiveLog=function(e){return im({},e)},(Zv||{}).filterSensitiveLog=function(e){return im({},e)},(Qv||{}).filterSensitiveLog=function(e){return im({},e)},(Xv||{}).filterSensitiveLog=function(e){return im({},e)},(eb||{}).filterSensitiveLog=function(e){return im({},e)},(tb||{}).filterSensitiveLog=function(e){return im({},e)},(nb||{}).filterSensitiveLog=function(e){return im({},e)},(rb||{}).filterSensitiveLog=function(e){return im({},e)},(ib||{}).filterSensitiveLog=function(e){return im({},e)},(ob||{}).filterSensitiveLog=function(e){return im({},e)},(sb||{}).filterSensitiveLog=function(e){return im({},e)},(ab||{}).filterSensitiveLog=function(e){return im({},e)},(ub||{}).filterSensitiveLog=function(e){return im({},e)},(cb||{}).filterSensitiveLog=function(e){return im({},e)},(lb||{}).filterSensitiveLog=function(e){return im({},e)},(pb||{}).filterSensitiveLog=function(e){return im({},e)},(db||{}).filterSensitiveLog=function(e){return im({},e)},(fb||{}).filterSensitiveLog=function(e){return im({},e)},(hb||{}).filterSensitiveLog=function(e){return im({},e)},(gb||{}).filterSensitiveLog=function(e){return im({},e)},(mb||{}).filterSensitiveLog=function(e){return im({},e)},(yb||{}).filterSensitiveLog=function(e){return im({},e)},(vb||{}).filterSensitiveLog=function(e){return im({},e)},(bb||{}).filterSensitiveLog=function(e){return im({},e)},(Sb||{}).filterSensitiveLog=function(e){return im({},e)},(wb||{}).filterSensitiveLog=function(e){return im({},e)},(Cb||{}).filterSensitiveLog=function(e){return im({},e)},(_b||{}).filterSensitiveLog=function(e){return im({},e)},(Eb||{}).filterSensitiveLog=function(e){return im({},e)},(Ib||{}).filterSensitiveLog=function(e){return im({},e)},(Ab||{}).filterSensitiveLog=function(e){return im({},e)},(Pb||{}).filterSensitiveLog=function(e){return im({},e)},(Ob||(Ob={})).filterSensitiveLog=function(e){return im(im({},e),e.SSEKMSKeyId&&{SSEKMSKeyId:Mc})},(Tb||(Tb={})).filterSensitiveLog=function(e){return im(im({},e),e.SSECustomerKey&&{SSECustomerKey:Mc})},(kb||{}).filterSensitiveLog=function(e){return im({},e)},(xb||{}).filterSensitiveLog=function(e){return im({},e)},(Nb||{}).filterSensitiveLog=function(e){return im({},e)},(Lb||{}).filterSensitiveLog=function(e){return im({},e)},(Mb||{}).filterSensitiveLog=function(e){return im({},e)},(Rb||{}).filterSensitiveLog=function(e){return im({},e)},(Ub||{}).filterSensitiveLog=function(e){return im({},e)},(Db||{}).filterSensitiveLog=function(e){return im({},e)},(Fb||{}).filterSensitiveLog=function(e){return im({},e)},(jb||{}).filterSensitiveLog=function(e){return im({},e)},(Bb||{}).filterSensitiveLog=function(e){return im({},e)},(Vb||{}).filterSensitiveLog=function(e){return im({},e)},(zb||{}).filterSensitiveLog=function(e){return im({},e)},(qb||{}).filterSensitiveLog=function(e){return im({},e)},(Kb||{}).filterSensitiveLog=function(e){return im({},e)},(Hb||{}).filterSensitiveLog=function(e){return im({},e)},(Gb||{}).filterSensitiveLog=function(e){return im({},e)},(Wb||{}).filterSensitiveLog=function(e){return im({},e)},($b||{}).filterSensitiveLog=function(e){return im({},e)},(Yb||{}).filterSensitiveLog=function(e){return im({},e)},(Jb||{}).filterSensitiveLog=function(e){return im({},e)},(Zb||{}).filterSensitiveLog=function(e){return im({},e)},(Qb||{}).filterSensitiveLog=function(e){return im({},e)},(Xb||{}).filterSensitiveLog=function(e){return im(im({},e),e.SSEKMSKeyId&&{SSEKMSKeyId:Mc})},(eS||{}).filterSensitiveLog=function(e){return im(im({},e),e.SSECustomerKey&&{SSECustomerKey:Mc})},(tS||{}).filterSensitiveLog=function(e){return im({},e)},(nS||{}).filterSensitiveLog=function(e){return im({},e)},(rS||{}).filterSensitiveLog=function(e){return im(im({},e),e.InventoryConfigurationList&&{InventoryConfigurationList:e.InventoryConfigurationList.map(function(e){return fv.filterSensitiveLog(e)})})},(iS||{}).filterSensitiveLog=function(e){return im({},e)},(oS||{}).filterSensitiveLog=function(e){return im({},e)},(sS||{}).filterSensitiveLog=function(e){return im({},e)},(aS||{}).filterSensitiveLog=function(e){return im({},e)},(uS||{}).filterSensitiveLog=function(e){return im({},e)},(cS||{}).filterSensitiveLog=function(e){return im({},e)},(lS||{}).filterSensitiveLog=function(e){return im({},e)},(pS||{}).filterSensitiveLog=function(e){return im({},e)},(dS||{}).filterSensitiveLog=function(e){return im({},e)},(fS||{}).filterSensitiveLog=function(e){return im({},e)},(hS||{}).filterSensitiveLog=function(e){return im({},e)},(gS||(gS={})).filterSensitiveLog=function(e){return im({},e)},(mS||(mS={})).filterSensitiveLog=function(e){return im({},e)},(yS||{}).filterSensitiveLog=function(e){return im({},e)},(vS||{}).filterSensitiveLog=function(e){return im({},e)},(bS||{}).filterSensitiveLog=function(e){return im({},e)},(SS||{}).filterSensitiveLog=function(e){return im({},e)},(wS||{}).filterSensitiveLog=function(e){return im({},e)},(CS||{}).filterSensitiveLog=function(e){return im({},e)},(_S||{}).filterSensitiveLog=function(e){return im({},e)},(ES||(ES={})).filterSensitiveLog=function(e){return im({},e)},(IS||(IS={})).filterSensitiveLog=function(e){return im({},e)},(AS||{}).filterSensitiveLog=function(e){return im({},e)},(PS||{}).filterSensitiveLog=function(e){return im({},e)},(OS||{}).filterSensitiveLog=function(e){return im({},e)},(TS||{}).filterSensitiveLog=function(e){return im({},e)},(kS||{}).filterSensitiveLog=function(e){return im({},e)},(xS||{}).filterSensitiveLog=function(e){return im(im({},e),e.ServerSideEncryptionConfiguration&&{ServerSideEncryptionConfiguration:rv.filterSensitiveLog(e.ServerSideEncryptionConfiguration)})},(NS||{}).filterSensitiveLog=function(e){return im(im({},e),e.InventoryConfiguration&&{InventoryConfiguration:fv.filterSensitiveLog(e.InventoryConfiguration)})},(LS||{}).filterSensitiveLog=function(e){return im({},e)},(MS||{}).filterSensitiveLog=function(e){return im({},e)},(RS||{}).filterSensitiveLog=function(e){return im({},e)},(US||{}).filterSensitiveLog=function(e){return im({},e)},(DS||{}).filterSensitiveLog=function(e){return im({},e)},(FS||{}).filterSensitiveLog=function(e){return im({},e)},(jS||{}).filterSensitiveLog=function(e){return im({},e)},(BS||{}).filterSensitiveLog=function(e){return im({},e)},(VS||{}).filterSensitiveLog=function(e){return im({},e)},(zS||{}).filterSensitiveLog=function(e){return im({},e)},(qS||{}).filterSensitiveLog=function(e){return im({},e)},(KS||{}).filterSensitiveLog=function(e){return im({},e)},(HS||{}).filterSensitiveLog=function(e){return im({},e)},(GS||{}).filterSensitiveLog=function(e){return im({},e)},(WS||{}).filterSensitiveLog=function(e){return im({},e)},($S||{}).filterSensitiveLog=function(e){return im({},e)},(YS||{}).filterSensitiveLog=function(e){return im({},e)},(JS||(JS={})).filterSensitiveLog=function(e){return im(im(im({},e),e.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:Mc}),e.SSEKMSKeyId&&{SSEKMSKeyId:Mc})},(ZS||(ZS={})).filterSensitiveLog=function(e){return im(im(im(im({},e),e.SSECustomerKey&&{SSECustomerKey:Mc}),e.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:Mc}),e.SSEKMSKeyId&&{SSEKMSKeyId:Mc})},(QS||{}).filterSensitiveLog=function(e){return im({},e)},(XS||{}).filterSensitiveLog=function(e){return im({},e)},(ew||{}).filterSensitiveLog=function(e){return im({},e)},(tw||{}).filterSensitiveLog=function(e){return im({},e)},(nw||{}).filterSensitiveLog=function(e){return im({},e)},(rw||{}).filterSensitiveLog=function(e){return im({},e)},(iw||{}).filterSensitiveLog=function(e){return im({},e)},(ow||{}).filterSensitiveLog=function(e){return im({},e)},(sw||{}).filterSensitiveLog=function(e){return im({},e)},(aw||{}).filterSensitiveLog=function(e){return im({},e)},(uw||{}).filterSensitiveLog=function(e){return im({},e)},(cw||{}).filterSensitiveLog=function(e){return im({},e)},(lw||{}).filterSensitiveLog=function(e){return im({},e)},(pw||{}).filterSensitiveLog=function(e){return im({},e)},(dw||(dw={})).filterSensitiveLog=function(e){return im(im({},e),e.KMSKeyId&&{KMSKeyId:Mc})},(gw||(gw={})).filterSensitiveLog=function(e){return im({},e)},(fw||(fw={})).filterSensitiveLog=function(e){return im(im({},e),e.Encryption&&{Encryption:dw.filterSensitiveLog(e.Encryption)})},(hw||(hw={})).filterSensitiveLog=function(e){return im(im({},e),e.S3&&{S3:fw.filterSensitiveLog(e.S3)})},(gw={}).IGNORE="IGNORE",gw.NONE="NONE",gw.USE="USE",(mw||(mw={})).filterSensitiveLog=function(e){return im({},e)},(mw={}).DOCUMENT="DOCUMENT",mw.LINES="LINES",(yw||{}).filterSensitiveLog=function(e){return im({},e)},(vw||{}).filterSensitiveLog=function(e){return im({},e)},(bw||(bw={})).filterSensitiveLog=function(e){return im({},e)},(bw={}).ALWAYS="ALWAYS",bw.ASNEEDED="ASNEEDED",(Sw||{}).filterSensitiveLog=function(e){return im({},e)},(ww||{}).filterSensitiveLog=function(e){return im({},e)},(Cw||{}).filterSensitiveLog=function(e){return im({},e)},(_w||{}).filterSensitiveLog=function(e){return im({},e)};var Ow=(Tw.prototype.withName=function(e){return this.name=e,this},Tw.prototype.addAttribute=function(e,t){return this.attributes[e]=t,this},Tw.prototype.addChildNode=function(e){return this.children.push(e),this},Tw.prototype.removeAttribute=function(e){return delete this.attributes[e],this},Tw.prototype.toString=function(){var t,e,n=Boolean(this.children.length),r="<"+this.name,i=this.attributes;try{for(var o=G(Object.keys(i)),s=o.next();!s.done;s=o.next()){var a=s.value,u=i[a];null!=u&&(r+=" "+a+'="'+(""+u).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")+'"')}}catch(e){t={error:e}}finally{try{s&&!s.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}return r+(n?">"+this.children.map(function(e){return e.toString()}).join("")+"</"+this.name+">":"/>")},Tw);function Tw(e,t){void 0===t&&(t=[]),this.name=e,this.children=t,this.attributes={}}var kw=(xw.prototype.toString=function(){return(""+this.value).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},xw);function xw(e){this.value=e}var Nw,Lw=function(a,u){return om(void 0,void 0,void 0,function(){var t,n,r,i,o,s;return sm(this,function(e){switch(e.label){case 0:return t=[im({},a)],s={},[4,tC(a.body,u)];case 1:switch(i=im.apply(void 0,t.concat([(s.body=e.sent(),s)])),o="UnknownError",o=nC(a,i.body)){case"NoSuchUpload":case"com.amazonaws.s3#NoSuchUpload":return[3,2]}return[3,4];case 2:return r=[{}],[4,Kw(i)];case 3:return n=im.apply(void 0,[im.apply(void 0,r.concat([e.sent()])),{name:o,$metadata:Qw(a)}]),[3,5];case 4:i=i.body,o=i.code||i.Code||o,n=im(im({},i),{name:""+o,message:i.message||i.Message||o,$fault:"client",$metadata:Qw(a)}),e.label=5;case 5:return o=n.message||n.Message||o,n.message=o,delete n.Message,[2,Promise.reject(Object.assign(new Error(o),n))]}})})},Mw=function(r,i){return om(void 0,void 0,void 0,function(){var t,n;return sm(this,function(e){switch(e.label){case 0:return t=[im({},r)],n={},[4,tC(r.body,i)];case 1:return t=im.apply(void 0,t.concat([(n.body=e.sent(),n)])),n="UnknownError",n=nC(r,t.body),t=t.body,n=t.code||t.Code||n,t=im(im({},t),{name:""+n,message:t.message||t.Message||n,$fault:"client",$metadata:Qw(r)}),n=t.message||t.Message||n,t.message=n,delete t.Message,[2,Promise.reject(Object.assign(new Error(n),t))]}})})},Rw=function(r,i){return om(void 0,void 0,void 0,function(){var t,n;return sm(this,function(e){switch(e.label){case 0:return t=[im({},r)],n={},[4,tC(r.body,i)];case 1:return t=im.apply(void 0,t.concat([(n.body=e.sent(),n)])),n="UnknownError",n=nC(r,t.body),t=t.body,n=t.code||t.Code||n,t=im(im({},t),{name:""+n,message:t.message||t.Message||n,$fault:"client",$metadata:Qw(r)}),n=t.message||t.Message||n,t.message=n,delete t.Message,[2,Promise.reject(Object.assign(new Error(n),t))]}})})},Uw=function(r,i){return om(void 0,void 0,void 0,function(){var t,n;return sm(this,function(e){switch(e.label){case 0:return t=[im({},r)],n={},[4,tC(r.body,i)];case 1:return t=im.apply(void 0,t.concat([(n.body=e.sent(),n)])),n="UnknownError",n=nC(r,t.body),t=t.body,n=t.code||t.Code||n,t=im(im({},t),{name:""+n,message:t.message||t.Message||n,$fault:"client",$metadata:Qw(r)}),n=t.message||t.Message||n,t.message=n,delete t.Message,[2,Promise.reject(Object.assign(new Error(n),t))]}})})},Dw=function(a,u){return om(void 0,void 0,void 0,function(){var t,n,r,i,o,s;return sm(this,function(e){switch(e.label){case 0:return t=[im({},a)],s={},[4,tC(a.body,u)];case 1:switch(i=im.apply(void 0,t.concat([(s.body=e.sent(),s)])),o="UnknownError",o=nC(a,i.body)){case"NoSuchKey":case"com.amazonaws.s3#NoSuchKey":return[3,2]}return[3,4];case 2:return r=[{}],[4,qw(i)];case 3:return n=im.apply(void 0,[im.apply(void 0,r.concat([e.sent()])),{name:o,$metadata:Qw(a)}]),[3,5];case 4:i=i.body,o=i.code||i.Code||o,n=im(im({},i),{name:""+o,message:i.message||i.Message||o,$fault:"client",$metadata:Qw(a)}),e.label=5;case 5:return o=n.message||n.Message||o,n.message=o,delete n.Message,[2,Promise.reject(Object.assign(new Error(o),n))]}})})},Fw=function(a,u){return om(void 0,void 0,void 0,function(){var t,n,r,i,o,s;return sm(this,function(e){switch(e.label){case 0:return t=[im({},a)],s={},[4,tC(a.body,u)];case 1:switch(i=im.apply(void 0,t.concat([(s.body=e.sent(),s)])),o="UnknownError",o=nC(a,i.body)){case"NoSuchBucket":case"com.amazonaws.s3#NoSuchBucket":return[3,2]}return[3,4];case 2:return r=[{}],[4,zw(i)];case 3:return n=im.apply(void 0,[im.apply(void 0,r.concat([e.sent()])),{name:o,$metadata:Qw(a)}]),[3,5];case 4:i=i.body,o=i.code||i.Code||o,n=im(im({},i),{name:""+o,message:i.message||i.Message||o,$fault:"client",$metadata:Qw(a)}),e.label=5;case 5:return o=n.message||n.Message||o,n.message=o,delete n.Message,[2,Promise.reject(Object.assign(new Error(o),n))]}})})},jw=function(r,i){return om(void 0,void 0,void 0,function(){var t,n;return sm(this,function(e){switch(e.label){case 0:return t=[im({},r)],n={},[4,tC(r.body,i)];case 1:return t=im.apply(void 0,t.concat([(n.body=e.sent(),n)])),n="UnknownError",n=nC(r,t.body),t=t.body,n=t.code||t.Code||n,t=im(im({},t),{name:""+n,message:t.message||t.Message||n,$fault:"client",$metadata:Qw(r)}),n=t.message||t.Message||n,t.message=n,delete t.Message,[2,Promise.reject(Object.assign(new Error(n),t))]}})})},Bw=function(r,i){return om(void 0,void 0,void 0,function(){var t,n;return sm(this,function(e){switch(e.label){case 0:return t=[im({},r)],n={},[4,tC(r.body,i)];case 1:return t=im.apply(void 0,t.concat([(n.body=e.sent(),n)])),n="UnknownError",n=nC(r,t.body),t=t.body,n=t.code||t.Code||n,t=im(im({},t),{name:""+n,message:t.message||t.Message||n,$fault:"client",$metadata:Qw(r)}),n=t.message||t.Message||n,t.message=n,delete t.Message,[2,Promise.reject(Object.assign(new Error(n),t))]}})})},Vw=function(r,i){return om(void 0,void 0,void 0,function(){var t,n;return sm(this,function(e){switch(e.label){case 0:return t=[im({},r)],n={},[4,tC(r.body,i)];case 1:return t=im.apply(void 0,t.concat([(n.body=e.sent(),n)])),n="UnknownError",n=nC(r,t.body),t=t.body,n=t.code||t.Code||n,t=im(im({},t),{name:""+n,message:t.message||t.Message||n,$fault:"client",$metadata:Qw(r)}),n=t.message||t.Message||n,t.message=n,delete t.Message,[2,Promise.reject(Object.assign(new Error(n),t))]}})})},zw=function(n,e){return om(void 0,void 0,void 0,function(){var t;return sm(this,function(e){return t={name:"NoSuchBucket",$fault:"client",$metadata:Qw(n)},n.body,[2,t]})})},qw=function(n,e){return om(void 0,void 0,void 0,function(){var t;return sm(this,function(e){return t={name:"NoSuchKey",$fault:"client",$metadata:Qw(n)},n.body,[2,t]})})},Kw=function(n,e){return om(void 0,void 0,void 0,function(){var t;return sm(this,function(e){return t={name:"NoSuchUpload",$fault:"client",$metadata:Qw(n)},n.body,[2,t]})})},Hw=function(e,t){var n=new Ow("CompletedMultipartUpload");return void 0!==e.Parts&&Gw(e.Parts).map(function(e){e=e.withName("Part"),n.addChildNode(e)}),n},Gw=function(e,t){return e.map(function(e){var t,n;return(t=e,e=new Ow("CompletedPart"),void 0!==t.ETag&&(n=new Ow("ETag").addChildNode(new kw(t.ETag)).withName("ETag"),e.addChildNode(n)),void 0!==t.PartNumber&&(n=new Ow("PartNumber").addChildNode(new kw(String(t.PartNumber))).withName("PartNumber"),e.addChildNode(n)),e).withName("member")})},Ww=function(e,t){return(e||[]).map(function(e){return t={Prefix:void 0},void 0!==(e=e).Prefix&&(t.Prefix=e.Prefix),t;var t})},$w=function(e,t){var n={ID:void 0,DisplayName:void 0};return void 0!==e.ID&&(n.ID=e.ID),void 0!==e.DisplayName&&(n.DisplayName=e.DisplayName),n},Yw=function(e,t){return(e||[]).map(function(e){return t={Size:void 0,ETag:void 0,Owner:void 0,StorageClass:void 0,Key:void 0,LastModified:void 0},void 0!==(e=e).Size&&(t.Size=parseInt(e.Size)),void 0!==e.ETag&&(t.ETag=e.ETag),void 0!==e.Owner&&(t.Owner=Jw(e.Owner)),void 0!==e.StorageClass&&(t.StorageClass=e.StorageClass),void 0!==e.Key&&(t.Key=e.Key),void 0!==e.LastModified&&(t.LastModified=new Date(e.LastModified)),t;var t})},Jw=function(e,t){var n={DisplayName:void 0,ID:void 0};return void 0!==e.DisplayName&&(n.DisplayName=e.DisplayName),void 0!==e.ID&&(n.ID=e.ID),n},Zw=function(e,t){return(e||[]).map(function(e){return t={Size:void 0,LastModified:void 0,PartNumber:void 0,ETag:void 0},void 0!==(e=e).Size&&(t.Size=parseInt(e.Size)),void 0!==e.LastModified&&(t.LastModified=new Date(e.LastModified)),void 0!==e.PartNumber&&(t.PartNumber=parseInt(e.PartNumber)),void 0!==e.ETag&&(t.ETag=e.ETag),t;var t})},Qw=function(e){return{httpStatusCode:e.statusCode,httpHeaders:e.headers,requestId:e.headers["x-amzn-requestid"]}},Xw=function(e,t){return(e=void 0===e?new Uint8Array:e)instanceof Uint8Array?Promise.resolve(e):t.streamCollector(e)||Promise.resolve(new Uint8Array)},eC=function(e){return!(void 0===e||""===e||Object.getOwnPropertyNames(e).includes("length")&&0==e.length||Object.getOwnPropertyNames(e).includes("size")&&0==e.size)},tC=function(e,t){return Xw(e,n=t).then(function(e){return n.utf8Encoder(e)}).then(function(e){if(e.length){var t=T.parse(e,{attributeNamePrefix:"",ignoreAttributes:!1,parseNodeValue:!1,tagValueProcessor:function(e,t){return e.replace(/&amp;/g,"&").replace(/&apos;/g,"'").replace(/&quot;/g,'"').replace(/&gt;/g,">").replace(/&lt;/g,"<")}}),e=Object.keys(t)[0],t=t[e];return t["#text"]&&(t[e]=t["#text"],delete t["#text"]),Ac(t)}return{}});var n},nC=function(e,t){return void 0!==t.Code?t.Code:404==e.statusCode?"NotFound":""},rC=(rm(iC,Nw=pn),iC.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Md(t,this.serialize,this.deserialize)),this.middlewareStack.use(mm(t));var r=e.concat(this.middlewareStack),i=t.logger,o="AbortMultipartUploadCommand",e={logger:i,clientName:"S3Client",commandName:o,inputFilterSensitiveLog:Gm.filterSensitiveLog,outputFilterSensitiveLog:Hm.filterSensitiveLog};"function"==typeof i.info&&i.info({clientName:"S3Client",commandName:o});var s=t.requestHandler;return r.resolve(function(e){return s.handle(e.request,n||{})},e)},iC.prototype.serialize=function(e,t){return a=e,u=t,om(void 0,void 0,void 0,function(){var t,n,r,i,o,s;return sm(this,function(e){switch(e.label){case 0:if(t=im(im({"Content-Type":""},eC(a.RequestPayer)&&{"x-amz-request-payer":a.RequestPayer}),eC(a.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":a.ExpectedBucketOwner}),n="/{Bucket}/{Key+}",void 0===a.Key)throw new Error("No value provided for input HTTP label: Key.");if((o=a.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");if(n=n.replace("{Key+}",o.split("/").map(Ec).join("/")),void 0===a.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((o=a.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return n=n.replace("{Bucket}",Ec(o)),r=im({"x-id":"AbortMultipartUpload"},void 0!==a.UploadId&&{uploadId:a.UploadId}),[4,u.endpoint()];case 1:return s=e.sent(),i=s.hostname,o=s.protocol,o=void 0===o?"https":o,s=s.port,[2,new Xs({protocol:o,hostname:i,port:s,method:"DELETE",headers:t,path:n,query:r,body:void 0})]}})});var a,u},iC.prototype.deserialize=function(e,t){return n=e,r=t,om(void 0,void 0,void 0,function(){var t;return sm(this,function(e){switch(e.label){case 0:return 204!==n.statusCode&&300<=n.statusCode?[2,Lw(n,r)]:(t={$metadata:Qw(n),RequestCharged:void 0},void 0!==n.headers["x-amz-request-charged"]&&(t.RequestCharged=n.headers["x-amz-request-charged"]),[4,Xw(n.body,r)]);case 1:return e.sent(),[2,Promise.resolve(t)]}})});var n,r},iC);function iC(e){var t=Nw.call(this)||this;return t.input=e,t}var oC,sC=(rm(aC,oC=pn),aC.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Md(t,this.serialize,this.deserialize)),this.middlewareStack.use(mm(t));var r=e.concat(this.middlewareStack),i=t.logger,o="CompleteMultipartUploadCommand",e={logger:i,clientName:"S3Client",commandName:o,inputFilterSensitiveLog:ry.filterSensitiveLog,outputFilterSensitiveLog:ey.filterSensitiveLog};"function"==typeof i.info&&i.info({clientName:"S3Client",commandName:o});var s=t.requestHandler;return r.resolve(function(e){return s.handle(e.request,n||{})},e)},aC.prototype.serialize=function(e,t){return u=e,c=t,om(void 0,void 0,void 0,function(){var t,n,r,i,o,s,a;return sm(this,function(e){switch(e.label){case 0:if(t=im(im({"Content-Type":"application/xml"},eC(u.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":u.ExpectedBucketOwner}),eC(u.RequestPayer)&&{"x-amz-request-payer":u.RequestPayer}),n="/{Bucket}/{Key+}",void 0===u.Key)throw new Error("No value provided for input HTTP label: Key.");if((o=u.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");if(n=n.replace("{Key+}",o.split("/").map(Ec).join("/")),void 0===u.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((o=u.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return n=n.replace("{Bucket}",Ec(o)),r=im({},void 0!==u.UploadId&&{uploadId:u.UploadId}),void 0!==u.MultipartUpload&&(s=Hw(u.MultipartUpload),i='<?xml version="1.0" encoding="UTF-8"?>',s.addAttribute("xmlns","http://s3.amazonaws.com/doc/2006-03-01/"),i+=s.toString()),[4,c.endpoint()];case 1:return a=e.sent(),o=a.hostname,s=a.protocol,s=void 0===s?"https":s,a=a.port,[2,new Xs({protocol:s,hostname:o,port:a,method:"POST",headers:t,path:n,query:r,body:i})]}})});var u,c},aC.prototype.deserialize=function(e,t){return r=e,i=t,om(void 0,void 0,void 0,function(){var t,n;return sm(this,function(e){switch(e.label){case 0:return 200!==r.statusCode&&300<=r.statusCode?[2,Mw(r,i)]:(t={$metadata:Qw(r),Bucket:void 0,ETag:void 0,Expiration:void 0,Key:void 0,Location:void 0,RequestCharged:void 0,SSEKMSKeyId:void 0,ServerSideEncryption:void 0,VersionId:void 0},void 0!==r.headers["x-amz-expiration"]&&(t.Expiration=r.headers["x-amz-expiration"]),void 0!==r.headers["x-amz-server-side-encryption"]&&(t.ServerSideEncryption=r.headers["x-amz-server-side-encryption"]),void 0!==r.headers["x-amz-server-side-encryption-aws-kms-key-id"]&&(t.SSEKMSKeyId=r.headers["x-amz-server-side-encryption-aws-kms-key-id"]),void 0!==r.headers["x-amz-version-id"]&&(t.VersionId=r.headers["x-amz-version-id"]),void 0!==r.headers["x-amz-request-charged"]&&(t.RequestCharged=r.headers["x-amz-request-charged"]),[4,tC(r.body,i)]);case 1:return void 0!==(n=e.sent()).Bucket&&(t.Bucket=n.Bucket),void 0!==n.ETag&&(t.ETag=n.ETag),void 0!==n.Key&&(t.Key=n.Key),void 0!==n.Location&&(t.Location=n.Location),[2,Promise.resolve(t)]}})});var r,i},aC);function aC(e){var t=oC.call(this)||this;return t.input=e,t}function uC(t){return{applyToStack:function(e){e.add(function(g){var e=this;return function(h){return function(f){return K(e,void 0,void 0,function(){var t,n,r,i,o,s,a,u,c,l,p,d;return H(this,function(e){switch(e.label){case 0:t=j({},f.input),o=[{target:"SSECustomerKey",hash:"SSECustomerKeyMD5"},{target:"CopySourceSSECustomerKey",hash:"CopySourceSSECustomerKeyMD5"}],e.label=1;case 1:e.trys.push([1,6,7,8]),n=G(o),r=n.next(),e.label=2;case 2:return r.done?[3,5]:(i=r.value,(o=t[i.target])?(u=ArrayBuffer.isView(o)?new Uint8Array(o.buffer,o.byteOffset,o.byteLength):"string"==typeof o?g.utf8Decoder(o):new Uint8Array(o),c=g.base64Encoder(u),(o=new g.md5).update(u),s=[j({},t)],(d={})[i.target]=c,a=i.hash,c=(u=g).base64Encoder,[4,o.digest()]):[3,4]);case 3:t=j.apply(void 0,s.concat([(d[a]=c.apply(u,[e.sent()]),d)])),e.label=4;case 4:return r=n.next(),[3,2];case 5:return[3,8];case 6:return l=e.sent(),l={error:l},[3,8];case 7:try{r&&!r.done&&(p=n.return)&&p.call(n)}finally{if(l)throw l.error}return[7];case 8:return[2,h(j(j({},f),{input:t}))]}})})}}}(t),lC)}}}var cC,lC={name:"ssecMiddleware",step:"initialize",tags:["SSE"]},pC=(rm(dC,cC=pn),dC.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Md(t,this.serialize,this.deserialize)),this.middlewareStack.use(uC(t)),this.middlewareStack.use(mm(t));var r=e.concat(this.middlewareStack),i=t.logger,o="CreateMultipartUploadCommand",e={logger:i,clientName:"S3Client",commandName:o,inputFilterSensitiveLog:hy.filterSensitiveLog,outputFilterSensitiveLog:fy.filterSensitiveLog};"function"==typeof i.info&&i.info({clientName:"S3Client",commandName:o});var s=t.requestHandler;return r.resolve(function(e){return s.handle(e.request,n||{})},e)},dC.prototype.serialize=function(e,t){return a=e,u=t,om(void 0,void 0,void 0,function(){var t,n,r,i,o,s;return sm(this,function(e){switch(e.label){case 0:if(t=im(im(im(im(im(im(im(im(im(im(im(im(im(im(im(im(im(im(im(im(im(im(im(im(im(im({"Content-Type":""},eC(a.GrantFullControl)&&{"x-amz-grant-full-control":a.GrantFullControl}),eC(a.SSECustomerKeyMD5)&&{"x-amz-server-side-encryption-customer-key-MD5":a.SSECustomerKeyMD5}),eC(a.SSECustomerAlgorithm)&&{"x-amz-server-side-encryption-customer-algorithm":a.SSECustomerAlgorithm}),eC(a.SSEKMSKeyId)&&{"x-amz-server-side-encryption-aws-kms-key-id":a.SSEKMSKeyId}),eC(a.ObjectLockLegalHoldStatus)&&{"x-amz-object-lock-legal-hold":a.ObjectLockLegalHoldStatus}),eC(a.RequestPayer)&&{"x-amz-request-payer":a.RequestPayer}),eC(a.GrantRead)&&{"x-amz-grant-read":a.GrantRead}),eC(a.GrantWriteACP)&&{"x-amz-grant-write-acp":a.GrantWriteACP}),eC(a.WebsiteRedirectLocation)&&{"x-amz-website-redirect-location":a.WebsiteRedirectLocation}),eC(a.ContentType)&&{"Content-Type":a.ContentType}),eC(a.ContentLanguage)&&{"Content-Language":a.ContentLanguage}),eC(a.CacheControl)&&{"Cache-Control":a.CacheControl}),eC(a.GrantReadACP)&&{"x-amz-grant-read-acp":a.GrantReadACP}),eC(a.Tagging)&&{"x-amz-tagging":a.Tagging}),eC(a.SSEKMSEncryptionContext)&&{"x-amz-server-side-encryption-context":a.SSEKMSEncryptionContext}),eC(a.ACL)&&{"x-amz-acl":a.ACL}),eC(a.SSECustomerKey)&&{"x-amz-server-side-encryption-customer-key":a.SSECustomerKey}),eC(a.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":a.ExpectedBucketOwner}),eC(a.Expires)&&{Expires:Nc(a.Expires).toString()}),eC(a.ObjectLockRetainUntilDate)&&{"x-amz-object-lock-retain-until-date":(a.ObjectLockRetainUntilDate.toISOString().split(".")[0]+"Z").toString()}),eC(a.ServerSideEncryption)&&{"x-amz-server-side-encryption":a.ServerSideEncryption}),eC(a.ContentDisposition)&&{"Content-Disposition":a.ContentDisposition}),eC(a.ObjectLockMode)&&{"x-amz-object-lock-mode":a.ObjectLockMode}),eC(a.StorageClass)&&{"x-amz-storage-class":a.StorageClass}),eC(a.ContentEncoding)&&{"Content-Encoding":a.ContentEncoding}),void 0!==a.Metadata&&Object.keys(a.Metadata).reduce(function(e,t){return e["x-amz-meta-"+t]=a.Metadata[t],e},{})),n="/{Bucket}/{Key+}",void 0===a.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((o=a.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(n=n.replace("{Bucket}",Ec(o)),void 0===a.Key)throw new Error("No value provided for input HTTP label: Key.");if((o=a.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return n=n.replace("{Key+}",o.split("/").map(Ec).join("/")),r={uploads:""},[4,u.endpoint()];case 1:return s=e.sent(),i=s.hostname,o=s.protocol,o=void 0===o?"https":o,s=s.port,[2,new Xs({protocol:o,hostname:i,port:s,method:"POST",headers:t,path:n,query:r,body:void 0})]}})});var a,u},dC.prototype.deserialize=function(e,t){return r=e,i=t,om(void 0,void 0,void 0,function(){var t,n;return sm(this,function(e){switch(e.label){case 0:return 200!==r.statusCode&&300<=r.statusCode?[2,Rw(r,i)]:(t={$metadata:Qw(r),AbortDate:void 0,AbortRuleId:void 0,Bucket:void 0,Key:void 0,RequestCharged:void 0,SSECustomerAlgorithm:void 0,SSECustomerKeyMD5:void 0,SSEKMSEncryptionContext:void 0,SSEKMSKeyId:void 0,ServerSideEncryption:void 0,UploadId:void 0},void 0!==r.headers["x-amz-server-side-encryption-context"]&&(t.SSEKMSEncryptionContext=r.headers["x-amz-server-side-encryption-context"]),void 0!==r.headers["x-amz-server-side-encryption"]&&(t.ServerSideEncryption=r.headers["x-amz-server-side-encryption"]),void 0!==r.headers["x-amz-request-charged"]&&(t.RequestCharged=r.headers["x-amz-request-charged"]),void 0!==r.headers["x-amz-abort-date"]&&(t.AbortDate=new Date(r.headers["x-amz-abort-date"])),void 0!==r.headers["x-amz-server-side-encryption-customer-algorithm"]&&(t.SSECustomerAlgorithm=r.headers["x-amz-server-side-encryption-customer-algorithm"]),void 0!==r.headers["x-amz-server-side-encryption-aws-kms-key-id"]&&(t.SSEKMSKeyId=r.headers["x-amz-server-side-encryption-aws-kms-key-id"]),void 0!==r.headers["x-amz-abort-rule-id"]&&(t.AbortRuleId=r.headers["x-amz-abort-rule-id"]),void 0!==r.headers["x-amz-server-side-encryption-customer-key-md5"]&&(t.SSECustomerKeyMD5=r.headers["x-amz-server-side-encryption-customer-key-md5"]),[4,tC(r.body,i)]);case 1:return void 0!==(n=e.sent()).Bucket&&(t.Bucket=n.Bucket),void 0!==n.Key&&(t.Key=n.Key),void 0!==n.UploadId&&(t.UploadId=n.UploadId),[2,Promise.resolve(t)]}})});var r,i},dC);function dC(e){var t=cC.call(this)||this;return t.input=e,t}var fC,hC=(rm(gC,fC=pn),gC.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Md(t,this.serialize,this.deserialize)),this.middlewareStack.use(mm(t));var r=e.concat(this.middlewareStack),i=t.logger,o="DeleteObjectCommand",e={logger:i,clientName:"S3Client",commandName:o,inputFilterSensitiveLog:Oy.filterSensitiveLog,outputFilterSensitiveLog:Py.filterSensitiveLog};"function"==typeof i.info&&i.info({clientName:"S3Client",commandName:o});var s=t.requestHandler;return r.resolve(function(e){return s.handle(e.request,n||{})},e)},gC.prototype.serialize=function(e,t){return a=e,u=t,om(void 0,void 0,void 0,function(){var t,n,r,i,o,s;return sm(this,function(e){switch(e.label){case 0:if(t=im(im(im(im({"Content-Type":""},eC(a.MFA)&&{"x-amz-mfa":a.MFA}),eC(a.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":a.ExpectedBucketOwner}),eC(a.BypassGovernanceRetention)&&{"x-amz-bypass-governance-retention":a.BypassGovernanceRetention.toString()}),eC(a.RequestPayer)&&{"x-amz-request-payer":a.RequestPayer}),n="/{Bucket}/{Key+}",void 0===a.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((o=a.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(n=n.replace("{Bucket}",Ec(o)),void 0===a.Key)throw new Error("No value provided for input HTTP label: Key.");if((o=a.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return n=n.replace("{Key+}",o.split("/").map(Ec).join("/")),r=im({"x-id":"DeleteObject"},void 0!==a.VersionId&&{versionId:a.VersionId}),[4,u.endpoint()];case 1:return s=e.sent(),i=s.hostname,o=s.protocol,o=void 0===o?"https":o,s=s.port,[2,new Xs({protocol:o,hostname:i,port:s,method:"DELETE",headers:t,path:n,query:r,body:void 0})]}})});var a,u},gC.prototype.deserialize=function(e,t){return n=e,r=t,om(void 0,void 0,void 0,function(){var t;return sm(this,function(e){switch(e.label){case 0:return 204!==n.statusCode&&300<=n.statusCode?[2,Uw(n,r)]:(t={$metadata:Qw(n),DeleteMarker:void 0,RequestCharged:void 0,VersionId:void 0},void 0!==n.headers["x-amz-delete-marker"]&&(t.DeleteMarker="true"===n.headers["x-amz-delete-marker"]),void 0!==n.headers["x-amz-request-charged"]&&(t.RequestCharged=n.headers["x-amz-request-charged"]),void 0!==n.headers["x-amz-version-id"]&&(t.VersionId=n.headers["x-amz-version-id"]),[4,Xw(n.body,r)]);case 1:return e.sent(),[2,Promise.resolve(t)]}})});var n,r},gC);function gC(e){var t=fC.call(this)||this;return t.input=e,t}var mC,yC=(rm(vC,mC=pn),vC.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Md(t,this.serialize,this.deserialize)),this.middlewareStack.use(uC(t)),this.middlewareStack.use(mm(t));var r=e.concat(this.middlewareStack),i=t.logger,o="GetObjectCommand",e={logger:i,clientName:"S3Client",commandName:o,inputFilterSensitiveLog:Tb.filterSensitiveLog,outputFilterSensitiveLog:Ob.filterSensitiveLog};"function"==typeof i.info&&i.info({clientName:"S3Client",commandName:o});var s=t.requestHandler;return r.resolve(function(e){return s.handle(e.request,n||{})},e)},vC.prototype.serialize=function(e,t){return a=e,u=t,om(void 0,void 0,void 0,function(){var t,n,r,i,o,s;return sm(this,function(e){switch(e.label){case 0:if(t=im(im(im(im(im(im(im(im(im(im({"Content-Type":""},eC(a.SSECustomerKey)&&{"x-amz-server-side-encryption-customer-key":a.SSECustomerKey}),eC(a.SSECustomerAlgorithm)&&{"x-amz-server-side-encryption-customer-algorithm":a.SSECustomerAlgorithm}),eC(a.SSECustomerKeyMD5)&&{"x-amz-server-side-encryption-customer-key-MD5":a.SSECustomerKeyMD5}),eC(a.RequestPayer)&&{"x-amz-request-payer":a.RequestPayer}),eC(a.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":a.ExpectedBucketOwner}),eC(a.IfUnmodifiedSince)&&{"If-Unmodified-Since":Nc(a.IfUnmodifiedSince).toString()}),eC(a.IfModifiedSince)&&{"If-Modified-Since":Nc(a.IfModifiedSince).toString()}),eC(a.IfNoneMatch)&&{"If-None-Match":a.IfNoneMatch}),eC(a.IfMatch)&&{"If-Match":a.IfMatch}),eC(a.Range)&&{Range:a.Range}),n="/{Bucket}/{Key+}",void 0===a.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((o=a.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(n=n.replace("{Bucket}",Ec(o)),void 0===a.Key)throw new Error("No value provided for input HTTP label: Key.");if((o=a.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return n=n.replace("{Key+}",o.split("/").map(Ec).join("/")),r=im(im(im(im(im(im(im(im({"x-id":"GetObject"},void 0!==a.ResponseContentEncoding&&{"response-content-encoding":a.ResponseContentEncoding}),void 0!==a.ResponseCacheControl&&{"response-cache-control":a.ResponseCacheControl}),void 0!==a.ResponseContentLanguage&&{"response-content-language":a.ResponseContentLanguage}),void 0!==a.ResponseContentDisposition&&{"response-content-disposition":a.ResponseContentDisposition}),void 0!==a.PartNumber&&{partNumber:a.PartNumber.toString()}),void 0!==a.VersionId&&{versionId:a.VersionId}),void 0!==a.ResponseExpires&&{"response-expires":(a.ResponseExpires.toISOString().split(".")[0]+"Z").toString()}),void 0!==a.ResponseContentType&&{"response-content-type":a.ResponseContentType}),[4,u.endpoint()];case 1:return s=e.sent(),i=s.hostname,o=s.protocol,o=void 0===o?"https":o,s=s.port,[2,new Xs({protocol:o,hostname:i,port:s,method:"GET",headers:t,path:n,query:r,body:void 0})]}})});var a,u},vC.prototype.deserialize=function(e,t){return r=e,i=t,om(void 0,void 0,void 0,function(){var t,n;return sm(this,function(e){return 200!==r.statusCode&&300<=r.statusCode?[2,Dw(r,i)]:(t={$metadata:Qw(r),AcceptRanges:void 0,Body:void 0,CacheControl:void 0,ContentDisposition:void 0,ContentEncoding:void 0,ContentLanguage:void 0,ContentLength:void 0,ContentRange:void 0,ContentType:void 0,DeleteMarker:void 0,ETag:void 0,Expiration:void 0,Expires:void 0,LastModified:void 0,Metadata:void 0,MissingMeta:void 0,ObjectLockLegalHoldStatus:void 0,ObjectLockMode:void 0,ObjectLockRetainUntilDate:void 0,PartsCount:void 0,ReplicationStatus:void 0,RequestCharged:void 0,Restore:void 0,SSECustomerAlgorithm:void 0,SSECustomerKeyMD5:void 0,SSEKMSKeyId:void 0,ServerSideEncryption:void 0,StorageClass:void 0,TagCount:void 0,VersionId:void 0,WebsiteRedirectLocation:void 0},void 0!==r.headers["x-amz-object-lock-mode"]&&(t.ObjectLockMode=r.headers["x-amz-object-lock-mode"]),void 0!==r.headers["content-language"]&&(t.ContentLanguage=r.headers["content-language"]),void 0!==r.headers["content-disposition"]&&(t.ContentDisposition=r.headers["content-disposition"]),void 0!==r.headers["cache-control"]&&(t.CacheControl=r.headers["cache-control"]),void 0!==r.headers["content-type"]&&(t.ContentType=r.headers["content-type"]),void 0!==r.headers["content-range"]&&(t.ContentRange=r.headers["content-range"]),void 0!==r.headers["x-amz-server-side-encryption-aws-kms-key-id"]&&(t.SSEKMSKeyId=r.headers["x-amz-server-side-encryption-aws-kms-key-id"]),void 0!==r.headers["content-length"]&&(t.ContentLength=parseInt(r.headers["content-length"],10)),void 0!==r.headers["x-amz-object-lock-retain-until-date"]&&(t.ObjectLockRetainUntilDate=new Date(r.headers["x-amz-object-lock-retain-until-date"])),void 0!==r.headers["x-amz-object-lock-legal-hold"]&&(t.ObjectLockLegalHoldStatus=r.headers["x-amz-object-lock-legal-hold"]),void 0!==r.headers["x-amz-delete-marker"]&&(t.DeleteMarker="true"===r.headers["x-amz-delete-marker"]),void 0!==r.headers["x-amz-storage-class"]&&(t.StorageClass=r.headers["x-amz-storage-class"]),void 0!==r.headers["content-encoding"]&&(t.ContentEncoding=r.headers["content-encoding"]),void 0!==r.headers["x-amz-restore"]&&(t.Restore=r.headers["x-amz-restore"]),void 0!==r.headers["x-amz-website-redirect-location"]&&(t.WebsiteRedirectLocation=r.headers["x-amz-website-redirect-location"]),void 0!==r.headers["x-amz-server-side-encryption"]&&(t.ServerSideEncryption=r.headers["x-amz-server-side-encryption"]),void 0!==r.headers["x-amz-mp-parts-count"]&&(t.PartsCount=parseInt(r.headers["x-amz-mp-parts-count"],10)),void 0!==r.headers["x-amz-server-side-encryption-customer-algorithm"]&&(t.SSECustomerAlgorithm=r.headers["x-amz-server-side-encryption-customer-algorithm"]),void 0!==r.headers["accept-ranges"]&&(t.AcceptRanges=r.headers["accept-ranges"]),void 0!==r.headers["x-amz-version-id"]&&(t.VersionId=r.headers["x-amz-version-id"]),void 0!==r.headers.expires&&(t.Expires=new Date(r.headers.expires)),void 0!==r.headers["x-amz-expiration"]&&(t.Expiration=r.headers["x-amz-expiration"]),void 0!==r.headers["x-amz-missing-meta"]&&(t.MissingMeta=parseInt(r.headers["x-amz-missing-meta"],10)),void 0!==r.headers["x-amz-replication-status"]&&(t.ReplicationStatus=r.headers["x-amz-replication-status"]),void 0!==r.headers["x-amz-tagging-count"]&&(t.TagCount=parseInt(r.headers["x-amz-tagging-count"],10)),void 0!==r.headers["x-amz-server-side-encryption-customer-key-md5"]&&(t.SSECustomerKeyMD5=r.headers["x-amz-server-side-encryption-customer-key-md5"]),void 0!==r.headers["last-modified"]&&(t.LastModified=new Date(r.headers["last-modified"])),void 0!==r.headers.etag&&(t.ETag=r.headers.etag),void 0!==r.headers["x-amz-request-charged"]&&(t.RequestCharged=r.headers["x-amz-request-charged"]),Object.keys(r.headers).forEach(function(e){void 0===t.Metadata&&(t.Metadata={}),e.startsWith("x-amz-meta-")&&(t.Metadata[e.substring(11)]=r.headers[e])}),n=r.body,t.Body=n,[2,Promise.resolve(t)])})});var r,i},vC);function vC(e){var t=mC.call(this)||this;return t.input=e,t}var bC,SC=(rm(wC,bC=pn),wC.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Md(t,this.serialize,this.deserialize)),this.middlewareStack.use(mm(t));var r=e.concat(this.middlewareStack),i=t.logger,o="ListObjectsCommand",e={logger:i,clientName:"S3Client",commandName:o,inputFilterSensitiveLog:mS.filterSensitiveLog,outputFilterSensitiveLog:gS.filterSensitiveLog};"function"==typeof i.info&&i.info({clientName:"S3Client",commandName:o});var s=t.requestHandler;return r.resolve(function(e){return s.handle(e.request,n||{})},e)},wC.prototype.serialize=function(e,t){return a=e,u=t,om(void 0,void 0,void 0,function(){var t,n,r,i,o,s;return sm(this,function(e){switch(e.label){case 0:if(t=im(im({"Content-Type":""},eC(a.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":a.ExpectedBucketOwner}),eC(a.RequestPayer)&&{"x-amz-request-payer":a.RequestPayer}),n="/{Bucket}",void 0===a.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((o=a.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return n=n.replace("{Bucket}",Ec(o)),r=im(im(im(im(im({},void 0!==a.MaxKeys&&{"max-keys":a.MaxKeys.toString()}),void 0!==a.Marker&&{marker:a.Marker}),void 0!==a.Prefix&&{prefix:a.Prefix}),void 0!==a.Delimiter&&{delimiter:a.Delimiter}),void 0!==a.EncodingType&&{"encoding-type":a.EncodingType}),[4,u.endpoint()];case 1:return s=e.sent(),i=s.hostname,o=s.protocol,o=void 0===o?"https":o,s=s.port,[2,new Xs({protocol:o,hostname:i,port:s,method:"GET",headers:t,path:n,query:r,body:void 0})]}})});var a,u},wC.prototype.deserialize=function(e,t){return r=e,i=t,om(void 0,void 0,void 0,function(){var t,n;return sm(this,function(e){switch(e.label){case 0:return 200!==r.statusCode&&300<=r.statusCode?[2,Fw(r,i)]:(t={$metadata:Qw(r),CommonPrefixes:void 0,Contents:void 0,Delimiter:void 0,EncodingType:void 0,IsTruncated:void 0,Marker:void 0,MaxKeys:void 0,Name:void 0,NextMarker:void 0,Prefix:void 0},[4,tC(r.body,i)]);case 1:return""===(n=e.sent()).CommonPrefixes&&(t.CommonPrefixes=[]),void 0!==n.CommonPrefixes&&(t.CommonPrefixes=Ww(Ic(n.CommonPrefixes))),""===n.Contents&&(t.Contents=[]),void 0!==n.Contents&&(t.Contents=Yw(Ic(n.Contents))),void 0!==n.Delimiter&&(t.Delimiter=n.Delimiter),void 0!==n.EncodingType&&(t.EncodingType=n.EncodingType),void 0!==n.IsTruncated&&(t.IsTruncated="true"==n.IsTruncated),void 0!==n.Marker&&(t.Marker=n.Marker),void 0!==n.MaxKeys&&(t.MaxKeys=parseInt(n.MaxKeys)),void 0!==n.Name&&(t.Name=n.Name),void 0!==n.NextMarker&&(t.NextMarker=n.NextMarker),void 0!==n.Prefix&&(t.Prefix=n.Prefix),[2,Promise.resolve(t)]}})});var r,i},wC);function wC(e){var t=bC.call(this)||this;return t.input=e,t}var CC,_C=(rm(EC,CC=pn),EC.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Md(t,this.serialize,this.deserialize)),this.middlewareStack.use(mm(t));var r=e.concat(this.middlewareStack),i=t.logger,o="ListPartsCommand",e={logger:i,clientName:"S3Client",commandName:o,inputFilterSensitiveLog:IS.filterSensitiveLog,outputFilterSensitiveLog:ES.filterSensitiveLog};"function"==typeof i.info&&i.info({clientName:"S3Client",commandName:o});var s=t.requestHandler;return r.resolve(function(e){return s.handle(e.request,n||{})},e)},EC.prototype.serialize=function(e,t){return a=e,u=t,om(void 0,void 0,void 0,function(){var t,n,r,i,o,s;return sm(this,function(e){switch(e.label){case 0:if(t=im(im({"Content-Type":""},eC(a.RequestPayer)&&{"x-amz-request-payer":a.RequestPayer}),eC(a.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":a.ExpectedBucketOwner}),n="/{Bucket}/{Key+}",void 0===a.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((o=a.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(n=n.replace("{Bucket}",Ec(o)),void 0===a.Key)throw new Error("No value provided for input HTTP label: Key.");if((o=a.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return n=n.replace("{Key+}",o.split("/").map(Ec).join("/")),r=im(im(im({"x-id":"ListParts"},void 0!==a.UploadId&&{uploadId:a.UploadId}),void 0!==a.MaxParts&&{"max-parts":a.MaxParts.toString()}),void 0!==a.PartNumberMarker&&{"part-number-marker":a.PartNumberMarker.toString()}),[4,u.endpoint()];case 1:return s=e.sent(),i=s.hostname,o=s.protocol,o=void 0===o?"https":o,s=s.port,[2,new Xs({protocol:o,hostname:i,port:s,method:"GET",headers:t,path:n,query:r,body:void 0})]}})});var a,u},EC.prototype.deserialize=function(e,t){return r=e,i=t,om(void 0,void 0,void 0,function(){var t,n;return sm(this,function(e){switch(e.label){case 0:return 200!==r.statusCode&&300<=r.statusCode?[2,jw(r,i)]:(t={$metadata:Qw(r),AbortDate:void 0,AbortRuleId:void 0,Bucket:void 0,Initiator:void 0,IsTruncated:void 0,Key:void 0,MaxParts:void 0,NextPartNumberMarker:void 0,Owner:void 0,PartNumberMarker:void 0,Parts:void 0,RequestCharged:void 0,StorageClass:void 0,UploadId:void 0},void 0!==r.headers["x-amz-abort-rule-id"]&&(t.AbortRuleId=r.headers["x-amz-abort-rule-id"]),void 0!==r.headers["x-amz-request-charged"]&&(t.RequestCharged=r.headers["x-amz-request-charged"]),void 0!==r.headers["x-amz-abort-date"]&&(t.AbortDate=new Date(r.headers["x-amz-abort-date"])),[4,tC(r.body,i)]);case 1:return void 0!==(n=e.sent()).Bucket&&(t.Bucket=n.Bucket),void 0!==n.Initiator&&(t.Initiator=$w(n.Initiator)),void 0!==n.IsTruncated&&(t.IsTruncated="true"==n.IsTruncated),void 0!==n.Key&&(t.Key=n.Key),void 0!==n.MaxParts&&(t.MaxParts=parseInt(n.MaxParts)),void 0!==n.NextPartNumberMarker&&(t.NextPartNumberMarker=parseInt(n.NextPartNumberMarker)),void 0!==n.Owner&&(t.Owner=Jw(n.Owner)),void 0!==n.PartNumberMarker&&(t.PartNumberMarker=parseInt(n.PartNumberMarker)),""===n.Part&&(t.Parts=[]),void 0!==n.Part&&(t.Parts=Zw(Ic(n.Part))),void 0!==n.StorageClass&&(t.StorageClass=n.StorageClass),void 0!==n.UploadId&&(t.UploadId=n.UploadId),[2,Promise.resolve(t)]}})});var r,i},EC);function EC(e){var t=CC.call(this)||this;return t.input=e,t}var IC,AC,PC,OC,TC,kC,xC,NC,LC,MC,RC,UC,DC,FC,jC,BC,VC,zC=(rm(qC,IC=pn),qC.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Md(t,this.serialize,this.deserialize)),this.middlewareStack.use(uC(t)),this.middlewareStack.use(mm(t));var r=e.concat(this.middlewareStack),i=t.logger,o="PutObjectCommand",e={logger:i,clientName:"S3Client",commandName:o,inputFilterSensitiveLog:ZS.filterSensitiveLog,outputFilterSensitiveLog:JS.filterSensitiveLog};"function"==typeof i.info&&i.info({clientName:"S3Client",commandName:o});var s=t.requestHandler;return r.resolve(function(e){return s.handle(e.request,n||{})},e)},qC.prototype.serialize=function(e,t){return u=e,c=t,om(void 0,void 0,void 0,function(){var t,n,r,i,o,s,a;return sm(this,function(e){switch(e.label){case 0:if(t=im(im(im(im(im(im(im(im(im(im(im(im(im(im(im(im(im(im(im(im(im(im(im(im(im(im(im(im({"Content-Type":"application/octet-stream"},eC(u.GrantFullControl)&&{"x-amz-grant-full-control":u.GrantFullControl}),eC(u.ContentEncoding)&&{"Content-Encoding":u.ContentEncoding}),eC(u.RequestPayer)&&{"x-amz-request-payer":u.RequestPayer}),eC(u.GrantReadACP)&&{"x-amz-grant-read-acp":u.GrantReadACP}),eC(u.SSECustomerKeyMD5)&&{"x-amz-server-side-encryption-customer-key-MD5":u.SSECustomerKeyMD5}),eC(u.CacheControl)&&{"Cache-Control":u.CacheControl}),eC(u.WebsiteRedirectLocation)&&{"x-amz-website-redirect-location":u.WebsiteRedirectLocation}),eC(u.ObjectLockLegalHoldStatus)&&{"x-amz-object-lock-legal-hold":u.ObjectLockLegalHoldStatus}),eC(u.GrantWriteACP)&&{"x-amz-grant-write-acp":u.GrantWriteACP}),eC(u.ContentLength)&&{"Content-Length":u.ContentLength.toString()}),eC(u.ObjectLockRetainUntilDate)&&{"x-amz-object-lock-retain-until-date":(u.ObjectLockRetainUntilDate.toISOString().split(".")[0]+"Z").toString()}),eC(u.SSECustomerAlgorithm)&&{"x-amz-server-side-encryption-customer-algorithm":u.SSECustomerAlgorithm}),eC(u.ContentDisposition)&&{"Content-Disposition":u.ContentDisposition}),eC(u.SSECustomerKey)&&{"x-amz-server-side-encryption-customer-key":u.SSECustomerKey}),eC(u.SSEKMSEncryptionContext)&&{"x-amz-server-side-encryption-context":u.SSEKMSEncryptionContext}),eC(u.Tagging)&&{"x-amz-tagging":u.Tagging}),eC(u.Expires)&&{Expires:Nc(u.Expires).toString()}),eC(u.StorageClass)&&{"x-amz-storage-class":u.StorageClass}),eC(u.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":u.ExpectedBucketOwner}),eC(u.ContentMD5)&&{"Content-MD5":u.ContentMD5}),eC(u.ServerSideEncryption)&&{"x-amz-server-side-encryption":u.ServerSideEncryption}),eC(u.ObjectLockMode)&&{"x-amz-object-lock-mode":u.ObjectLockMode}),eC(u.SSEKMSKeyId)&&{"x-amz-server-side-encryption-aws-kms-key-id":u.SSEKMSKeyId}),eC(u.ContentLanguage)&&{"Content-Language":u.ContentLanguage}),eC(u.GrantRead)&&{"x-amz-grant-read":u.GrantRead}),eC(u.ACL)&&{"x-amz-acl":u.ACL}),eC(u.ContentType)&&{"Content-Type":u.ContentType}),void 0!==u.Metadata&&Object.keys(u.Metadata).reduce(function(e,t){return e["x-amz-meta-"+t]=u.Metadata[t],e},{})),n="/{Bucket}/{Key+}",void 0===u.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((o=u.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(n=n.replace("{Bucket}",Ec(o)),void 0===u.Key)throw new Error("No value provided for input HTTP label: Key.");if((o=u.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return n=n.replace("{Key+}",o.split("/").map(Ec).join("/")),r={"x-id":"PutObject"},void 0!==u.Body&&(s=u.Body,i=s),[4,c.endpoint()];case 1:return a=e.sent(),o=a.hostname,s=a.protocol,s=void 0===s?"https":s,a=a.port,[2,new Xs({protocol:s,hostname:o,port:a,method:"PUT",headers:t,path:n,query:r,body:i})]}})});var u,c},qC.prototype.deserialize=function(e,t){return n=e,r=t,om(void 0,void 0,void 0,function(){var t;return sm(this,function(e){switch(e.label){case 0:return 200!==n.statusCode&&300<=n.statusCode?[2,Bw(n,r)]:(t={$metadata:Qw(n),ETag:void 0,Expiration:void 0,RequestCharged:void 0,SSECustomerAlgorithm:void 0,SSECustomerKeyMD5:void 0,SSEKMSEncryptionContext:void 0,SSEKMSKeyId:void 0,ServerSideEncryption:void 0,VersionId:void 0},void 0!==n.headers["x-amz-server-side-encryption-context"]&&(t.SSEKMSEncryptionContext=n.headers["x-amz-server-side-encryption-context"]),void 0!==n.headers["x-amz-expiration"]&&(t.Expiration=n.headers["x-amz-expiration"]),void 0!==n.headers["x-amz-server-side-encryption-customer-key-md5"]&&(t.SSECustomerKeyMD5=n.headers["x-amz-server-side-encryption-customer-key-md5"]),void 0!==n.headers.etag&&(t.ETag=n.headers.etag),void 0!==n.headers["x-amz-server-side-encryption-customer-algorithm"]&&(t.SSECustomerAlgorithm=n.headers["x-amz-server-side-encryption-customer-algorithm"]),void 0!==n.headers["x-amz-version-id"]&&(t.VersionId=n.headers["x-amz-version-id"]),void 0!==n.headers["x-amz-request-charged"]&&(t.RequestCharged=n.headers["x-amz-request-charged"]),void 0!==n.headers["x-amz-server-side-encryption-aws-kms-key-id"]&&(t.SSEKMSKeyId=n.headers["x-amz-server-side-encryption-aws-kms-key-id"]),void 0!==n.headers["x-amz-server-side-encryption"]&&(t.ServerSideEncryption=n.headers["x-amz-server-side-encryption"]),[4,Xw(n.body,r)]);case 1:return e.sent(),[2,Promise.resolve(t)]}})});var n,r},qC);function qC(e){var t=IC.call(this)||this;return t.input=e,t}(AC||(AC={})).filterSensitiveLog=function(e){return im(im({},e),e.OutputLocation&&{OutputLocation:hw.filterSensitiveLog(e.OutputLocation)})},(PC||{}).filterSensitiveLog=function(e){return im(im({},e),e.RestoreRequest&&{RestoreRequest:AC.filterSensitiveLog(e.RestoreRequest)})},(OC||(OC={})).filterSensitiveLog=function(e){return im({},e)},(TC||(TC={})).filterSensitiveLog=function(e){return im({},e)},(kC||{}).filterSensitiveLog=function(e){return im({},e)},(xC||(xC={})).filterSensitiveLog=function(e){return im({},e)},(NC||(NC={})).filterSensitiveLog=function(e){return im({},e)},(MC||(MC={})).filterSensitiveLog=function(e){return im({},e)},(LC||(LC={})).filterSensitiveLog=function(e){return im({},e)},(MC={}).visit=function(e,t){return void 0!==e.Cont?t.Cont(e.Cont):void 0!==e.Progress?t.Progress(e.Progress):void 0!==e.Stats?t.Stats(e.Stats):void 0!==e.End?t.End(e.End):void 0!==e.Records?t.Records(e.Records):t._(e.$unknown[0],e.$unknown[1])},MC.filterSensitiveLog=function(e){var t;return void 0!==e.Cont?{Cont:OC.filterSensitiveLog(e.Cont)}:void 0!==e.Progress?{Progress:xC.filterSensitiveLog(e.Progress)}:void 0!==e.Stats?{Stats:LC.filterSensitiveLog(e.Stats)}:void 0!==e.End?{End:TC.filterSensitiveLog(e.End)}:void 0!==e.Records?{Records:NC.filterSensitiveLog(e.Records)}:void 0!==e.$unknown?((t={})[e.$unknown[0]]="UNKNOWN",t):void 0},(RC||{}).filterSensitiveLog=function(e){return im(im({},e),e.Payload&&{Payload:"STREAMING_CONTENT"})},(UC||{}).filterSensitiveLog=function(e){return im({},e)},(DC||{}).filterSensitiveLog=function(e){return im({},e)},(FC||{}).filterSensitiveLog=function(e){return im(im({},e),e.SSECustomerKey&&{SSECustomerKey:Mc})},(jC||(jC={})).filterSensitiveLog=function(e){return im(im({},e),e.SSEKMSKeyId&&{SSEKMSKeyId:Mc})},(BC||(BC={})).filterSensitiveLog=function(e){return im(im({},e),e.SSECustomerKey&&{SSECustomerKey:Mc})},(VC||{}).filterSensitiveLog=function(e){return im({},e)},(Z_||(Z_={})).filterSensitiveLog=function(e){return im(im({},e),e.SSEKMSKeyId&&{SSEKMSKeyId:Mc})},(AI||{}).filterSensitiveLog=function(e){return im(im(im({},e),e.SSECustomerKey&&{SSECustomerKey:Mc}),e.CopySourceSSECustomerKey&&{CopySourceSSECustomerKey:Mc})};var KC,HC=(rm(GC,KC=pn),GC.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Md(t,this.serialize,this.deserialize)),this.middlewareStack.use(uC(t)),this.middlewareStack.use(mm(t));var r=e.concat(this.middlewareStack),i=t.logger,o="UploadPartCommand",e={logger:i,clientName:"S3Client",commandName:o,inputFilterSensitiveLog:BC.filterSensitiveLog,outputFilterSensitiveLog:jC.filterSensitiveLog};"function"==typeof i.info&&i.info({clientName:"S3Client",commandName:o});var s=t.requestHandler;return r.resolve(function(e){return s.handle(e.request,n||{})},e)},GC.prototype.serialize=function(e,t){return u=e,c=t,om(void 0,void 0,void 0,function(){var t,n,r,i,o,s,a;return sm(this,function(e){switch(e.label){case 0:if(t=im(im(im(im(im(im(im({"Content-Type":"application/octet-stream"},eC(u.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":u.ExpectedBucketOwner}),eC(u.RequestPayer)&&{"x-amz-request-payer":u.RequestPayer}),eC(u.ContentLength)&&{"Content-Length":u.ContentLength.toString()}),eC(u.SSECustomerKey)&&{"x-amz-server-side-encryption-customer-key":u.SSECustomerKey}),eC(u.SSECustomerAlgorithm)&&{"x-amz-server-side-encryption-customer-algorithm":u.SSECustomerAlgorithm}),eC(u.SSECustomerKeyMD5)&&{"x-amz-server-side-encryption-customer-key-MD5":u.SSECustomerKeyMD5}),eC(u.ContentMD5)&&{"Content-MD5":u.ContentMD5}),n="/{Bucket}/{Key+}",void 0===u.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((o=u.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(n=n.replace("{Bucket}",Ec(o)),void 0===u.Key)throw new Error("No value provided for input HTTP label: Key.");if((o=u.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return n=n.replace("{Key+}",o.split("/").map(Ec).join("/")),r=im(im({"x-id":"UploadPart"},void 0!==u.PartNumber&&{partNumber:u.PartNumber.toString()}),void 0!==u.UploadId&&{uploadId:u.UploadId}),void 0!==u.Body&&(s=u.Body,i=s),[4,c.endpoint()];case 1:return a=e.sent(),o=a.hostname,s=a.protocol,s=void 0===s?"https":s,a=a.port,[2,new Xs({protocol:s,hostname:o,port:a,method:"PUT",headers:t,path:n,query:r,body:i})]}})});var u,c},GC.prototype.deserialize=function(e,t){return n=e,r=t,om(void 0,void 0,void 0,function(){var t;return sm(this,function(e){switch(e.label){case 0:return 200!==n.statusCode&&300<=n.statusCode?[2,Vw(n,r)]:(t={$metadata:Qw(n),ETag:void 0,RequestCharged:void 0,SSECustomerAlgorithm:void 0,SSECustomerKeyMD5:void 0,SSEKMSKeyId:void 0,ServerSideEncryption:void 0},void 0!==n.headers["x-amz-server-side-encryption-customer-key-md5"]&&(t.SSECustomerKeyMD5=n.headers["x-amz-server-side-encryption-customer-key-md5"]),void 0!==n.headers["x-amz-server-side-encryption"]&&(t.ServerSideEncryption=n.headers["x-amz-server-side-encryption"]),void 0!==n.headers["x-amz-server-side-encryption-aws-kms-key-id"]&&(t.SSEKMSKeyId=n.headers["x-amz-server-side-encryption-aws-kms-key-id"]),void 0!==n.headers["x-amz-server-side-encryption-customer-algorithm"]&&(t.SSECustomerAlgorithm=n.headers["x-amz-server-side-encryption-customer-algorithm"]),void 0!==n.headers["x-amz-request-charged"]&&(t.RequestCharged=n.headers["x-amz-request-charged"]),void 0!==n.headers.etag&&(t.ETag=n.headers.etag),[4,Xw(n.body,r)]);case 1:return e.sent(),[2,Promise.resolve(t)]}})});var n,r},GC);function GC(e){var t=KC.call(this)||this;return t.input=e,t}function WC(e){var t=e.port,n=e.query,r=e.protocol,i=e.path,e=e.hostname;r&&":"!==r.substr(-1)&&(r+=":"),t&&(e+=":"+t),i&&"/"!==i.charAt(0)&&(i="/"+i);n=n?va(n):"";return r+"//"+e+i+(n=n&&"?"!==n[0]?"?"+n:n)}var $C=(YC.prototype.presign=function(t,e){var n=(e=void 0===e?{}:e).unsignableHeaders,r=void 0===n?new Set:n,i=B(e,["unsignableHeaders"]);return K(this,void 0,void 0,function(){return H(this,function(e){return r.add("content-type"),t.headers["X-Amz-Content-Sha256"]="UNSIGNED-PAYLOAD",[2,this.signer.presign(t,j({expiresIn:900,unsignableHeaders:r},i))]})})},YC);function YC(e){e=j({service:e.signingName||e.service||"s3",uriEscapePath:e.uriEscapePath||!1},e);this.signer=new sc(e)}var JC=new E.ConsoleLogger("axios-http-handler"),ZC="sendProgress",QC=(XC.prototype.destroy=function(){},XC.prototype.handle=function(e,t){var n=this.httpOptions.requestTimeout,r=this.emitter,i=e.path;!e.query||(o=va(e.query))&&(i+="?"+o);var o=e.port,o=e.protocol+"//"+e.hostname+(o?":"+o:"")+i,i={};i.url=o,i.method=e.method,i.headers=e.headers,delete i.headers.host,e.body?i.data=e.body:i.headers["Content-Type"]&&(i.data=null),r&&(i.onUploadProgress=function(e){r.emit(ZC,e),JC.debug(e)}),i.responseType="blob";n=[k.request(i).then(function(e){return{response:new Zs({headers:e.headers,statusCode:e.status,body:e.data})}}).catch(function(e){throw JC.error(e),e}),function(n){void 0===n&&(n=0);return new Promise(function(e,t){n&&setTimeout(function(){var e=new Error("Request did not complete within "+n+" ms");e.name="TimeoutError",t(e)},n)})}(n)];return Promise.race(n)},XC);function XC(e,t){void 0===e&&(e={}),this.httpOptions=e,this.emitter=t}for(var e_={},t_=new Array(64),n_=0,r_="A".charCodeAt(0),i_="Z".charCodeAt(0);n_+r_<=i_;n_++){var o_=String.fromCharCode(n_+r_);t_[e_[o_]=n_]=o_}for(n_=0,r_="a".charCodeAt(0),i_="z".charCodeAt(0);n_+r_<=i_;n_++){var o_=String.fromCharCode(n_+r_),s_=n_+26;t_[e_[o_]=s_]=o_}for(n_=0;n_<10;n_++){e_[n_.toString(10)]=n_+52;o_=n_.toString(10),s_=n_+52;t_[e_[o_]=s_]=o_}t_[e_["+"]=62]="+",t_[e_["/"]=63]="/";var a_=6,u_=8;function c_(e){return("function"==typeof Blob&&e instanceof Blob?function(r){return K(this,void 0,void 0,function(){var n;return H(this,function(e){switch(e.label){case 0:return[4,(t=r,new Promise(function(n,r){var i=new FileReader;i.onloadend=function(){if(2!==i.readyState)return r(new Error("Reader aborted too early"));var e=null!==(t=i.result)&&void 0!==t?t:"",t=e.indexOf(","),t=-1<t?t+1:e.length;n(e.substring(t))},i.onabort=function(){return r(new Error("Read aborted"))},i.onerror=function(){return r(i.error)},i.readAsDataURL(t)}))];case 1:return n=e.sent(),n=function(e){var t=e.length/4*3;"=="===e.substr(-2)?t-=2:"="===e.substr(-1)&&t--;for(var t=new ArrayBuffer(t),n=new DataView(t),r=0;r<e.length;r+=4){for(var i=0,o=0,s=r,a=r+3;s<=a;s++)"="!==e[s]?(i|=e_[e[s]]<<(a-s)*a_,o+=a_):i>>=a_;var u=r/4*3;i>>=o%u_;for(var c=Math.floor(o/u_),l=0;l<c;l++){var p=(c-l-1)*u_;n.setUint8(u+l,(i&255<<p)>>p)}}return new Uint8Array(t)}(n),[2,new Uint8Array(n)]}var t})})}:function(s){return K(this,void 0,void 0,function(){var t,n,r,i,o;return H(this,function(e){switch(e.label){case 0:t=new Uint8Array(0),i=s.getReader(),n=!1,e.label=1;case 1:return n?[3,3]:[4,i.read()];case 2:return o=e.sent(),r=o.done,(i=o.value)&&(o=t,(t=new Uint8Array(o.length+i.length)).set(o),t.set(i,o.length)),n=r,[3,1];case 3:return[2,t]}})})})(e)}var l_=function(){return(l_=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},p_=function(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{o(u.next(e))}catch(e){t(e)}}function i(e){try{o(u.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,i)}o((u=u.apply(e,s||[])).next())})},d_=function(n,r){var i,o,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,o&&(s=2&t[0]?o.return:t[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,t[1])).done)return s;switch(o=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,o=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],o=0}finally{i=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},f_=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return{value:(e=e&&r>=e.length?void 0:e)&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},h_=new E.ConsoleLogger("AWSS3ProviderManagedUpload"),g_=(m_.prototype.upload=function(){return p_(this,void 0,void 0,function(){var t,n,r,i,o;return d_(this,function(e){switch(e.label){case 0:return[4,(t=this).validateAndSanitizeBody(this.params.Body)];case 1:return(t.body=e.sent(),this.totalBytesToUpload=this.byteLength(this.body),this.totalBytesToUpload<=this.minPartSize)?(this.params.Body=this.body,n=new zC(this.params),[4,this._createNewS3Client(this.opts,this.emitter)]):[3,3];case 2:return[2,e.sent().send(n)];case 3:return[4,this.createMultiPartUpload()];case 4:r=e.sent(),o=Math.ceil(this.totalBytesToUpload/this.minPartSize),i=0,e.label=5;case 5:return i<o?[4,this.checkIfUploadCancelled(r)]:[3,10];case 6:return e.sent(),o=this.createParts(i),[4,this.uploadParts(r,o)];case 7:return e.sent(),[4,this.checkIfUploadCancelled(r)];case 8:e.sent(),e.label=9;case 9:return i+=this.queueSize,[3,5];case 10:return[4,this.finishMultiPartUpload(r)];case 11:return[2,e.sent()]}})})},m_.prototype.createParts=function(e){for(var t=[],n=e,r=e*this.minPartSize;r<this.totalBytesToUpload&&t.length<this.queueSize;){var i=Math.min(r+this.minPartSize,this.totalBytesToUpload);t.push({bodyPart:this.body.slice(r,i),partNumber:++n,emitter:new x.EventEmitter,_lastUploadedBytes:0}),r+=this.minPartSize}return t},m_.prototype.createMultiPartUpload=function(){return p_(this,void 0,void 0,function(){var t;return d_(this,function(e){switch(e.label){case 0:return t=new pC(this.params),[4,this._createNewS3Client(this.opts)];case 1:return[4,e.sent().send(t)];case 2:return t=e.sent(),h_.debug(t.UploadId),[2,t.UploadId]}})})},m_.prototype.uploadParts=function(l,p){return p_(this,void 0,void 0,function(){var t,n,r,i,o,s,a,u,c;return d_(this,function(e){switch(e.label){case 0:a=[],e.label=1;case 1:e.trys.push([1,6,7,8]),t=f_(p),n=t.next(),e.label=2;case 2:return n.done?[3,5]:(i=n.value,this.setupEventListener(i),r={PartNumber:i.partNumber,Body:i.bodyPart,UploadId:l,Key:this.params.Key,Bucket:this.params.Bucket},r=new HC(r),[4,this._createNewS3Client(this.opts,i.emitter)]);case 3:i=e.sent(),a.push(i.send(r)),e.label=4;case 4:return n=t.next(),[3,2];case 5:return[3,8];case 6:return u=e.sent(),u={error:u},[3,8];case 7:try{n&&!n.done&&(c=t.return)&&c.call(t)}finally{if(u)throw u.error}return[7];case 8:return e.trys.push([8,10,,11]),[4,Promise.all(a)];case 9:for(o=e.sent(),s=0;s<o.length;s++)this.multiPartMap.push({PartNumber:p[s].partNumber,ETag:o[s].ETag});return[3,11];case 10:return a=e.sent(),h_.error("error happened while uploading a part. Cancelling the multipart upload",a),this.cancelUpload(),[2];case 11:return[2]}})})},m_.prototype.finishMultiPartUpload=function(r){return p_(this,void 0,void 0,function(){var t,n;return d_(this,function(e){switch(e.label){case 0:return n={Bucket:this.params.Bucket,Key:this.params.Key,UploadId:r,MultipartUpload:{Parts:this.multiPartMap}},n=new sC(n),[4,this._createNewS3Client(this.opts)];case 1:t=e.sent(),e.label=2;case 2:return e.trys.push([2,4,,5]),[4,t.send(n)];case 3:return[2,e.sent().Key];case 4:return n=e.sent(),h_.error("error happened while finishing the upload. Cancelling the multipart upload",n),this.cancelUpload(),[2];case 5:return[2]}})})},m_.prototype.checkIfUploadCancelled=function(r){return p_(this,void 0,void 0,function(){var t,n;return d_(this,function(e){switch(e.label){case 0:if(!this.cancel)return[3,5];t="Upload was cancelled.",e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this.cleanup(r)];case 2:return e.sent(),[3,4];case 3:return n=e.sent(),t+=n.errorMessage,[3,4];case 4:throw new Error(t);case 5:return[2]}})})},m_.prototype.cancelUpload=function(){this.cancel=!0},m_.prototype.cleanup=function(r){return p_(this,void 0,void 0,function(){var t,n;return d_(this,function(e){switch(e.label){case 0:return this.body=null,this.multiPartMap=[],this.bytesUploaded=0,this.totalBytesToUpload=0,n={Bucket:this.params.Bucket,Key:this.params.Key,UploadId:r},[4,this._createNewS3Client(this.opts)];case 1:return[4,(t=e.sent()).send(new rC(n))];case 2:return e.sent(),[4,t.send(new _C(n))];case 3:if((n=e.sent())&&n.Parts&&0<n.Parts.length)throw new Error("Multi Part upload clean up failed");return[2]}})})},m_.prototype.setupEventListener=function(t){var n=this;t.emitter.on(ZC,function(e){n.progressChanged(t.partNumber,e.loaded-t._lastUploadedBytes),t._lastUploadedBytes=e.loaded})},m_.prototype.progressChanged=function(e,t){this.bytesUploaded+=t,this.emitter.emit(ZC,{loaded:this.bytesUploaded,total:this.totalBytesToUpload,part:e,key:this.params.Key})},m_.prototype.byteLength=function(e){if(null==e)return 0;if("number"==typeof e.byteLength)return e.byteLength;if("number"==typeof e.length)return e.length;if("number"==typeof e.size)return e.size;if("string"!=typeof e.path)throw new Error("Cannot determine length of "+e)},m_.prototype.validateAndSanitizeBody=function(t){return p_(this,void 0,void 0,function(){return d_(this,function(e){switch(e.label){case 0:return this.isGenericObject(t)?[2,JSON.stringify(t)]:[3,1];case 1:return this.isBlob(t)?E.Platform.isReactNative?[4,c_(t)]:[3,3]:[3,4];case 2:return[2,e.sent()];case 3:case 4:return[2,t]}})})},m_.prototype.isBlob=function(e){return"undefined"!=typeof Blob&&e instanceof Blob},m_.prototype.isGenericObject=function(e){if(null!==e&&"object"==typeof e)try{return!(0<=this.byteLength(e))}catch(e){return!0}return!1},m_.prototype._createNewS3Client=function(i,o){return p_(this,void 0,void 0,function(){var t,n,r;return d_(this,function(e){switch(e.label){case 0:return[4,this._getCredentials()];case 1:return t=e.sent(),n=i.region,r=i.dangerouslyConnectToHttpEndpointForTesting,(r=new Aw(l_(l_({region:n,credentials:t},r?{endpoint:"http://localhost:20005",tls:!1,bucketEndpoint:!1,forcePathStyle:!0}:{}),{requestHandler:new QC({},o),customUserAgent:E.getAmplifyUserAgent(),urlParser:pu}))).middlewareStack.remove("contentLengthMiddleware"),[2,r]}})})},m_.prototype._getCredentials=function(){return E.Credentials.get().then(function(e){if(!e)return!1;e=E.Credentials.shear(e);return h_.debug("set credentials for storage",e),e}).catch(function(e){return h_.warn("ensure credentials error",e),!1})},m_);function m_(e,t,n){this.minPartSize=5242880,this.queueSize=4,this.body=null,this.params=null,this.opts=null,this.multiPartMap=[],this.cancel=!1,this.bytesUploaded=0,this.totalBytesToUpload=0,this.emitter=null,this.params=e,this.opts=t,this.emitter=n}function y_(e,t,n,r,i){e&&(n={attrs:n},r&&(n.metrics=r),E.Hub.dispatch("storage",{event:t,data:n,message:i},"Storage",C_))}var v_=function(){return(v_=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},b_=function(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{o(u.next(e))}catch(e){t(e)}}function i(e){try{o(u.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,i)}o((u=u.apply(e,s||[])).next())})},S_=function(n,r){var i,o,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,o&&(s=2&t[0]?o.return:t[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,t[1])).done)return s;switch(o=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,o=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],o=0}finally{i=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},w_=new E.ConsoleLogger("AWSS3Provider"),C_="undefined"!=typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("amplify_default"):"@@amplify_default",__=(E_.prototype.getCategory=function(){return E_.CATEGORY},E_.prototype.getProviderName=function(){return E_.PROVIDER_NAME},E_.prototype.configure=function(e){if(w_.debug("configure Storage",e),!e)return this._config;e=E.Parser.parseMobilehubConfig(e);return this._config=Object.assign({},this._config,e.Storage),this._config.bucket||w_.debug("Do not have bucket yet"),this._config},E_.prototype.get=function(m,y){return b_(this,void 0,void 0,function(){var t,n,r,i,o,s,a,u,c,l,p,d,f,h,g;return S_(this,function(e){switch(e.label){case 0:return[4,this._ensureCredentials()];case 1:if(!e.sent())return[2,Promise.reject("No credentials")];if(f=Object.assign({},this._config,y),t=f.bucket,l=f.download,n=f.cacheControl,r=f.contentDisposition,i=f.contentEncoding,o=f.contentLanguage,s=f.contentType,a=f.expires,u=f.track,c=this._prefix(f),c=c+m,f=this._createNewS3Client(f),w_.debug("get "+m+" from "+c),c={Bucket:t,Key:c},n&&(c.ResponseCacheControl=n),r&&(c.ResponseContentDisposition=r),i&&(c.ResponseContentEncoding=i),o&&(c.ResponseContentLanguage=o),s&&(c.ResponseContentType=s),!0!==l)return[3,5];l=new yC(c),e.label=2;case 2:return e.trys.push([2,4,,5]),[4,f.send(l)];case 3:return p=e.sent(),y_(u,"download",{method:"get",result:"success"},{fileSize:Number(p.Body.size||p.Body.length)},"Download success for "+m),[2,p];case 4:throw p=e.sent(),y_(u,"download",{method:"get",result:"failed"},null,"Download failed with "+p.message),p;case 5:c.Expires=a||900,e.label=6;case 6:return e.trys.push([6,9,,10]),d=new $C(v_({},f.config)),[4,function(i,o){return K(this,void 0,void 0,function(){var t,n,r=this;return H(this,function(e){switch(e.label){case 0:return t=function(e){return function(t){return K(r,void 0,void 0,function(){return H(this,function(e){return[2,{output:{request:t.request},response:void 0}]})})}},(n=i.middlewareStack.clone()).add(t,{step:"build",priority:"low"}),[4,o.resolveMiddleware(n,i.config,void 0)(o).then(function(e){return e.output.request})];case 1:return[2,e.sent()]}})})}(f,new yC(c))];case 7:return f=e.sent(),h=WC,[4,d.presign(f,{expiresIn:c.Expires})];case 8:return g=h.apply(void 0,[e.sent()]),y_(u,"getSignedUrl",{method:"get",result:"success"},null,"Signed URL: "+g),[2,g];case 9:throw g=e.sent(),w_.warn("get signed url error",g),y_(u,"getSignedUrl",{method:"get",result:"failed"},null,"Could not get a signed URL for "+m),g;case 10:return[2]}})})},E_.prototype.put=function(b,S,w){return b_(this,void 0,void 0,function(){var t,n,r,i,o,s,a,u,c,l,p,d,f,h,g,m,y,v;return S_(this,function(e){switch(e.label){case 0:return[4,this._ensureCredentials()];case 1:if(!e.sent())return[2,Promise.reject("No credentials")];y=Object.assign({},this._config,w),t=y.bucket,n=y.track,r=y.progressCallback,h=y.contentType,i=y.contentDisposition,o=y.cacheControl,s=y.expires,a=y.metadata,u=y.tagging,c=y.acl,l=y.serverSideEncryption,p=y.SSECustomerAlgorithm,d=y.SSECustomerKey,f=y.SSECustomerKeyMD5,m=y.SSEKMSKeyId,g=h||"binary/octet-stream",h=this._prefix(y),h=h+b,w_.debug("put "+b+" to "+h),g={Bucket:t,Key:h,Body:S,ContentType:g},o&&(g.CacheControl=o),i&&(g.ContentDisposition=i),s&&(g.Expires=s),a&&(g.Metadata=a),u&&(g.Tagging=u),l&&(g.ServerSideEncryption=l,p&&(g.SSECustomerAlgorithm=p),d&&(g.SSECustomerKey=d),f&&(g.SSECustomerKeyMD5=f),m&&(g.SSEKMSKeyId=m)),m=new x.EventEmitter,y=new g_(g,y,m),c&&(g.ACL=c),e.label=2;case 2:return e.trys.push([2,4,,5]),m.on("sendProgress",function(e){r&&("function"==typeof r?r(e):w_.warn("progressCallback should be a function, not a "+typeof r))}),[4,y.upload()];case 3:return v=e.sent(),w_.debug("upload result",v),y_(n,"upload",{method:"put",result:"success"},null,"Upload success for "+b),[2,{key:b}];case 4:throw v=e.sent(),w_.warn("error uploading",v),y_(n,"upload",{method:"put",result:"failed"},null,"Error uploading "+b),v;case 5:return[2]}})})},E_.prototype.remove=function(s,a){return b_(this,void 0,void 0,function(){var t,n,r,i,o;return S_(this,function(e){switch(e.label){case 0:return[4,this._ensureCredentials()];case 1:if(!e.sent())return[2,Promise.reject("No credentials")];r=Object.assign({},this._config,a),t=r.bucket,n=r.track,i=this._prefix(r),i=i+s,r=this._createNewS3Client(r),w_.debug("remove "+s+" from "+i),i=new hC({Bucket:t,Key:i}),e.label=2;case 2:return e.trys.push([2,4,,5]),[4,r.send(i)];case 3:return o=e.sent(),y_(n,"delete",{method:"remove",result:"success"},null,"Deleted "+s+" successfully"),[2,o];case 4:throw o=e.sent(),y_(n,"delete",{method:"remove",result:"failed"},null,"Deletion of "+s+" failed with "+o),o;case 5:return[2]}})})},E_.prototype.list=function(u,c){return b_(this,void 0,void 0,function(){var t,n,r,i,o,s,a;return S_(this,function(e){switch(e.label){case 0:return[4,this._ensureCredentials()];case 1:if(!e.sent())return[2,Promise.reject("No credentials")];o=Object.assign({},this._config,c),t=o.bucket,n=o.track,s=o.maxKeys,r=this._prefix(o),i=r+u,o=this._createNewS3Client(o),w_.debug("list "+u+" from "+i),s=new SC({Bucket:t,Prefix:i,MaxKeys:s}),e.label=2;case 2:return e.trys.push([2,4,,5]),[4,o.send(s)];case 3:return s=e.sent(),a=[],s&&s.Contents&&(a=s.Contents.map(function(e){return{key:e.Key.substr(r.length),eTag:e.ETag,lastModified:e.LastModified,size:e.Size}})),y_(n,"list",{method:"list",result:"success"},null,a.length+" items returned from list operation"),w_.debug("list",a),[2,a];case 4:throw a=e.sent(),w_.warn("list error",a),y_(n,"list",{method:"list",result:"failed"},null,"Listing items failed: "+a.message),a;case 5:return[2]}})})},E_.prototype._ensureCredentials=function(){var t=this;return E.Credentials.get().then(function(e){if(!e)return!1;e=E.Credentials.shear(e);return w_.debug("set credentials for storage",e),t._config.credentials=e,!0}).catch(function(e){return w_.warn("ensure credentials error",e),!1})},E_.prototype._prefix=function(e){var t=e.credentials,n=e.level,r=e.customPrefix||{},t=e.identityId||t.identityId,i=(void 0!==r.private?r.private:"private/")+t+"/",o=(void 0!==r.protected?r.protected:"protected/")+t+"/",s=void 0!==r.public?r.public:"public/";switch(n){case"private":return i;case"protected":return o;default:return s}},E_.prototype._createNewS3Client=function(e,t){var n=e.region,r=e.credentials,i={};return e.dangerouslyConnectToHttpEndpointForTesting&&(i={endpoint:"http://localhost:20005",tls:!1,bucketEndpoint:!1,forcePathStyle:!0}),new Aw(v_(v_({region:n,credentials:r,customUserAgent:E.getAmplifyUserAgent()},i),{requestHandler:new QC({},t)}))},E_.CATEGORY="Storage",E_.PROVIDER_NAME="AWSS3",E_);function E_(e){this._config=e||{},w_.debug("Storage Options",this._config)}var I_=function(){return(I_=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},A_=function(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{o(u.next(e))}catch(e){t(e)}}function i(e){try{o(u.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,i)}o((u=u.apply(e,s||[])).next())})},P_=function(n,r){var i,o,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,o&&(s=2&t[0]?o.return:t[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,t[1])).done)return s;switch(o=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,o=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],o=0}finally{i=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},O_=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},T_=new E.ConsoleLogger("StorageClass"),k_="AWSS3",x_=(N_.prototype.getModuleName=function(){return"Storage"},N_.prototype.addPluggable=function(e){if(e&&"Storage"===e.getCategory()){this._pluggables.push(e);return e.configure(this._config[e.getProviderName()])}},N_.prototype.getPluggable=function(t){var e=this._pluggables.find(function(e){return e.getProviderName()===t});return void 0===e?(T_.debug("No plugin found with providerName",t),null):e},N_.prototype.removePluggable=function(t){this._pluggables=this._pluggables.filter(function(e){return e.getProviderName()!==t})},N_.prototype.configure=function(e){var t=this;if(T_.debug("configure Storage"),!e)return this._config;function n(t){return o.some(function(e){return e===t})}var r=E.Parser.parseMobilehubConfig(e),i=Object.keys(r.Storage),o=["bucket","region","level","track","customPrefix","serverSideEncryption","SSECustomerAlgorithm","SSECustomerKey","SSECustomerKeyMD5","SSEKMSKeyId"];return i&&i.find(n)&&!r.Storage[k_]&&(r.Storage[k_]={}),Object.entries(r.Storage).map(function(e){var t=O_(e,2),e=t[0],t=t[1];e&&n(e)&&void 0!==t&&(r.Storage[k_][e]=t,delete r.Storage[e])}),Object.keys(r.Storage).forEach(function(e){"string"!=typeof r.Storage[e]&&(t._config[e]=I_(I_({},t._config[e]),r.Storage[e]))}),this._pluggables.forEach(function(e){e.configure(t._config[e.getProviderName()])}),0===this._pluggables.length&&this.addPluggable(new __),this._config},N_.prototype.get=function(r,i){return A_(this,void 0,void 0,function(){var t,n;return P_(this,function(e){return t=void 0===(n=(i||{}).provider)?k_:n,void 0===(n=this._pluggables.find(function(e){return e.getProviderName()===t}))&&(T_.debug("No plugin found with providerName",t),Promise.reject("No plugin found in Storage for the provider")),[2,n.get(r,i)]})})},N_.prototype.put=function(r,i,o){return A_(this,void 0,void 0,function(){var t,n;return P_(this,function(e){return t=void 0===(n=(o||{}).provider)?k_:n,void 0===(n=this._pluggables.find(function(e){return e.getProviderName()===t}))&&(T_.debug("No plugin found with providerName",t),Promise.reject("No plugin found in Storage for the provider")),[2,n.put(r,i,o)]})})},N_.prototype.remove=function(r,i){return A_(this,void 0,void 0,function(){var t,n;return P_(this,function(e){return t=void 0===(n=(i||{}).provider)?k_:n,void 0===(n=this._pluggables.find(function(e){return e.getProviderName()===t}))&&(T_.debug("No plugin found with providerName",t),Promise.reject("No plugin found in Storage for the provider")),[2,n.remove(r,i)]})})},N_.prototype.list=function(r,i){return A_(this,void 0,void 0,function(){var t,n;return P_(this,function(e){return t=void 0===(n=(i||{}).provider)?k_:n,void 0===(n=this._pluggables.find(function(e){return e.getProviderName()===t}))&&(T_.debug("No plugin found with providerName",t),Promise.reject("No plugin found in Storage for the provider")),[2,n.list(r,i)]})})},N_);function N_(){this._config={},this._pluggables=[],T_.debug("Storage Options",this._config),this.get=this.get.bind(this),this.put=this.put.bind(this),this.remove=this.remove.bind(this),this.list=this.list.bind(this)}var L_=function(){return(L_=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},M_=new E.ConsoleLogger("Storage"),R_=null,U_=function(){if(R_)return R_;M_.debug("Create Storage Instance, debug"),(R_=new x_).vault=new x_;var n=R_.configure;return R_.configure=function(e){M_.debug("storage configure called");var t=L_({},n.call(R_,e));Object.keys(t).forEach(function(e){"string"!=typeof t[e]&&(t[e]=L_(L_({},t[e]),{level:"private"}))}),M_.debug("storage vault configure called"),R_.vault.configure(t)},R_}();E.Amplify.register(U_);var D_=function(){return(D_=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},F_=function(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{o(u.next(e))}catch(e){t(e)}}function i(e){try{o(u.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,i)}o((u=u.apply(e,s||[])).next())})},j_=function(n,r){var i,o,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,o&&(s=2&t[0]?o.return:t[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,t[1])).done)return s;switch(o=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,o=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],o=0}finally{i=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},B_=function(e,t){var n={};for(i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]]);return n},V_=new E.ConsoleLogger("RestClient"),z_=(q_.prototype.ajax=function(p,d,f){return F_(this,void 0,void 0,function(){var t,n,r,i,o,s,a,u,c,l=this;return j_(this,function(e){switch(e.label){case 0:return V_.debug(d,p),t="us-east-1",n="execute-api",r=void 0,"string"==typeof p?(o=this._parseUrl(p),c=p):(c=p.endpoint,r=p.custom_header,t=p.region,n=p.service,o=this._parseUrl(p.endpoint)),i={method:d,url:c,host:o.host,path:o.path,headers:{},data:null,responseType:"json",timeout:0,cancelToken:null},o={},E.Platform.isReactNative&&(s=E.Platform.userAgent||"aws-amplify/0.1.x",o={"User-Agent":s}),s=Object.assign({},f),a=s.response,s.body&&("function"==typeof FormData&&s.body instanceof FormData?(o["Content-Type"]="multipart/form-data",i.data=s.body):(o["Content-Type"]="application/json; charset=UTF-8",i.data=JSON.stringify(s.body))),s.responseType&&(i.responseType=s.responseType),s.withCredentials&&(i.withCredentials=s.withCredentials),s.timeout&&(i.timeout=s.timeout),s.cancellableToken&&(i.cancelToken=s.cancellableToken.token),i.signerServiceInfo=s.signerServiceInfo,"function"!=typeof r?[3,2]:[4,r()];case 1:return u=e.sent(),[3,3];case 2:u=void 0,e.label=3;case 3:return u=u,i.headers=D_(D_(D_({},o),u),s.headers),c=h.parse(c,!0,!0),c.search,c=B_(c,["search"]),i.url=h.format(D_(D_({},c),{query:D_(D_({},c.query),s.queryStringParameters||{})})),void 0!==i.headers.Authorization?(i.headers=Object.keys(i.headers).reduce(function(e,t){return i.headers[t]&&(e[t]=i.headers[t]),e},{}),[2,this._request(i,a)]):[2,this.Credentials.get().then(function(e){return l._signed(D_({},i),e,a,{region:t,service:n}).catch(function(e){if(E.DateUtils.isClockSkewError(e)){var t=e.response.headers,n=t&&(t.date||t.Date),t=new Date(n),n=E.DateUtils.getDateFromHeaderString(i.headers["x-amz-date"]);if(E.DateUtils.isClockSkewed(n,t))return E.DateUtils.setClockOffset(t.getTime()-n.getTime()),l.ajax(p,d,f)}throw e})},function(e){return V_.debug("No credentials available, the request will be unsigned"),l._request(i,a)})]}})})},q_.prototype.get=function(e,t){return this.ajax(e,"GET",t)},q_.prototype.put=function(e,t){return this.ajax(e,"PUT",t)},q_.prototype.patch=function(e,t){return this.ajax(e,"PATCH",t)},q_.prototype.post=function(e,t){return this.ajax(e,"POST",t)},q_.prototype.del=function(e,t){return this.ajax(e,"DELETE",t)},q_.prototype.head=function(e,t){return this.ajax(e,"HEAD",t)},q_.prototype.cancel=function(e,t){e=this._cancelTokenMap.get(e);return e&&e.cancel(t),!0},q_.prototype.isCancel=function(e){return k.isCancel(e)},q_.prototype.getCancellableToken=function(){return k.CancelToken.source()},q_.prototype.updateRequestToBeCancellable=function(e,t){this._cancelTokenMap.set(e,t)},q_.prototype.endpoint=function(t){var n=this,e=this._options.endpoints,r="";return Array.isArray(e)&&e.forEach(function(e){e.name===t&&(r=e.endpoint,"string"==typeof e.region?n._region=e.region:"string"==typeof n._options.region&&(n._region=n._options.region),"string"==typeof e.service?n._service=e.service||"execute-api":n._service="execute-api","function"==typeof e.custom_header?n._custom_header=e.custom_header:n._custom_header=void 0)}),r},q_.prototype._signed=function(e,t,n,r){var i=r.service,o=r.region,r=e.signerServiceInfo,e=B_(e,["signerServiceInfo"]),o=o||this._region||this._options.region,i=i||this._service||this._options.service,t={secret_key:t.secretAccessKey,access_key:t.accessKeyId,session_token:t.sessionToken},i={region:o,service:i},r=Object.assign(i,r),r=E.Signer.sign(e,t,r);return r.data&&(r.body=r.data),V_.debug("Signed Request: ",r),delete r.headers.host,k(r).then(function(e){return n?e:e.data}).catch(function(e){throw V_.debug(e),e})},q_.prototype._request=function(e,t){return void 0===t&&(t=!1),k(e).then(function(e){return t?e:e.data}).catch(function(e){throw V_.debug(e),e})},q_.prototype._parseUrl=function(e){e=e.split("/");return{host:e[2],path:"/"+e.slice(3).join("/")}},q_);function q_(e){this._region="us-east-1",this._service="execute-api",this._custom_header=void 0,this._cancelTokenMap=null,this.Credentials=E.Credentials,this._options=e,V_.debug("API Options",this._options),null==this._cancelTokenMap&&(this._cancelTokenMap=new WeakMap)}var K_=function(){return(K_=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},H_=function(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{o(u.next(e))}catch(e){t(e)}}function i(e){try{o(u.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,i)}o((u=u.apply(e,s||[])).next())})},G_=function(n,r){var i,o,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,o&&(s=2&t[0]?o.return:t[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,t[1])).done)return s;switch(o=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,o=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],o=0}finally{i=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},W_=function(e,t){var n={};for(i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]]);return n},$_=new E.ConsoleLogger("RestAPI"),Y_=(J_.prototype.getModuleName=function(){return"RestAPI"},J_.prototype.configure=function(e){var t=e||{},e=t.API,e=void 0===e?{}:e,t=W_(t,["API"]),t=K_(K_({},t),e);return $_.debug("configure Rest API",{opt:t}),t.aws_project_region&&(t.aws_cloud_logic_custom&&(e=t.aws_cloud_logic_custom,t.endpoints="string"==typeof e?JSON.parse(e):e),t=Object.assign({},t,{region:t.aws_project_region,header:{}})),Array.isArray(t.endpoints)?t.endpoints.forEach(function(e){void 0!==e.custom_header&&"function"!=typeof e.custom_header&&($_.warn("Rest API "+e.name+", custom_header should be a function"),e.custom_header=void 0)}):this._options&&Array.isArray(this._options.endpoints)?t.endpoints=this._options.endpoints:t.endpoints=[],this._options=Object.assign({},this._options,t),this.createInstance(),this._options},J_.prototype.createInstance=function(){return $_.debug("create Rest API instance"),this._api=new z_(this._options),this._api.Credentials=this.Credentials,!0},J_.prototype.get=function(e,t,n){try{var r=this.getEndpointInfo(e,t),i=this._api.getCancellableToken(),o=Object.assign({},n);o.cancellableToken=i;o=this._api.get(r,o);return this._api.updateRequestToBeCancellable(o,i),o}catch(e){return Promise.reject(e.message)}},J_.prototype.post=function(e,t,n){try{var r=this.getEndpointInfo(e,t),i=this._api.getCancellableToken(),o=Object.assign({},n);o.cancellableToken=i;o=this._api.post(r,o);return this._api.updateRequestToBeCancellable(o,i),o}catch(e){return Promise.reject(e.message)}},J_.prototype.put=function(e,t,n){try{var r=this.getEndpointInfo(e,t),i=this._api.getCancellableToken(),o=Object.assign({},n);o.cancellableToken=i;o=this._api.put(r,o);return this._api.updateRequestToBeCancellable(o,i),o}catch(e){return Promise.reject(e.message)}},J_.prototype.patch=function(e,t,n){try{var r=this.getEndpointInfo(e,t),i=this._api.getCancellableToken(),o=Object.assign({},n);o.cancellableToken=i;o=this._api.patch(r,o);return this._api.updateRequestToBeCancellable(o,i),o}catch(e){return Promise.reject(e.message)}},J_.prototype.del=function(e,t,n){try{var r=this.getEndpointInfo(e,t),i=this._api.getCancellableToken(),o=Object.assign({},n);o.cancellableToken=i;o=this._api.del(r,o);return this._api.updateRequestToBeCancellable(o,i),o}catch(e){return Promise.reject(e.message)}},J_.prototype.head=function(e,t,n){try{var r=this.getEndpointInfo(e,t),i=this._api.getCancellableToken(),o=Object.assign({},n);o.cancellableToken=i;o=this._api.head(r,o);return this._api.updateRequestToBeCancellable(o,i),o}catch(e){return Promise.reject(e.message)}},J_.prototype.isCancel=function(e){return this._api.isCancel(e)},J_.prototype.cancel=function(e,t){return this._api.cancel(e,t)},J_.prototype.endpoint=function(t){return H_(this,void 0,void 0,function(){return G_(this,function(e){return[2,this._api.endpoint(t)]})})},J_.prototype.getEndpointInfo=function(t,e){var n=this._options.endpoints;if(!Array.isArray(n))throw new Error("API category not configured");n=n.find(function(e){return e.name===t});if(!n)throw new Error("API "+t+" does not exist");e={endpoint:n.endpoint+e};return"string"==typeof n.region?e.region=n.region:"string"==typeof this._options.region&&(e.region=this._options.region),"string"==typeof n.service?e.service=n.service||"execute-api":e.service="execute-api","function"==typeof n.custom_header?e.custom_header=n.custom_header:e.custom_header=void 0,e},J_);function J_(e){this._api=null,this.Credentials=E.Credentials,this._options=e,$_.debug("API Options",this._options)}var Z_=new Y_(null);function Q_(e,t){for(var n,r=/\r\n|[\n\r]/g,i=1,o=t+1;(n=r.exec(e.body))&&n.index<t;)i+=1,o=t+1-(n.index+n[0].length);return{line:i,column:o}}function X_(e,t){var n=e.locationOffset.column-1,r=eE(n)+e.body,i=t.line-1,o=e.locationOffset.line-1,o=t.line+o,n=1===t.line?n:0,n=t.column+n,r=r.split(/\r\n|[\n\r]/g);return"".concat(e.name," (").concat(o,":").concat(n,")\n")+function(e){var t=e.filter(function(e){e[0];return void 0!==e[1]}),n=0,r=!0,i=!1,o=void 0;try{for(var s=t[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var a=a.value[0];n=Math.max(n,a.length)}}catch(e){i=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return t.map(function(e){var t=e[0],e=e[1];return eE(n-(t=t).length)+t+e}).join("\n")}([["".concat(o-1,": "),r[i-1]],["".concat(o,": "),r[i]],["",eE(n-1)+"^"],["".concat(o+1,": "),r[1+i]]])}function eE(e){return Array(e+1).join(" ")}function tE(e,t,n,r,i,o,s){var a=Array.isArray(t)?0!==t.length?t:void 0:t?[t]:void 0,t=n;!t&&a&&(t=(c=a[0])&&c.loc&&c.loc.source);var u,c=r;(c=!c&&a?a.reduce(function(e,t){return t.loc&&e.push(t.loc.start),e},[]):c)&&0===c.length&&(c=void 0),r&&n?u=r.map(function(e){return Q_(n,e)}):a&&(u=a.reduce(function(e,t){return t.loc&&e.push(Q_(t.loc.source,t.loc.start)),e},[]));s=s||o&&o.extensions;Object.defineProperties(this,{message:{value:e,enumerable:!0,writable:!0},locations:{value:u||void 0,enumerable:Boolean(u)},path:{value:i||void 0,enumerable:Boolean(i)},nodes:{value:a||void 0},source:{value:t||void 0},positions:{value:c||void 0},originalError:{value:o},extensions:{value:s||void 0,enumerable:Boolean(s)}}),o&&o.stack?Object.defineProperty(this,"stack",{value:o.stack,writable:!0,configurable:!0}):Error.captureStackTrace?Error.captureStackTrace(this,tE):Object.defineProperty(this,"stack",{value:Error().stack,writable:!0,configurable:!0})}E.Amplify.register(Z_),tE.prototype=Object.create(Error.prototype,{constructor:{value:tE},name:{value:"GraphQLError"},toString:{value:function(){return function(e){var t=[];if(e.nodes){var n=!0,r=!1,i=void 0;try{for(var o=e.nodes[Symbol.iterator]();!(n=(s=o.next()).done);n=!0){var s=s.value;s.loc&&t.push(X_(s.loc.source,Q_(s.loc.source,s.loc.start)))}}catch(e){r=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}}else if(e.source&&e.locations){var a=e.source,u=!0,c=!1,l=void 0;try{for(var p=e.locations[Symbol.iterator]();!(u=(d=p.next()).done);u=!0){var d=d.value;t.push(X_(a,d))}}catch(e){c=!0,l=e}finally{try{u||null==p.return||p.return()}finally{if(c)throw l}}}return 0===t.length?e.message:[e.message].concat(t).join("\n\n")+"\n"}(this)}}});var nE={Name:[],Document:["definitions"],OperationDefinition:["name","variableDefinitions","directives","selectionSet"],VariableDefinition:["variable","type","defaultValue","directives"],Variable:["name"],SelectionSet:["selections"],Field:["alias","name","arguments","directives","selectionSet"],Argument:["name","value"],FragmentSpread:["name","directives"],InlineFragment:["typeCondition","directives","selectionSet"],FragmentDefinition:["name","variableDefinitions","typeCondition","directives","selectionSet"],IntValue:[],FloatValue:[],StringValue:[],BooleanValue:[],NullValue:[],EnumValue:[],ListValue:["values"],ObjectValue:["fields"],ObjectField:["name","value"],Directive:["name","arguments"],NamedType:["name"],ListType:["type"],NonNullType:["type"],SchemaDefinition:["directives","operationTypes"],OperationTypeDefinition:["type"],ScalarTypeDefinition:["description","name","directives"],ObjectTypeDefinition:["description","name","interfaces","directives","fields"],FieldDefinition:["description","name","arguments","type","directives"],InputValueDefinition:["description","name","type","defaultValue","directives"],InterfaceTypeDefinition:["description","name","directives","fields"],UnionTypeDefinition:["description","name","directives","types"],EnumTypeDefinition:["description","name","directives","values"],EnumValueDefinition:["description","name","directives"],InputObjectTypeDefinition:["description","name","directives","fields"],DirectiveDefinition:["description","name","arguments","locations"],SchemaExtension:["directives","operationTypes"],ScalarTypeExtension:["name","directives"],ObjectTypeExtension:["name","interfaces","directives","fields"],InterfaceTypeExtension:["name","directives","fields"],UnionTypeExtension:["name","directives","types"],EnumTypeExtension:["name","directives","values"],InputObjectTypeExtension:["name","directives","fields"]},rE={};function iE(e,t,n){var r=2<arguments.length&&void 0!==n?n:nE,i=void 0,o=Array.isArray(e),s=[e],a=-1,u=[],c=void 0,l=void 0,p=void 0,d=[],f=[],h=e;do{var g=++a===s.length,m=g&&0!==u.length;if(g){if(l=0===f.length?void 0:d[d.length-1],c=p,p=f.pop(),m){if(o)c=c.slice();else{var y,v={};for(y in c)c.hasOwnProperty(y)&&(v[y]=c[y]);c=v}for(var b=0,S=0;S<u.length;S++){var w=u[S][0],C=u[S][1];o&&(w-=b),o&&null===C?(c.splice(w,1),b++):c[w]=C}}a=i.index,s=i.keys,u=i.edits,o=i.inArray,i=i.prev}else{if(l=p?o?a:s[a]:void 0,null==(c=p?p[l]:h))continue;p&&d.push(l)}var _=void 0;if(!Array.isArray(c)){if(!oE(c))throw new Error("Invalid AST Node: "+JSON.stringify(c));var E=function(e,t,n){var r=e[t];{if(r){if(!n&&"function"==typeof r)return r;r=n?r.leave:r.enter;return"function"==typeof r?r:void 0}e=n?e.leave:e.enter;if(e){if("function"==typeof e)return e;t=e[t];return"function"==typeof t?t:void 0}}}(t,c.kind,g);if(E){if((_=E.call(t,c,l,p,d,f))===rE)break;if(!1===_){if(!g){d.pop();continue}}else if(void 0!==_&&(u.push([l,_]),!g)){if(!oE(_)){d.pop();continue}c=_}}}void 0===_&&m&&u.push([l,c]),g?d.pop():(i={inArray:o,index:a,keys:s,edits:u,prev:i},s=(o=Array.isArray(c))?c:r[c.kind]||[],a=-1,u=[],p&&f.push(p),p=c)}while(void 0!==i);return h=0!==u.length?u[u.length-1][1]:h}function oE(e){return Boolean(e&&"string"==typeof e.kind)}function sE(e){return iE(e,{leave:aE})}var aE={Name:function(e){return e.value},Variable:function(e){return"$"+e.name},Document:function(e){return cE(e.definitions,"\n\n")+"\n"},OperationDefinition:function(e){var t=e.operation,n=e.name,r=pE("(",cE(e.variableDefinitions,", "),")"),i=cE(e.directives," "),e=e.selectionSet;return n||i||r||"query"!==t?cE([t,cE([n,r]),i,e]," "):e},VariableDefinition:function(e){var t=e.variable,n=e.type,r=e.defaultValue,e=e.directives;return t+": "+n+pE(" = ",r)+pE(" ",cE(e," "))},SelectionSet:function(e){return lE(e.selections)},Field:function(e){var t=e.alias,n=e.name,r=e.arguments,i=e.directives,e=e.selectionSet;return cE([pE("",t,": ")+n+pE("(",cE(r,", "),")"),cE(i," "),e]," ")},Argument:function(e){return e.name+": "+e.value},FragmentSpread:function(e){return"..."+e.name+pE(" ",cE(e.directives," "))},InlineFragment:function(e){var t=e.typeCondition,n=e.directives,e=e.selectionSet;return cE(["...",pE("on ",t),cE(n," "),e]," ")},FragmentDefinition:function(e){var t=e.name,n=e.typeCondition,r=e.variableDefinitions,i=e.directives,e=e.selectionSet;return"fragment ".concat(t).concat(pE("(",cE(r,", "),")")," ")+"on ".concat(n," ").concat(pE("",cE(i," ")," "))+e},IntValue:function(e){return e.value},FloatValue:function(e){return e.value},StringValue:function(e,t){var n,r=e.value;return e.block?(n="description"===t,t=(e=r).replace(/"""/g,'\\"""')," "!==e[0]&&"\t"!==e[0]||-1!==e.indexOf("\n")?'"""\n'.concat(n?t:dE(t),'\n"""'):'"""'.concat(t.replace(/"$/,'"\n'),'"""')):JSON.stringify(r)},BooleanValue:function(e){return e.value?"true":"false"},NullValue:function(){return"null"},EnumValue:function(e){return e.value},ListValue:function(e){return"["+cE(e.values,", ")+"]"},ObjectValue:function(e){return"{"+cE(e.fields,", ")+"}"},ObjectField:function(e){return e.name+": "+e.value},Directive:function(e){return"@"+e.name+pE("(",cE(e.arguments,", "),")")},NamedType:function(e){return e.name},ListType:function(e){return"["+e.type+"]"},NonNullType:function(e){return e.type+"!"},SchemaDefinition:function(e){var t=e.directives,e=e.operationTypes;return cE(["schema",cE(t," "),lE(e)]," ")},OperationTypeDefinition:function(e){return e.operation+": "+e.type},ScalarTypeDefinition:uE(function(e){return cE(["scalar",e.name,cE(e.directives," ")]," ")}),ObjectTypeDefinition:uE(function(e){var t=e.name,n=e.interfaces,r=e.directives,e=e.fields;return cE(["type",t,pE("implements ",cE(n," & ")),cE(r," "),lE(e)]," ")}),FieldDefinition:uE(function(e){var t=e.name,n=e.arguments,r=e.type,e=e.directives;return t+(n.every(function(e){return-1===e.indexOf("\n")})?pE("(",cE(n,", "),")"):pE("(\n",dE(cE(n,"\n")),"\n)"))+": "+r+pE(" ",cE(e," "))}),InputValueDefinition:uE(function(e){var t=e.name,n=e.type,r=e.defaultValue,e=e.directives;return cE([t+": "+n,pE("= ",r),cE(e," ")]," ")}),InterfaceTypeDefinition:uE(function(e){var t=e.name,n=e.directives,e=e.fields;return cE(["interface",t,cE(n," "),lE(e)]," ")}),UnionTypeDefinition:uE(function(e){var t=e.name,n=e.directives,e=e.types;return cE(["union",t,cE(n," "),e&&0!==e.length?"= "+cE(e," | "):""]," ")}),EnumTypeDefinition:uE(function(e){var t=e.name,n=e.directives,e=e.values;return cE(["enum",t,cE(n," "),lE(e)]," ")}),EnumValueDefinition:uE(function(e){return cE([e.name,cE(e.directives," ")]," ")}),InputObjectTypeDefinition:uE(function(e){var t=e.name,n=e.directives,e=e.fields;return cE(["input",t,cE(n," "),lE(e)]," ")}),DirectiveDefinition:uE(function(e){var t=e.name,n=e.arguments,e=e.locations;return"directive @"+t+(n.every(function(e){return-1===e.indexOf("\n")})?pE("(",cE(n,", "),")"):pE("(\n",dE(cE(n,"\n")),"\n)"))+" on "+cE(e," | ")}),SchemaExtension:function(e){var t=e.directives,e=e.operationTypes;return cE(["extend schema",cE(t," "),lE(e)]," ")},ScalarTypeExtension:function(e){return cE(["extend scalar",e.name,cE(e.directives," ")]," ")},ObjectTypeExtension:function(e){var t=e.name,n=e.interfaces,r=e.directives,e=e.fields;return cE(["extend type",t,pE("implements ",cE(n," & ")),cE(r," "),lE(e)]," ")},InterfaceTypeExtension:function(e){var t=e.name,n=e.directives,e=e.fields;return cE(["extend interface",t,cE(n," "),lE(e)]," ")},UnionTypeExtension:function(e){var t=e.name,n=e.directives,e=e.types;return cE(["extend union",t,cE(n," "),e&&0!==e.length?"= "+cE(e," | "):""]," ")},EnumTypeExtension:function(e){var t=e.name,n=e.directives,e=e.values;return cE(["extend enum",t,cE(n," "),lE(e)]," ")},InputObjectTypeExtension:function(e){var t=e.name,n=e.directives,e=e.fields;return cE(["extend input",t,cE(n," "),lE(e)]," ")}};function uE(t){return function(e){return cE([e.description,t(e)],"\n")}}function cE(e,t){return e?e.filter(function(e){return e}).join(t||""):""}function lE(e){return e&&0!==e.length?"{\n"+dE(cE(e,"\n"))+"\n}":""}function pE(e,t,n){return t?e+t+(n||""):""}function dE(e){return e&&"  "+e.replace(/\n/g,"\n  ")}function fE(e){return(fE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function hE(t){return t&&"object"===fE(t)?"function"==typeof t.inspect?t.inspect():Array.isArray(t)?"["+t.map(hE).join(", ")+"]":"{"+Object.keys(t).map(function(e){return"".concat(e,": ").concat(hE(t[e]))}).join(", ")+"}":"string"==typeof t?'"'+t+'"':"function"==typeof t?"[function ".concat(t.name,"]"):String(t)}function gE(e,t){if(!e)throw new Error(t)}function mE(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function yE(e,t,n){mE(this,"body",void 0),mE(this,"name",void 0),mE(this,"locationOffset",void 0),this.body=e,this.name=t||"GraphQL request",this.locationOffset=n||{line:1,column:1},0<this.locationOffset.line||gE(0,"line in locationOffset is 1-indexed and must be positive"),0<this.locationOffset.column||gE(0,"column in locationOffset is 1-indexed and must be positive")}var vE;function bE(e,t,n){return new tE("Syntax Error: ".concat(n),void 0,e,[t])}function SE(e){for(var t=0;t<e.length&&(" "===e[t]||"\t"===e[t]);)t++;return t}function wE(e){return SE(e)===e.length}function CE(){return this.lastToken=this.token,this.token=this.lookahead()}function _E(){var e=this.token;if(e.kind!==EE.EOF)for(;e=e.next||(e.next=function(e,t){var n=e.source,r=n.body,i=r.length,o=function(e,t,n){var r=e.length,i=t;for(;i<r;){var o=AE.call(e,i);if(9===o||32===o||44===o||65279===o)++i;else if(10===o)++i,++n.line,n.lineStart=i;else{if(13!==o)break;10===AE.call(e,i+1)?i+=2:++i,++n.line,n.lineStart=i}}return i}(r,t.end,e),s=e.line,a=1+o-e.lineStart;if(i<=o)return new OE(EE.EOF,i,i,s,a,t);var u=AE.call(r,o);switch(u){case 33:return new OE(EE.BANG,o,o+1,s,a,t);case 35:return function(e,t,n,r,i){var o,s=e.body,a=t;for(;o=AE.call(s,++a),null!==o&&(31<o||9===o););return new OE(EE.COMMENT,t,a,n,r,i,PE.call(s,t+1,a))}(n,o,s,a,t);case 36:return new OE(EE.DOLLAR,o,o+1,s,a,t);case 38:return new OE(EE.AMP,o,o+1,s,a,t);case 40:return new OE(EE.PAREN_L,o,o+1,s,a,t);case 41:return new OE(EE.PAREN_R,o,o+1,s,a,t);case 46:if(46===AE.call(r,o+1)&&46===AE.call(r,o+2))return new OE(EE.SPREAD,o,o+3,s,a,t);break;case 58:return new OE(EE.COLON,o,o+1,s,a,t);case 61:return new OE(EE.EQUALS,o,o+1,s,a,t);case 64:return new OE(EE.AT,o,o+1,s,a,t);case 91:return new OE(EE.BRACKET_L,o,o+1,s,a,t);case 93:return new OE(EE.BRACKET_R,o,o+1,s,a,t);case 123:return new OE(EE.BRACE_L,o,o+1,s,a,t);case 124:return new OE(EE.PIPE,o,o+1,s,a,t);case 125:return new OE(EE.BRACE_R,o,o+1,s,a,t);case 65:case 66:case 67:case 68:case 69:case 70:case 71:case 72:case 73:case 74:case 75:case 76:case 77:case 78:case 79:case 80:case 81:case 82:case 83:case 84:case 85:case 86:case 87:case 88:case 89:case 90:case 95:case 97:case 98:case 99:case 100:case 101:case 102:case 103:case 104:case 105:case 106:case 107:case 108:case 109:case 110:case 111:case 112:case 113:case 114:case 115:case 116:case 117:case 118:case 119:case 120:case 121:case 122:return function(e,t,n,r,i){var o=e.body,s=o.length,a=t+1,u=0;for(;a!==s&&null!==(u=AE.call(o,a))&&(95===u||48<=u&&u<=57||65<=u&&u<=90||97<=u&&u<=122);)++a;return new OE(EE.NAME,t,a,n,r,i,PE.call(o,t,a))}(n,o,s,a,t);case 45:case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return function(e,t,n,r,i,o){var s=e.body,a=n,u=t,n=!1;45===a&&(a=AE.call(s,++u));if(48===a){if(48<=(a=AE.call(s,++u))&&a<=57)throw bE(e,u,"Invalid number, unexpected digit after 0: ".concat(TE(a),"."))}else u=kE(e,u,a),a=AE.call(s,u);46===a&&(n=!0,a=AE.call(s,++u),u=kE(e,u,a),a=AE.call(s,u));69!==a&&101!==a||(n=!0,43!==(a=AE.call(s,++u))&&45!==a||(a=AE.call(s,++u)),u=kE(e,u,a));return new OE(n?EE.FLOAT:EE.INT,t,u,r,i,o,PE.call(s,t,u))}(n,o,u,s,a,t);case 34:return 34===AE.call(r,o+1)&&34===AE.call(r,o+2)?function(e,t,n,r,i){var o=e.body,s=t+3,a=s,u=0,c="";for(;s<o.length&&null!==(u=AE.call(o,s));){if(34===u&&34===AE.call(o,s+1)&&34===AE.call(o,s+2))return c+=PE.call(o,a,s),new OE(EE.BLOCK_STRING,t,s+3,n,r,i,function(e){for(var t=e.split(/\r\n|[\n\r]/g),n=null,r=1;r<t.length;r++){var i=t[r],o=SE(i);if(o<i.length&&(null===n||o<n)&&0===(n=o))break}if(n)for(var s=1;s<t.length;s++)t[s]=t[s].slice(n);for(;0<t.length&&wE(t[0]);)t.shift();for(;0<t.length&&wE(t[t.length-1]);)t.pop();return t.join("\n")}(c));if(u<32&&9!==u&&10!==u&&13!==u)throw bE(e,s,"Invalid character within String: ".concat(TE(u),"."));92===u&&34===AE.call(o,s+1)&&34===AE.call(o,s+2)&&34===AE.call(o,s+3)?(c+=PE.call(o,a,s)+'"""',a=s+=4):++s}throw bE(e,s,"Unterminated string.")}(n,o,s,a,t):function(e,t,n,r,i){var o=e.body,s=t+1,a=s,u=0,c="";for(;s<o.length&&null!==(u=AE.call(o,s))&&10!==u&&13!==u;){if(34===u)return c+=PE.call(o,a,s),new OE(EE.STRING,t,s+1,n,r,i,c);if(u<32&&9!==u)throw bE(e,s,"Invalid character within String: ".concat(TE(u),"."));if(++s,92===u){switch(c+=PE.call(o,a,s-1),u=AE.call(o,s)){case 34:c+='"';break;case 47:c+="/";break;case 92:c+="\\";break;case 98:c+="\b";break;case 102:c+="\f";break;case 110:c+="\n";break;case 114:c+="\r";break;case 116:c+="\t";break;case 117:var l=function(e,t,n,r){return xE(e)<<12|xE(t)<<8|xE(n)<<4|xE(r)}(AE.call(o,s+1),AE.call(o,s+2),AE.call(o,s+3),AE.call(o,s+4));if(l<0)throw bE(e,s,"Invalid character escape sequence: "+"\\u".concat(o.slice(s+1,s+5),"."));c+=String.fromCharCode(l),s+=4;break;default:throw bE(e,s,"Invalid character escape sequence: \\".concat(String.fromCharCode(u),"."))}a=++s}}throw bE(e,s,"Unterminated string.")}(n,o,s,a,t)}throw bE(n,o,function(e){if(e<32&&9!==e&&10!==e&&13!==e)return"Cannot contain the invalid character ".concat(TE(e),".");return 39!==e?"Cannot parse the unexpected character ".concat(TE(e),"."):"Unexpected single quote character ('), did you mean to use a double quote (\")?"}(u))}(this,e)),e.kind===EE.COMMENT;);return e}vE=yE,"function"==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(vE.prototype,Symbol.toStringTag,{get:function(){return this.constructor.name}});var EE=Object.freeze({SOF:"<SOF>",EOF:"<EOF>",BANG:"!",DOLLAR:"$",AMP:"&",PAREN_L:"(",PAREN_R:")",SPREAD:"...",COLON:":",EQUALS:"=",AT:"@",BRACKET_L:"[",BRACKET_R:"]",BRACE_L:"{",PIPE:"|",BRACE_R:"}",NAME:"Name",INT:"Int",FLOAT:"Float",STRING:"String",BLOCK_STRING:"BlockString",COMMENT:"Comment"});function IE(e){var t=e.value;return t?"".concat(e.kind,' "').concat(t,'"'):e.kind}var AE=String.prototype.charCodeAt,PE=String.prototype.slice;function OE(e,t,n,r,i,o,s){this.kind=e,this.start=t,this.end=n,this.line=r,this.column=i,this.value=s,this.prev=o,this.next=null}function TE(e){return isNaN(e)?EE.EOF:e<127?JSON.stringify(String.fromCharCode(e)):'"\\u'.concat(("00"+e.toString(16).toUpperCase()).slice(-4),'"')}function kE(e,t,n){var r=e.body,i=t,o=n;if(48<=o&&o<=57){for(;o=AE.call(r,++i),48<=o&&o<=57;);return i}throw bE(e,i,"Invalid number, expected digit but got: ".concat(TE(o),"."))}function xE(e){return 48<=e&&e<=57?e-48:65<=e&&e<=70?e-55:97<=e&&e<=102?e-87:-1}OE.prototype.toJSON=OE.prototype.inspect=function(){return{kind:this.kind,value:this.value,line:this.line,column:this.column}};var NE=Object.freeze({NAME:"Name",DOCUMENT:"Document",OPERATION_DEFINITION:"OperationDefinition",VARIABLE_DEFINITION:"VariableDefinition",SELECTION_SET:"SelectionSet",FIELD:"Field",ARGUMENT:"Argument",FRAGMENT_SPREAD:"FragmentSpread",INLINE_FRAGMENT:"InlineFragment",FRAGMENT_DEFINITION:"FragmentDefinition",VARIABLE:"Variable",INT:"IntValue",FLOAT:"FloatValue",STRING:"StringValue",BOOLEAN:"BooleanValue",NULL:"NullValue",ENUM:"EnumValue",LIST:"ListValue",OBJECT:"ObjectValue",OBJECT_FIELD:"ObjectField",DIRECTIVE:"Directive",NAMED_TYPE:"NamedType",LIST_TYPE:"ListType",NON_NULL_TYPE:"NonNullType",SCHEMA_DEFINITION:"SchemaDefinition",OPERATION_TYPE_DEFINITION:"OperationTypeDefinition",SCALAR_TYPE_DEFINITION:"ScalarTypeDefinition",OBJECT_TYPE_DEFINITION:"ObjectTypeDefinition",FIELD_DEFINITION:"FieldDefinition",INPUT_VALUE_DEFINITION:"InputValueDefinition",INTERFACE_TYPE_DEFINITION:"InterfaceTypeDefinition",UNION_TYPE_DEFINITION:"UnionTypeDefinition",ENUM_TYPE_DEFINITION:"EnumTypeDefinition",ENUM_VALUE_DEFINITION:"EnumValueDefinition",INPUT_OBJECT_TYPE_DEFINITION:"InputObjectTypeDefinition",DIRECTIVE_DEFINITION:"DirectiveDefinition",SCHEMA_EXTENSION:"SchemaExtension",SCALAR_TYPE_EXTENSION:"ScalarTypeExtension",OBJECT_TYPE_EXTENSION:"ObjectTypeExtension",INTERFACE_TYPE_EXTENSION:"InterfaceTypeExtension",UNION_TYPE_EXTENSION:"UnionTypeExtension",ENUM_TYPE_EXTENSION:"EnumTypeExtension",INPUT_OBJECT_TYPE_EXTENSION:"InputObjectTypeExtension"}),LE=Object.freeze({QUERY:"QUERY",MUTATION:"MUTATION",SUBSCRIPTION:"SUBSCRIPTION",FIELD:"FIELD",FRAGMENT_DEFINITION:"FRAGMENT_DEFINITION",FRAGMENT_SPREAD:"FRAGMENT_SPREAD",INLINE_FRAGMENT:"INLINE_FRAGMENT",VARIABLE_DEFINITION:"VARIABLE_DEFINITION",SCHEMA:"SCHEMA",SCALAR:"SCALAR",OBJECT:"OBJECT",FIELD_DEFINITION:"FIELD_DEFINITION",ARGUMENT_DEFINITION:"ARGUMENT_DEFINITION",INTERFACE:"INTERFACE",UNION:"UNION",ENUM:"ENUM",ENUM_VALUE:"ENUM_VALUE",INPUT_OBJECT:"INPUT_OBJECT",INPUT_FIELD_DEFINITION:"INPUT_FIELD_DEFINITION"});function ME(e,t){var n="string"==typeof e?new yE(e):e;if(!(n instanceof yE))throw new TypeError("Must provide Source. Received: ".concat(hE(n)));e=n,n=t||{},t=new OE(EE.SOF,0,0,0,0,null),n={source:e,options:n,lastToken:t,token:t,line:1,lineStart:0,advance:CE,lookahead:_E};return n=(t=n).token,{kind:NE.DOCUMENT,definitions:CI(t,EE.SOF,UE,EE.EOF),loc:gI(t,n)}}function RE(e){var t=bI(e,EE.NAME);return{kind:NE.NAME,value:t.value,loc:gI(e,t)}}function UE(e){if(yI(e,EE.NAME))switch(e.token.value){case"query":case"mutation":case"subscription":case"fragment":return DE(e);case"schema":case"scalar":case"type":case"interface":case"union":case"enum":case"input":case"directive":return nI(e);case"extend":return function(e){var t=e.lookahead();if(t.kind===EE.NAME)switch(t.value){case"schema":return function(e){var t=e.token;SI(e,"extend"),SI(e,"schema");var n=XE(e,!0),r=yI(e,EE.BRACE_L)?CI(e,EE.BRACE_L,oI,EE.BRACE_R):[];if(0!==n.length||0!==r.length)return{kind:NE.SCHEMA_EXTENSION,directives:n,operationTypes:r,loc:gI(e,t)};throw wI(e)}(e);case"scalar":return function(e){var t=e.token;SI(e,"extend"),SI(e,"scalar");var n=RE(e),r=XE(e,!0);if(0!==r.length)return{kind:NE.SCALAR_TYPE_EXTENSION,name:n,directives:r,loc:gI(e,t)};throw wI(e)}(e);case"type":return function(e){var t=e.token;SI(e,"extend"),SI(e,"type");var n=RE(e),r=sI(e),i=XE(e,!0),o=aI(e);if(0!==r.length||0!==i.length||0!==o.length)return{kind:NE.OBJECT_TYPE_EXTENSION,name:n,interfaces:r,directives:i,fields:o,loc:gI(e,t)};throw wI(e)}(e);case"interface":return function(e){var t=e.token;SI(e,"extend"),SI(e,"interface");var n=RE(e),r=XE(e,!0),i=aI(e);if(0!==r.length||0!==i.length)return{kind:NE.INTERFACE_TYPE_EXTENSION,name:n,directives:r,fields:i,loc:gI(e,t)};throw wI(e)}(e);case"union":return function(e){var t=e.token;SI(e,"extend"),SI(e,"union");var n=RE(e),r=XE(e,!0),i=pI(e);if(0!==r.length||0!==i.length)return{kind:NE.UNION_TYPE_EXTENSION,name:n,directives:r,types:i,loc:gI(e,t)};throw wI(e)}(e);case"enum":return function(e){var t=e.token;SI(e,"extend"),SI(e,"enum");var n=RE(e),r=XE(e,!0),i=dI(e);if(0!==r.length||0!==i.length)return{kind:NE.ENUM_TYPE_EXTENSION,name:n,directives:r,values:i,loc:gI(e,t)};throw wI(e)}(e);case"input":return function(e){var t=e.token;SI(e,"extend"),SI(e,"input");var n=RE(e),r=XE(e,!0),i=hI(e);if(0!==r.length||0!==i.length)return{kind:NE.INPUT_OBJECT_TYPE_EXTENSION,name:n,directives:r,fields:i,loc:gI(e,t)};throw wI(e)}(e)}throw wI(e,t)}(e)}else{if(yI(e,EE.BRACE_L))return DE(e);if(rI(e))return nI(e)}throw wI(e)}function DE(e){if(yI(e,EE.NAME))switch(e.token.value){case"query":case"mutation":case"subscription":return FE(e);case"fragment":return function(e){var t=e.token;if(SI(e,"fragment"),e.options.experimentalFragmentVariables)return{kind:NE.FRAGMENT_DEFINITION,name:$E(e),variableDefinitions:BE(e),typeCondition:(SI(e,"on"),tI(e)),directives:XE(e,!1),selectionSet:qE(e),loc:gI(e,t)};return{kind:NE.FRAGMENT_DEFINITION,name:$E(e),typeCondition:(SI(e,"on"),tI(e)),directives:XE(e,!1),selectionSet:qE(e),loc:gI(e,t)}}(e)}else if(yI(e,EE.BRACE_L))return FE(e);throw wI(e)}function FE(e){var t=e.token;if(yI(e,EE.BRACE_L))return{kind:NE.OPERATION_DEFINITION,operation:"query",name:void 0,variableDefinitions:[],directives:[],selectionSet:qE(e),loc:gI(e,t)};var n,r=jE(e);return yI(e,EE.NAME)&&(n=RE(e)),{kind:NE.OPERATION_DEFINITION,operation:r,name:n,variableDefinitions:BE(e),directives:XE(e,!1),selectionSet:qE(e),loc:gI(e,t)}}function jE(e){var t=bI(e,EE.NAME);switch(t.value){case"query":return"query";case"mutation":return"mutation";case"subscription":return"subscription"}throw wI(e,t)}function BE(e){return yI(e,EE.PAREN_L)?CI(e,EE.PAREN_L,VE,EE.PAREN_R):[]}function VE(e){var t=e.token;return e.options.experimentalVariableDefinitionDirectives?{kind:NE.VARIABLE_DEFINITION,variable:zE(e),type:(bI(e,EE.COLON),eI(e)),defaultValue:vI(e,EE.EQUALS)?YE(e,!0):void 0,directives:XE(e,!0),loc:gI(e,t)}:{kind:NE.VARIABLE_DEFINITION,variable:zE(e),type:(bI(e,EE.COLON),eI(e)),defaultValue:vI(e,EE.EQUALS)?YE(e,!0):void 0,loc:gI(e,t)}}function zE(e){var t=e.token;return bI(e,EE.DOLLAR),{kind:NE.VARIABLE,name:RE(e),loc:gI(e,t)}}function qE(e){var t=e.token;return{kind:NE.SELECTION_SET,selections:CI(e,EE.BRACE_L,KE,EE.BRACE_R),loc:gI(e,t)}}function KE(e){return(yI(e,EE.SPREAD)?function(e){var t,n=e.token;if(bI(e,EE.SPREAD),yI(e,EE.NAME)&&"on"!==e.token.value)return{kind:NE.FRAGMENT_SPREAD,name:$E(e),directives:XE(e,!1),loc:gI(e,n)};"on"===e.token.value&&(e.advance(),t=tI(e));return{kind:NE.INLINE_FRAGMENT,typeCondition:t,directives:XE(e,!1),selectionSet:qE(e),loc:gI(e,n)}}:function(e){var t,n=e.token,r=RE(e);r=vI(e,EE.COLON)?(t=r,RE(e)):r;return{kind:NE.FIELD,alias:t,name:r,arguments:HE(e,!1),directives:XE(e,!1),selectionSet:yI(e,EE.BRACE_L)?qE(e):void 0,loc:gI(e,n)}})(e)}function HE(e,t){t=t?WE:GE;return yI(e,EE.PAREN_L)?CI(e,EE.PAREN_L,t,EE.PAREN_R):[]}function GE(e){var t=e.token;return{kind:NE.ARGUMENT,name:RE(e),value:(bI(e,EE.COLON),YE(e,!1)),loc:gI(e,t)}}function WE(e){var t=e.token;return{kind:NE.ARGUMENT,name:RE(e),value:(bI(e,EE.COLON),ZE(e)),loc:gI(e,t)}}function $E(e){if("on"===e.token.value)throw wI(e);return RE(e)}function YE(e,t){var n,r,i,o=e.token;switch(o.kind){case EE.BRACKET_L:return r=t,i=(n=e).token,r=r?ZE:QE,{kind:NE.LIST,values:function(e,t,n,r){bI(e,t);var i=[];for(;!vI(e,r);)i.push(n(e));return i}(n,EE.BRACKET_L,r,EE.BRACKET_R),loc:gI(n,i)};case EE.BRACE_L:return function(e,t){var n=e.token;bI(e,EE.BRACE_L);var r=[];for(;!vI(e,EE.BRACE_R);)r.push(function(e,t){var n=e.token;return{kind:NE.OBJECT_FIELD,name:RE(e),value:(bI(e,EE.COLON),YE(e,t)),loc:gI(e,n)}}(e,t));return{kind:NE.OBJECT,fields:r,loc:gI(e,n)}}(e,t);case EE.INT:return e.advance(),{kind:NE.INT,value:o.value,loc:gI(e,o)};case EE.FLOAT:return e.advance(),{kind:NE.FLOAT,value:o.value,loc:gI(e,o)};case EE.STRING:case EE.BLOCK_STRING:return JE(e);case EE.NAME:return"true"===o.value||"false"===o.value?(e.advance(),{kind:NE.BOOLEAN,value:"true"===o.value,loc:gI(e,o)}):"null"===o.value?(e.advance(),{kind:NE.NULL,loc:gI(e,o)}):(e.advance(),{kind:NE.ENUM,value:o.value,loc:gI(e,o)});case EE.DOLLAR:if(!t)return zE(e)}throw wI(e)}function JE(e){var t=e.token;return e.advance(),{kind:NE.STRING,value:t.value,block:t.kind===EE.BLOCK_STRING,loc:gI(e,t)}}function ZE(e){return YE(e,!0)}function QE(e){return YE(e,!1)}function XE(e,t){for(var n,r,i,o=[];yI(e,EE.AT);)o.push((r=t,i=void 0,i=(n=e).token,bI(n,EE.AT),{kind:NE.DIRECTIVE,name:RE(n),arguments:HE(n,r),loc:gI(n,i)}));return o}function eI(e){var t=e.token,n=vI(e,EE.BRACKET_L)?(n=eI(e),bI(e,EE.BRACKET_R),{kind:NE.LIST_TYPE,type:n,loc:gI(e,t)}):tI(e);return vI(e,EE.BANG)?{kind:NE.NON_NULL_TYPE,type:n,loc:gI(e,t)}:n}function tI(e){var t=e.token;return{kind:NE.NAMED_TYPE,name:RE(e),loc:gI(e,t)}}function nI(e){var t=rI(e)?e.lookahead():e.token;if(t.kind===EE.NAME)switch(t.value){case"schema":return function(e){var t=e.token;SI(e,"schema");var n=XE(e,!0),r=CI(e,EE.BRACE_L,oI,EE.BRACE_R);return{kind:NE.SCHEMA_DEFINITION,directives:n,operationTypes:r,loc:gI(e,t)}}(e);case"scalar":return function(e){var t=e.token,n=iI(e);SI(e,"scalar");var r=RE(e),i=XE(e,!0);return{kind:NE.SCALAR_TYPE_DEFINITION,description:n,name:r,directives:i,loc:gI(e,t)}}(e);case"type":return function(e){var t=e.token,n=iI(e);SI(e,"type");var r=RE(e),i=sI(e),o=XE(e,!0),s=aI(e);return{kind:NE.OBJECT_TYPE_DEFINITION,description:n,name:r,interfaces:i,directives:o,fields:s,loc:gI(e,t)}}(e);case"interface":return function(e){var t=e.token,n=iI(e);SI(e,"interface");var r=RE(e),i=XE(e,!0),o=aI(e);return{kind:NE.INTERFACE_TYPE_DEFINITION,description:n,name:r,directives:i,fields:o,loc:gI(e,t)}}(e);case"union":return function(e){var t=e.token,n=iI(e);SI(e,"union");var r=RE(e),i=XE(e,!0),o=pI(e);return{kind:NE.UNION_TYPE_DEFINITION,description:n,name:r,directives:i,types:o,loc:gI(e,t)}}(e);case"enum":return function(e){var t=e.token,n=iI(e);SI(e,"enum");var r=RE(e),i=XE(e,!0),o=dI(e);return{kind:NE.ENUM_TYPE_DEFINITION,description:n,name:r,directives:i,values:o,loc:gI(e,t)}}(e);case"input":return function(e){var t=e.token,n=iI(e);SI(e,"input");var r=RE(e),i=XE(e,!0),o=hI(e);return{kind:NE.INPUT_OBJECT_TYPE_DEFINITION,description:n,name:r,directives:i,fields:o,loc:gI(e,t)}}(e);case"directive":return function(e){var t=e.token,n=iI(e);SI(e,"directive"),bI(e,EE.AT);var r=RE(e),i=cI(e);SI(e,"on");var o=function(e){vI(e,EE.PIPE);var t=[];for(;t.push(function(e){var t=e.token,n=RE(e);if(LE.hasOwnProperty(n.value))return n;throw wI(e,t)}(e)),vI(e,EE.PIPE););return t}(e);return{kind:NE.DIRECTIVE_DEFINITION,description:n,name:r,arguments:i,locations:o,loc:gI(e,t)}}(e)}throw wI(e,t)}function rI(e){return yI(e,EE.STRING)||yI(e,EE.BLOCK_STRING)}function iI(e){if(rI(e))return JE(e)}function oI(e){var t=e.token,n=jE(e);bI(e,EE.COLON);var r=tI(e);return{kind:NE.OPERATION_TYPE_DEFINITION,operation:n,type:r,loc:gI(e,t)}}function sI(e){var t=[];if("implements"===e.token.value)for(e.advance(),vI(e,EE.AMP);t.push(tI(e)),vI(e,EE.AMP)||e.options.allowLegacySDLImplementsInterfaces&&yI(e,EE.NAME););return t}function aI(e){return e.options.allowLegacySDLEmptyFields&&yI(e,EE.BRACE_L)&&e.lookahead().kind===EE.BRACE_R?(e.advance(),e.advance(),[]):yI(e,EE.BRACE_L)?CI(e,EE.BRACE_L,uI,EE.BRACE_R):[]}function uI(e){var t=e.token,n=iI(e),r=RE(e),i=cI(e);bI(e,EE.COLON);var o=eI(e),s=XE(e,!0);return{kind:NE.FIELD_DEFINITION,description:n,name:r,arguments:i,type:o,directives:s,loc:gI(e,t)}}function cI(e){return yI(e,EE.PAREN_L)?CI(e,EE.PAREN_L,lI,EE.PAREN_R):[]}function lI(e){var t=e.token,n=iI(e),r=RE(e);bI(e,EE.COLON);var i,o=eI(e);vI(e,EE.EQUALS)&&(i=ZE(e));var s=XE(e,!0);return{kind:NE.INPUT_VALUE_DEFINITION,description:n,name:r,type:o,defaultValue:i,directives:s,loc:gI(e,t)}}function pI(e){var t=[];if(vI(e,EE.EQUALS))for(vI(e,EE.PIPE);t.push(tI(e)),vI(e,EE.PIPE););return t}function dI(e){return yI(e,EE.BRACE_L)?CI(e,EE.BRACE_L,fI,EE.BRACE_R):[]}function fI(e){var t=e.token,n=iI(e),r=RE(e),i=XE(e,!0);return{kind:NE.ENUM_VALUE_DEFINITION,description:n,name:r,directives:i,loc:gI(e,t)}}function hI(e){return yI(e,EE.BRACE_L)?CI(e,EE.BRACE_L,lI,EE.BRACE_R):[]}function gI(e,t){if(!e.options.noLocation)return new mI(t,e.lastToken,e.source)}function mI(e,t,n){this.start=e.start,this.end=t.end,this.startToken=e,this.endToken=t,this.source=n}function yI(e,t){return e.token.kind===t}function vI(e,t){t=e.token.kind===t;return t&&e.advance(),t}function bI(e,t){var n=e.token;if(n.kind===t)return e.advance(),n;throw bE(e.source,n.start,"Expected ".concat(t,", found ").concat(IE(n)))}function SI(e,t){var n=e.token;if(n.kind===EE.NAME&&n.value===t)return e.advance(),n;throw bE(e.source,n.start,'Expected "'.concat(t,'", found ').concat(IE(n)))}function wI(e,t){t=t||e.token;return bE(e.source,t.start,"Unexpected ".concat(IE(t)))}function CI(e,t,n,r){bI(e,t);for(var i=[n(e)];!vI(e,r);)i.push(n(e));return i}mI.prototype.toJSON=mI.prototype.inspect=function(){return{start:this.start,end:this.end}};var _I=N,EI=function(){return(EI=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},II=new E.ConsoleLogger("AbstractPubSubProvider"),AI=(PI.prototype.configure=function(e){return void 0===e&&(e={}),this._config=EI(EI({},e),this._config),II.debug("configure "+this.getProviderName(),this._config),this.options},PI.prototype.getCategory=function(){return"PubSub"},Object.defineProperty(PI.prototype,"options",{get:function(){return EI({},this._config)},enumerable:!0,configurable:!0}),PI);function PI(e){void 0===e&&(e={}),this._config=e}var OI,Z_=(OI=function(e,t){return(OI=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}OI(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),TI=function(){return(TI=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},kI=function(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{o(u.next(e))}catch(e){t(e)}}function i(e){try{o(u.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,i)}o((u=u.apply(e,s||[])).next())})},xI=function(n,r){var i,o,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,o&&(s=2&t[0]?o.return:t[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,t[1])).done)return s;switch(o=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,o=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],o=0}finally{i=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},NI=function(e,t){var n={};for(i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]]);return n},LI=new E.ConsoleLogger("MqttOverWSProvider");var MI=(RI.prototype.get=function(n,r){return kI(this,void 0,void 0,function(){var t;return xI(this,function(e){return(t=this.promises.get(n))||(t=r(n),this.promises.set(n,t)),[2,t]})})},Object.defineProperty(RI.prototype,"allClients",{get:function(){return Array.from(this.promises.keys())},enumerable:!0,configurable:!0}),RI.prototype.remove=function(e){this.promises.delete(e)},RI);function RI(){this.promises=new Map}var UI,DI="undefined"!=typeof Symbol?Symbol("topic"):"@@topic",N=(Z_(FI,UI=AI),Object.defineProperty(FI.prototype,"clientId",{get:function(){return this.options.clientId},enumerable:!0,configurable:!0}),Object.defineProperty(FI.prototype,"endpoint",{get:function(){return this.options.aws_pubsub_endpoint},enumerable:!0,configurable:!0}),Object.defineProperty(FI.prototype,"clientsQueue",{get:function(){return this._clientsQueue},enumerable:!0,configurable:!0}),Object.defineProperty(FI.prototype,"isSSLEnabled",{get:function(){return!this.options.aws_appsync_dangerously_connect_to_http_endpoint_for_testing},enumerable:!0,configurable:!0}),FI.prototype.getTopicForValue=function(e){return"object"==typeof e&&e[DI]},FI.prototype.getProviderName=function(){return"MqttOverWSProvider"},FI.prototype.onDisconnect=function(e){var r,t=this,n=e.clientId,i=e.errorCode,e=NI(e,["clientId","errorCode"]);0!==i&&(LI.warn(n,JSON.stringify(TI({errorCode:i},e),null,2)),r=[],(e=this._clientIdObservers.get(n))&&(e.forEach(function(n){n.error("Disconnected, error code: "+i),t._topicObservers.forEach(function(e,t){e.delete(n),0===e.size&&r.push(t)})}),this._clientIdObservers.delete(n),r.forEach(function(e){t._topicObservers.delete(e)})))},FI.prototype.newClient=function(e){var t=e.url,i=e.clientId;return kI(this,void 0,void 0,function(){var n,r=this;return xI(this,function(e){switch(e.label){case 0:return LI.debug("Creating new MQTT client",i),(n=new L.Client(t,i)).onMessageArrived=function(e){var t=e.destinationName,e=e.payloadString;r._onMessage(t,e)},n.onConnectionLost=function(e){var t=e.errorCode,e=NI(e,["errorCode"]);r.onDisconnect(TI({clientId:i,errorCode:t},e))},[4,new Promise(function(e,t){n.connect({useSSL:r.isSSLEnabled,mqttVersion:3,onSuccess:function(){return e(n)},onFailure:t})})];case 1:return e.sent(),[2,n]}})})},FI.prototype.connect=function(n,r){return void 0===r&&(r={}),kI(this,void 0,void 0,function(){var t=this;return xI(this,function(e){switch(e.label){case 0:return[4,this.clientsQueue.get(n,function(e){return t.newClient(TI(TI({},r),{clientId:e}))})];case 1:return[2,e.sent()]}})})},FI.prototype.disconnect=function(n){return kI(this,void 0,void 0,function(){var t;return xI(this,function(e){switch(e.label){case 0:return[4,this.clientsQueue.get(n,function(){return null})];case 1:return(t=e.sent())&&t.isConnected()&&t.disconnect(),this.clientsQueue.remove(n),[2]}})})},FI.prototype.publish=function(o,s){return kI(this,void 0,void 0,function(){var t,n,r,i;return xI(this,function(e){switch(e.label){case 0:return t=[].concat(o),n=JSON.stringify(s),[4,this.endpoint];case 1:return r=e.sent(),[4,this.connect(this.clientId,{url:r})];case 2:return i=e.sent(),LI.debug("Publishing to topic(s)",t.join(","),n),t.forEach(function(e){return i.send(e,n)}),[2]}})})},FI.prototype._onMessage=function(n,t){try{var r=[];this._topicObservers.forEach(function(e,t){!function(e,t){for(var n=e.split("/"),r=n.length,i=t.split("/"),o=0;o<r;++o){var s=n[o],a=i[o];if("#"===s)return i.length>=r;if("+"!==s&&s!==a)return}return r===i.length}(t,n)||r.push(e)});var i=JSON.parse(t);"object"==typeof i&&(i[DI]=n),r.forEach(function(e){e.forEach(function(e){return e.next(i)})})}catch(e){LI.warn("Error handling message",e,t)}},FI.prototype.subscribe=function(e,a){var n=this;void 0===a&&(a={});var u=[].concat(e);return LI.debug("Subscribing to topic(s)",u.join(",")),new _I(function(i){var o;u.forEach(function(e){var t=n._topicObservers.get(e);t||(t=new Set,n._topicObservers.set(e,t)),t.add(i)});var e=a.clientId,s=void 0===e?n.clientId:e,e=n._clientIdObservers.get(s);return(e=e||new Set).add(i),n._clientIdObservers.set(s,e),kI(n,void 0,void 0,function(){var t,n,r;return xI(this,function(e){switch(e.label){case 0:return void 0!==(t=a.url)?[3,2]:[4,this.endpoint];case 1:return n=e.sent(),[3,3];case 2:n=t,e.label=3;case 3:r=n,e.label=4;case 4:return e.trys.push([4,6,,7]),[4,this.connect(s,{url:r})];case 5:return o=e.sent(),u.forEach(function(e){o.subscribe(e)}),[3,7];case 6:return r=e.sent(),i.error(r),[3,7];case 7:return[2]}})}),function(){return LI.debug("Unsubscribing from topic(s)",u.join(",")),o&&(n._clientIdObservers.get(s).delete(i),0===n._clientIdObservers.get(s).size&&(n.disconnect(s),n._clientIdObservers.delete(s)),u.forEach(function(e){var t=n._topicObservers.get(e)||new Set;t.delete(i),0===t.size&&(n._topicObservers.delete(e),o.isConnected()&&o.unsubscribe(e))})),null}})},FI);function FI(e){void 0===e&&(e={});e=UI.call(this,TI(TI({},e),{clientId:e.clientId||m.v4()}))||this;return e._clientsQueue=new MI,e._topicObservers=new Map,e._clientIdObservers=new Map,e}var jI,BI,Z_=(jI=function(e,t){return(jI=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}jI(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),VI=function(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{o(u.next(e))}catch(e){t(e)}}function i(e){try{o(u.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,i)}o((u=u.apply(e,s||[])).next())})},zI=function(n,r){var i,o,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,o&&(s=2&t[0]?o.return:t[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,t[1])).done)return s;switch(o=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,o=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],o=0}finally{i=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},qI=function(e,t){var n={};for(i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]]);return n},KI=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},HI=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(KI(arguments[t]));return e},GI=new E.ConsoleLogger("AWSAppSyncProvider"),WI=(Z_($I,BI=N),Object.defineProperty($I.prototype,"endpoint",{get:function(){throw new Error("Not supported")},enumerable:!0,configurable:!0}),$I.prototype.getProviderName=function(){return"AWSAppSyncProvider"},$I.prototype.publish=function(e,t,n){return VI(this,void 0,void 0,function(){return zI(this,function(e){throw new Error("Operation not supported")})})},$I.prototype._cleanUp=function(t){var n=this;Array.from(this._topicClient.entries()).filter(function(e){return KI(e,2)[1].clientId===t}).map(function(e){return KI(e,1)[0]}).forEach(function(e){return n._cleanUpForTopic(e)})},$I.prototype._cleanUpForTopic=function(e){this._topicClient.delete(e),this._topicAlias.delete(e)},$I.prototype.onDisconnect=function(e){var t=this,n=e.clientId,r=e.errorCode,i=qI(e,["clientId","errorCode"]);0!==r&&(Array.from(this._topicClient.entries()).filter(function(e){return KI(e,2)[1].clientId===n}).map(function(e){return KI(e,1)[0]}).forEach(function(e){t._topicObservers.has(e)&&(t._topicObservers.get(e).forEach(function(e){e.closed||e.error(i)}),t._topicObservers.delete(e))}),this._cleanUp(n))},$I.prototype.disconnect=function(t){return VI(this,void 0,void 0,function(){return zI(this,function(e){switch(e.label){case 0:return[4,this.clientsQueue.get(t,function(){return null})];case 1:return e.sent(),[4,BI.prototype.disconnect.call(this,t)];case 2:return e.sent(),this._cleanUp(t),[2]}})})},$I.prototype.subscribe=function(e,o){var n=this;void 0===o&&(o={});var t=new _I(function(a){var r=[].concat(e);return GI.debug("Subscribing to topic(s)",r.join(",")),VI(n,void 0,void 0,function(){var i,t,n=this;return zI(this,function(e){switch(e.label){case 0:return r.forEach(function(e){n._topicObservers.has(e)||n._topicObservers.set(e,new Set),n._topicObservers.get(e).add(a)}),t=o.mqttConnections,i=void 0===t?[]:t,t=o.newSubscriptions,t=Object.entries(t).map(function(e){var t=KI(e,2),e=t[0];return[t[1].topic,e]}),this._topicAlias=new Map(HI(Array.from(this._topicAlias.entries()),t)),t=Object.entries(r.reduce(function(e,t){var n,r=i.find(function(e){return-1<e.topics.indexOf(t)});return r&&(n=r.client,r=r.url,e[n]||(e[n]={url:r,topics:new Set}),e[n].topics.add(t)),e},{})),[4,Promise.all(t.map(function(e){var e=KI(e,2),i=e[0],e=e[1],o=e.url,s=e.topics;return VI(n,void 0,void 0,function(){var t,n,r=this;return zI(this,function(e){switch(e.label){case 0:t=null,e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this.connect(i,{clientId:i,url:o})];case 2:return t=e.sent(),[3,4];case 3:return n=e.sent(),a.error({message:"Failed to connect",error:n}),a.complete(),[2,void 0];case 4:return s.forEach(function(e){t.isConnected()&&(t.subscribe(e),r._topicClient.set(e,t))}),[2,t]}})})}))];case 1:return e.sent(),[2]}})}),function(){GI.debug("Unsubscribing from topic(s)",r.join(",")),r.forEach(function(e){var t=n._topicClient.get(e);t&&t.isConnected()&&(t.unsubscribe(e),n._topicClient.delete(e),Array.from(n._topicClient.values()).some(function(e){return e===t})||n.disconnect(t.clientId)),n._topicObservers.delete(e)})}});return _I.from(t).map(function(e){var t=n.getTopicForValue(e),r=n._topicAlias.get(t);return e.data=Object.entries(e.data).reduce(function(e,t){var n=KI(t,2),t=n[0],n=n[1];return e[r||t]=n,e},{}),e})},$I);function $I(){var e=null!==BI&&BI.apply(this,arguments)||this;return e._topicClient=new Map,e._topicAlias=new Map,e}var YI,JI,ZI,QI,Z_=(YI=function(e,t){return(YI=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}YI(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),XI=function(){return(XI=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},eA=function(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{o(u.next(e))}catch(e){t(e)}}function i(e){try{o(u.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,i)}o((u=u.apply(e,s||[])).next())})},tA=function(n,r){var i,o,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,o&&(s=2&t[0]?o.return:t[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,t[1])).done)return s;switch(o=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,o=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],o=0}finally{i=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},nA=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},rA=new E.Logger("AWSAppSyncRealTimeProvider"),iA="undefined"!=typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("amplify_default"):"@@amplify_default",oA=[400,401,403];(N=JI=JI||{}).GQL_CONNECTION_INIT="connection_init",N.GQL_CONNECTION_ERROR="connection_error",N.GQL_CONNECTION_ACK="connection_ack",N.GQL_START="start",N.GQL_START_ACK="start_ack",N.GQL_DATA="data",N.GQL_CONNECTION_KEEP_ALIVE="ka",N.GQL_STOP="stop",N.GQL_COMPLETE="complete",N.GQL_ERROR="error",(N=ZI=ZI||{})[N.PENDING=0]="PENDING",N[N.CONNECTED=1]="CONNECTED",N[N.FAILED=2]="FAILED",(N=QI=QI||{})[N.CLOSED=0]="CLOSED",N[N.READY=1]="READY",N[N.CONNECTING=2]="CONNECTING";var sA,aA={accept:"application/json, text/javascript","content-encoding":"amz-1.0","content-type":"application/json; charset=UTF-8"},uA=(Z_(cA,sA=AI),cA.prototype.getProviderName=function(){return"AWSAppSyncRealTimeProvider"},cA.prototype.newClient=function(){throw new Error("Not used here")},cA.prototype.publish=function(e,t,n){return eA(this,void 0,void 0,function(){return tA(this,function(e){throw new Error("Operation not supported")})})},cA.prototype.subscribe=function(e,t){var r=this,i=t.appSyncGraphqlEndpoint;return new _I(function(e){if(i){var n=m.v4();return r._startSubscriptionWithAWSAppSyncRealTime({options:t,observer:e,subscriptionId:n}),function(){return eA(r,void 0,void 0,function(){var t;return tA(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,3,4]),[4,this._waitForSubscriptionToBeConnected(n)];case 1:if(e.sent(),!(t=(this.subscriptionObserverMap.get(n)||{}).subscriptionState))return[2];if(t!==ZI.CONNECTED)throw new Error("Subscription never connected");return this._sendUnsubscriptionMessage(n),[3,4];case 2:return t=e.sent(),rA.debug("Error while unsubscribing "+t),[3,4];case 3:return this._removeSubscriptionObserver(n),[7];case 4:return[2]}})})}}e.error({errors:[XI({},new tE("Subscribe only available for AWS AppSync endpoint"))]}),e.complete()})},Object.defineProperty(cA.prototype,"isSSLEnabled",{get:function(){return!this.options.aws_appsync_dangerously_connect_to_http_endpoint_for_testing},enumerable:!0,configurable:!0}),cA.prototype._startSubscriptionWithAWSAppSyncRealTime=function(e){var y=e.options,v=e.observer,b=e.subscriptionId;return eA(this,void 0,void 0,function(){var t,n,r,i,o,s,a,u,c,l,p,d,f,h,g,m=this;return tA(this,function(e){switch(e.label){case 0:return t=y.appSyncGraphqlEndpoint,n=y.authenticationType,r=y.query,i=y.variables,o=y.apiKey,s=y.region,p=y.graphql_headers,a=void 0===p?function(){return{}}:p,l=y.additionalHeaders,u=void 0===l?{}:l,c=ZI.PENDING,p={query:r,variables:i},this.subscriptionObserverMap.set(b,{observer:v,query:r,variables:i,subscriptionState:c,startAckTimeoutId:null}),l=JSON.stringify(p),p=[{}],[4,this._awsRealTimeHeaderBasedAuth({apiKey:o,appSyncGraphqlEndpoint:t,authenticationType:n,payload:l,canonicalUri:"",region:s})];case 1:return d=[XI.apply(void 0,p.concat([e.sent()]))],[4,a()];case 2:g=XI.apply(void 0,[XI.apply(void 0,[XI.apply(void 0,d.concat([e.sent()])),u]),((g={})[E.USER_AGENT_HEADER]=E.Constants.userAgent,g)]),g={id:b,payload:{data:l,extensions:{authorization:XI({},g)}},type:JI.GQL_START},g=JSON.stringify(g),e.label=3;case 3:return e.trys.push([3,5,,6]),[4,this._initializeWebSocketConnection({apiKey:o,appSyncGraphqlEndpoint:t,authenticationType:n,region:s})];case 4:return e.sent(),[3,6];case 5:return h=e.sent(),rA.debug({err:h}),f=h.message,h=void 0===f?"":f,v.error({errors:[XI({},new tE("Connection failed: "+h))]}),v.complete(),"function"==typeof(f=(this.subscriptionObserverMap.get(b)||{}).subscriptionFailedCallback)&&f(),[2];case 6:return h=this.subscriptionObserverMap.get(b),f=h.subscriptionFailedCallback,h=h.subscriptionReadyCallback,this.subscriptionObserverMap.set(b,{observer:v,subscriptionState:c,variables:i,query:r,subscriptionReadyCallback:h,subscriptionFailedCallback:f,startAckTimeoutId:setTimeout(function(){m._timeoutStartSubscriptionAck.call(m,b)},15e3)}),this.awsRealTimeSocket&&this.awsRealTimeSocket.send(g),[2]}})})},cA.prototype._waitForSubscriptionToBeConnected=function(a){return eA(this,void 0,void 0,function(){var s=this;return tA(this,function(e){return this.subscriptionObserverMap.get(a).subscriptionState===ZI.PENDING?[2,new Promise(function(e,t){var n=s.subscriptionObserverMap.get(a),r=n.observer,i=n.subscriptionState,o=n.variables,n=n.query;s.subscriptionObserverMap.set(a,{observer:r,subscriptionState:i,variables:o,query:n,subscriptionReadyCallback:e,subscriptionFailedCallback:t})})]:[2]})})},cA.prototype._sendUnsubscriptionMessage=function(e){try{var t;this.awsRealTimeSocket&&this.awsRealTimeSocket.readyState===WebSocket.OPEN&&this.socketStatus===QI.READY&&(t={id:e,type:JI.GQL_STOP},t=JSON.stringify(t),this.awsRealTimeSocket.send(t))}catch(e){rA.debug({err:e})}},cA.prototype._removeSubscriptionObserver=function(e){this.subscriptionObserverMap.delete(e),setTimeout(this._closeSocketIfRequired.bind(this),1e3)},cA.prototype._closeSocketIfRequired=function(){var e;0<this.subscriptionObserverMap.size||(this.awsRealTimeSocket?0<this.awsRealTimeSocket.bufferedAmount?setTimeout(this._closeSocketIfRequired.bind(this),1e3):(rA.debug("closing WebSocket..."),clearTimeout(this.keepAliveTimeoutId),(e=this.awsRealTimeSocket).onclose=void 0,e.onerror=void 0,e.close(1e3),this.awsRealTimeSocket=null,this.socketStatus=QI.CLOSED):this.socketStatus=QI.CLOSED)},cA.prototype._handleIncomingSubscriptionMessage=function(e){rA.debug("subscription message from AWS AppSync RealTime: "+e.data);var t=JSON.parse(e.data),n=t.id,r=void 0===n?"":n,i=t.payload,o=t.type,s=this.subscriptionObserverMap.get(r)||{},a=s.observer,u=void 0===a?null:a,e=s.query,n=void 0===e?"":e,t=s.variables,a=void 0===t?{}:t,e=s.startAckTimeoutId,t=s.subscriptionReadyCallback,s=s.subscriptionFailedCallback;if(rA.debug({id:r,observer:u,query:n,variables:a}),o===JI.GQL_DATA&&i&&i.data)u?u.next(i):rA.debug("observer not found for id: "+r);else if(o!==JI.GQL_START_ACK){if(o===JI.GQL_CONNECTION_KEEP_ALIVE)return clearTimeout(this.keepAliveTimeoutId),void(this.keepAliveTimeoutId=setTimeout(this._errorDisconnect.bind(this,gA.TIMEOUT_DISCONNECT),this.keepAliveTimeout));o===JI.GQL_ERROR&&(c=ZI.FAILED,this.subscriptionObserverMap.set(r,{observer:u,query:n,variables:a,startAckTimeoutId:e,subscriptionReadyCallback:t,subscriptionFailedCallback:s,subscriptionState:c}),u.error({errors:[XI({},new tE("Connection failed: "+JSON.stringify(i)))]}),clearTimeout(e),u.complete(),"function"==typeof s&&s())}else{rA.debug("subscription ready for "+JSON.stringify({query:n,variables:a})),"function"==typeof t&&t(),clearTimeout(e),o=gA.SUBSCRIPTION_ACK,i={query:n,variables:a},e="Connection established for subscription",E.Hub.dispatch("api",{event:o,data:i,message:e},"PubSub",iA);var c=ZI.CONNECTED;this.subscriptionObserverMap.set(r,{observer:u,query:n,variables:a,startAckTimeoutId:null,subscriptionState:c,subscriptionReadyCallback:t,subscriptionFailedCallback:s})}},cA.prototype._errorDisconnect=function(t){rA.debug("Disconnect error: "+t),this.subscriptionObserverMap.forEach(function(e){e=e.observer;e&&!e.closed&&e.error({errors:[XI({},new tE(t))]})}),this.subscriptionObserverMap.clear(),this.awsRealTimeSocket&&this.awsRealTimeSocket.close(),this.socketStatus=QI.CLOSED},cA.prototype._timeoutStartSubscriptionAck=function(e){var t=this.subscriptionObserverMap.get(e)||{},n=t.observer,r=t.query,t=t.variables;n&&(this.subscriptionObserverMap.set(e,{observer:n,query:r,variables:t,subscriptionState:ZI.FAILED}),n&&!n.closed&&(n.error({errors:[XI({},new tE("Subscription timeout "+JSON.stringify({query:r,variables:t})))]}),n.complete()),rA.debug("timeoutStartSubscription",JSON.stringify({query:r,variables:t})))},cA.prototype._initializeWebSocketConnection=function(e){var t=this,u=e.appSyncGraphqlEndpoint,c=e.authenticationType,l=e.apiKey,p=e.region;if(this.socketStatus!==QI.READY)return new Promise(function(s,a){return eA(t,void 0,void 0,function(){var t,n,r,i,o;return tA(this,function(e){switch(e.label){case 0:if(this.promiseArray.push({res:s,rej:a}),this.socketStatus!==QI.CLOSED)return[3,5];e.label=1;case 1:return e.trys.push([1,4,,5]),this.socketStatus=QI.CONNECTING,n=this.isSSLEnabled?"wss://":"ws://",t=u.replace("https://",n).replace("http://",n).replace("appsync-api","appsync-realtime-api").replace("gogi-beta","grt-beta"),i="{}",n=(r=JSON).stringify,[4,this._awsRealTimeHeaderBasedAuth({authenticationType:c,payload:i,canonicalUri:"/connect",apiKey:l,appSyncGraphqlEndpoint:u,region:p})];case 2:return r=n.apply(r,[e.sent()]),r=d.Buffer.from(r).toString("base64"),i=d.Buffer.from(i).toString("base64"),i=t+"?header="+r+"&payload="+i,[4,this._initializeRetryableHandshake({awsRealTimeUrl:i})];case 3:return e.sent(),this.promiseArray.forEach(function(e){e=e.res;rA.debug("Notifying connection successful"),e()}),this.socketStatus=QI.READY,this.promiseArray=[],[3,5];case 4:return o=e.sent(),this.promiseArray.forEach(function(e){return(0,e.rej)(o)}),this.promiseArray=[],this.awsRealTimeSocket&&this.awsRealTimeSocket.readyState===WebSocket.OPEN&&this.awsRealTimeSocket.close(3001),this.awsRealTimeSocket=null,this.socketStatus=QI.CLOSED,[3,5];case 5:return[2]}})})})},cA.prototype._initializeRetryableHandshake=function(e){var t=e.awsRealTimeUrl;return eA(this,void 0,void 0,function(){return tA(this,function(e){switch(e.label){case 0:return rA.debug("Initializaling retryable Handshake"),[4,E.jitteredExponentialRetry(this._initializeHandshake.bind(this),[{awsRealTimeUrl:t}],5e3)];case 1:return e.sent(),[2]}})})},cA.prototype._initializeHandshake=function(e){var i=e.awsRealTimeUrl;return eA(this,void 0,void 0,function(){var t,n,r,s=this;return tA(this,function(e){switch(e.label){case 0:rA.debug("Initializing handshake "+i),e.label=1;case 1:return e.trys.push([1,4,,5]),[4,new Promise(function(e,t){var n=new WebSocket(i,"graphql-ws");n.onerror=function(){rA.debug("WebSocket connection error")},n.onclose=function(){t(new Error("Connection handshake error"))},n.onopen=function(){return s.awsRealTimeSocket=n,e()}})];case 2:return e.sent(),[4,new Promise(function(r,i){var o=!1;s.awsRealTimeSocket.onerror=function(e){rA.debug("WebSocket error "+JSON.stringify(e))},s.awsRealTimeSocket.onclose=function(e){rA.debug("WebSocket closed "+e.reason),i(new Error(JSON.stringify(e)))},s.awsRealTimeSocket.onmessage=function(e){rA.debug("subscription message from AWS AppSyncRealTime: "+e.data+" ");var t=JSON.parse(e.data),n=t.type,e=t.payload,e=(void 0===e?{}:e).connectionTimeoutMs,e=void 0===e?3e5:e;if(n===JI.GQL_CONNECTION_ACK)return o=!0,s.keepAliveTimeout=e,s.awsRealTimeSocket.onmessage=s._handleIncomingSubscriptionMessage.bind(s),s.awsRealTimeSocket.onerror=function(e){rA.debug(e),s._errorDisconnect(gA.CONNECTION_CLOSED)},s.awsRealTimeSocket.onclose=function(e){rA.debug("WebSocket closed "+e.reason),s._errorDisconnect(gA.CONNECTION_CLOSED)},void r("Cool, connected to AWS AppSyncRealTime");n===JI.GQL_CONNECTION_ERROR&&(t=(void 0===(n=t.payload)?{}:n).errors,n=void 0===(n=(t=void 0===(n=nA(void 0===t?[]:t,1)[0])?{}:n).errorType)?"":n,t=t.errorCode,i({errorType:n,errorCode:void 0===t?0:t}))};var e={type:JI.GQL_CONNECTION_INIT};s.awsRealTimeSocket.send(JSON.stringify(e)),setTimeout(function(){o||i(new Error("Connection timeout: ack from AWSRealTime was not received on 15000 ms"))}.bind(s),15e3)})];case 3:return e.sent(),[3,5];case 4:throw t=e.sent(),n=t.errorType,r=t.errorCode,oA.includes(r)?new E.NonRetryableError(n):n?new Error(n):t;case 5:return[2]}})})},cA.prototype._awsRealTimeHeaderBasedAuth=function(e){var r=e.authenticationType,i=e.payload,o=e.canonicalUri,s=e.appSyncGraphqlEndpoint,a=e.apiKey,u=e.region;return eA(this,void 0,void 0,function(){var t,n;return tA(this,function(e){switch(e.label){case 0:return(n={API_KEY:this._awsRealTimeApiKeyHeader.bind(this),AWS_IAM:this._awsRealTimeIAMHeader.bind(this),OPENID_CONNECT:this._awsRealTimeOPENIDHeader.bind(this),AMAZON_COGNITO_USER_POOLS:this._awsRealTimeCUPHeader.bind(this)},"function"!=typeof(t=n[r]))?(rA.debug("Authentication type "+r+" not supported"),[2,""]):(n=h.parse(s).host,[4,t({payload:i,canonicalUri:o,appSyncGraphqlEndpoint:s,apiKey:a,region:u,host:n})]);case 1:return[2,e.sent()]}})})},cA.prototype._awsRealTimeCUPHeader=function(e){var t=e.host;return eA(this,void 0,void 0,function(){return tA(this,function(e){switch(e.label){case 0:return[4,tm.currentSession()];case 1:return[2,{Authorization:e.sent().getAccessToken().getJwtToken(),host:t}]}})})},cA.prototype._awsRealTimeOPENIDHeader=function(e){var r=e.host;return eA(this,void 0,void 0,function(){var t,n;return tA(this,function(e){switch(e.label){case 0:return[4,Xd.getItem("federatedInfo")];case 1:return(n=e.sent())?(t=n.token,[3,4]):[3,2];case 2:return[4,tm.currentAuthenticatedUser()];case 3:(n=e.sent())&&(t=n.token),e.label=4;case 4:if(!t)throw new Error("No federated jwt");return[2,{Authorization:t,host:r}]}})})},cA.prototype._awsRealTimeApiKeyHeader=function(e){var n=e.apiKey,r=e.host;return eA(this,void 0,void 0,function(){var t;return tA(this,function(e){return t=new Date,t=t.toISOString().replace(/[:\-]|\.\d{3}/g,""),[2,{host:r,"x-amz-date":t,"x-api-key":n}]})})},cA.prototype._awsRealTimeIAMHeader=function(e){var i=e.payload,o=e.canonicalUri,s=e.appSyncGraphqlEndpoint,a=e.region;return eA(this,void 0,void 0,function(){var t,n,r;return tA(this,function(e){switch(e.label){case 0:return t={region:a,service:"appsync"},[4,this._ensureCredentials()];case 1:if(!e.sent())throw new Error("No credentials");return[4,E.Credentials.get().then(function(e){return{secret_key:e.secretAccessKey,access_key:e.accessKeyId,session_token:e.sessionToken}})];case 2:return n=e.sent(),r={url:""+s+o,data:i,method:"POST",headers:XI({},aA)},[2,E.Signer.sign(r,n,t).headers]}})})},cA.prototype._ensureCredentials=function(){return E.Credentials.get().then(function(e){if(!e)return!1;e=E.Credentials.shear(e);return rA.debug("set credentials for AWSAppSyncRealTimeProvider",e),!0}).catch(function(e){return rA.warn("ensure credentials error",e),!1})},cA);function cA(){var e=null!==sA&&sA.apply(this,arguments)||this;return e.socketStatus=QI.CLOSED,e.keepAliveTimeout=3e5,e.subscriptionObserverMap=new Map,e.promiseArray=[],e}var lA=function(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{o(u.next(e))}catch(e){t(e)}}function i(e){try{o(u.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,i)}o((u=u.apply(e,s||[])).next())})},pA=function(n,r){var i,o,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,o&&(s=2&t[0]?o.return:t[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,t[1])).done)return s;switch(o=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,o=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],o=0}finally{i=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},dA=E.browserOrNode().isNode,fA=new E.ConsoleLogger("PubSub");function hA(e){this._options=e,fA.debug("PubSub Options",this._options),this._pluggables=[],this.subscribe=this.subscribe.bind(this)}var gA,mA=new(Object.defineProperty(hA.prototype,"awsAppSyncProvider",{get:function(){return this._awsAppSyncProvider||(this._awsAppSyncProvider=new WI(this._options)),this._awsAppSyncProvider},enumerable:!0,configurable:!0}),Object.defineProperty(hA.prototype,"awsAppSyncRealTimeProvider",{get:function(){return this._awsAppSyncRealTimeProvider||(this._awsAppSyncRealTimeProvider=new uA(this._options)),this._awsAppSyncRealTimeProvider},enumerable:!0,configurable:!0}),hA.prototype.getModuleName=function(){return"PubSub"},hA.prototype.configure=function(e){var t=this,e=e?e.PubSub||e:{};return fA.debug("configure PubSub",{opt:e}),this._options=Object.assign({},this._options,e),this._pluggables.map(function(e){return e.configure(t._options)}),this._options},hA.prototype.addPluggable=function(t){return lA(this,void 0,void 0,function(){return pA(this,function(e){return t&&"PubSub"===t.getCategory()?(this._pluggables.push(t),[2,t.configure(this._options)]):[2]})})},hA.prototype.getProviderByName=function(t){return t===E.INTERNAL_AWS_APPSYNC_PUBSUB_PROVIDER?this.awsAppSyncProvider:t===E.INTERNAL_AWS_APPSYNC_REALTIME_PUBSUB_PROVIDER?this.awsAppSyncRealTimeProvider:this._pluggables.find(function(e){return e.getProviderName()===t})},hA.prototype.getProviders=function(e){var t=(e=void 0===e?{}:e).provider;if(!t)return this._pluggables;e=this.getProviderByName(t);if(!e)throw new Error("Could not find provider named "+t);return[e]},hA.prototype.publish=function(t,n,r){return lA(this,void 0,void 0,function(){return pA(this,function(e){return[2,Promise.all(this.getProviders(r).map(function(e){return e.publish(t,n,r)}))]})})},hA.prototype.subscribe=function(t,r){if(dA&&this._options&&this._options.ssr)throw new Error("Subscriptions are not supported for Server-Side Rendering (SSR)");fA.debug("subscribe options",r);var i=this.getProviders(r);return new _I(function(n){var e=i.map(function(e){return{provider:e,observable:e.subscribe(t,r)}}).map(function(e){var t=e.provider;return e.observable.subscribe({start:console.error,next:function(e){return n.next({provider:t,value:e})},error:function(e){return n.error({provider:t,error:e})}})});return function(){return e.forEach(function(e){return e.unsubscribe()})}})},hA)(null);E.Amplify.register(mA),(N=gA=gA||{}).CONNECTION_CLOSED="Connection closed",N.TIMEOUT_DISCONNECT="Timeout disconnect",N.SUBSCRIPTION_ACK="Subscription ack";var yA=function(){return(yA=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},vA=function(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{o(u.next(e))}catch(e){t(e)}}function i(e){try{o(u.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,i)}o((u=u.apply(e,s||[])).next())})},bA=function(n,r){var i,o,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,o&&(s=2&t[0]?o.return:t[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,t[1])).done)return s;switch(o=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,o=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],o=0}finally{i=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},SA=function(e,t){var n={};for(i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]]);return n},wA=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},CA=new E.ConsoleLogger("GraphQLAPI"),_A=(EA.prototype.getModuleName=function(){return"GraphQLAPI"},EA.prototype.configure=function(e){var t=e||{},e=t.API,e=void 0===e?{}:e,t=SA(t,["API"]),e=yA(yA({},t),e);return CA.debug("configure GraphQL API",{opt:e}),void 0!==(e=e.aws_project_region?Object.assign({},e,{region:e.aws_project_region,header:{}}):e).graphql_headers&&"function"!=typeof e.graphql_headers&&(CA.warn("graphql_headers should be a function"),e.graphql_headers=void 0),this._options=Object.assign({},this._options,e),this.createInstance(),this._options},EA.prototype.createInstance=function(){return CA.debug("create Rest instance"),this._options?(this._api=new z_(this._options),this._api.Credentials=this.Credentials,!0):Promise.reject("API not configured")},EA.prototype._headerBasedAuth=function(s){return vA(this,void 0,void 0,function(){var t,n,r,i,o;return bA(this,function(e){switch(e.label){case 0:switch(r=this._options,t=r.aws_appsync_authenticationType,n=r.aws_appsync_apiKey,r={},s||t||"AWS_IAM"){case"API_KEY":return[3,1];case"AWS_IAM":return[3,2];case"OPENID_CONNECT":return[3,4];case"AMAZON_COGNITO_USER_POOLS":return[3,9]}return[3,11];case 1:if(!n)throw new Error("No api-key configured");return r={Authorization:null,"X-Api-Key":n},[3,12];case 2:return[4,this._ensureCredentials()];case 3:if(!e.sent())throw new Error("No credentials");return[3,12];case 4:return o=void 0,[4,Xd.getItem("federatedInfo")];case 5:return(i=e.sent())?(o=i.token,[3,8]):[3,6];case 6:return[4,tm.currentAuthenticatedUser()];case 7:(i=e.sent())&&(o=i.token),e.label=8;case 8:if(!o)throw new Error("No federated jwt");return r={Authorization:o},[3,12];case 9:return[4,this.Auth.currentSession()];case 10:return o=e.sent(),r={Authorization:o.getAccessToken().getJwtToken()},[3,12];case 11:return r={Authorization:null},[3,12];case 12:return[2,r]}})})},EA.prototype.getGraphqlOperationType=function(e){e=ME(e);return wA(e.definitions,1)[0].operation},EA.prototype.graphql=function(e,t){var n=e.query,r=e.variables,i=void 0===r?{}:r,o=e.authMode,s=ME("string"==typeof n?n:sE(n)),n=wA(s.definitions.filter(function(e){return"OperationDefinition"===e.kind}),1)[0],n=(void 0===n?{}:n).operation;switch(n){case"query":case"mutation":var a=this._api.getCancellableToken(),u={cancellableToken:a},u=this._graphql({query:s,variables:i,authMode:o},t,u);return this._api.updateRequestToBeCancellable(u,a),u;case"subscription":return this._graphqlSubscribe({query:s,variables:i,authMode:o},t)}throw new Error("invalid operation type: "+n)},EA.prototype._graphql=function(e,m,y){var v=e.query,b=e.variables,S=e.authMode;return void 0===m&&(m={}),void 0===y&&(y={}),vA(this,void 0,void 0,function(){var t,n,r,i,o,s,a,u,c,l,p,d,f,h,g;return bA(this,function(e){switch(e.label){case 0:return this._api?[3,2]:[4,this.createInstance()];case 1:e.sent(),e.label=2;case 2:return a=this._options,t=a.aws_appsync_region,n=a.aws_appsync_graphqlEndpoint,s=a.graphql_headers,r=void 0===s?function(){return{}}:s,i=a.graphql_endpoint,o=a.graphql_endpoint_iam_region,s=[{}],(a=!i)?[4,this._headerBasedAuth(S)]:[3,4];case 3:a=e.sent(),e.label=4;case 4:return u=[yA.apply(void 0,s.concat([a]))],(c=i)?o?[4,this._headerBasedAuth(S)]:[3,6]:[3,8];case 5:return l=e.sent(),[3,7];case 6:l={Authorization:null},e.label=7;case 7:c=l,e.label=8;case 8:return p=[yA.apply(void 0,u.concat([c]))],[4,r({query:v,variables:b})];case 9:if(d=yA.apply(void 0,[yA.apply(void 0,[yA.apply(void 0,p.concat([e.sent()])),m]),!i&&((g={})["x-amz-user-agent"]=E.Constants.userAgent,g)]),g={query:sE(v),variables:b},d=Object.assign({headers:d,body:g,signerServiceInfo:{service:i?"execute-api":"appsync",region:i?o:t}},y),!(g=i||n))throw{data:{},errors:[new tE("No graphql endpoint provided.")]};e.label=10;case 10:return e.trys.push([10,12,,13]),[4,this._api.post(g,d)];case 11:return f=e.sent(),[3,13];case 12:if(h=e.sent(),this._api.isCancel(h))throw h;return f={data:{},errors:[new tE(h.message)]},[3,13];case 13:if((h=f.errors)&&h.length)throw f;return[2,f]}})})},EA.prototype.isCancel=function(e){return this._api.isCancel(e)},EA.prototype.cancel=function(e,t){return this._api.cancel(e,t)},EA.prototype._graphqlSubscribe=function(e,t){var n=e.query,r=e.variables,i=e.authMode;void 0===t&&(t={});var o=this._options,s=o.aws_appsync_region,a=o.aws_appsync_graphqlEndpoint,u=o.aws_appsync_authenticationType,e=o.aws_appsync_apiKey,o=o.graphql_headers,o=void 0===o?function(){return{}}:o,u=i||u||"AWS_IAM";if(mA&&"function"==typeof mA.subscribe)return mA.subscribe("",{provider:E.INTERNAL_AWS_APPSYNC_REALTIME_PUBSUB_PROVIDER,appSyncGraphqlEndpoint:a,authenticationType:u,apiKey:e,query:sE(n),region:s,variables:r,graphql_headers:o,additionalHeaders:t});throw CA.debug("No pubsub module applied for subscription"),new Error("No pubsub module applied for subscription")},EA.prototype._ensureCredentials=function(){var t=this;return this.Credentials.get().then(function(e){if(!e)return!1;e=t.Credentials.shear(e);return CA.debug("set credentials for api",e),!0}).catch(function(e){return CA.warn("ensure credentials error",e),!1})},EA);function EA(e){this._api=null,this.Auth=tm,this.Cache=Xd,this.Credentials=E.Credentials,this._options=e,CA.debug("API Options",this._options)}Z_=new _A(null);E.Amplify.register(Z_);var IA=function(){return(IA=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},AA=function(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{o(u.next(e))}catch(e){t(e)}}function i(e){try{o(u.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,i)}o((u=u.apply(e,s||[])).next())})},PA=function(n,r){var i,o,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,o&&(s=2&t[0]?o.return:t[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,t[1])).done)return s;switch(o=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,o=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],o=0}finally{i=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},OA=new E.ConsoleLogger("API");function TA(e){this.Auth=tm,this.Cache=Xd,this.Credentials=E.Credentials,this._options=e,this._restApi=new Y_(e),this._graphqlApi=new _A(e),OA.debug("API Options",this._options)}var kA=new(TA.prototype.getModuleName=function(){return"API"},TA.prototype.configure=function(e){this._options=Object.assign({},this._options,e),this._restApi.Credentials=this.Credentials,this._graphqlApi.Auth=this.Auth,this._graphqlApi.Cache=this.Cache,this._graphqlApi.Credentials=this.Credentials;var t=this._restApi.configure(this._options),e=this._graphqlApi.configure(this._options);return IA(IA({},t),e)},TA.prototype.get=function(e,t,n){return this._restApi.get(e,t,n)},TA.prototype.post=function(e,t,n){return this._restApi.post(e,t,n)},TA.prototype.put=function(e,t,n){return this._restApi.put(e,t,n)},TA.prototype.patch=function(e,t,n){return this._restApi.patch(e,t,n)},TA.prototype.del=function(e,t,n){return this._restApi.del(e,t,n)},TA.prototype.head=function(e,t,n){return this._restApi.head(e,t,n)},TA.prototype.isCancel=function(e){return this._restApi.isCancel(e)},TA.prototype.cancel=function(e,t){return this._restApi.cancel(e,t)},TA.prototype.endpoint=function(t){return AA(this,void 0,void 0,function(){return PA(this,function(e){return[2,this._restApi.endpoint(t)]})})},TA.prototype.getGraphqlOperationType=function(e){return this._graphqlApi.getGraphqlOperationType(e)},TA.prototype.graphql=function(e,t){return this._graphqlApi.graphql(e,t)},TA)(null);E.Amplify.register(kA);var xA=function(){return(xA=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},NA=new E.ConsoleLogger("AbstractInteractionsProvider"),AI=(LA.prototype.configure=function(e){return void 0===e&&(e={}),this._config=xA(xA({},this._config),e),NA.debug("configure "+this.getProviderName(),this._config),this.options},LA.prototype.getCategory=function(){return"Interactions"},Object.defineProperty(LA.prototype,"options",{get:function(){return xA({},this._config)},enumerable:!0,configurable:!0}),LA);function LA(e){void 0===e&&(e={}),this._config=e}var MA=function(e,t){return(MA=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function RA(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}MA(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var UA=function(){return(UA=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function DA(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{o(u.next(e))}catch(e){t(e)}}function i(e){try{o(u.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,i)}o((u=u.apply(e,s||[])).next())})}function FA(n,r){var i,o,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,o&&(s=2&t[0]?o.return:t[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,t[1])).done)return s;switch(o=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,o=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],o=0}finally{i=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}}function jA(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}var BA,VA,zA,qA,KA,HA,GA,WA,N="@aws-sdk/client-lex-runtime-service",Z_="1.0.0-rc.4",$A="runtime.lex.{region}.amazonaws.com",YA=new Set(["ap-east-1","ap-northeast-1","ap-northeast-2","ap-south-1","ap-southeast-1","ap-southeast-2","ca-central-1","eu-central-1","eu-north-1","eu-west-1","eu-west-2","eu-west-3","me-south-1","sa-east-1","us-east-1","us-east-2","us-west-1","us-west-2"]),JA=new Set(["cn-north-1","cn-northwest-1"]),ZA=new Set(["us-iso-east-1"]),QA=new Set(["us-isob-east-1"]),XA=new Set(["us-gov-east-1","us-gov-west-1"]),eP=UA(UA({},{apiVersion:"2016-11-28",disableHostPrefix:!1,logger:{},regionInfoProvider:function(e,t){var n=void 0;switch(e){case"eu-west-1":n={hostname:"runtime.lex.eu-west-1.amazonaws.com",partition:"aws",signingService:"lex"};break;case"us-east-1":n={hostname:"runtime.lex.us-east-1.amazonaws.com",partition:"aws",signingService:"lex"};break;case"us-west-2":n={hostname:"runtime.lex.us-west-2.amazonaws.com",partition:"aws",signingService:"lex"};break;default:YA.has(e)&&(n={hostname:$A.replace("{region}",e),partition:"aws",signingService:"lex"}),JA.has(e)&&(n={hostname:"runtime.lex.{region}.amazonaws.com.cn".replace("{region}",e),partition:"aws-cn"}),ZA.has(e)&&(n={hostname:"runtime.lex.{region}.c2s.ic.gov".replace("{region}",e),partition:"aws-iso"}),QA.has(e)&&(n={hostname:"runtime.lex.{region}.sc2s.sgov.gov".replace("{region}",e),partition:"aws-iso-b"}),void 0===(n=XA.has(e)?{hostname:"runtime.lex.{region}.amazonaws.com".replace("{region}",e),partition:"aws-us-gov"}:n)&&(n={hostname:$A.replace("{region}",e),partition:"aws",signingService:"lex"})}return Promise.resolve(n)},signingName:"lex"}),{runtime:"node",base64Decoder:du,base64Encoder:fu,bodyLengthChecker:hu,credentialDefaultProvider:qs,defaultUserAgent:gu(N,Z_),maxAttempts:S(ln),region:S(p,Ye),requestHandler:new ct,sha256:b.bind(null,"sha256"),streamCollector:C,urlParser:pu,utf8Decoder:Re,utf8Encoder:fn}),tP=(RA(nP,BA=at),nP.prototype.destroy=function(){BA.prototype.destroy.call(this)},nP);function nP(e){var t=this,e=UA(UA({},eP),e),e=ko(e),e=dc(To(e)),e=pa(e);return(t=BA.call(this,e)||this).config=e,t.middlewareStack.use(mc(t.config)),t.middlewareStack.use(Ys(t.config)),t.middlewareStack.use(vc(t.config)),t.middlewareStack.use(Eu(t.config)),t.middlewareStack.use(Au(t.config)),t.middlewareStack.use(Pu(t.config)),t}(YO||(YO={})).filterSensitiveLog=function(e){return UA({},e)},(JO||(JO={})).filterSensitiveLog=function(e){return UA({},e)},(nT||(nT={})).filterSensitiveLog=function(e){return UA({},e)},(FP||(FP={})).filterSensitiveLog=function(e){return UA({},e)},(XP||{}).filterSensitiveLog=function(e){return UA({},e)},(rO||(rO={})).filterSensitiveLog=function(e){return UA({},e)},(iO||{}).filterSensitiveLog=function(e){return UA({},e)},(AO||(AO={})).filterSensitiveLog=function(e){return UA({},e)},(fn={}).FAILED="Failed",fn.FULFILLED="Fulfilled",fn.READY_FOR_FULFILLMENT="ReadyForFulfillment",(at={}).COMPOSITE="Composite",at.CUSTOM_PAYLOAD="CustomPayload",at.PLAIN_TEXT="PlainText",at.SSML="SSML",(YO={}).CLOSE="Close",YO.CONFIRM_INTENT="ConfirmIntent",YO.DELEGATE="Delegate",YO.ELICIT_INTENT="ElicitIntent",YO.ELICIT_SLOT="ElicitSlot",(VA||(VA={})).filterSensitiveLog=function(e){return UA(UA(UA({},e),e.slots&&{slots:Mc}),e.message&&{message:Mc})},(JO={}).CONFIRMED="Confirmed",JO.DENIED="Denied",JO.NONE="None",(zA||(zA={})).filterSensitiveLog=function(e){return UA(UA({},e),e.slots&&{slots:Mc})},(ZO||(ZO={})).filterSensitiveLog=function(e){return UA(UA(UA(UA({},e),e.dialogAction&&{dialogAction:VA.filterSensitiveLog(e.dialogAction)}),e.recentIntentSummaryView&&{recentIntentSummaryView:e.recentIntentSummaryView.map(function(e){return zA.filterSensitiveLog(e)})}),e.sessionAttributes&&{sessionAttributes:Mc})},(QO||(QO={})).filterSensitiveLog=function(e){return UA({},e)},(XO||(XO={})).filterSensitiveLog=function(e){return UA({},e)},(eT||(eT={})).filterSensitiveLog=function(e){return UA({},e)},(tT||(tT={})).filterSensitiveLog=function(e){return UA({},e)},(qA||(qA={})).filterSensitiveLog=function(e){return UA(UA(UA({},e),e.requestAttributes&&{requestAttributes:Mc}),e.sessionAttributes&&{sessionAttributes:Mc})},(nT={}).CONFIRM_INTENT="ConfirmIntent",nT.ELICIT_INTENT="ElicitIntent",nT.ELICIT_SLOT="ElicitSlot",nT.FAILED="Failed",nT.FULFILLED="Fulfilled",nT.READY_FOR_FULFILLMENT="ReadyForFulfillment",(KA||(KA={})).filterSensitiveLog=function(e){return UA(UA({},e),e.message&&{message:Mc})},(rT||(rT={})).filterSensitiveLog=function(e){return UA({},e)},(iT||(iT={})).filterSensitiveLog=function(e){return UA({},e)},(HA||(HA={})).filterSensitiveLog=function(e){return UA(UA(UA(UA({},e),e.requestAttributes&&{requestAttributes:Mc}),e.inputText&&{inputText:Mc}),e.sessionAttributes&&{sessionAttributes:Mc})},(oT||(oT={})).filterSensitiveLog=function(e){return UA({},e)},(GA||(GA={})).filterSensitiveLog=function(e){return UA(UA({},e),e.slots&&{slots:Mc})},(sT||(sT={})).filterSensitiveLog=function(e){return UA({},e)},(aT||(aT={})).filterSensitiveLog=function(e){return UA({},e)},(uT||(uT={})).filterSensitiveLog=function(e){return UA({},e)},(cT||(cT={})).filterSensitiveLog=function(e){return UA({},e)},(WA||(WA={})).filterSensitiveLog=function(e){return UA(UA(UA(UA(UA({},e),e.alternativeIntents&&{alternativeIntents:e.alternativeIntents.map(function(e){return GA.filterSensitiveLog(e)})}),e.message&&{message:Mc}),e.sessionAttributes&&{sessionAttributes:Mc}),e.slots&&{slots:Mc})},(lT||(lT={})).filterSensitiveLog=function(e){return UA(UA(UA(UA({},e),e.dialogAction&&{dialogAction:VA.filterSensitiveLog(e.dialogAction)}),e.recentIntentSummaryView&&{recentIntentSummaryView:e.recentIntentSummaryView.map(function(e){return zA.filterSensitiveLog(e)})}),e.sessionAttributes&&{sessionAttributes:Mc})},(pT||(pT={})).filterSensitiveLog=function(e){return UA(UA({},e),e.message&&{message:Mc})};function rP(e,t){return(e||[]).map(function(e){return{attachmentLinkUrl:void 0!==(e=e).attachmentLinkUrl&&null!==e.attachmentLinkUrl?e.attachmentLinkUrl:void 0,buttons:void 0!==e.buttons&&null!==e.buttons?CP(e.buttons):void 0,imageUrl:void 0!==e.imageUrl&&null!==e.imageUrl?e.imageUrl:void 0,subTitle:void 0!==e.subTitle&&null!==e.subTitle?e.subTitle:void 0,title:void 0!==e.title&&null!==e.title?e.title:void 0}})}function iP(e,t){return n=t,((e=void 0===(e=e)?new Uint8Array:e)instanceof Uint8Array?Promise.resolve(e):n.streamCollector(e)||Promise.resolve(new Uint8Array)).then(function(e){return t.utf8Encoder(e)});var n}var oP,sP=function(y,v){return DA(void 0,void 0,void 0,function(){var t,n,r,i,o,s,a,u,c,l,p,d,f,h,g,m;return FA(this,function(e){switch(e.label){case 0:return t=[UA({},y)],m={},[4,TP(y.body,v)];case 1:switch(h=UA.apply(void 0,t.concat([(m.body=e.sent(),m)])),g="UnknownError",g=kP(y,h.body)){case"BadGatewayException":case"com.amazonaws.lexruntimeservice#BadGatewayException":return[3,2];case"BadRequestException":case"com.amazonaws.lexruntimeservice#BadRequestException":return[3,4];case"ConflictException":case"com.amazonaws.lexruntimeservice#ConflictException":return[3,6];case"DependencyFailedException":case"com.amazonaws.lexruntimeservice#DependencyFailedException":return[3,8];case"InternalFailureException":case"com.amazonaws.lexruntimeservice#InternalFailureException":return[3,10];case"LimitExceededException":case"com.amazonaws.lexruntimeservice#LimitExceededException":return[3,12];case"LoopDetectedException":case"com.amazonaws.lexruntimeservice#LoopDetectedException":return[3,14];case"NotAcceptableException":case"com.amazonaws.lexruntimeservice#NotAcceptableException":return[3,16];case"NotFoundException":case"com.amazonaws.lexruntimeservice#NotFoundException":return[3,18];case"RequestTimeoutException":case"com.amazonaws.lexruntimeservice#RequestTimeoutException":return[3,20];case"UnsupportedMediaTypeException":case"com.amazonaws.lexruntimeservice#UnsupportedMediaTypeException":return[3,22]}return[3,24];case 2:return r=[{}],[4,uP(h)];case 3:return n=UA.apply(void 0,[UA.apply(void 0,r.concat([e.sent()])),{name:g,$metadata:PP(y)}]),[3,25];case 4:return i=[{}],[4,cP(h)];case 5:return n=UA.apply(void 0,[UA.apply(void 0,i.concat([e.sent()])),{name:g,$metadata:PP(y)}]),[3,25];case 6:return o=[{}],[4,lP(h)];case 7:return n=UA.apply(void 0,[UA.apply(void 0,o.concat([e.sent()])),{name:g,$metadata:PP(y)}]),[3,25];case 8:return s=[{}],[4,pP(h)];case 9:return n=UA.apply(void 0,[UA.apply(void 0,s.concat([e.sent()])),{name:g,$metadata:PP(y)}]),[3,25];case 10:return a=[{}],[4,dP(h)];case 11:return n=UA.apply(void 0,[UA.apply(void 0,a.concat([e.sent()])),{name:g,$metadata:PP(y)}]),[3,25];case 12:return u=[{}],[4,fP(h)];case 13:return n=UA.apply(void 0,[UA.apply(void 0,u.concat([e.sent()])),{name:g,$metadata:PP(y)}]),[3,25];case 14:return c=[{}],[4,hP(h)];case 15:return n=UA.apply(void 0,[UA.apply(void 0,c.concat([e.sent()])),{name:g,$metadata:PP(y)}]),[3,25];case 16:return l=[{}],[4,gP(h)];case 17:return n=UA.apply(void 0,[UA.apply(void 0,l.concat([e.sent()])),{name:g,$metadata:PP(y)}]),[3,25];case 18:return p=[{}],[4,mP(h)];case 19:return n=UA.apply(void 0,[UA.apply(void 0,p.concat([e.sent()])),{name:g,$metadata:PP(y)}]),[3,25];case 20:return d=[{}],[4,yP(h)];case 21:return n=UA.apply(void 0,[UA.apply(void 0,d.concat([e.sent()])),{name:g,$metadata:PP(y)}]),[3,25];case 22:return f=[{}],[4,vP(h)];case 23:return n=UA.apply(void 0,[UA.apply(void 0,f.concat([e.sent()])),{name:g,$metadata:PP(y)}]),[3,25];case 24:h=h.body,g=h.code||h.Code||g,n=UA(UA({},h),{name:""+g,message:h.message||h.Message||g,$fault:"client",$metadata:PP(y)}),e.label=25;case 25:return g=n.message||n.Message||g,n.message=g,delete n.Message,[2,Promise.reject(Object.assign(new Error(g),n))]}})})},aP=function(h,g){return DA(void 0,void 0,void 0,function(){var t,n,r,i,o,s,a,u,c,l,p,d,f;return FA(this,function(e){switch(e.label){case 0:return t=[UA({},h)],f={},[4,TP(h.body,g)];case 1:switch(p=UA.apply(void 0,t.concat([(f.body=e.sent(),f)])),d="UnknownError",d=kP(h,p.body)){case"BadGatewayException":case"com.amazonaws.lexruntimeservice#BadGatewayException":return[3,2];case"BadRequestException":case"com.amazonaws.lexruntimeservice#BadRequestException":return[3,4];case"ConflictException":case"com.amazonaws.lexruntimeservice#ConflictException":return[3,6];case"DependencyFailedException":case"com.amazonaws.lexruntimeservice#DependencyFailedException":return[3,8];case"InternalFailureException":case"com.amazonaws.lexruntimeservice#InternalFailureException":return[3,10];case"LimitExceededException":case"com.amazonaws.lexruntimeservice#LimitExceededException":return[3,12];case"LoopDetectedException":case"com.amazonaws.lexruntimeservice#LoopDetectedException":return[3,14];case"NotFoundException":case"com.amazonaws.lexruntimeservice#NotFoundException":return[3,16]}return[3,18];case 2:return r=[{}],[4,uP(p)];case 3:return n=UA.apply(void 0,[UA.apply(void 0,r.concat([e.sent()])),{name:d,$metadata:PP(h)}]),[3,19];case 4:return i=[{}],[4,cP(p)];case 5:return n=UA.apply(void 0,[UA.apply(void 0,i.concat([e.sent()])),{name:d,$metadata:PP(h)}]),[3,19];case 6:return o=[{}],[4,lP(p)];case 7:return n=UA.apply(void 0,[UA.apply(void 0,o.concat([e.sent()])),{name:d,$metadata:PP(h)}]),[3,19];case 8:return s=[{}],[4,pP(p)];case 9:return n=UA.apply(void 0,[UA.apply(void 0,s.concat([e.sent()])),{name:d,$metadata:PP(h)}]),[3,19];case 10:return a=[{}],[4,dP(p)];case 11:return n=UA.apply(void 0,[UA.apply(void 0,a.concat([e.sent()])),{name:d,$metadata:PP(h)}]),[3,19];case 12:return u=[{}],[4,fP(p)];case 13:return n=UA.apply(void 0,[UA.apply(void 0,u.concat([e.sent()])),{name:d,$metadata:PP(h)}]),[3,19];case 14:return c=[{}],[4,hP(p)];case 15:return n=UA.apply(void 0,[UA.apply(void 0,c.concat([e.sent()])),{name:d,$metadata:PP(h)}]),[3,19];case 16:return l=[{}],[4,mP(p)];case 17:return n=UA.apply(void 0,[UA.apply(void 0,l.concat([e.sent()])),{name:d,$metadata:PP(h)}]),[3,19];case 18:p=p.body,d=p.code||p.Code||d,n=UA(UA({},p),{name:""+d,message:p.message||p.Message||d,$fault:"client",$metadata:PP(h)}),e.label=19;case 19:return d=n.message||n.Message||d,n.message=d,delete n.Message,[2,Promise.reject(Object.assign(new Error(d),n))]}})})},uP=function(r,e){return DA(void 0,void 0,void 0,function(){var t,n;return FA(this,function(e){return t={name:"BadGatewayException",$fault:"server",$metadata:PP(r),Message:void 0},void 0!==(n=r.body).Message&&null!==n.Message&&(t.Message=n.Message),[2,t]})})},cP=function(r,e){return DA(void 0,void 0,void 0,function(){var t,n;return FA(this,function(e){return t={name:"BadRequestException",$fault:"client",$metadata:PP(r),message:void 0},void 0!==(n=r.body).message&&null!==n.message&&(t.message=n.message),[2,t]})})},lP=function(r,e){return DA(void 0,void 0,void 0,function(){var t,n;return FA(this,function(e){return t={name:"ConflictException",$fault:"client",$metadata:PP(r),message:void 0},void 0!==(n=r.body).message&&null!==n.message&&(t.message=n.message),[2,t]})})},pP=function(r,e){return DA(void 0,void 0,void 0,function(){var t,n;return FA(this,function(e){return t={name:"DependencyFailedException",$fault:"client",$metadata:PP(r),Message:void 0},void 0!==(n=r.body).Message&&null!==n.Message&&(t.Message=n.Message),[2,t]})})},dP=function(r,e){return DA(void 0,void 0,void 0,function(){var t,n;return FA(this,function(e){return t={name:"InternalFailureException",$fault:"server",$metadata:PP(r),message:void 0},void 0!==(n=r.body).message&&null!==n.message&&(t.message=n.message),[2,t]})})},fP=function(r,e){return DA(void 0,void 0,void 0,function(){var t,n;return FA(this,function(e){return t={name:"LimitExceededException",$fault:"client",$metadata:PP(r),message:void 0,retryAfterSeconds:void 0},void 0!==r.headers["retry-after"]&&(t.retryAfterSeconds=r.headers["retry-after"]),void 0!==(n=r.body).message&&null!==n.message&&(t.message=n.message),[2,t]})})},hP=function(r,e){return DA(void 0,void 0,void 0,function(){var t,n;return FA(this,function(e){return t={name:"LoopDetectedException",$fault:"server",$metadata:PP(r),Message:void 0},void 0!==(n=r.body).Message&&null!==n.Message&&(t.Message=n.Message),[2,t]})})},gP=function(r,e){return DA(void 0,void 0,void 0,function(){var t,n;return FA(this,function(e){return t={name:"NotAcceptableException",$fault:"client",$metadata:PP(r),message:void 0},void 0!==(n=r.body).message&&null!==n.message&&(t.message=n.message),[2,t]})})},mP=function(r,e){return DA(void 0,void 0,void 0,function(){var t,n;return FA(this,function(e){return t={name:"NotFoundException",$fault:"client",$metadata:PP(r),message:void 0},void 0!==(n=r.body).message&&null!==n.message&&(t.message=n.message),[2,t]})})},yP=function(r,e){return DA(void 0,void 0,void 0,function(){var t,n;return FA(this,function(e){return t={name:"RequestTimeoutException",$fault:"client",$metadata:PP(r),message:void 0},void 0!==(n=r.body).message&&null!==n.message&&(t.message=n.message),[2,t]})})},vP=function(r,e){return DA(void 0,void 0,void 0,function(){var t,n;return FA(this,function(e){return t={name:"UnsupportedMediaTypeException",$fault:"client",$metadata:PP(r),message:void 0},void 0!==(n=r.body).message&&null!==n.message&&(t.message=n.message),[2,t]})})},bP=function(e,t){return Object.entries(e).reduce(function(e,t){var n=jA(t,2),t=n[0],n=n[1];return UA(UA({},e),((e={})[t]=n,e))},{})},SP=function(e,t){return{score:void 0!==e.score&&null!==e.score?e.score:void 0}},wP=function(e,t){return(e||[]).map(function(e){return _P(e)})},CP=function(e,t){return(e||[]).map(function(e){return{text:void 0!==(e=e).text&&null!==e.text?e.text:void 0,value:void 0!==e.value&&null!==e.value?e.value:void 0}})},_P=function(e,t){return{intentName:void 0!==e.intentName&&null!==e.intentName?e.intentName:void 0,nluIntentConfidence:void 0!==e.nluIntentConfidence&&null!==e.nluIntentConfidence?SP(e.nluIntentConfidence):void 0,slots:void 0!==e.slots&&null!==e.slots?AP(e.slots):void 0}},EP=function(e,t){return{contentType:void 0!==e.contentType&&null!==e.contentType?e.contentType:void 0,genericAttachments:void 0!==e.genericAttachments&&null!==e.genericAttachments?rP(e.genericAttachments):void 0,version:void 0!==e.version&&null!==e.version?e.version:void 0}},IP=function(e,t){return{sentimentLabel:void 0!==e.sentimentLabel&&null!==e.sentimentLabel?e.sentimentLabel:void 0,sentimentScore:void 0!==e.sentimentScore&&null!==e.sentimentScore?e.sentimentScore:void 0}},AP=function(e,t){return Object.entries(e).reduce(function(e,t){var n=jA(t,2),t=n[0],n=n[1];return UA(UA({},e),((e={})[t]=n,e))},{})},PP=function(e){return{httpStatusCode:e.statusCode,httpHeaders:e.headers,requestId:e.headers["x-amzn-requestid"]}},OP=function(e){return!(void 0===e||""===e||Object.getOwnPropertyNames(e).includes("length")&&0==e.length||Object.getOwnPropertyNames(e).includes("size")&&0==e.size)},TP=function(e,t){return iP(e,t).then(function(e){return e.length?JSON.parse(e):{}})},kP=function(e,t){function n(e){return e=0<=(e=0<=e.indexOf(":")?e.split(":")[0]:e).indexOf("#")?e.split("#")[1]:e}var r,i,o=(r=e.headers,i="x-amzn-errortype",Object.keys(r).find(function(e){return e.toLowerCase()===i.toLowerCase()}));return void 0!==o?n(e.headers[o]):void 0!==t.code?n(t.code):void 0!==t.__type?n(t.__type):""},xP=(RA(NP,oP=pn),NP.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Md(t,this.serialize,this.deserialize));var r=e.concat(this.middlewareStack),i=t.logger,o="LexRuntimeServiceClient",s="PostContentCommand",e={logger:i,clientName:o,commandName:s,inputFilterSensitiveLog:qA.filterSensitiveLog,outputFilterSensitiveLog:KA.filterSensitiveLog};"function"==typeof i.info&&i.info({clientName:o,commandName:s});var a=t.requestHandler;return r.resolve(function(e){return a.handle(e.request,n||{})},e)},NP.prototype.serialize=function(e,t){return a=e,u=t,DA(void 0,void 0,void 0,function(){var t,n,r,i,o,s;return FA(this,function(e){switch(e.label){case 0:if(t=UA(UA(UA(UA({"Content-Type":"application/octet-stream","x-amz-content-sha256":"UNSIGNED-PAYLOAD"},OP(a.requestAttributes)&&{"x-amz-lex-request-attributes":Oc.fromObject(a.requestAttributes)}),OP(a.sessionAttributes)&&{"x-amz-lex-session-attributes":Oc.fromObject(a.sessionAttributes)}),OP(a.contentType)&&{"Content-Type":a.contentType}),OP(a.accept)&&{Accept:a.accept}),n="/bot/{botName}/alias/{botAlias}/user/{userId}/content",void 0===a.botAlias)throw new Error("No value provided for input HTTP label: botAlias.");if((o=a.botAlias).length<=0)throw new Error("Empty value provided for input HTTP label: botAlias.");if(n=n.replace("{botAlias}",Ec(o)),void 0===a.botName)throw new Error("No value provided for input HTTP label: botName.");if((o=a.botName).length<=0)throw new Error("Empty value provided for input HTTP label: botName.");if(n=n.replace("{botName}",Ec(o)),void 0===a.userId)throw new Error("No value provided for input HTTP label: userId.");if((o=a.userId).length<=0)throw new Error("Empty value provided for input HTTP label: userId.");return n=n.replace("{userId}",Ec(o)),void 0!==a.inputStream&&(r=a.inputStream),[4,u.endpoint()];case 1:return s=e.sent(),i=s.hostname,o=s.protocol,o=void 0===o?"https":o,s=s.port,[2,new Xs({protocol:o,hostname:i,port:s,method:"POST",headers:t,path:n,body:r})]}})});var a,u},NP.prototype.deserialize=function(e,t){return r=e,i=t,DA(void 0,void 0,void 0,function(){var t,n;return FA(this,function(e){return 200!==r.statusCode&&300<=r.statusCode?[2,sP(r,i)]:(t={$metadata:PP(r),alternativeIntents:void 0,audioStream:void 0,botVersion:void 0,contentType:void 0,dialogState:void 0,inputTranscript:void 0,intentName:void 0,message:void 0,messageFormat:void 0,nluIntentConfidence:void 0,sentimentResponse:void 0,sessionAttributes:void 0,sessionId:void 0,slotToElicit:void 0,slots:void 0},void 0!==r.headers["x-amz-lex-alternative-intents"]&&(t.alternativeIntents=new Oc(r.headers["x-amz-lex-alternative-intents"])),void 0!==r.headers["x-amz-lex-message-format"]&&(t.messageFormat=r.headers["x-amz-lex-message-format"]),void 0!==r.headers["content-type"]&&(t.contentType=r.headers["content-type"]),void 0!==r.headers["x-amz-lex-message"]&&(t.message=r.headers["x-amz-lex-message"]),void 0!==r.headers["x-amz-lex-bot-version"]&&(t.botVersion=r.headers["x-amz-lex-bot-version"]),void 0!==r.headers["x-amz-lex-sentiment"]&&(t.sentimentResponse=r.headers["x-amz-lex-sentiment"]),void 0!==r.headers["x-amz-lex-slots"]&&(t.slots=new Oc(r.headers["x-amz-lex-slots"])),void 0!==r.headers["x-amz-lex-input-transcript"]&&(t.inputTranscript=r.headers["x-amz-lex-input-transcript"]),void 0!==r.headers["x-amz-lex-slot-to-elicit"]&&(t.slotToElicit=r.headers["x-amz-lex-slot-to-elicit"]),void 0!==r.headers["x-amz-lex-session-attributes"]&&(t.sessionAttributes=new Oc(r.headers["x-amz-lex-session-attributes"])),void 0!==r.headers["x-amz-lex-session-id"]&&(t.sessionId=r.headers["x-amz-lex-session-id"]),void 0!==r.headers["x-amz-lex-dialog-state"]&&(t.dialogState=r.headers["x-amz-lex-dialog-state"]),void 0!==r.headers["x-amz-lex-intent-name"]&&(t.intentName=r.headers["x-amz-lex-intent-name"]),void 0!==r.headers["x-amz-lex-nlu-intent-confidence"]&&(t.nluIntentConfidence=new Oc(r.headers["x-amz-lex-nlu-intent-confidence"])),n=r.body,t.audioStream=n,[2,Promise.resolve(t)])})});var r,i},NP);function NP(e){var t=oP.call(this)||this;return t.input=e,t}var LP,MP=(RA(RP,LP=pn),RP.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Md(t,this.serialize,this.deserialize));var r=e.concat(this.middlewareStack),i=t.logger,o="LexRuntimeServiceClient",s="PostTextCommand",e={logger:i,clientName:o,commandName:s,inputFilterSensitiveLog:HA.filterSensitiveLog,outputFilterSensitiveLog:WA.filterSensitiveLog};"function"==typeof i.info&&i.info({clientName:o,commandName:s});var a=t.requestHandler;return r.resolve(function(e){return a.handle(e.request,n||{})},e)},RP.prototype.serialize=function(e,t){return a=e,u=t,DA(void 0,void 0,void 0,function(){var t,n,r,i,o,s;return FA(this,function(e){switch(e.label){case 0:if(t={"Content-Type":"application/json"},n="/bot/{botName}/alias/{botAlias}/user/{userId}/text",void 0===a.userId)throw new Error("No value provided for input HTTP label: userId.");if((o=a.userId).length<=0)throw new Error("Empty value provided for input HTTP label: userId.");if(n=n.replace("{userId}",Ec(o)),void 0===a.botAlias)throw new Error("No value provided for input HTTP label: botAlias.");if((o=a.botAlias).length<=0)throw new Error("Empty value provided for input HTTP label: botAlias.");if(n=n.replace("{botAlias}",Ec(o)),void 0===a.botName)throw new Error("No value provided for input HTTP label: botName.");if((o=a.botName).length<=0)throw new Error("Empty value provided for input HTTP label: botName.");return n=n.replace("{botName}",Ec(o)),r=JSON.stringify(UA(UA(UA({},void 0!==a.inputText&&{inputText:a.inputText}),void 0!==a.requestAttributes&&{requestAttributes:bP(a.requestAttributes)}),void 0!==a.sessionAttributes&&{sessionAttributes:bP(a.sessionAttributes)})),[4,u.endpoint()];case 1:return s=e.sent(),i=s.hostname,o=s.protocol,o=void 0===o?"https":o,s=s.port,[2,new Xs({protocol:o,hostname:i,port:s,method:"POST",headers:t,path:n,body:r})]}})});var a,u},RP.prototype.deserialize=function(e,t){return r=e,i=t,DA(void 0,void 0,void 0,function(){var t,n;return FA(this,function(e){switch(e.label){case 0:return 200!==r.statusCode&&300<=r.statusCode?[2,aP(r,i)]:(t={$metadata:PP(r),alternativeIntents:void 0,botVersion:void 0,dialogState:void 0,intentName:void 0,message:void 0,messageFormat:void 0,nluIntentConfidence:void 0,responseCard:void 0,sentimentResponse:void 0,sessionAttributes:void 0,sessionId:void 0,slotToElicit:void 0,slots:void 0},[4,TP(r.body,i)]);case 1:return void 0!==(n=e.sent()).alternativeIntents&&null!==n.alternativeIntents&&(t.alternativeIntents=wP(n.alternativeIntents)),void 0!==n.botVersion&&null!==n.botVersion&&(t.botVersion=n.botVersion),void 0!==n.dialogState&&null!==n.dialogState&&(t.dialogState=n.dialogState),void 0!==n.intentName&&null!==n.intentName&&(t.intentName=n.intentName),void 0!==n.message&&null!==n.message&&(t.message=n.message),void 0!==n.messageFormat&&null!==n.messageFormat&&(t.messageFormat=n.messageFormat),void 0!==n.nluIntentConfidence&&null!==n.nluIntentConfidence&&(t.nluIntentConfidence=SP(n.nluIntentConfidence)),void 0!==n.responseCard&&null!==n.responseCard&&(t.responseCard=EP(n.responseCard)),void 0!==n.sentimentResponse&&null!==n.sentimentResponse&&(t.sentimentResponse=IP(n.sentimentResponse)),void 0!==n.sessionAttributes&&null!==n.sessionAttributes&&(t.sessionAttributes=AP(n.sessionAttributes)),void 0!==n.sessionId&&null!==n.sessionId&&(t.sessionId=n.sessionId),void 0!==n.slotToElicit&&null!==n.slotToElicit&&(t.slotToElicit=n.slotToElicit),void 0!==n.slots&&null!==n.slots&&(t.slots=AP(n.slots)),[2,Promise.resolve(t)]}})});var r,i},RP);function RP(e){var t=LP.call(this)||this;return t.input=e,t}var UP,DP,FP=(UP=function(e,t){return(UP=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}UP(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),jP=function(){return(jP=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},BP=function(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{o(u.next(e))}catch(e){t(e)}}function i(e){try{o(u.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,i)}o((u=u.apply(e,s||[])).next())})},VP=function(n,r){var i,o,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,o&&(s=2&t[0]?o.return:t[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,t[1])).done)return s;switch(o=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,o=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],o=0}finally{i=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},zP=new E.ConsoleLogger("AWSLexProvider"),qP=(FP(KP,DP=AI),KP.prototype.getProviderName=function(){return"AWSLexProvider"},KP.prototype.reportBotStatus=function(e,t){var n=this;zP.debug("postContent state",e.dialogState),"ReadyForFulfillment"!==e.dialogState&&"Fulfilled"!==e.dialogState||("function"==typeof this._botsCompleteCallback[t]&&setTimeout(function(){return n._botsCompleteCallback[t](null,{slots:e.slots})},0),this._config&&"function"==typeof this._config[t].onComplete&&setTimeout(function(){return n._config[t].onComplete(null,{slots:e.slots})},0)),"Failed"===e.dialogState&&("function"==typeof this._botsCompleteCallback[t]&&setTimeout(function(){return n._botsCompleteCallback[t]("Bot conversation failed")},0),this._config&&"function"==typeof this._config[t].onComplete&&setTimeout(function(){return n._config[t].onComplete("Bot conversation failed")},0))},KP.prototype.sendMessage=function(a,u){return BP(this,void 0,void 0,function(){var t,n,r,i,o,s;return VP(this,function(e){switch(e.label){case 0:return this._config[a]?[4,E.Credentials.get()]:[2,Promise.reject("Bot "+a+" does not exist")];case 1:if(!(t=e.sent()))return[2,Promise.reject("No credentials")];if(this.lexRuntimeServiceClient=new tP({region:this._config[a].region,credentials:t,customUserAgent:E.getAmplifyUserAgent()}),"string"!=typeof u)return[3,6];i={botAlias:this._config[a].alias,botName:a,inputText:u,userId:t.identityId},zP.debug("postText to lex",u),e.label=2;case 2:return e.trys.push([2,4,,5]),n=new MP(i),[4,this.lexRuntimeServiceClient.send(n)];case 3:return o=e.sent(),this.reportBotStatus(o,a),[2,o];case 4:return r=e.sent(),[2,Promise.reject(r)];case 5:return[3,11];case 6:n=u.content,r=u.options.messageType,i="voice"===r?{botAlias:this._config[a].alias,botName:a,contentType:"audio/x-l16; sample-rate=16000",inputStream:n,userId:t.identityId,accept:"audio/mpeg"}:{botAlias:this._config[a].alias,botName:a,contentType:"text/plain; charset=utf-8",inputStream:n,userId:t.identityId,accept:"audio/mpeg"},zP.debug("postContent to lex",u),e.label=7;case 7:return e.trys.push([7,10,,11]),i=new xP(i),[4,this.lexRuntimeServiceClient.send(i)];case 8:return[4,function(e){if(e instanceof Blob||e instanceof ReadableStream)return new Response(e).arrayBuffer().then(function(e){return new Uint8Array(e)});throw new Error("Readable is not supported.")}((o=e.sent()).audioStream)];case 9:return s=e.sent(),this.reportBotStatus(o,a),[2,jP(jP({},o),{audioStream:s})];case 10:return s=e.sent(),[2,Promise.reject(s)];case 11:return[2]}})})},KP.prototype.onComplete=function(e,t){if(!this._config[e])throw new ErrorEvent("Bot "+e+" does not exist");this._botsCompleteCallback[e]=t},KP);function KP(e){void 0===e&&(e={});e=DP.call(this,e)||this;return e._botsCompleteCallback={},e}var HP=function(){return(HP=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},GP=function(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{o(u.next(e))}catch(e){t(e)}}function i(e){try{o(u.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,i)}o((u=u.apply(e,s||[])).next())})},WP=function(n,r){var i,o,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,o&&(s=2&t[0]?o.return:t[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,t[1])).done)return s;switch(o=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,o=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],o=0}finally{i=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},$P=new E.ConsoleLogger("Interactions");function YP(e){this._options=e,$P.debug("Interactions Options",this._options),this._pluggables={}}var JP=new(YP.prototype.getModuleName=function(){return"Interactions"},YP.prototype.configure=function(e){var t=this,e=e?e.Interactions||e:{};$P.debug("configure Interactions",{opt:e}),this._options=HP(HP({bots:{}},e),e.Interactions);var e=this._options.aws_bots_config,n=this._options.bots;return!Object.keys(n).length&&e&&Array.isArray(e)&&e.forEach(function(e){t._options.bots[e.name]=e}),!this._pluggables.AWSLexProvider&&n&&Object.keys(n).map(function(e){return n[e]}).find(function(e){return!e.providerName||"AWSLexProvider"===e.providerName})&&(this._pluggables.AWSLexProvider=new qP),Object.keys(this._pluggables).map(function(e){t._pluggables[e].configure(t._options.bots)}),this._options},YP.prototype.addPluggable=function(e){if(e&&"Interactions"===e.getCategory()){if(this._pluggables[e.getProviderName()])throw new Error("Bot "+e.getProviderName()+" already plugged");e.configure(this._options.bots),this._pluggables[e.getProviderName()]=e}},YP.prototype.send=function(n,r){return GP(this,void 0,void 0,function(){var t;return WP(this,function(e){switch(e.label){case 0:if(!this._options.bots||!this._options.bots[n])throw new Error("Bot "+n+" does not exist");if(t=this._options.bots[n].providerName||"AWSLexProvider",!this._pluggables[t])throw new Error("Bot "+t+" does not have valid pluggin did you try addPluggable first?");return[4,this._pluggables[t].sendMessage(n,r)];case 1:return[2,e.sent()]}})})},YP.prototype.onComplete=function(e,t){if(!this._options.bots||!this._options.bots[e])throw new Error("Bot "+e+" does not exist");var n=this._options.bots[e].providerName||"AWSLexProvider";if(!this._pluggables[n])throw new Error("Bot "+n+" does not have valid pluggin did you try addPluggable first?");this._pluggables[n].onComplete(e,t)},YP)(null);E.Amplify.register(JP);var ZP=function(){return(ZP=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},QP=new E.ConsoleLogger("AbstractXRProvider"),XP=(eO.prototype.configure=function(e){return void 0===e&&(e={}),this._config=ZP(ZP({},e),this._config),QP.debug("configure "+this.getProviderName(),this._config),this.options},eO.prototype.getCategory=function(){return"XR"},Object.defineProperty(eO.prototype,"options",{get:function(){return ZP({},this._config)},enumerable:!0,configurable:!0}),eO);function eO(e){void 0===e&&(e={}),this._config=e}var tO,nO,rO=(tO=function(e,t){return(tO=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}tO(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),iO=(nO=Error,rO(oO,nO),oO);function oO(){return null!==nO&&nO.apply(this,arguments)||this}var sO,aO=(rO(uO,sO=iO),uO);function uO(){return null!==sO&&sO.apply(this,arguments)||this}var cO,lO=(rO(pO,cO=iO),pO);function pO(){return null!==cO&&cO.apply(this,arguments)||this}var dO,fO=(rO(hO,dO=iO),hO);function hO(){return null!==dO&&dO.apply(this,arguments)||this}var gO,mO=(rO(yO,gO=iO),yO);function yO(){return null!==gO&&gO.apply(this,arguments)||this}var vO,bO=(rO(SO,vO=iO),SO);function SO(){return null!==vO&&vO.apply(this,arguments)||this}var wO,CO=(rO(_O,wO=iO),_O);function _O(){return null!==wO&&wO.apply(this,arguments)||this}var EO,IO,AO=(EO=function(e,t){return(EO=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}EO(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),PO=function(){return(PO=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},OO=function(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{o(u.next(e))}catch(e){t(e)}}function i(e){try{o(u.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,i)}o((u=u.apply(e,s||[])).next())})},TO=function(n,r){var i,o,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,o&&(s=2&t[0]?o.return:t[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,t[1])).done)return s;switch(o=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,o=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],o=0}finally{i=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},kO=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return{value:(e=e&&r>=e.length?void 0:e)&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},xO=new E.ConsoleLogger("SumerianProvider"),NO=(AO(LO,IO=XP),LO.prototype.getProviderName=function(){return"SumerianProvider"},LO.prototype.loadScript=function(r){return OO(this,void 0,void 0,function(){return TO(this,function(e){return[2,new Promise(function(t,n){var e=document.createElement("script");e.src=r,e.addEventListener("load",function(e){t()}),e.addEventListener("error",function(e){n(new Error("Failed to load script: "+r))}),document.head.appendChild(e)})]})})},LO.prototype.loadScene=function(w,C,_){return OO(this,void 0,void 0,function(){var t,n,r,i,o,s,a,u,c,l,p,d,f,h,g,m,y,v,b,S;return TO(this,function(e){switch(e.label){case 0:if(!w)throw a="No scene name passed into loadScene",xO.error(a),new bO(a);if(!C)throw a="No dom element id passed into loadScene",xO.error(a),new mO(a);if(!(t=document.getElementById(C)))throw a="DOM element id, "+C+" not found",xO.error(a),new mO(a);if(!(n=this.getScene(w)).sceneConfig)throw a="No scene config configured for scene: "+w,xO.error(a),new bO(a);if(r=n.sceneConfig.url,i=n.sceneConfig.sceneId,n.sceneConfig.hasOwnProperty("region"))u=n.sceneConfig.region;else{if(!this.options.hasOwnProperty("region"))throw a="No region configured for scene: "+w,xO.error(a),new bO(a);u=this.options.region}h={region:u,customUserAgent:E.Constants.userAgent+"-SumerianScene"},o={headers:{"X-Amz-User-Agent":E.Constants.userAgent}},s=r,e.label=1;case 1:return e.trys.push([1,3,,4]),[4,E.Credentials.get()];case 2:return a=e.sent(),h.credentials=a,a={secret_key:a.secretAccessKey,access_key:a.accessKeyId,session_token:a.sessionToken},u={region:u,service:"sumerian"},u=E.Signer.sign({method:"GET",url:r},a,u),o.headers=PO(PO({},o.headers),u.headers),s=u.url,[3,4];case 3:return e.sent(),xO.debug("No credentials available, the request will be unsigned"),[3,4];case 4:return[4,fetch(s,o)];case 5:return[4,(c=e.sent()).json()];case 6:if(l=e.sent(),403===c.status)throw l.message?(xO.error("Failure to authenticate user: "+l.message),new bO("Failure to authenticate user: "+l.message)):(xO.error("Failure to authenticate user"),new bO("Failure to authenticate user"));return d=l.bundleData[i],[4,fetch(d.url,{headers:d.headers})];case 7:return[4,e.sent().json()];case 8:p=e.sent(),e.label=9;case 9:return e.trys.push([9,11,,12]),[4,this.loadScript(p[i].bootstrapperUrl)];case 10:return e.sent(),[3,12];case 11:throw f=e.sent(),xO.error(f),new bO(f);case 12:return d=_.progressCallback||void 0,f=n.publishParamOverrides||void 0,h={element:t,sceneId:i,sceneBundle:p,apiResponse:l,progressCallback:d,publishParamOverrides:f,awsSDKConfigOverride:h},[4,window.SumerianBootstrapper.loadScene(h)];case 13:g=e.sent(),n.sceneController=g,n.isLoaded=!0;try{for(m=kO(g.sceneLoadWarnings),y=m.next();!y.done;y=m.next())v=y.value,xO.warn("loadScene warning: "+v)}catch(e){b={error:e}}finally{try{y&&!y.done&&(S=m.return)&&S.call(m)}finally{if(b)throw b.error}}return[2]}})})},LO.prototype.isSceneLoaded=function(e){return this.getScene(e).isLoaded||!1},LO.prototype.getScene=function(e){if(!this.options.scenes){var t="No scenes were defined in the configuration";throw xO.error(t),new aO(t)}if(!e){t="No scene name was passed";throw xO.error(t),new lO(t)}if(this.options.scenes[e])return this.options.scenes[e];t="Scene '"+e+"' is not configured";throw xO.error(t),new lO(t)},LO.prototype.getSceneController=function(e){if(!this.options.scenes){var t="No scenes were defined in the configuration";throw xO.error(t),new aO(t)}var n=this.options.scenes[e];if(!n){t="Scene '"+e+"' is not configured";throw xO.error(t),new lO(t)}n=n.sceneController;if(n)return n;t="Scene controller for '"+e+"' has not been loaded";throw xO.error(t),new fO(t)},LO.prototype.isVRCapable=function(e){return this.getSceneController(e).vrCapable},LO.prototype.isVRPresentationActive=function(e){return this.getSceneController(e).vrPresentationActive},LO.prototype.start=function(e){this.getSceneController(e).start()},LO.prototype.enterVR=function(e){this.getSceneController(e).enterVR()},LO.prototype.exitVR=function(e){this.getSceneController(e).exitVR()},LO.prototype.isMuted=function(e){return this.getSceneController(e).muted},LO.prototype.setMuted=function(e,t){this.getSceneController(e).muted=t},LO.prototype.onSceneEvent=function(e,t,n){this.getSceneController(e).on(t,n)},LO.prototype.enableAudio=function(e){this.getSceneController(e).enableAudio()},LO);function LO(e){return void 0===e&&(e={}),IO.call(this,e)||this}var MO=function(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{o(u.next(e))}catch(e){t(e)}}function i(e){try{o(u.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,i)}o((u=u.apply(e,s||[])).next())})},RO=function(n,r){var i,o,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,o&&(s=2&t[0]?o.return:t[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,t[1])).done)return s;switch(o=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,o=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],o=0}finally{i=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},UO=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},DO=new E.ConsoleLogger("XR");function FO(e){this._options=e,DO.debug("XR Options",this._options),this._defaultProvider="SumerianProvider",this._pluggables={},this.addPluggable(new NO)}var jO=new(FO.prototype.configure=function(e){var n=this,r=e?e.XR||e:{};return DO.debug("configure XR",{opt:r}),this._options=Object.assign({},this._options,r),Object.entries(this._pluggables).map(function(e){var t=UO(e,2),e=t[0],t=t[1];e!==n._defaultProvider||r[n._defaultProvider]?t.configure(n._options[e]):t.configure(n._options)}),this._options},FO.prototype.addPluggable=function(t){return MO(this,void 0,void 0,function(){return RO(this,function(e){return t&&"XR"===t.getCategory()?(this._pluggables[t.getProviderName()]=t,[2,t.configure(this._options)]):[2]})})},FO.prototype.loadScene=function(t,n,r,i){return void 0===r&&(r={}),void 0===i&&(i=this._defaultProvider),MO(this,void 0,void 0,function(){return RO(this,function(e){switch(e.label){case 0:if(!this._pluggables[i])throw new CO("Provider '"+i+"' not configured");return[4,this._pluggables[i].loadScene(t,n,r)];case 1:return[2,e.sent()]}})})},FO.prototype.isSceneLoaded=function(e,t){if(void 0===t&&(t=this._defaultProvider),!this._pluggables[t])throw new CO("Provider '"+t+"' not configured");return this._pluggables[t].isSceneLoaded(e)},FO.prototype.getSceneController=function(e,t){if(void 0===t&&(t=this._defaultProvider),!this._pluggables[t])throw new CO("Provider '"+t+"' not configured");return this._pluggables[t].getSceneController(e)},FO.prototype.isVRCapable=function(e,t){if(void 0===t&&(t=this._defaultProvider),!this._pluggables[t])throw new CO("Provider '"+t+"' not configured");return this._pluggables[t].isVRCapable(e)},FO.prototype.isVRPresentationActive=function(e,t){if(void 0===t&&(t=this._defaultProvider),!this._pluggables[t])throw new CO("Provider '"+t+"' not configured");return this._pluggables[t].isVRPresentationActive(e)},FO.prototype.start=function(e,t){if(void 0===t&&(t=this._defaultProvider),!this._pluggables[t])throw new CO("Provider '"+t+"' not configured");return this._pluggables[t].start(e)},FO.prototype.enterVR=function(e,t){if(void 0===t&&(t=this._defaultProvider),!this._pluggables[t])throw new CO("Provider '"+t+"' not configured");return this._pluggables[t].enterVR(e)},FO.prototype.exitVR=function(e,t){if(void 0===t&&(t=this._defaultProvider),!this._pluggables[t])throw new CO("Provider '"+t+"' not configured");return this._pluggables[t].exitVR(e)},FO.prototype.isMuted=function(e,t){if(void 0===t&&(t=this._defaultProvider),!this._pluggables[t])throw new CO("Provider '"+t+"' not configured");return this._pluggables[t].isMuted(e)},FO.prototype.setMuted=function(e,t,n){if(void 0===n&&(n=this._defaultProvider),!this._pluggables[n])throw new CO("Provider '"+n+"' not configured");return this._pluggables[n].setMuted(e,t)},FO.prototype.onSceneEvent=function(e,t,n,r){if(void 0===r&&(r=this._defaultProvider),!this._pluggables[r])throw new CO("Provider '"+r+"' not configured");return this._pluggables[r].onSceneEvent(e,t,n)},FO.prototype.enableAudio=function(e,t){if(void 0===t&&(t=this._defaultProvider),!this._pluggables[t])throw new CO("Provider '"+t+"' not configured");return this._pluggables[t].enableAudio(e)},FO)(null);E.Amplify.register(jO);var BO=(VO.prototype.auth=function(){return this._auth||tm},VO.prototype.analytics=function(){return this._analytics||gh},VO.prototype.storage=function(){return this._storage||U_},VO.prototype.api=function(){return this._api||kA},VO.prototype.interactions=function(){return this._interactions||JP},VO.prototype.cache=function(){return this._cache},VO.prototype.pubsub=function(){return this._pubsub||mA},VO.prototype.logger=function(e,t){return new this._logger(e,t)},VO.prototype.xr=function(){return this._xr||jO},VO.prototype.i18n=function(){return this._i18n},VO.prototype.authState=function(){return this._authState},VO.prototype.setAuthState=function(e){this._authState.next(e)},VO.decorators=[{type:f.Injectable}],VO.ctorParameters=function(){return[{type:void 0,decorators:[{type:f.Inject,args:["modules"]},{type:f.Optional}]}]},VO);function VO(e){void 0===e&&(e={}),this.modules=e,this._authState=new ve,this.authStateChange$=this._authState.asObservable();e=e||U;Co(this._authState,e.Auth),this._auth=e.Auth,this._analytics=e.Analytics,this._storage=e.Storage,this._api=e.API,this._cache=e.Cache,this._pubsub=e.PubSub,this._interactions=e.Interactions,this._xr=e.XR,this._i18n=E.I18n,this._logger=E.Logger}var zO=(qO.prototype.ngOnInit=function(){var t=this;if(!this.amplifyService.auth())throw new Error("Auth module not registered on AmplifyService provider");this.amplifyService.auth().currentAuthenticatedUser().then(function(e){"loading"===t.authState.state&&e&&t.amplifyService.setAuthState({state:"signedIn",user:e})}).catch(function(e){"loading"===t.authState.state&&t.amplifyService.setAuthState({state:"signIn",user:null})})},Object.defineProperty(qO.prototype,"data",{set:function(e){e.signUpConfig&&(this._signUpConfig=e.signUpConfig),e.hide&&(this.hide=e.hide),this._usernameAttributes=e.usernameAttributes||this._usernameAttributes||"username"},enumerable:!0,configurable:!0}),Object.defineProperty(qO.prototype,"signUpConfig",{set:function(e){this._signUpConfig=e},enumerable:!0,configurable:!0}),Object.defineProperty(qO.prototype,"usernameAttributes",{set:function(e){this._usernameAttributes=e||"username"},enumerable:!0,configurable:!0}),qO.prototype.subscribe=function(){var t=this;this.amplifyService.authStateChange$.subscribe(function(e){t.authState=e},function(){t.authState={state:"signIn",user:null}})},qO.prototype.shouldHide=function(t){return 0<this.hide.filter(function(e){return e===t}).length},qO.decorators=[{type:f.Component,args:[{selector:"amplify-authenticator-core",template:'\n  <div class="amplify-authenticator">\n    <amplify-auth-sign-in-core\n      *ngIf="!shouldHide(\'SignIn\')"\n      [authState]="authState"\n      [usernameAttributes]="_usernameAttributes"\n      [hide]="hide"\n    ></amplify-auth-sign-in-core>\n\n    <amplify-auth-sign-up-core\n      *ngIf="!shouldHide(\'SignUp\')"\n      [authState]="authState"\n      [signUpConfig]="_signUpConfig"\n      [usernameAttributes]="_usernameAttributes"\n      [hide]="hide"\n    ></amplify-auth-sign-up-core>\n\n    <amplify-auth-confirm-sign-up-core\n      *ngIf="!shouldHide(\'ConfirmSignUp\')"\n      [authState]="authState"\n      [usernameAttributes]="_usernameAttributes"\n      [hide]="hide"\n    ></amplify-auth-confirm-sign-up-core>\n\n    <amplify-auth-confirm-sign-in-core\n      *ngIf="!shouldHide(\'ConfirmSignIn\')"\n      [authState]="authState"\n      [hide]="hide"\n    ></amplify-auth-confirm-sign-in-core>\n\n    <amplify-auth-forgot-password-core\n      *ngIf="!shouldHide(\'ForgotPassword\')"\n      [authState]="authState"\n      [usernameAttributes]="_usernameAttributes"\n      [hide]="hide"\n    ></amplify-auth-forgot-password-core>\n\n    <amplify-auth-greetings-core\n    *ngIf="!shouldHide(\'Greetings\')"\n    [authState]="authState"\n    [usernameAttributes]="_usernameAttributes"\n    ></amplify-auth-greetings-core>\n\n     <amplify-auth-require-new-password-core\n      *ngIf="!shouldHide(\'RequireNewPassword\')"\n      [authState]="authState"\n      [hide]="hide"\n    ></amplify-auth-require-new-password-core>\n  </div>\n'}]}],qO.ctorParameters=function(){return[{type:BO}]},qO.propDecorators={hide:[{type:f.Input}],data:[{type:f.Input}],signUpConfig:[{type:f.Input}],usernameAttributes:[{type:f.Input}]},qO);function qO(e){this.amplifyService=e,this.authState={state:"loading",user:null},this._signUpConfig={},this._usernameAttributes="username",this.hide=[],this.subscribe()}var KO,HO,fn=(KO=function(e,t){return(KO=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}KO(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),GO=(fn(WO,HO=zO),WO.decorators=[{type:f.Component,args:[{selector:"amplify-authenticator-ionic",template:'\n<div class="amplify-authenticator amplify-authenticator-ionic ">\n\n<amplify-auth-sign-in-ionic\n  *ngIf="!shouldHide(\'SignIn\')"\n  [authState]="authState"\n  [usernameAttributes]="_usernameAttributes"\n  [hide]="hide"\n></amplify-auth-sign-in-ionic>\n\n<amplify-auth-sign-up-ionic\n  *ngIf="!shouldHide(\'SignUp\')"\n  [authState]="authState"\n  [signUpConfig]="_signUpConfig"\n  [usernameAttributes]="_usernameAttributes"\n  [hide]="hide"\n></amplify-auth-sign-up-ionic>\n\n<amplify-auth-confirm-sign-up-ionic\n  *ngIf="!shouldHide(\'ConfirmSignUp\')"\n  [authState]="authState"\n  [usernameAttributes]="_usernameAttributes"\n  [hide]="hide"\n></amplify-auth-confirm-sign-up-ionic>\n\n<amplify-auth-confirm-sign-in-ionic\n  *ngIf="!shouldHide(\'ConfirmSignIn\')"\n  [authState]="authState"\n  [hide]="hide"\n></amplify-auth-confirm-sign-in-ionic>\n\n<amplify-auth-forgot-password-ionic\n  *ngIf="!shouldHide(\'ForgotPassword\')"\n  [authState]="authState"\n  [usernameAttributes]="_usernameAttributes"\n  [hide]="hide"\n></amplify-auth-forgot-password-ionic>\n\n<amplify-auth-greetings-ionic\n  *ngIf="!shouldHide(\'Greetings\')"\n  [authState]="authState"\n  [usernameAttributes]="_usernameAttributes"\n></amplify-auth-greetings-ionic>\n\n<amplify-auth-require-new-password-ionic\n  *ngIf="!shouldHide(\'RequireNewPassword\')"\n  [authState]="authState"\n  [hide]="hide"\n></amplify-auth-require-new-password-ionic>\n</div>\n'}]}],WO.ctorParameters=function(){return[{type:BO}]},WO);function WO(e){var t=HO.call(this,e)||this;return t.amplifyService=e,t}$O.prototype.ngOnInit=function(){this.loadComponent()},$O.prototype.ngOnDestroy=function(){},$O.prototype.loadComponent=function(){var e=this.framework&&"ionic"===this.framework.toLowerCase()?new So(GO,{hide:this.hide,signUpConfig:this.signUpConfig,usernameAttributes:this.usernameAttributes}):new So(zO,{hide:this.hide,signUpConfig:this.signUpConfig,usernameAttributes:this.usernameAttributes}),t=this.componentFactoryResolver.resolveComponentFactory(e.component),n=this.componentHost.viewContainerRef;n.clear(),n.createComponent(t).instance.data=e.data},$O.decorators=[{type:f.Component,args:[{selector:"amplify-authenticator",template:'\n\t\t<div class="amplify-component">\n\t\t\t<ng-template component-host></ng-template>\n\t\t</div>\n\t'}]}],$O.ctorParameters=function(){return[{type:f.ComponentFactoryResolver}]},$O.propDecorators={framework:[{type:f.Input}],hide:[{type:f.Input}],signUpConfig:[{type:f.Input}],usernameAttributes:[{type:f.Input}],componentHost:[{type:f.ViewChild,args:[dn]}]},at=$O;function $O(e){this.componentFactoryResolver=e,this.hide=[],this.usernameAttributes="username"}var YO="sumerian-scene-container",JO="sumerian-scene",ZO="sumerian-scene-loading",QO="sumerian-scene-loading-logo",XO="sumerian-scene-loading-scene-name",eT="sumerian-scene-loading-bar",tT="sumerian-scene-error-text",nT="sumerian-scene-bar",rT="sumerian-scene-actions",iT={section:"sign-in-section",headerSection:"sign-in-header-section",bodySection:"sign-in-body-section",footerSection:"sign-in-footer-section",usernameInput:"username-input",passwordInput:"sign-in-password-input",forgotPasswordLink:"sign-in-forgot-password-link",signInButton:"sign-in-sign-in-button",createAccountLink:"sign-in-create-account-link",signInError:"authenticator-error"},oT={section:"sign-up-section",headerSection:"sign-up-header-section",bodySection:"sign-up-body-section",nonPhoneNumberInput:"sign-up-non-phone-number-input",phoneNumberInput:"sign-up-phone-number-input",dialCodeSelect:"sign-up-dial-code-select",footerSection:"sign-up-footer-section",createAccountButton:"sign-up-create-account-button",signInLink:"sign-up-sign-in-link",signUpButton:"sign-up-sign-up-button",signInButton:"sign-up-sign-in-button",confirmButton:"sign-up-confirm-button"},sT={section:"require-new-password-section",headerSection:"require-new-password-header-section",footerSection:"require-new-password-footer-section",bodySection:"require-new-password-body-section",newPasswordInput:"require-new-password-new-password-input",backToSignInLink:"require-new-password-back-to-sign-in-link",submitButton:"require-new-password-submit-button"},aT={usernameInput:"username-input",emailInput:"email-input",phoneNumberInput:"phone-number-input",dialCodeSelect:"dial-code-select"},uT={signOutButton:"sign-out-button",signOutLink:"greeting-sign-out-link",navRight:"greetings-nav-right"},cT={section:"confirm-sign-up-section",headerSection:"confirm-sign-up-header-section",bodySection:"confirm-sign-up-body-section",usernameInput:"confirm-sign-up-username-input",confirmationCodeInput:"confirm-sign-up-confirmation-code-input",resendCodeLink:"confirm-sign-up-resend-code-link",confirmButton:"confirm-sign-up-confirm-button",backToSignInLink:"confirm-sign-up-back-to-sign-in-link"},lT={section:"confirm-sign-in-section",headerSection:"confirm-sign-in-header-section",bodySection:"confirm-sign-in-body-section",codeInput:"confirm-sign-in-code-input",confirmButton:"confirm-sign-in-confirm-button",backToSignInLink:"confirm-sign-in-back-to-sign-in-link"},pT={section:"forgot-password-section",headerSection:"forgot-password-header-section",bodySection:"forgot-password-body-section",submitButton:"forgot-password-submit-button",sendCodeButton:"forgot-password-send-code-button",resendCodeLink:"forgot-password-resend-code-link",backToSignInLink:"forgot-password-back-to-sign-in-link",usernameInput:"username-input",codeInput:"forgot-password-code-input",newPasswordInput:"forgot-password-new-password-input"},pn='\n<div class="amplify-container" *ngIf="_show">\n  <div class="amplify-form-container" data-test="'+lT.section+'">\n    <div class="amplify-form-body" data-test="'+lT.bodySection+'">\n    <div class="amplify-form-header" data-test="'+lT.headerSection+'">{{ this.amplifyService.i18n().get(\'Confirm Sign in\') }}</div>\n      <div class="amplify-form-row" *ngIf="!shouldHide(\'SignIn\')">\n        <label class="amplify-input-label" for="code">\n          {{ this.amplifyService.i18n().get(\'Confirmation Code *\') }}\n        </label>\n        <input #code\n          (change)="setCode(code.value)"\n          (keyup)="setCode(code.value)"\n          (keyup.enter)="onConfirm()"\n          class="amplify-form-input"\n          type="text"\n          placeholder="{{ this.amplifyService.i18n().get(\'Enter your Code\') }}"\n          data-test="'+lT.codeInput+'"\n        />\n      </div>\n      <div class="amplify-form-actions">\n        <div class="amplify-form-cell-left">\n          <div class="amplify-form-actions-left">\n            <a \n              class="amplify-form-link"\n              (click)="onSignIn()"\n              data-test="'+lT.backToSignInLink+'"\n              >\n                {{ this.amplifyService.i18n().get(\'Back to Sign in\') }}\n            </a>\n          </div>\n        </div>\n        <div class="amplify-form-cell-right">\n          <button\n            class="amplify-form-button"\n            data-test="'+lT.confirmButton+'"\n            (click)="onConfirm()"\n            >\n              {{ this.amplifyService.i18n().get(\'Confirm\') }}</button>\n        </div>\n      </div>\n      </div>\n  </div>\n  <div class="amplify-alert" *ngIf="errorMessage">\n    <div class="amplify-alert-body">\n      <span class="amplify-alert-icon">&#9888;</span>\n      <div class="amplify-alert-message">{{ this.amplifyService.i18n().get(errorMessage) }}</div>\n      <a class="amplify-alert-close" (click)="onAlertClose()">&times;</a>\n    </div>\n  </div>\n</div>\n',dT=(Object.defineProperty(fT.prototype,"data",{set:function(e){this.hide=e.hide||this.hide,this._authState=e.authState,this._show="confirmSignIn"===e.authState.state},enumerable:!0,configurable:!0}),Object.defineProperty(fT.prototype,"authState",{set:function(e){this._authState=e,this._show="confirmSignIn"===e.state},enumerable:!0,configurable:!0}),fT.prototype.ngOnInit=function(){if(!this.amplifyService.auth())throw new Error("Auth module not registered on AmplifyService provider")},fT.prototype.shouldHide=function(t){return 0<this.hide.filter(function(e){return e===t}).length},fT.prototype.setCode=function(e){this.code=e},fT.prototype.onConfirm=function(){var t=this,e=this._authState.user,n=e.challengeName,n="SOFTWARE_TOKEN_MFA"===n?n:null;this.amplifyService.auth().confirmSignIn(e,this.code,n).then(function(){t.onAlertClose(),t.amplifyService.setAuthState({state:"signedIn",user:e})}).catch(function(e){return t._setError(e)})},fT.prototype.onSignIn=function(){this.onAlertClose(),this.amplifyService.setAuthState({state:"signIn",user:null})},fT.prototype.onAlertClose=function(){this._setError(null)},fT.prototype._setError=function(e){this.errorMessage=e?e.message||e:null},fT.decorators=[{type:f.Component,args:[{selector:"amplify-auth-confirm-sign-in-core",template:pn}]}],fT.ctorParameters=function(){return[{type:BO,decorators:[{type:f.Inject,args:[BO]}]}]},fT.propDecorators={data:[{type:f.Input}],authState:[{type:f.Input}],hide:[{type:f.Input}]},fT);function fT(e){this.amplifyService=e,this.hide=[],this.logger=this.amplifyService.logger("ConfiSignInComponent")}var hT,gT,FP=(hT=function(e,t){return(hT=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}hT(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),AI='\n<div class="amplify-form-container" *ngIf="_show" data-test="'+lT.section+'">\n  <div class="amplify-form-body" data-test="'+lT.bodySection+'">\n    <div\n      class="amplify-form-header amplify-form-header-ionic"\n      data-test="'+lT.headerSection+'"\n      >\n        {{ this.amplifyService.i18n().get(\'Confirm your sign in code\') }}\n    </div>\n    <ion-list>\n      <ion-item lines="none">\n        <ion-label class="amplify-input-label amplify-input-label-ionic" position="stacked">\n          {{ this.amplifyService.i18n().get(\'Code *\') }}\n        </ion-label>\n        <ion-input\n          #code\n          type="text"\n          class="amplify-form-input"\n          (input)="setCode(code.value)"\n          (keyup.enter)="onConfirm()"\n          data-test="'+lT.codeInput+'"\n        ></ion-input>\n      </ion-item>\n    </ion-list>\n\n    <div class="amplify-form-actions">\n      <div>\n        <ion-button expand="block" color="primary"\n          (click)="onConfirm()"\n          data-test="'+lT.confirmButton+'"\n        >{{ this.amplifyService.i18n().get(\'Confirm Code\') }}</ion-button>\n      </div>\n    </div>\n  </div>\n\n  <div class="amplify-alert" *ngIf="errorMessage">\n    <div class="amplify-alert-body">\n      <span class="amplify-alert-icon">&#9888;</span>\n      <div class="amplify-alert-message">{{ this.amplifyService.i18n().get(errorMessage) }}</div>\n      <a class="amplify-alert-close" (click)="onAlertClose()">&times;</a>\n    </div>\n  </div>\n\n</div>\n',mT=(FP(yT,gT=dT),yT.decorators=[{type:f.Component,args:[{selector:"amplify-auth-confirm-sign-in-ionic",template:AI}]}],yT.ctorParameters=function(){return[{type:BO,decorators:[{type:f.Inject,args:[BO]}]}]},yT);function yT(e){var t=gT.call(this,e)||this;return t.amplifyService=e,t}vT.prototype.ngOnInit=function(){this.loadComponent()},vT.prototype.ngOnDestroy=function(){},vT.prototype.loadComponent=function(){var e=this.framework&&"ionic"===this.framework.toLowerCase()?new So(mT,{authState:this.authState,hide:this.hide}):new So(dT,{authState:this.authState,hide:this.hide}),t=this.componentFactoryResolver.resolveComponentFactory(e.component),n=this.componentHost.viewContainerRef;n.clear(),n.createComponent(t).instance.data=e.data},vT.decorators=[{type:f.Component,args:[{selector:"amplify-auth-confirm-sign-in",template:"\n\t\t<div>\n\t\t\t<ng-template component-host></ng-template>\n\t\t</div>\n\t"}]}],vT.ctorParameters=function(){return[{type:f.ComponentFactoryResolver}]},vT.propDecorators={framework:[{type:f.Input}],authState:[{type:f.Input}],hide:[{type:f.Input}],componentHost:[{type:f.ViewChild,args:[dn]}]},rO=vT;function vT(e){this.componentFactoryResolver=e,this.hide=[]}function bT(e,t){return 0<e.filter(function(e){return e===t}).length}function ST(e,t){return"+"+e+t.replace(/[-()]/g,"")}var wT={email:"Email",phone_number:"Phone Number",username:"Username"},iO='\n<div class="amplify-container" *ngIf="_show">\n<div class="amplify-form-container" data-test="'+cT.section+'">\n  <div class="amplify-form-body" data-test="'+cT.bodySection+'">\n    <div\n      class="amplify-form-header"\n      data-test="'+cT.headerSection+'"\n    >\n      {{ this.amplifyService.i18n().get(\'Confirm Sign up\') }}</div>\n    <div class="amplify-form-row">\n      <label class="amplify-input-label" for="amplifyUsername">\n        {{ this.amplifyService.i18n().get(getUsernameLabel()) }}\n      </label>\n      <input\n        #amplifyUsername\n        class="amplify-form-input"\n        type="text"\n        disabled\n        placeholder="{{ this.amplifyService.i18n().get(getUsernameLabel()) }}"\n        [value]="username"\n        data-test="'+cT.usernameInput+'"\n      />\n    </div>\n    <div class="amplify-form-row">\n      <label class="amplify-input-label" for="code">\n        {{ this.amplifyService.i18n().get(\'Confirmation Code *\') }}\n      </label>\n      <input #code\n        (change)="setCode(code.value)"\n        (keyup)="setCode(code.value)"\n        (keyup.enter)="onConfirm()"\n        class="amplify-form-input"\n        type="text"\n        placeholder="{{ this.amplifyService.i18n().get(\'Enter your Code\') }}"\n        data-test="'+cT.confirmationCodeInput+'"\n      />\n      <span class="amplify-form-action">{{ this.amplifyService.i18n().get(\'Lost your code?\') }}\n        <a class="amplify-form-link"\n            (click)="onResend()"\n            data-test="'+cT.resendCodeLink+'"\n          >{{ this.amplifyService.i18n().get(\'Resend Code\') }}</a></span>\n    </div>\n    <div class="amplify-form-actions">\n      <div class="amplify-form-cell-left">\n        <div class="amplify-form-actions-left">\n          <a\n            class="amplify-form-link"\n            (click)="onSignIn()"\n            data-test="'+cT.backToSignInLink+'"\n            >\n            {{ this.amplifyService.i18n().get(\'Back to Sign in\') }}\n          </a>\n        </div>\n      </div>\n      <div class="amplify-form-cell-right">\n        <button\n          class="amplify-form-button"\n          (click)="onConfirm()"\n          data-test="'+cT.confirmButton+'"\n          >{{ this.amplifyService.i18n().get(\'Confirm\') }}</button>\n      </div>\n    </div>\n  </div>\n</div>\n<div class="amplify-alert" *ngIf="errorMessage">\n  <div class="amplify-alert-body">\n    <span class="amplify-alert-icon">&#9888;</span>\n    <div class="amplify-alert-message">{{ this.amplifyService.i18n().get(errorMessage) }}</div>\n    <a class="amplify-alert-close" (click)="onAlertClose()">&times;</a>\n  </div>\n</div>\n</div>\n',CT=(Object.defineProperty(_T.prototype,"data",{set:function(e){this.hide=e.hide||this.hide,this._authState=e.authState,this._show="confirmSignUp"===e.authState.state,this.username=e.authState.user&&e.authState.user.username||""},enumerable:!0,configurable:!0}),Object.defineProperty(_T.prototype,"authState",{set:function(e){this._authState=e,this._show="confirmSignUp"===e.state,this.username=e.user&&e.user.username||""},enumerable:!0,configurable:!0}),Object.defineProperty(_T.prototype,"usernameAttributes",{set:function(e){this._usernameAttributes=e},enumerable:!0,configurable:!0}),_T.prototype.ngOnInit=function(){if(!this.amplifyService.auth())throw new Error("Auth module not registered on AmplifyService provider")},_T.prototype.shouldHide=function(t){return 0<this.hide.filter(function(e){return e===t}).length},_T.prototype.setUsername=function(e){this.username=e},_T.prototype.setCode=function(e){this.code=e},_T.prototype.onConfirm=function(){var t=this;this.amplifyService.auth().confirmSignUp(this.username,this.code).then(function(){return t.logger.info("confirm success")}).catch(function(e){return t._setError(e)})},_T.prototype.onResend=function(){var t=this;this.amplifyService.auth().resendSignUp(this.username).then(function(){return t.logger.info("code resent")}).catch(function(e){return t._setError(e)})},_T.prototype.onSignIn=function(){this.onAlertClose(),this.amplifyService.setAuthState({state:"signIn",user:null})},_T.prototype.onAlertClose=function(){this._setError(null)},_T.prototype._setError=function(e){this.errorMessage=e?e.message||e:null},_T.prototype.getUsernameLabel=function(){return wT[this._usernameAttributes]||this._usernameAttributes},_T.decorators=[{type:f.Component,args:[{selector:"amplify-auth-confirm-sign-up-core",template:iO}]}],_T.ctorParameters=function(){return[{type:BO,decorators:[{type:f.Inject,args:[BO]}]}]},_T.propDecorators={data:[{type:f.Input}],hide:[{type:f.Input}],authState:[{type:f.Input}],usernameAttributes:[{type:f.Input}]},_T);function _T(e){this.amplifyService=e,this._usernameAttributes="username",this.hide=[],this.logger=this.amplifyService.logger("ConfirmSignUpComponent")}var ET,IT,AO=(ET=function(e,t){return(ET=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}ET(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),XP='\n<div\n  class="amplify-authenticator amplify-authenticator-ionic"\n  *ngIf="_show"\n  data-test="'+cT.section+'"\n  >\n  <div class="amplify-form-body" data-test="'+cT.bodySection+'">\n    <div\n      class="amplify-form-header amplify-form-header-ionic"\n      data-test="'+cT.headerSection+'"\n      >\n      {{ this.amplifyService.i18n().get(\'Confirm your sign up code\') }}\n    </div>\n    <ion-list>\n      <ion-item lines="none">\n        <ion-label class="amplify-input-label amplify-input-label-ionic" position="stacked">\n          {{ this.amplifyService.i18n().get(getUsernameLabel()) }}\n        </ion-label>\n        <ion-input type="text"\n          class="amplify-form-input"\n          (input)="setUsername($event.target.value)"\n          [value]="username"\n          data-test="'+cT.usernameInput+'"\n        ></ion-input>\n      </ion-item>\n\n      <ion-item lines="none">\n        <ion-label class="amplify-input-label amplify-input-label-ionic" position="stacked">\n          {{ this.amplifyService.i18n().get(\'Code *\') }}\n        </ion-label>\n        <ion-input\n          #code\n          type="text"\n          class="amplify-form-input"\n          (input)="setCode(code.value)"\n          (keyup.enter)="onConfirm()"\n          data-test="'+cT.confirmationCodeInput+'"\n        ></ion-input>\n      </ion-item>\n    </ion-list>\n\n    <div class="amplify-form-actions">\n      <div>\n        <ion-button\n          expand="block"\n          color="primary"\n          (click)="onConfirm()"\n          data-test="'+cT.confirmButton+'"\n          >\n          {{ this.amplifyService.i18n().get(\'Confirm Code\') }}</ion-button>\n      </div>\n    <div class="amplify-form-row">\n      <div class="amplify-form-signup">\n        {{ this.amplifyService.i18n().get(\'Have an account?\') }}\n        <a\n          class="amplify-form-link"\n          (click)="onSignIn()"\n          data-test="'+cT.backToSignInLink+'"\n          >\n          {{ this.amplifyService.i18n().get(\'Sign In\') }}\n        </a>\n      </div>\n      <div class="amplify-form-signup">\n        {{ this.amplifyService.i18n().get(\'Lost your code?\') }}\n        <a\n          class="amplify-form-link"\n          (click)="onResend()"\n          data-test="'+cT.resendCodeLink+'"\n          >\n          {{ this.amplifyService.i18n().get(\'Resend\') }}\n        </a>\n      </div>\n    </div>\n  </div>\n</div>\n\n  <div class="amplify-alert" *ngIf="errorMessage">\n    <div class="amplify-alert-body">\n      <span class="amplify-alert-icon">&#9888;</span>\n      <div class="amplify-alert-message">{{ this.amplifyService.i18n().get(errorMessage) }}</div>\n      <a class="amplify-alert-close" (click)="onAlertClose()">&times;</a>\n    </div>\n  </div>\n\n</div>\n',AT=(AO(PT,IT=CT),PT.decorators=[{type:f.Component,args:[{selector:"amplify-auth-confirm-sign-up-ionic",template:XP}]}],PT.ctorParameters=function(){return[{type:BO,decorators:[{type:f.Inject,args:[BO]}]}]},PT);function PT(e){var t=IT.call(this,e)||this;return t.amplifyService=e,t}var OT,fn=(TT.prototype.ngOnInit=function(){this.loadComponent()},TT.prototype.ngOnDestroy=function(){},TT.prototype.loadComponent=function(){var e=this.framework&&"ionic"===this.framework.toLowerCase()?new So(AT,{authState:this.authState,usernameAttributes:this.usernameAttributes,hide:this.hide}):new So(CT,{authState:this.authState,usernameAttributes:this.usernameAttributes,hide:this.hide}),t=this.componentFactoryResolver.resolveComponentFactory(e.component),n=this.componentHost.viewContainerRef;n.clear(),n.createComponent(t).instance.data=e.data},TT.decorators=[{type:f.Component,args:[{selector:"amplify-auth-confirm-sign-up",template:"\n\t\t<div>\n\t\t\t<ng-template component-host></ng-template>\n\t\t</div>\n\t"}]}],TT.ctorParameters=function(){return[{type:f.ComponentFactoryResolver}]},TT.propDecorators={framework:[{type:f.Input}],authState:[{type:f.Input}],usernameAttributes:[{type:f.Input}],hide:[{type:f.Input}],componentHost:[{type:f.ViewChild,args:[dn]}]},TT);function TT(e){this.componentFactoryResolver=e,this.usernameAttributes="username",this.hide=[]}(pn=OT=OT||{}).EMAIL="email",pn.PHONE_NUMBER="phone_number",pn.USERNAME="username";var lT='\n<div class="amplify-container" *ngIf="_show">\n  <div class="amplify-form-container" data-test="'+iT.section+'">\n    <div class="amplify-form-body" data-test="'+iT.bodySection+'">\n      <div class="amplify-form-header" data-test="'+iT.headerSection+'">\n        {{ this.amplifyService.i18n().get(\'Sign in to your account\') }}\n      </div>\n      <amplify-auth-username-field-core\n        [usernameAttributes]="_usernameAttributes"\n        (usernameFieldChanged)="onUsernameFieldChanged($event)"\n      ></amplify-auth-username-field-core>\n      <div class="amplify-form-row amplify-signin-password">\n        <label class="amplify-input-label" for="passwordField">\n          {{ this.amplifyService.i18n().get(\'Password *\') }}\n        </label>\n        <input #passwordField\n          (keyup)="setPassword(passwordField.value)"\n          (keyup.enter)="onSignIn()"\n          class="amplify-form-input"\n          type="password"\n          required\n          placeholder="{{ this.amplifyService.i18n().get(\'Enter your password\') }}"\n          data-test="'+iT.passwordInput+'"\n        />\n        <span class="amplify-form-action" *ngIf="!shouldHide(\'ForgotPassword\')">\n          {{ this.amplifyService.i18n().get(\'Forgot Password?\') }}\n          <a class="amplify-form-link"\n            (click)="onForgotPassword()"\n            data-test="'+iT.forgotPasswordLink+'"\n          >{{ this.amplifyService.i18n().get(\'Reset password\') }}</a>\n        </span>\n      </div>\n      <div class="amplify-form-actions">\n        <div class="amplify-form-cell-right">\n          <button class="amplify-form-button"\n            (click)="onSignIn()"\n            data-test="'+iT.signInButton+'"\n          >{{ this.amplifyService.i18n().get(\'Sign In\') }}</button>\n        </div>\n        <div class="amplify-form-cell-left" *ngIf="!shouldHide(\'SignUp\')">\n          <div class="amplify-form-signup">\n            {{ this.amplifyService.i18n().get(\'No account?\') }}\n            <a\n              class="amplify-form-link"\n              (click)="onSignUp()"\n              data-test="'+iT.createAccountLink+'"\n              >\n              {{ this.amplifyService.i18n().get(\'Create account\') }}\n            </a>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n  <div class="amplify-alert" *ngIf="errorMessage">\n    <div class="amplify-alert-body">\n      <span class="amplify-alert-icon">&#9888;</span>\n      <div\n        class="amplify-alert-message"\n        data-test="'+iT.signInError+'"\n        >\n          {{ this.amplifyService.i18n().get(errorMessage) }}</div>\n      <a class="amplify-alert-close" (click)="onAlertClose()">&times;</a>\n    </div>\n  </div>\n</div>\n',kT=(Object.defineProperty(xT.prototype,"data",{set:function(e){this.hide=e.hide||this.hide,this._usernameAttributes=e.usernameAttributes,this._authState=e.authState,this._show=bT(["signIn","signedOut","signedUp"],e.authState.state)},enumerable:!0,configurable:!0}),Object.defineProperty(xT.prototype,"authState",{set:function(e){this._authState=e,this._show=bT(["signIn","signedOut","signedUp"],e.state),this.username=e.user&&e.user.username||"",this.email=e.user&&e.user.email||"",this.country_code=(e.user&&e.user.country_code?e.user:this).country_code,this.local_phone_number=e.user&&e.user.local_phone_number||""},enumerable:!0,configurable:!0}),Object.defineProperty(xT.prototype,"usernameAttributes",{set:function(e){this._usernameAttributes=e},enumerable:!0,configurable:!0}),xT.prototype.ngOnInit=function(){if(!this.amplifyService.auth())throw new Error("Auth module not registered on AmplifyService provider")},xT.prototype.shouldHide=function(t){return 0<this.hide.filter(function(e){return e===t}).length},xT.prototype.setUsername=function(e){this.username=e},xT.prototype.setPassword=function(e){this.password=e},xT.prototype.onSignIn=function(){var t=this;this.amplifyService.auth().signIn(this.getSignInUsername(),this.password).then(function(e){"SMS_MFA"===e.challengeName||"SOFTWARE_TOKEN_MFA"===e.challengeName?t.amplifyService.setAuthState({state:"confirmSignIn",user:e}):"NEW_PASSWORD_REQUIRED"===e.challengeName?t.amplifyService.setAuthState({state:"requireNewPassword",user:e}):"CUSTOM_CHALLENGE"===e.challengeName&&e.challengeParam&&"true"===e.challengeParam.trigger&&t.amplifyService.setAuthState({state:"customConfirmSignIn",user:e})}).catch(function(e){t._setError(e)})},xT.prototype.onAlertClose=function(){this._setError(null)},xT.prototype.getUserObj=function(){return this.username||this.email||this.local_phone_number?{username:this.username,email:this.email,local_phone_number:this.local_phone_number,courtry_code:this.country_code}:null},xT.prototype.onForgotPassword=function(){var e=this.getUserObj();this.onAlertClose(),this.amplifyService.setAuthState({state:"forgotPassword",user:e})},xT.prototype.onSignUp=function(){var e=this.getUserObj();this.onAlertClose(),this.amplifyService.setAuthState({state:"signUp",user:e})},xT.prototype._setError=function(e){e?(this.errorMessage=e.message||e,this.logger.error(this.errorMessage)):this.errorMessage=null},xT.prototype.onUsernameFieldChanged=function(e){this.email=e.email||this.email,this.username=e.username||this.username,this.country_code=e.country_code||this.country_code,this.local_phone_number=e.local_phone_number||this.local_phone_number},xT.prototype.getSignInUsername=function(){switch(this._usernameAttributes){case OT.EMAIL:return this.email;case OT.PHONE_NUMBER:return ST(this.country_code,this.local_phone_number);default:return this.username}},xT.decorators=[{type:f.Component,args:[{selector:"amplify-auth-sign-in-core",template:lT}]}],xT.ctorParameters=function(){return[{type:BO,decorators:[{type:f.Inject,args:[BO]}]}]},xT.propDecorators={data:[{type:f.Input}],hide:[{type:f.Input}],authState:[{type:f.Input}],usernameAttributes:[{type:f.Input}]},xT);function xT(e){this.amplifyService=e,this._usernameAttributes="username",this.local_phone_number="",this.country_code="1",this.email="",this.signInUsername="",this.hide=[],this.logger=this.amplifyService.logger("SignInComponent"),this.onUsernameFieldChanged=this.onUsernameFieldChanged.bind(this)}var NT,LT,FP=(NT=function(e,t){return(NT=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}NT(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),AI='\n<div\n  class="amplify-authenticator"\n  *ngIf="_show"\n  data-test="'+iT.section+'"\n  >\n  <div class="amplify-form-body" data-test="'+iT.bodySection+'">\n    <div class="amplify-form-header" data-test="'+iT.headerSection+'">\n      {{ this.amplifyService.i18n().get(\'Sign in to your account\') }}\n    </div>\n    <ion-list lines="none">\n      <amplify-auth-username-field-ionic\n        [usernameAttributes]="_usernameAttributes"\n        (usernameFieldChanged)="onUsernameFieldChanged($event)"\n      ></amplify-auth-username-field-ionic>\n      <ion-item lines="none">\n        <ion-label class="amplify-input-label" for="password" position="stacked">\n          {{ this.amplifyService.i18n().get(\'Password *\') }}\n        </ion-label>\n        <ion-input\n          #password\n          type="password"\n          class="amplify-form-input"\n          (input)="setPassword(password.value)"\n          (keyup.enter)="onSignIn()"\n          data-test="'+iT.passwordInput+'"\n        ></ion-input>\n      </ion-item>\n    </ion-list>\n    <div class="amplify-form-actions">\n      <div class="amplify-form-row">\n        <ion-button expand="block" color="primary"\n          (click)="onSignIn()"\n          data-test="'+iT.signInButton+'"\n          >{{ this.amplifyService.i18n().get(\'Sign In\') }}</ion-button>\n      </div>\n\n      <div class="amplify-form-row">\n        <div class="amplify-form-signup" *ngIf="!shouldHide(\'SignUp\')">\n          {{ this.amplifyService.i18n().get(\'No account?\') }}\n          <a\n            class="amplify-form-link"\n            (click)="onSignUp()"\n            data-test="'+iT.createAccountLink+'"\n            >\n            {{ this.amplifyService.i18n().get(\'Create account\') }}\n          </a>\n        </div>\n        <div class="amplify-form-signup" *ngIf="!shouldHide(\'ForgotPassword\')">\n          <a class="amplify-form-link" (click)="onForgotPassword()" data-test="'+iT.forgotPasswordLink+'">\n            {{ this.amplifyService.i18n().get(\'Reset Password\') }}\n          </a>\n        </div>\n      </div>\n\n    </div>\n  </div>\n\n  <div class="amplify-alert" *ngIf="errorMessage">\n    <div class="amplify-alert-body">\n      <span class="amplify-alert-icon">&#9888;</span>\n      <div class="amplify-alert-message">{{ this.amplifyService.i18n().get(errorMessage) }}</div>\n      <a class="amplify-alert-close" (click)="onAlertClose()">&times;</a>\n    </div>\n  </div>\n</div>\n',MT=(FP(RT,LT=kT),RT.decorators=[{type:f.Component,args:[{selector:"amplify-auth-sign-in-ionic",template:AI}]}],RT.ctorParameters=function(){return[{type:BO,decorators:[{type:f.Inject,args:[BO]}]}]},RT);function RT(e){var t=LT.call(this,e)||this;return t.amplifyService=e,t}UT.prototype.ngOnInit=function(){this.loadComponent()},UT.prototype.ngOnDestroy=function(){},UT.prototype.loadComponent=function(){var e=this.framework&&"ionic"===this.framework?new So(MT,{authState:this.authState,hide:this.hide,usernameAttributes:this.usernameAttributes}):new So(kT,{authState:this.authState,hide:this.hide,usernameAttributes:this.usernameAttributes}),t=this.componentFactoryResolver.resolveComponentFactory(e.component),n=this.componentHost.viewContainerRef;n.clear(),n.createComponent(t).instance.data=e.data},UT.decorators=[{type:f.Component,args:[{selector:"amplify-auth-sign-in",template:"\n\t\t<div>\n\t\t\t<ng-template component-host></ng-template>\n\t\t</div>\n\t"}]}],UT.ctorParameters=function(){return[{type:f.ComponentFactoryResolver}]},UT.propDecorators={framework:[{type:f.Input}],authState:[{type:f.Input}],usernameAttributes:[{type:f.Input}],hide:[{type:f.Input}],componentHost:[{type:f.ViewChild,args:[dn]}]},iO=UT;function UT(e){this.componentFactoryResolver=e,this.usernameAttributes="username",this.hide=[]}var DT=[{label:"Username",key:"username",required:!1,displayOrder:1},{label:"Password",key:"password",required:!0,type:"password",displayOrder:2},{label:"Email",key:"email",required:!0,type:"email",displayOrder:3},{label:"Phone Number",key:"phone_number",required:!0,displayOrder:4}],FT=[{label:"Email",key:"email",required:!0,type:"email",displayOrder:1},{label:"Password",key:"password",required:!0,type:"password",displayOrder:2},{label:"Phone Number",key:"phone_number",required:!0,displayOrder:3}],jT=[{label:"Phone Number",key:"phone_number",required:!0,displayOrder:1},{label:"Password",key:"password",required:!0,type:"password",displayOrder:2},{label:"Email",key:"email",required:!0,type:"email",displayOrder:3}],cT='\n<div class="amplify-container" *ngIf="_show">\n  <div class="amplify-form-container" data-test="'+oT.section+'">\n    <div class="amplify-form-body" data-test="'+oT.bodySection+'">\n      <div\n        class="amplify-form-header"\n        data-test="'+oT.headerSection+'"\n        >{{ this.amplifyService.i18n().get(this.header) }}</div>\n      <div class="amplify-form-row" *ngFor="let field of signUpFields">\n        <div *ngIf="field.key !== \'phone_number\'">\n          <label class="amplify-input-label">\n            {{ this.amplifyService.i18n().get(field.label) }}\n            <span *ngIf="field.required">*</span>\n          </label>\n          <input #{{field.key}}\n            class="amplify-form-input"\n            [ngClass]="{\'amplify-input-invalid \': field.invalid}"\n            type={{field.type}}\n            [placeholder]="this.amplifyService.i18n().get(field.label)"\n            [(ngModel)]="user[field.key]"\n            name="field.key"\n            data-test="'+oT.nonPhoneNumberInput+'"\n            />\n            <div *ngIf="field.key === \'password\'" class="amplify-form-extra-details">\n              {{passwordPolicy}}\n            </div>\n        </div>\n        <div *ngIf="field.key === \'phone_number\'">\n          <amplify-auth-phone-field-core\n            [label]="field.label"\n            [required]="field.required"\n            [placeholder]="field.placeholder"\n            [defaultCountryCode]="country_code"\n            (phoneFieldChanged)="onPhoneFieldChanged($event)"\n          ></amplify-auth-phone-field-core>\n        </div>\n      </div>\n      <div class="amplify-form-actions">\n        <div class="amplify-form-cell-left" *ngIf="!shouldHide(\'SignIn\')">\n          <div class="amplify-form-signup">\n            {{ this.amplifyService.i18n().get(\'Have an account?\') }}\n            <a class="amplify-form-link" (click)="onSignIn()" data-test="'+oT.signInLink+'">\n              {{ this.amplifyService.i18n().get(\'Sign in\') }}\n            </a>\n          </div>\n        </div>\n        <div class="amplify-form-cell-right">\n          <button class="amplify-form-button"\n          (click)="onSignUp()"\n          data-test="'+oT.createAccountButton+'"\n          >{{ this.amplifyService.i18n().get(\'Create Account\') }}</button>\n        </div>\n      </div>\n    </div>\n  </div>\n  <div class="amplify-alert" *ngIf="errorMessage">\n    <div class="amplify-alert-body">\n      <span class="amplify-alert-icon">&#9888;</span>\n      <div class="amplify-alert-message">{{ this.amplifyService.i18n().get(errorMessage) }}</div>\n      <a class="amplify-alert-close" (click)="onAlertClose()">&times;</a>\n    </div>\n  </div>\n</div>\n',BT=(Object.defineProperty(VT.prototype,"data",{set:function(e){this._authState=e.authState,this._show="signUp"===e.authState.state,this._usernameAttributes=e.usernameAttributes,e.signUpConfig&&(this._signUpConfig=e.signUpConfig,this._signUpConfig.defaultCountryCode&&(this.country_code=this._signUpConfig.defaultCountryCode),this._signUpConfig.signUpFields&&(this.signUpFields=this._signUpConfig.signUpFields),this._signUpConfig.header&&(this.header=this._signUpConfig.header),this._signUpConfig.hiddenDefaults&&(this.hiddenFields=this._signUpConfig.hiddenDefaults),this._usernameAttributes===OT.EMAIL?(this.signUpFields=FT,this.defaultSignUpFields=FT):this._usernameAttributes===OT.PHONE_NUMBER&&(this.signUpFields=jT,this.defaultSignUpFields=jT),this._signUpConfig.passwordPolicy&&(this.passwordPolicy=this._signUpConfig.passwordPolicy))},enumerable:!0,configurable:!0}),Object.defineProperty(VT.prototype,"usernameAttributes",{set:function(e){this._usernameAttributes=e,this._usernameAttributes===OT.EMAIL?(this.signUpFields=FT,this.defaultSignUpFields=FT):this._usernameAttributes===OT.PHONE_NUMBER&&(this.signUpFields=jT,this.defaultSignUpFields=jT)},enumerable:!0,configurable:!0}),Object.defineProperty(VT.prototype,"authState",{set:function(e){this._authState=e,this._show="signUp"===e.state},enumerable:!0,configurable:!0}),Object.defineProperty(VT.prototype,"signUpConfig",{set:function(e){e&&(this._signUpConfig=e,this._signUpConfig.defaultCountryCode&&(this.country_code=this._signUpConfig.defaultCountryCode),this._signUpConfig.signUpFields&&(this.signUpFields=this._signUpConfig.signUpFields),this._signUpConfig.header&&(this.header=this._signUpConfig.header),this._signUpConfig.hiddenDefaults&&(this.hiddenFields=this._signUpConfig.hiddenDefaults),this._signUpConfig.passwordPolicy&&(this.passwordPolicy=this._signUpConfig.passwordPolicy))},enumerable:!0,configurable:!0}),VT.prototype.ngOnInit=function(){this.amplifyService.auth()||this.logger.warn("Auth module not registered on AmplifyService provider"),this.sortFields()},VT.prototype.shouldHide=function(t){return 0<this.hide.filter(function(e){return e===t}).length},VT.prototype.onSignUp=function(){var n=this,e=this.validate();if(e&&0<e.length)return this._setError("The following fields need to be filled out: "+e.join(", "));this.user.attributes={},this.signUpFields.find(function(e){return"phone_number"===e.key})&&(this.user.phone_number=ST(this.country_code,this.local_phone_number));var e=Object.keys(this.user),r=e.map(function(e){return n.user[e]});e.forEach(function(e,t){"username"!==e&&"password"!==e&&"attributes"!==e&&(e=(n.needPrefix(e)?"custom:":"")+e,n.user.attributes[e]=r[t])});var t=!1;if(this.signUpFields.forEach(function(e){e.label===n.getUsernameLabel()&&(n.amplifyService.logger("Changing the username to the value of "+e.label,"DEBUG"),n.user.username=n.user.attributes[e.key]||n.user.username,t=!0)}),!t&&!this.user.username)throw new Error("Couldn't find the label: "+this.getUsernameLabel()+", in sign up fields according to usernameAttributes!");this.amplifyService.auth().signUp(this.user).then(function(e){var t=n.user.username;n.user={},n.onAlertClose(),n.amplifyService.setAuthState({state:"confirmSignUp",user:{username:t}})}).catch(function(e){return n._setError(e)})},VT.prototype.onSignIn=function(){this.onAlertClose(),this.amplifyService.setAuthState({state:"signIn",user:null})},VT.prototype.needPrefix=function(t){var e=this.signUpFields.find(function(e){return e.key===t});return 0!==t.indexOf("custom:")?e.custom:(0===t.indexOf("custom:")&&!1===e.custom&&this.logger.warn("Custom prefix prepended to key but custom field flag is set to false"),null)},VT.prototype.onConfirmSignUp=function(){this.onAlertClose(),this.amplifyService.setAuthState({state:"confirmSignUp",user:{username:this.user.username}})},VT.prototype.sortFields=function(){var n=this;0<this.hiddenFields.length&&(this.defaultSignUpFields=this.defaultSignUpFields.filter(function(e){return!n.hiddenFields.includes(e.key)})),this._signUpConfig&&this._signUpConfig.signUpFields&&0<this._signUpConfig.signUpFields.length&&(this._signUpConfig.hideAllDefaults||this.defaultSignUpFields.forEach(function(t,e){-1===n.signUpFields.findIndex(function(e){return e.key===t.key})&&n.signUpFields.push(t)}),this.signUpFields.sort(function(e,t){return e.displayOrder&&t.displayOrder?e.displayOrder<t.displayOrder||!(e.displayOrder>t.displayOrder)&&e.key<t.key?-1:1:!e.displayOrder&&t.displayOrder?1:e.displayOrder&&!t.displayOrder?-1:e.displayOrder||t.displayOrder?void 0:e.key<t.key?-1:1}),this.signUpFields=this.removeHiddenFields())},VT.prototype.onAlertClose=function(){this._setError(null)},VT.prototype.removeHiddenFields=function(){return this.signUpFields.filter(function(e){return!e.displayOrder||-1!==e.displayOrder})},VT.prototype.validate=function(){var t=this,n=[];return this.signUpFields.map(function(e){"phone_number"!==e.key?e.required&&!t.user[e.key]?(e.invalid=!0,n.push(t.amplifyService.i18n().get(e.label))):e.invalid=!1:!e.required||t.country_code&&t.local_phone_number?e.invalid=!1:(e.invalid=!0,n.push(t.amplifyService.i18n().get(e.label)))}),n},VT.prototype._setError=function(e){this.errorMessage=e?e.message||e:null},VT.prototype.getUsernameLabel=function(){return wT[this._usernameAttributes]||this._usernameAttributes},VT.prototype.onPhoneFieldChanged=function(e){this.country_code=e.country_code,this.local_phone_number=e.local_phone_number},VT.decorators=[{type:f.Component,args:[{selector:"amplify-auth-sign-up-core",template:cT}]}],VT.ctorParameters=function(){return[{type:BO,decorators:[{type:f.Inject,args:[BO]}]}]},VT.propDecorators={data:[{type:f.Input}],hide:[{type:f.Input}],usernameAttributes:[{type:f.Input}],authState:[{type:f.Input}],signUpConfig:[{type:f.Input}]},VT);function VT(e){this.amplifyService=e,this._usernameAttributes="username",this.user={},this.local_phone_number="",this.country_code="1",this.header="Create a new account",this.defaultSignUpFields=DT,this.signUpFields=this.defaultSignUpFields,this.hiddenFields=[],this.hide=[],this.logger=this.amplifyService.logger("SignUpComponent")}var zT,qT,AO=(zT=function(e,t){return(zT=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}zT(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),XP='\n<div\n  class="amplify-authenticator"\n  *ngIf="_show"\n  data-test="'+oT.section+'"\n  >\n  <div class="amplify-form-body" data-test="'+oT.bodySection+'">\n    <div class="amplify-form-header" data-test="'+oT.headerSection+'">\n      {{ this.amplifyService.i18n().get(this.header) }}</div>\n    <ion-list lines="none">\n      <ion-item lines="none" *ngFor="let field of signUpFields">\n        <ion-label class="amplify-input-label"\n        position="stacked"\n        *ngIf="field.key !== \'phone_number\'"\n        >\n          {{ this.amplifyService.i18n().get(field.label) }}\n          <span *ngIf="field.required">*</span>\n        </ion-label>\n        <ion-input\n          [ngClass]="{\'amplify-input-invalid \': field.invalid}"\n          *ngIf="field.key !== \'phone_number\'"\n          #{{field.key}}\n          type="text"\n          class="amplify-form-input"\n          type={{field.type}}\n          [placeholder]="this.amplifyService.i18n().get(field.label)"\n          (keyup)="setProp($event.target)"\n          name={{field.key}}\n          data-test="'+oT.nonPhoneNumberInput+'"\n        ></ion-input>\n        <ion-content *ngIf="field.key === \'phone_number\'" class="amplify-phone-ion-content">\n          <amplify-auth-phone-field-ionic\n            [label]="field.label"\n            [required]="field.required"\n            [placeholder]="field.placeholder"\n            [defaultCountryCode]="country_code"\n            (phoneFieldChanged)="onPhoneFieldChanged($event)"\n          ></amplify-auth-phone-field-ionic>\n        </ion-content>\n      </ion-item>\n    </ion-list>\n    <div class="amplify-form-actions">\n      <div class="amplify-form-row">\n        <ion-button expand="block" color="primary"\n          (click)="onSignUp()"\n          data-test="'+oT.createAccountButton+'"\n        >{{ this.amplifyService.i18n().get(\'Create Account\') }}</ion-button>\n      </div>\n      <div class="amplify-form-row">\n        <div class="amplify-form-signup">\n          {{ this.amplifyService.i18n().get(\'Have an account?\') }}\n          <a class="amplify-form-link" (click)="onSignIn()" data-test="'+oT.signInButton+'">\n            {{ this.amplifyService.i18n().get(\'Sign In\') }}\n          </a>\n        </div>\n        <div class="amplify-form-signup" *ngIf="!shouldHide(\'SignUp\')">\n          {{ this.amplifyService.i18n().get(\'Have a code?\') }}\n          <a\n            class="amplify-form-link"\n            (click)="onConfirmSignUp()"\n            data-test="'+oT.confirmButton+'"\n            >\n            {{ this.amplifyService.i18n().get(\'Confirm\') }}\n          </a>\n        </div>\n      </div>\n    </div>\n  </div>\n  <div class="amplify-alert" *ngIf="errorMessage">\n    <div class="amplify-alert-body">\n      <span class="amplify-alert-icon">&#9888;</span>\n      <div class="amplify-alert-message">{{ this.amplifyService.i18n().get(errorMessage) }}</div>\n      <a class="amplify-alert-close" (click)="onAlertClose()">&times;</a>\n    </div>\n  </div>\n</div>\n',KT=(AO(HT,qT=BT),HT.prototype.setProp=function(e){return this.user[e.name]=e.value},HT.decorators=[{type:f.Component,args:[{selector:"amplify-auth-sign-up-ionic",template:XP}]}],HT.ctorParameters=function(){return[{type:BO,decorators:[{type:f.Inject,args:[BO]}]}]},HT);function HT(e){var t=qT.call(this,e)||this;return t.amplifyService=e,t}GT.prototype.ngOnInit=function(){this.loadComponent()},GT.prototype.ngOnDestroy=function(){},GT.prototype.loadComponent=function(){var e=this.framework&&"ionic"===this.framework.toLowerCase()?new So(KT,{authState:this.authState,signUpConfig:this.signUpConfig,usernameAttributes:this.usernameAttributes,hide:this.hide}):new So(BT,{authState:this.authState,signUpConfig:this.signUpConfig,usernameAttributes:this.usernameAttributes,hide:this.hide}),t=this.componentFactoryResolver.resolveComponentFactory(e.component),n=this.componentHost.viewContainerRef;n.clear(),n.createComponent(t).instance.data=e.data},GT.decorators=[{type:f.Component,args:[{selector:"amplify-auth-sign-up",template:"\n\t\t<div>\n\t\t\t<ng-template component-host></ng-template>\n\t\t</div>\n\t"}]}],GT.ctorParameters=function(){return[{type:f.ComponentFactoryResolver}]},GT.propDecorators={framework:[{type:f.Input}],authState:[{type:f.Input}],signUpConfig:[{type:f.Input}],usernameAttributes:[{type:f.Input}],hide:[{type:f.Input}],componentHost:[{type:f.ViewChild,args:[dn]}]},pn=GT;function GT(e){this.componentFactoryResolver=e,this.usernameAttributes="username",this.hide=[]}var lT='\n<div class="amplify-container" *ngIf="_show">\n<div class="amplify-form-container" data-test="'+sT.section+'">\n  <div class="amplify-form-body" data-test="'+sT.bodySection+'">\n  <div class="amplify-form-header" data-test="'+sT.headerSection+'">\n    {{ this.amplifyService.i18n().get(\'You are required to update your password\') }}\n  </div>\n  <div class="amplify-form-row">\n    <label class="amplify-input-label" for="password">\n      {{ this.amplifyService.i18n().get(\'Password *\') }}\n    </label>\n    <input #password\n      (keyup)="setPassword(password.value)"\n      (keyup.enter)="onSubmit()"\n      class="amplify-form-input"\n      type="password"\n      placeholder="{{ this.amplifyService.i18n().get(\'Password\') }}"\n      data-test="'+sT.newPasswordInput+'"\n    />\n    </div>\n    <div class="amplify-form-actions">\n      <div class="amplify-form-cell-left">\n        <a class="amplify-form-link"\n          (click)="onSignIn()"\n          data-test="'+sT.backToSignInLink+'"\n        >{{ this.amplifyService.i18n().get(\'Back to Sign In\') }}</a>\n      </div>\n      <div class="amplify-form-cell-right">\n        <button class="amplify-form-button"\n          (click)="onSubmit()"\n          data-test="'+sT.submitButton+'"\n        >{{ this.amplifyService.i18n().get(\'Submit\') }}</button>\n      </div>\n    </div>\n  </div>\n</div>\n<div class="amplify-alert" *ngIf="errorMessage">\n<div class="amplify-alert-body">\n  <span class="amplify-alert-icon">&#9888;</span>\n  <div class="amplify-alert-message">{{ this.amplifyService.i18n().get(errorMessage) }}</div>\n  <a class="amplify-alert-close" (click)="onAlertClose()">&times;</a>\n</div>\n</div>\n</div>\n',WT=(Object.defineProperty($T.prototype,"authState",{set:function(e){this._authState=e,this._show="requireNewPassword"===e.state},enumerable:!0,configurable:!0}),Object.defineProperty($T.prototype,"data",{set:function(e){this._authState=e.authState,this._show="requireNewPassword"===e.authState.state,this.hide=e.hide||this.hide},enumerable:!0,configurable:!0}),$T.prototype.ngOnInit=function(){if(!this.amplifyService.auth())throw new Error("Auth module not registered on AmplifyService provider")},$T.prototype.shouldHide=function(t){return 0<this.hide.filter(function(e){return e===t}).length},$T.prototype.setPassword=function(e){this.password=e},$T.prototype.onSubmit=function(){var t=this,e=this._authState.user,n=e.challengeParam.requiredAttributes;this.amplifyService.auth().completeNewPassword(e,this.password,n).then(function(){t.onAlertClose(),t.amplifyService.setAuthState({state:"signIn",user:e})}).catch(function(e){return t._setError(e)})},$T.prototype.onSignIn=function(){this.onAlertClose(),this.amplifyService.setAuthState({state:"signIn",user:null})},$T.prototype.onAlertClose=function(){this._setError(null)},$T.prototype._setError=function(e){this.errorMessage=e?e.message||e:null},$T.decorators=[{type:f.Component,args:[{selector:"amplify-auth-require-new-password-core",template:lT}]}],$T.ctorParameters=function(){return[{type:BO,decorators:[{type:f.Inject,args:[BO]}]}]},$T.propDecorators={authState:[{type:f.Input}],hide:[{type:f.Input}],data:[{type:f.Input}]},$T);function $T(e){this.amplifyService=e,this.hide=[],this.logger=this.amplifyService.logger("RequireNewPasswordComponent")}var YT,JT,iT=(YT=function(e,t){return(YT=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}YT(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),FP='\n<div\n  class="amplify-authenticator amplify-authenticator-ionic"\n  *ngIf="_show"\n  data-test="'+sT.section+'"\n  >\n  <div class="amplify-form-body" data-test="'+sT.bodySection+'">\n    <div\n      class="amplify-form-header amplify-form-header-ionic"\n      data-test="'+sT.headerSection+'"\n      >\n      {{ this.amplifyService.i18n().get(\'Reset your password\') }}\n    </div>\n    <ion-list>\n      <ion-item lines="none">\n        <ion-label class="amplify-input-label amplify-input-label-ionic" position="stacked">\n          {{ this.amplifyService.i18n().get(\'Password\') }}\n        </ion-label>\n        <ion-input\n          #password\n          type="password"\n          class="amplify-form-input"\n          (input)="setPassword(password.value)"\n          (keyup.enter)="onSubmit()"\n          data-test="'+sT.newPasswordInput+'"\n        ></ion-input>\n      </ion-item>\n\n    </ion-list>\n\n    <div class="amplify-form-actions">\n      <div class="amplify-form-row">\n        <ion-button\n          expand="block"\n          (click)="onSignIn()"\n          data-test="'+sT.backToSignInLink+'"\n        >{{ this.amplifyService.i18n().get(\'Back to Sign In\') }}</ion-button>\n      </div>\n      <div class="amplify-form-row">\n        <ion-button\n          expand="block"\n          (click)="onSubmit()"\n          data-test="'+sT.submitButton+'"\n        >Submit</ion-button>\n      </div>\n    </div>\n  </div>\n  <div class="amplify-alert" *ngIf="errorMessage">\n    <div class="amplify-alert-body">\n      <span class="amplify-alert-icon">&#9888;</span>\n      <div class="amplify-alert-message">{{ errorMessage }}</div>\n      <a class="amplify-alert-close" (click)="onAlertClose()">&times;</a>\n    </div>\n  </div>\n</div>\n',ZT=(iT(QT,JT=WT),QT.decorators=[{type:f.Component,args:[{selector:"amplify-auth-require-new-password-ionic",template:FP}]}],QT.ctorParameters=function(){return[{type:BO,decorators:[{type:f.Inject,args:[BO]}]}]},QT);function QT(e){var t=JT.call(this,e)||this;return t.amplifyService=e,t}XT.prototype.ngOnInit=function(){this.loadComponent()},XT.prototype.ngOnDestroy=function(){},XT.prototype.loadComponent=function(){var e=this.framework&&"ionic"===this.framework.toLowerCase()?new So(ZT,{authState:this.authState,hide:this.hide}):new So(WT,{authState:this.authState,hide:this.hide}),t=this.componentFactoryResolver.resolveComponentFactory(e.component),n=this.componentHost.viewContainerRef;n.clear(),n.createComponent(t).instance.data=e.data},XT.decorators=[{type:f.Component,args:[{selector:"amplify-auth-require-new-password",template:"\n\t\t<div>\n\t\t\t<ng-template component-host></ng-template>\n\t\t</div>\n\t"}]}],XT.ctorParameters=function(){return[{type:f.ComponentFactoryResolver}]},XT.propDecorators={framework:[{type:f.Input}],authState:[{type:f.Input}],hide:[{type:f.Input}],componentHost:[{type:f.ViewChild,args:[dn]}]},AI=XT;function XT(e){this.componentFactoryResolver=e,this.hide=[]}var cT='\n<div class="amplify-greeting" *ngIf="signedIn">\n    <div class="amplify-greeting-text">{{ greeting }}</div>\n    <div class="amplify-greeting-flex-spacer"></div>\n    <a class="amplify-form-link amplify-greeting-sign-out"\n      (click)="onSignOut()"\n      data-test="'+uT.signOutButton+"\"\n    >{{ this.amplifyService.i18n().get('Sign Out') }}</a>\n</div>\n",ek=(Object.defineProperty(tk.prototype,"usernameAttributes",{set:function(e){this._usernameAttributes=e},enumerable:!0,configurable:!0}),tk.prototype.ngOnInit=function(){if(!this.amplifyService.auth())throw new Error("Auth module not registered on AmplifyService provider")},tk.prototype.subscribe=function(){var t=this;this.amplifyService.authStateChange$.subscribe(function(e){return t.setAuthState(e)})},tk.prototype.setAuthState=function(e){this.authState=e,this.signedIn="signedIn"===e.state;var t="";e.user&&(t=this._usernameAttributes===OT.EMAIL?e.user.attributes?e.user.attributes.email:e.user.username:this._usernameAttributes===OT.PHONE_NUMBER&&e.user.attributes?e.user.attributes.phone_number:e.user.username),this.greeting=this.signedIn?this.amplifyService.i18n().get("Hello, {{username}}").replace("{{username}}",t):""},tk.prototype.onSignOut=function(){this.amplifyService.auth().signOut()},tk.decorators=[{type:f.Component,args:[{selector:"amplify-auth-greetings-core",template:cT}]}],tk.ctorParameters=function(){return[{type:BO,decorators:[{type:f.Inject,args:[BO]}]}]},tk.propDecorators={authState:[{type:f.Input}],usernameAttributes:[{type:f.Input}]},tk);function tk(e){this.amplifyService=e,this._usernameAttributes="username",this.logger=this.amplifyService.logger("GreetingComponent"),this.subscribe()}var nk,rk,oT=(nk=function(e,t){return(nk=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}nk(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),AO='\n<div class="amplify-greeting" *ngIf="signedIn">\n    <div class="amplify-greeting-text">{{ greeting }}</div>\n    <div class="amplify-greeting-flex-spacer"></div>\n    <ion-button\n        class="amplify-greeting-sign-out"\n        size="small"\n        *ngIf="signedIn"\n        (click)="onSignOut()"\n        data-test="'+uT.signOutButton+"\"\n      >{{ this.amplifyService.i18n().get('Sign Out') }}</ion-button>\n</div>\n",ik=(oT(ok,rk=ek),ok.decorators=[{type:f.Component,args:[{selector:"amplify-auth-greetings-ionic",template:AO}]}],ok.ctorParameters=function(){return[{type:BO,decorators:[{type:f.Inject,args:[BO]}]}]},ok);function ok(e){var t=rk.call(this,e)||this;return t.amplifyService=e,t}sk.prototype.ngOnInit=function(){this.loadComponent()},sk.prototype.ngOnDestroy=function(){},sk.prototype.loadComponent=function(){var e=this.framework&&"ionic"===this.framework.toLowerCase()?new So(ik,{authState:this.authState,usernameAttributes:this.usernameAttributes}):new So(ek,{authState:this.authState,usernameAttributes:this.usernameAttributes}),t=this.componentFactoryResolver.resolveComponentFactory(e.component),n=this.componentHost.viewContainerRef;n.clear(),n.createComponent(t).instance.data=e.data},sk.decorators=[{type:f.Component,args:[{selector:"amplify-auth-greetings",template:"\n\t\t<div>\n\t\t\t<ng-template component-host></ng-template>\n\t\t</div>\n\t"}]}],sk.ctorParameters=function(){return[{type:f.ComponentFactoryResolver}]},sk.propDecorators={framework:[{type:f.Input}],authState:[{type:f.Input}],usernameAttributes:[{type:f.Input}],componentHost:[{type:f.ViewChild,args:[dn]}]},XP=sk;function sk(e){this.componentFactoryResolver=e,this.usernameAttributes="username"}var lT='\n<div class="amplify-container" *ngIf="_show">\n  <div class="amplify-form-container" data-test="'+pT.section+'">\n    <div class="amplify-form-body" data-test="'+pT.bodySection+'">\n    <div class="amplify-form-header" data-test="'+pT.headerSection+'">\n      {{ this.amplifyService.i18n().get(\'Reset your password\') }}\n    </div>\n    <div class="amplify-form-text" *ngIf="!code_sent">\n      {{ this.amplifyService.i18n().get(\'You will receive a verification code\') }}\n    </div>\n    <div class="amplify-form-text" *ngIf="code_sent">\n      {{ this.amplifyService.i18n().get(\'Enter the code you received and set a new password\') }}\n    </div>\n    <amplify-auth-username-field-core\n      *ngIf="!code_sent"\n      [usernameAttributes]="_usernameAttributes"\n      (usernameFieldChanged)="onUsernameFieldChanged($event)"\n    ></amplify-auth-username-field-core>\n      <div class="amplify-form-row" *ngIf="code_sent">\n      <label class="amplify-input-label" for="code">\n        {{ this.amplifyService.i18n().get(\'Confirmation Code *\') }}\n      </label>\n      <input #code\n        (keyup)="setCode(code.value)"\n        class="amplify-form-input"\n        type="text"\n        autocomplete="off"\n        placeholder="{{ this.amplifyService.i18n().get(\'Enter code\') }}"\n        data-test="'+pT.codeInput+'"\n      />\n      </div>\n      <div class="amplify-form-row" *ngIf="code_sent">\n      <label class="amplify-input-label" for="password">\n        {{ this.amplifyService.i18n().get(\'New Password *\') }}\n      </label>\n      <input #password\n        (keyup)="setPassword(password.value)"\n        (keyup.enter)="onSubmit()"\n        class="amplify-form-input"\n        type="password"\n        autocomplete="off"\n        placeholder="{{ this.amplifyService.i18n().get(\'Password\') }}"\n        data-test="'+pT.newPasswordInput+'"\n      />\n      </div>\n      <div class="amplify-form-actions">\n        <div class="amplify-form-cell-right">\n          <button class="amplify-form-button"\n            *ngIf="!code_sent"\n            (click)="onSend()"\n            data-test="'+pT.sendCodeButton+'"\n            >\n              {{ this.amplifyService.i18n().get(\'Submit\') }}</button>\n          <button class="amplify-form-button"\n            *ngIf="code_sent"\n            (click)="onSubmit()"\n            data-test="'+pT.submitButton+'"\n            >\n              {{ this.amplifyService.i18n().get(\'Verify\') }}</button>\n        </div>\n        <div class="amplify-form-cell-left">\n          <div class="amplify-form-actions-left">\n            <a\n              *ngIf="code_sent"\n              class="amplify-form-link"\n              (click)="onSend()"\n              data-test="'+pT.resendCodeLink+'"\n              >\n              {{ this.amplifyService.i18n().get(\'Resend Code\') }}\n            </a>\n            <a\n              *ngIf="!code_sent"\n              class="amplify-form-link"\n              (click)="onSignIn()"\n              data-test="'+pT.backToSignInLink+'"\n              >\n              {{ this.amplifyService.i18n().get(\'Back to Sign in\') }}\n            </a>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n  <div class="amplify-alert" *ngIf="errorMessage">\n    <div class="amplify-alert-body">\n      <span class="amplify-alert-icon">&#9888;</span>\n      <div class="amplify-alert-message">{{ this.amplifyService.i18n().get(errorMessage) }}</div>\n      <a class="amplify-alert-close" (click)="onAlertClose()">&times;</a>\n    </div>\n  </div>\n</div>\n',ak=(Object.defineProperty(uk.prototype,"data",{set:function(e){this._authState=e.authState,this._show="forgotPassword"===e.authState.state,this._usernameAttributes=e.usernameAttributes,this.hide=e.hide||this.hide,this.username=e.authState.user&&e.authState.user.username?e.authState.user.username:""},enumerable:!0,configurable:!0}),uk.prototype.shouldHide=function(t){return 0<this.hide.filter(function(e){return e===t}).length},Object.defineProperty(uk.prototype,"authState",{set:function(e){this._authState=e,this._show="forgotPassword"===e.state,this.email=e.user&&e.user.email?e.user.email:"",this.country_code=e.user&&e.user.contry_code?e.user.country_code:"1",this.local_phone_number=e.user&&e.user.local_phone_number?e.user.local_phone_number:"",this.username=e.user&&e.user.username?e.user.username:""},enumerable:!0,configurable:!0}),uk.prototype.ngOnInit=function(){if(!this.amplifyService.auth())throw new Error("Auth module not registered on AmplifyService provider")},Object.defineProperty(uk.prototype,"usernameAttributes",{set:function(e){this._usernameAttributes=e},enumerable:!0,configurable:!0}),uk.prototype.setCode=function(e){this.code=e},uk.prototype.setPassword=function(e){this.password=e},uk.prototype.getforgotPwUsername=function(){switch(this._usernameAttributes){case OT.EMAIL:return this.email;case OT.PHONE_NUMBER:return ST(this.country_code,this.local_phone_number);default:return this.username}},uk.prototype.onSend=function(){var t=this,e=this.getforgotPwUsername();e?this.amplifyService.auth().forgotPassword(e).then(function(){t.code_sent=!0}).catch(function(e){t._setError(e),t.code_sent=!1}):this.errorMessage="Username cannot be empty"},uk.prototype.onSubmit=function(){var t=this;this.amplifyService.auth().forgotPasswordSubmit(this.getforgotPwUsername(),this.code,this.password).then(function(){var e={username:t.username};t.onAlertClose(),t.amplifyService.setAuthState({state:"signIn",user:e})}).catch(function(e){return t._setError(e)})},uk.prototype.onSignIn=function(){this.onAlertClose(),this.amplifyService.setAuthState({state:"signIn",user:null})},uk.prototype.onAlertClose=function(){this._setError(null)},uk.prototype._setError=function(e){this.errorMessage=e?e.message||e:null},uk.prototype.getUsernameLabel=function(){return wT[this._usernameAttributes]||this._usernameAttributes},uk.prototype.onUsernameFieldChanged=function(e){this.email=e.email||this.email,this.username=e.username||this.username,this.country_code=e.country_code||this.country_code,this.local_phone_number=e.local_phone_number||this.local_phone_number},uk.decorators=[{type:f.Component,args:[{selector:"amplify-auth-forgot-password-core",template:lT}]}],uk.ctorParameters=function(){return[{type:BO,decorators:[{type:f.Inject,args:[BO]}]}]},uk.propDecorators={data:[{type:f.Input}],hide:[{type:f.Input}],authState:[{type:f.Input}],usernameAttributes:[{type:f.Input}]},uk);function uk(e){this.amplifyService=e,this._usernameAttributes="username",this.code_sent=!1,this.country_code="1",this.hide=[],this.logger=this.amplifyService.logger("ForgotPasswordComponent")}var ck,lk,sT=(ck=function(e,t){return(ck=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}ck(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),iT='\n<div\n  class="amplify-authenticator amplify-authenticator-ionic"\n  *ngIf="_show"\n  data-test="'+pT.section+'"\n  >\n  <div class="amplify-form-body" data-test="'+pT.bodySection+'">\n  <div\n    class="amplify-form-header amplify-form-header-ionic"\n    data-test="'+pT.headerSection+'"\n    >\n    {{ this.amplifyService.i18n().get(\'Reset your password\') }}\n  </div>\n  <div class="amplify-form-text" *ngIf="!code_sent">\n    {{ this.amplifyService.i18n().get(\'You will receive a verification code to reset your password\') }}\n  </div>\n\n  <ion-list>\n    <amplify-auth-username-field-ionic\n      [usernameAttributes]="_usernameAttributes"\n      (usernameFieldChanged)="onUsernameFieldChanged($event)"\n    ></amplify-auth-username-field-ionic>\n    <ion-item lines="none" *ngIf="code_sent">\n      <ion-label class="amplify-input-label amplify-input-label-ionic" position="stacked">\n        {{ this.amplifyService.i18n().get(\'Code *\') }}\n      </ion-label>\n      <ion-input\n        #code\n        type="text"\n        class="amplify-form-input"\n        (input)="setCode(code.value)"\n        data-test="'+pT.codeInput+'"\n      ></ion-input>\n    </ion-item>\n    <ion-item lines="none" *ngIf="code_sent">\n      <ion-label class="amplify-input-label amplify-input-label-ionic" position="stacked">\n        {{ this.amplifyService.i18n().get(\'Password *\') }}\n      </ion-label>\n      <ion-input\n        #password\n        type="password"\n        class="amplify-form-input"\n        (input)="setPassword(password.value)"\n        (keyup.enter)="onSubmit()"\n        data-test="'+pT.newPasswordInput+'"\n      ></ion-input>\n    </ion-item>\n  </ion-list>\n  <div class="amplify-form-actions">\n    <div>\n      <ion-button expand="block" color="primary"\n        (click)="onSend()"\n        *ngIf="!code_sent"\n        data-test="'+pT.submitButton+'"\n      >\n        {{ this.amplifyService.i18n().get(\'Submit\') }}</ion-button>\n      <ion-button expand="block" color="primary"\n      *ngIf="code_sent"\n      (click)="onSubmit()"\n      >{{ this.amplifyService.i18n().get(\'Verify\') }}</ion-button>\n    </div>\n    <div class="amplify-form-row">\n      <div class="amplify-form-signup">\n        {{ this.amplifyService.i18n().get(\'Have an account?\') }}\n        <a class="amplify-form-link" (click)="onSignIn()">\n          {{ this.amplifyService.i18n().get(\'Sign In\') }}\n        </a>\n      </div>\n      <div class="amplify-form-signup">\n        {{ this.amplifyService.i18n().get(\'Lost your code?\') }}\n        <a\n          class="amplify-form-link"\n          (click)="onSend()"\n          data-test="'+pT.resendCodeLink+'"\n          >\n          {{ this.amplifyService.i18n().get(\'Resend\') }}\n        </a>\n      </div>\n    </div>\n  </div>\n  </div>\n  <div class="amplify-alert" *ngIf="errorMessage">\n    <div class="amplify-alert-body">\n      <span class="amplify-alert-icon">&#9888;</span>\n      <div class="amplify-alert-message">{{ this.amplifyService.i18n().get(errorMessage) }}</div>\n      <a class="amplify-alert-close" (click)="onAlertClose()">&times;</a>\n    </div>\n  </div>\n\n</div>\n',pk=(sT(dk,lk=ak),dk.prototype.onCodeChange=function(e){this.country_code=e},dk.prototype.onNumberChange=function(e){this.local_phone_number=e},dk.prototype.setUsername=function(e){this.username=e},dk.prototype.setEmail=function(e){this.email=e},dk.decorators=[{type:f.Component,args:[{selector:"amplify-auth-forgot-password-ionic",template:iT}]}],dk.ctorParameters=function(){return[{type:BO,decorators:[{type:f.Inject,args:[BO]}]}]},dk);function dk(e){var t=lk.call(this,e)||this;return t.amplifyService=e,t}fk.prototype.ngOnInit=function(){this.loadComponent()},fk.prototype.ngOnDestroy=function(){},fk.prototype.loadComponent=function(){var e=this.framework&&"ionic"===this.framework.toLowerCase()?new So(pk,{authState:this.authState,hide:this.hide,usernameAttributes:this.usernameAttributes}):new So(ak,{authState:this.authState,hide:this.hide,usernameAttributes:this.usernameAttributes}),t=this.componentFactoryResolver.resolveComponentFactory(e.component),n=this.componentHost.viewContainerRef;n.clear(),n.createComponent(t).instance.data=e.data},fk.decorators=[{type:f.Component,args:[{selector:"amplify-auth-forgot-password",template:"\n\t\t<div>\n\t\t\t<ng-template component-host></ng-template>\n\t\t</div>\n\t"}]}],fk.ctorParameters=function(){return[{type:f.ComponentFactoryResolver}]},fk.propDecorators={framework:[{type:f.Input}],authState:[{type:f.Input}],usernameAttributes:[{type:f.Input}],hide:[{type:f.Input}],componentHost:[{type:f.ViewChild,args:[dn]}]},FP=fk;function fk(e){this.componentFactoryResolver=e,this.usernameAttributes="username",this.hide=[]}var hk=function(){return(hk=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},cT='\n<div class="amplify-amplify-form-row amplify-signin-username">\n    <div *ngIf="this._usernameAttributes === \'email\'">\n        <label class="amplify-input-label" for="emailField"> {{ this.amplifyService.i18n().get(\'Email\') }} *</label>\n        <input\n            #emailField\n            class="amplify-form-input"\n            type="email"\n            placeholder="{{ this.amplifyService.i18n().get(this.getPlaceholder()) }}"\n            (keyup)="setEmail($event.target.value)"\n            data-test="'+aT.emailInput+'"\n        />\n    </div>\n    <div *ngIf="this._usernameAttributes === \'phone_number\'">\n        <amplify-auth-phone-field-core\n            (phoneFieldChanged)="onPhoneFieldChanged($event)"\n        ></amplify-auth-phone-field-core>\n    </div>\n    <div *ngIf="this._usernameAttributes !== \'email\' && this._usernameAttributes !== \'phone_number\'">\n        <label class="amplify-input-label" for="usernameField"> {{ this.amplifyService.i18n().get(getUsernameLabel()) }} *</label>\n        <input\n            #usernameField\n            class="amplify-form-input"\n            type="text"\n            value="{{this.username}}"\n            placeholder="{{ this.amplifyService.i18n().get(this.getPlaceholder()) }}"\n            (keyup)="setUsername($event.target.value)"\n            data-test="'+aT.usernameInput+'"\n        />\n    </div>\n</div>\n',uT=(Object.defineProperty(gk.prototype,"data",{set:function(e){this._usernameAttributes=e.usernameAttributes,this._placeholder=e.placeholder},enumerable:!0,configurable:!0}),Object.defineProperty(gk.prototype,"usernameAttributes",{set:function(e){this._usernameAttributes=e},enumerable:!0,configurable:!0}),Object.defineProperty(gk.prototype,"placeholder",{set:function(e){this._placeholder=e},enumerable:!0,configurable:!0}),gk.prototype.ngOnInit=function(){var e;window&&window.location&&window.location.search&&"email"!==this._usernameAttributes&&"phone_number"!==this._usernameAttributes&&(e=(e=new URLSearchParams(window.location.search))?e.get("username"):void 0,this.setUsername(e),this.username=e)},gk.prototype.ngOnDestroy=function(){},gk.prototype.setUsername=function(e){this.usernameFieldChanged.emit({username:e})},gk.prototype.setEmail=function(e){this.usernameFieldChanged.emit({email:e})},gk.prototype.getUsernameLabel=function(){return wT[this._usernameAttributes]||this._usernameAttributes},gk.prototype.getPlaceholder=function(){return this.amplifyService.i18n().get(""+this.getUsernameLabel()||this._placeholder)},gk.prototype.onPhoneFieldChanged=function(e){this.usernameFieldChanged.emit(hk({},e))},gk.decorators=[{type:f.Component,args:[{selector:"amplify-auth-username-field-core",template:cT}]}],gk.ctorParameters=function(){return[{type:BO,decorators:[{type:f.Inject,args:[BO]}]}]},gk.propDecorators={data:[{type:f.Input}],usernameAttributes:[{type:f.Input}],placeholder:[{type:f.Input}],usernameFieldChanged:[{type:f.Output}]},gk);function gk(e){this.amplifyService=e,this._usernameAttributes=OT.USERNAME,this._placeholder="",this.usernameFieldChanged=new f.EventEmitter,this.onPhoneFieldChanged=this.onPhoneFieldChanged.bind(this)}var mk=[{countryCode:"US",value:"1",label:"USA (+1)"},{countryCode:"GB",value:"44",label:"UK (+44)"},{countryCode:"DZ",value:"213",label:"Algeria (+213)"},{countryCode:"AD",value:"376",label:"Andorra (+376)"},{countryCode:"AO",value:"244",label:"Angola (+244)"},{countryCode:"AI",value:"1264",label:"Anguilla (+1264)"},{countryCode:"AG",value:"1268",label:"Antigua & Barbuda (+1268)"},{countryCode:"AR",value:"54",label:"Argentina (+54)"},{countryCode:"AM",value:"374",label:"Armenia (+374)"},{countryCode:"AW",value:"297",label:"Aruba (+297)"},{countryCode:"AU",value:"61",label:"Australia (+61)"},{countryCode:"AT",value:"43",label:"Austria (+43)"},{countryCode:"AZ",value:"994",label:"Azerbaijan (+994)"},{countryCode:"BS",value:"1242",label:"Bahamas (+1242)"},{countryCode:"BH",value:"973",label:"Bahrain (+973)"},{countryCode:"BD",value:"880",label:"Bangladesh (+880)"},{countryCode:"BB",value:"1246",label:"Barbados (+1246)"},{countryCode:"BY",value:"375",label:"Belarus (+375)"},{countryCode:"BE",value:"32",label:"Belgium (+32)"},{countryCode:"BZ",value:"501",label:"Belize (+501)"},{countryCode:"BJ",value:"229",label:"Benin (+229)"},{countryCode:"BM",value:"1441",label:"Bermuda (+1441)"},{countryCode:"BT",value:"975",label:"Bhutan (+975)"},{countryCode:"BO",value:"591",label:"Bolivia (+591)"},{countryCode:"BA",value:"387",label:"Bosnia Herzegovina (+387)"},{countryCode:"BW",value:"267",label:"Botswana (+267)"},{countryCode:"BR",value:"55",label:"Brazil (+55)"},{countryCode:"BN",value:"673",label:"Brunei (+673)"},{countryCode:"BG",value:"359",label:"Bulgaria (+359)"},{countryCode:"BF",value:"226",label:"Burkina Faso (+226)"},{countryCode:"BI",value:"257",label:"Burundi (+257)"},{countryCode:"KH",value:"855",label:"Cambodia (+855)"},{countryCode:"CM",value:"237",label:"Cameroon (+237)"},{countryCode:"CA",value:"1",label:"Canada (+1)"},{countryCode:"CV",value:"238",label:"Cape Verde Islands (+238)"},{countryCode:"KY",value:"1345",label:"Cayman Islands (+1345)"},{countryCode:"CF",value:"236",label:"Central African Republic (+236)"},{countryCode:"CL",value:"56",label:"Chile (+56)"},{countryCode:"CN",value:"86",label:"China (+86)"},{countryCode:"CO",value:"57",label:"Colombia (+57)"},{countryCode:"KM",value:"269",label:"Comoros (+269)"},{countryCode:"CG",value:"242",label:"Congo (+242)"},{countryCode:"CK",value:"682",label:"Cook Islands (+682)"},{countryCode:"CR",value:"506",label:"Costa Rica (+506)"},{countryCode:"HR",value:"385",label:"Croatia (+385)"},{countryCode:"CU",value:"53",label:"Cuba (+53)"},{countryCode:"CW",value:"599",label:"Curacao (+599)"},{countryCode:"CY",value:"90392",label:"Cyprus North (+90392)"},{countryCode:"CY",value:"357",label:"Cyprus South (+357)"},{countryCode:"CZ",value:"420",label:"Czech Republic (+420)"},{countryCode:"DK",value:"45",label:"Denmark (+45)"},{countryCode:"DJ",value:"253",label:"Djibouti (+253)"},{countryCode:"DM",value:"1809",label:"Dominica (+1809)"},{countryCode:"DO",value:"1809",label:"Dominican Republic (+1809)"},{countryCode:"EC",value:"593",label:"Ecuador (+593)"},{countryCode:"EG",value:"20",label:"Egypt (+20)"},{countryCode:"SV",value:"503",label:"El Salvador (+503)"},{countryCode:"GQ",value:"240",label:"Equatorial Guinea (+240)"},{countryCode:"ER",value:"291",label:"Eritrea (+291)"},{countryCode:"EE",value:"372",label:"Estonia (+372)"},{countryCode:"ET",value:"251",label:"Ethiopia (+251)"},{countryCode:"FK",value:"500",label:"Falkland Islands (+500)"},{countryCode:"FO",value:"298",label:"Faroe Islands (+298)"},{countryCode:"FJ",value:"679",label:"Fiji (+679)"},{countryCode:"FI",value:"358",label:"Finland (+358)"},{countryCode:"FR",value:"33",label:"France (+33)"},{countryCode:"GF",value:"594",label:"French Guiana (+594)"},{countryCode:"PF",value:"689",label:"French Polynesia (+689)"},{countryCode:"GA",value:"241",label:"Gabon (+241)"},{countryCode:"GM",value:"220",label:"Gambia (+220)"},{countryCode:"GE",value:"7880",label:"Georgia (+7880)"},{countryCode:"DE",value:"49",label:"Germany (+49)"},{countryCode:"GH",value:"233",label:"Ghana (+233)"},{countryCode:"GI",value:"350",label:"Gibraltar (+350)"},{countryCode:"GR",value:"30",label:"Greece (+30)"},{countryCode:"GL",value:"299",label:"Greenland (+299)"},{countryCode:"GD",value:"1473",label:"Grenada (+1473)"},{countryCode:"GP",value:"590",label:"Guadeloupe (+590)"},{countryCode:"GU",value:"671",label:"Guam (+671)"},{countryCode:"GT",value:"502",label:"Guatemala (+502)"},{countryCode:"GN",value:"224",label:"Guinea (+224)"},{countryCode:"GW",value:"245",label:"Guinea - Bissau (+245)"},{countryCode:"GY",value:"592",label:"Guyana (+592)"},{countryCode:"HT",value:"509",label:"Haiti (+509)"},{countryCode:"HN",value:"504",label:"Honduras (+504)"},{countryCode:"HK",value:"852",label:"Hong Kong (+852)"},{countryCode:"HU",value:"36",label:"Hungary (+36)"},{countryCode:"IS",value:"354",label:"Iceland (+354)"},{countryCode:"IN",value:"91",label:"India (+91)"},{countryCode:"ID",value:"62",label:"Indonesia (+62)"},{countryCode:"IR",value:"98",label:"Iran (+98)"},{countryCode:"IQ",value:"964",label:"Iraq (+964)"},{countryCode:"IE",value:"353",label:"Ireland (+353)"},{countryCode:"IL",value:"972",label:"Israel (+972)"},{countryCode:"IT",value:"39",label:"Italy (+39)"},{countryCode:"JM",value:"1876",label:"Jamaica (+1876)"},{countryCode:"JP",value:"81",label:"Japan (+81)"},{countryCode:"JO",value:"962",label:"Jordan (+962)"},{countryCode:"KZ",value:"7",label:"Kazakhstan (+7)"},{countryCode:"KE",value:"254",label:"Kenya (+254)"},{countryCode:"KI",value:"686",label:"Kiribati (+686)"},{countryCode:"KP",value:"850",label:"Korea North (+850)"},{countryCode:"KR",value:"82",label:"Korea South (+82)"},{countryCode:"KW",value:"965",label:"Kuwait (+965)"},{countryCode:"KG",value:"996",label:"Kyrgyzstan (+996)"},{countryCode:"LA",value:"856",label:"Laos (+856)"},{countryCode:"LV",value:"371",label:"Latvia (+371)"},{countryCode:"LB",value:"961",label:"Lebanon (+961)"},{countryCode:"LS",value:"266",label:"Lesotho (+266)"},{countryCode:"LR",value:"231",label:"Liberia (+231)"},{countryCode:"LY",value:"218",label:"Libya (+218)"},{countryCode:"LI",value:"417",label:"Liechtenstein (+417)"},{countryCode:"LT",value:"370",label:"Lithuania (+370)"},{countryCode:"LU",value:"352",label:"Luxembourg (+352)"},{countryCode:"MO",value:"853",label:"Macao (+853)"},{countryCode:"MK",value:"389",label:"Macedonia (+389)"},{countryCode:"MG",value:"261",label:"Madagascar (+261)"},{countryCode:"MW",value:"265",label:"Malawi (+265)"},{countryCode:"MY",value:"60",label:"Malaysia (+60)"},{countryCode:"MV",value:"960",label:"Maldives (+960)"},{countryCode:"ML",value:"223",label:"Mali (+223)"},{countryCode:"MT",value:"356",label:"Malta (+356)"},{countryCode:"MH",value:"692",label:"Marshall Islands (+692)"},{countryCode:"MQ",value:"596",label:"Martinique (+596)"},{countryCode:"MR",value:"222",label:"Mauritania (+222)"},{countryCode:"YT",value:"269",label:"Mayotte (+269)"},{countryCode:"MX",value:"52",label:"Mexico (+52)"},{countryCode:"FM",value:"691",label:"Micronesia (+691)"},{countryCode:"MD",value:"373",label:"Moldova (+373)"},{countryCode:"MC",value:"377",label:"Monaco (+377)"},{countryCode:"MN",value:"976",label:"Mongolia (+976)"},{countryCode:"MS",value:"1664",label:"Montserrat (+1664)"},{countryCode:"MA",value:"212",label:"Morocco (+212)"},{countryCode:"MZ",value:"258",label:"Mozambique (+258)"},{countryCode:"MN",value:"95",label:"Myanmar (+95)"},{countryCode:"NA",value:"264",label:"Namibia (+264)"},{countryCode:"NR",value:"674",label:"Nauru (+674)"},{countryCode:"NP",value:"977",label:"Nepal (+977)"},{countryCode:"NL",value:"31",label:"Netherlands (+31)"},{countryCode:"NC",value:"687",label:"New Caledonia (+687)"},{countryCode:"NZ",value:"64",label:"New Zealand (+64)"},{countryCode:"NI",value:"505",label:"Nicaragua (+505)"},{countryCode:"NE",value:"227",label:"Niger (+227)"},{countryCode:"NG",value:"234",label:"Nigeria (+234)"},{countryCode:"NU",value:"683",label:"Niue (+683)"},{countryCode:"NF",value:"672",label:"Norfolk Islands (+672)"},{countryCode:"NP",value:"670",label:"Northern Marianas (+670)"},{countryCode:"NO",value:"47",label:"Norway (+47)"},{countryCode:"OM",value:"968",label:"Oman (+968)"},{countryCode:"PW",value:"680",label:"Palau (+680)"},{countryCode:"PA",value:"507",label:"Panama (+507)"},{countryCode:"PG",value:"675",label:"Papua New Guinea (+675)"},{countryCode:"PY",value:"595",label:"Paraguay (+595)"},{countryCode:"PE",value:"51",label:"Peru (+51)"},{countryCode:"PH",value:"63",label:"Philippines (+63)"},{countryCode:"PL",value:"48",label:"Poland (+48)"},{countryCode:"PT",value:"351",label:"Portugal (+351)"},{countryCode:"PR",value:"1787",label:"Puerto Rico (+1787)"},{countryCode:"QA",value:"974",label:"Qatar (+974)"},{countryCode:"RE",value:"262",label:"Reunion (+262)"},{countryCode:"RO",value:"40",label:"Romania (+40)"},{countryCode:"RU",value:"7",label:"Russia (+7)"},{countryCode:"RW",value:"250",label:"Rwanda (+250)"},{countryCode:"SM",value:"378",label:"San Marino (+378)"},{countryCode:"ST",value:"239",label:"Sao Tome & Principe (+239)"},{countryCode:"SA",value:"966",label:"Saudi Arabia (+966)"},{countryCode:"SN",value:"221",label:"Senegal (+221)"},{countryCode:"CS",value:"381",label:"Serbia (+381)"},{countryCode:"SC",value:"248",label:"Seychelles (+248)"},{countryCode:"SL",value:"232",label:"Sierra Leone (+232)"},{countryCode:"SX",value:"1",label:"Sint Maarten (+1)"},{countryCode:"SG",value:"65",label:"Singapore (+65)"},{countryCode:"SK",value:"421",label:"Slovak Republic (+421)"},{countryCode:"SI",value:"386",label:"Slovenia (+386)"},{countryCode:"SB",value:"677",label:"Solomon Islands (+677)"},{countryCode:"SO",value:"252",label:"Somalia (+252)"},{countryCode:"ZA",value:"27",label:"South Africa (+27)"},{countryCode:"ES",value:"34",label:"Spain (+34)"},{countryCode:"LK",value:"94",label:"Sri Lanka (+94)"},{countryCode:"SH",value:"290",label:"St. Helena (+290)"},{countryCode:"KN",value:"1869",label:"St. Kitts (+1869)"},{countryCode:"SC",value:"1758",label:"St. Lucia (+1758)"},{countryCode:"SD",value:"249",label:"Sudan (+249)"},{countryCode:"SR",value:"597",label:"Suriname (+597)"},{countryCode:"SZ",value:"268",label:"Swaziland (+268)"},{countryCode:"SE",value:"46",label:"Sweden (+46)"},{countryCode:"CH",value:"41",label:"Switzerland (+41)"},{countryCode:"SI",value:"963",label:"Syria (+963)"},{countryCode:"TW",value:"886",label:"Taiwan (+886)"},{countryCode:"TJ",value:"7",label:"Tajikstan (+7)"},{countryCode:"TH",value:"66",label:"Thailand (+66)"},{countryCode:"TG",value:"228",label:"Togo (+228)"},{countryCode:"TO",value:"676",label:"Tonga (+676)"},{countryCode:"TT",value:"1868",label:"Trinidad & Tobago (+1868)"},{countryCode:"TN",value:"216",label:"Tunisia (+216)"},{countryCode:"TR",value:"90",label:"Turkey (+90)"},{countryCode:"TM",value:"7",label:"Turkmenistan (+7)"},{countryCode:"TM",value:"993",label:"Turkmenistan (+993)"},{countryCode:"TC",value:"1649",label:"Turks & Caicos Islands (+1649)"},{countryCode:"TV",value:"688",label:"Tuvalu (+688)"},{countryCode:"UG",value:"256",label:"Uganda (+256)"},{countryCode:"UA",value:"380",label:"Ukraine (+380)"},{countryCode:"AE",value:"971",label:"United Arab Emirates (+971)"},{countryCode:"UY",value:"598",label:"Uruguay (+598)"},{countryCode:"UZ",value:"7",label:"Uzbekistan (+7)"},{countryCode:"VU",value:"678",label:"Vanuatu (+678)"},{countryCode:"VA",value:"379",label:"Vatican City (+379)"},{countryCode:"VE",value:"58",label:"Venezuela (+58)"},{countryCode:"VN",value:"84",label:"Vietnam (+84)"},{countryCode:"VG",value:"84",label:"Virgin Islands - British (+1284)"},{countryCode:"VI",value:"84",label:"Virgin Islands - US (+1340)"},{countryCode:"WF",value:"681",label:"Wallis and Futuna (+681)"},{countryCode:"YE",value:"969",label:"Yemen (North) (+969)"},{countryCode:"YE",value:"967",label:"Yemen (South) (+967)"},{countryCode:"ZM",value:"260",label:"Zambia (+260)"},{countryCode:"ZW",value:"263",label:"Zimbabwe (+263)"}],oT='\n<div>\n    <label class="amplify-input-label" for="localPhoneNumberField">\n        {{ this.amplifyService.i18n().get(this._label) }}\n        <span *ngIf="_required">*</span>\n    </label>\n    <div class="amplify-input-group">\n        <div class="amplify-input-group-item">\n            <select \n            #countryCodeField\n            name="countryCode"\n            class="amplify-select-phone-country"\n            [(ngModel)]="_country_code"\n            (change)="setCountryCode($event.target.value)"\n            data-test="'+aT.dialCodeSelect+'"\n            >\n            <option *ngFor="let country of _countries"\n                value={{country.value}}>\n                {{country.label}}\n            </option>\n            </select>\n        </div>\n        <div class="amplify-input-group-item">\n            <input\n                #localPhoneNumberField\n                class="amplify-form-input"\n                placeholder="{{ this.amplifyService.i18n().get(this.getPlaceholder()) }}"\n                name="local_phone_number"\n                type="tel"\n                (keyup)="setLocalPhoneNumber($event.target.value)"\n                data-test="'+aT.phoneNumberInput+'"\n            />\n        </div>\n    </div>\n</div>\n',AO=(Object.defineProperty(yk.prototype,"data",{set:function(e){this._placeholder=e.placeholder||this._placeholder,this._label=e.label||this._label,this._country_code=e.defaultCountryCode||this._country_code,this._required=void 0===e.required?this._required:e.required},enumerable:!0,configurable:!0}),Object.defineProperty(yk.prototype,"placeholder",{set:function(e){this._placeholder=e},enumerable:!0,configurable:!0}),Object.defineProperty(yk.prototype,"label",{set:function(e){this._label=e},enumerable:!0,configurable:!0}),Object.defineProperty(yk.prototype,"required",{set:function(e){this._required=e},enumerable:!0,configurable:!0}),Object.defineProperty(yk.prototype,"defaultCountryCode",{set:function(e){this._country_code=e},enumerable:!0,configurable:!0}),yk.prototype.ngOnInit=function(){},yk.prototype.ngOnDestroy=function(){},yk.prototype.setCountryCode=function(e){this._country_code=e,this.phoneFieldChanged.emit({country_code:this._country_code,local_phone_number:this._local_phone_number})},yk.prototype.setLocalPhoneNumber=function(e){this._local_phone_number=e,this.phoneFieldChanged.emit({country_code:this._country_code,local_phone_number:this._local_phone_number})},yk.prototype.getPlaceholder=function(){return this.amplifyService.i18n().get("Enter your phone number")},yk.decorators=[{type:f.Component,args:[{selector:"amplify-auth-phone-field-core",template:oT}]}],yk.ctorParameters=function(){return[{type:BO,decorators:[{type:f.Inject,args:[BO]}]}]},yk.propDecorators={data:[{type:f.Input}],placeholder:[{type:f.Input}],label:[{type:f.Input}],required:[{type:f.Input}],defaultCountryCode:[{type:f.Input}],phoneFieldChanged:[{type:f.Output}]},yk);function yk(e){this.amplifyService=e,this._placeholder="",this._label="Phone Number",this._required=!0,this._country_code="1",this._local_phone_number="",this.phoneFieldChanged=new f.EventEmitter,this._countries=mk}var vk=(bk.prototype.ngOnInit=function(){if(!this.amplifyService.storage())throw new Error("Storage module not registered on AmplifyService provider");this.getList(this._path,this._options)},bk.prototype.onImageSelected=function(e){this.selected.emit(e)},Object.defineProperty(bk.prototype,"data",{set:function(e){e.path&&(this._path=e.path,this._options=e.options)},enumerable:!0,configurable:!0}),Object.defineProperty(bk.prototype,"path",{set:function(e){this._path=e},enumerable:!0,configurable:!0}),Object.defineProperty(bk.prototype,"options",{set:function(e){this._options=e},enumerable:!0,configurable:!0}),bk.prototype.getList=function(e,t){var n=this;e&&this.amplifyService.storage().list(e,t).then(function(e){n.list=e.map(function(e){return{path:e.key}})}).catch(function(e){return console.error(e)})},bk.decorators=[{type:f.Component,args:[{selector:"amplify-s3-album-core",template:'\n<div class="amplify-album">\n  <div class="amplify-album-container">\n    <amplify-s3-image-core\n      class="amplify-image-container"\n      *ngFor="let item of list"\n      path="{{item.path}}"\n      [options]="_options"\n      (selected)="onImageSelected($event)"\n    ></amplify-s3-image-core>\n  </div>\n</div>\n'}]}],bk.ctorParameters=function(){return[{type:BO}]},bk.propDecorators={selected:[{type:f.Output}],data:[{type:f.Input}],path:[{type:f.Input}],options:[{type:f.Input}]},bk);function bk(e){this.amplifyService=e,this._options={},this.selected=new f.EventEmitter,this.logger=this.amplifyService.logger("S3AlbumComponent")}var Sk,wk,lT=(Sk=function(e,t){return(Sk=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}Sk(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),Ck=(lT(_k,wk=vk),_k.decorators=[{type:f.Component,args:[{selector:"amplify-s3-album-ionic",template:'\n<div class="amplify-album">\n  <div class="amplify-album-container">\n    <amplify-s3-image-core\n      class="amplify-image-container"\n      *ngFor="let item of list"\n      path="{{item.path}}"\n      (selected)="onImageSelected($event)"\n    ></amplify-s3-image-core>\n  </div>\n</div>\n'}]}],_k.ctorParameters=function(){return[{type:BO}]},_k);function _k(e){var t=wk.call(this,e)||this;return t.amplifyService=e,t}Ek.prototype.ngOnInit=function(){this.loadComponent()},Ek.prototype.ngOnDestroy=function(){},Ek.prototype.loadComponent=function(){var t=this,e=this.framework&&"ionic"===this.framework.toLowerCase()?new So(Ck,{path:this.path,options:this.options}):new So(vk,{path:this.path,options:this.options}),n=this.componentFactoryResolver.resolveComponentFactory(e.component),r=this.componentHost.viewContainerRef;r.clear();n=r.createComponent(n);n.instance.data=e.data,n.instance.selected.subscribe(function(e){t.selected.emit(e)})},Ek.decorators=[{type:f.Component,args:[{selector:"amplify-s3-album",template:"\n\t\t<div>\n\t\t\t<ng-template component-host></ng-template>\n\t\t</div>\n\t"}]}],Ek.ctorParameters=function(){return[{type:f.ComponentFactoryResolver}]},Ek.propDecorators={framework:[{type:f.Input}],path:[{type:f.Input}],options:[{type:f.Input}],selected:[{type:f.Output}],componentHost:[{type:f.ViewChild,args:[dn]}]},pT=Ek;function Ek(e){this.componentFactoryResolver=e,this.selected=new f.EventEmitter}var Ik=(Object.defineProperty(Ak.prototype,"data",{set:function(e){e.path&&(this._path=e.path,this._options=e.options)},enumerable:!0,configurable:!0}),Object.defineProperty(Ak.prototype,"path",{set:function(e){this._path=e},enumerable:!0,configurable:!0}),Object.defineProperty(Ak.prototype,"options",{set:function(e){this._options=e},enumerable:!0,configurable:!0}),Ak.prototype.ngOnInit=function(){if(this._path){if(!this.amplifyService.storage())throw new Error("Storage module not registered on AmplifyService provider");this.getImage(this._path,this._options)}},Ak.prototype.onImageClicked=function(){this.selected.emit(this.url)},Ak.prototype.getImage=function(e,t){var n=this;this.amplifyService.storage().get(e,t).then(function(e){return n.url=e}).catch(function(e){return console.error(e)})},Ak.decorators=[{type:f.Component,args:[{selector:"amplify-s3-image-core",template:'\n  <img\n    class="amplify-image"\n    (click)="onImageClicked()"\n    src="{{url}}"\n  />\n'}]}],Ak.ctorParameters=function(){return[{type:BO}]},Ak.propDecorators={selected:[{type:f.Output}],data:[{type:f.Input}],path:[{type:f.Input}],options:[{type:f.Input}]},Ak);function Ak(e){this.amplifyService=e,this._options={},this.selected=new f.EventEmitter,this.logger=this.amplifyService.logger("S3ImageComponent")}var Pk,Ok,sT=(Pk=function(e,t){return(Pk=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}Pk(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),Tk=(sT(kk,Ok=Ik),kk.decorators=[{type:f.Component,args:[{selector:"amplify-s3-image-ionic",template:'\n  <img\n    class="amplify-image"\n    (click)="onImageClicked()"\n    src="{{url}}"\n  />\n'}]}],kk.ctorParameters=function(){return[{type:BO}]},kk);function kk(e){var t=Ok.call(this,e)||this;return t.amplifyService=e,t}xk.prototype.ngOnInit=function(){this.loadComponent()},xk.prototype.ngOnDestroy=function(){},xk.prototype.loadComponent=function(){var t=this,e=this.framework&&"ionic"===this.framework.toLowerCase()?new So(Tk,{path:this.path,options:this.options}):new So(Ik,{path:this.path,options:this.options}),n=this.componentFactoryResolver.resolveComponentFactory(e.component),r=this.componentHost.viewContainerRef;r.clear();n=r.createComponent(n);n.instance.data=e.data,n.instance.selected.subscribe(function(e){t.selected.emit(e)})},xk.decorators=[{type:f.Component,args:[{selector:"amplify-s3-image",template:"\n\t\t<div>\n\t\t\t<ng-template component-host></ng-template>\n\t\t</div>\n\t"}]}],xk.ctorParameters=function(){return[{type:f.ComponentFactoryResolver}]},xk.propDecorators={framework:[{type:f.Input}],path:[{type:f.Input}],options:[{type:f.Input}],selected:[{type:f.Output}],componentHost:[{type:f.ViewChild,args:[dn]}]},iT=xk;function xk(e){this.componentFactoryResolver=e,this.selected=new f.EventEmitter}var Nk=(Object.defineProperty(Lk.prototype,"url",{set:function(e){this.photoUrl=e,this.hasPhoto=!0},enumerable:!0,configurable:!0}),Object.defineProperty(Lk.prototype,"storageOptions",{set:function(e){this._storageOptions=Object.assign(this._storageOptions,e)},enumerable:!0,configurable:!0}),Object.defineProperty(Lk.prototype,"path",{set:function(e){this.s3ImagePath=e},enumerable:!0,configurable:!0}),Object.defineProperty(Lk.prototype,"data",{set:function(e){this.photoUrl=e.url,this.s3ImagePath=e.path,this._storageOptions=Object.assign(this._storageOptions,e.storageOptions),this.hasPhoto=!0},enumerable:!0,configurable:!0}),Lk.prototype.ngOnInit=function(){if(!this.amplifyService.storage())throw new Error("Storage module not registered on AmplifyService provider")},Lk.prototype.pick=function(e){var t,n=e.target.files[0];n&&(this._storageOptions.contentType||(this._storageOptions.contentType=n.type),n.name,n.size,n.type,this.picked.emit(n),this.s3ImagePath=this.s3ImagePath+"/"+n.name,this.s3ImageFile=n,t=this,(e=new FileReader).onload=function(e){e=e.target.result;t.photoUrl=e,t.hasPhoto=!0,t.loaded.emit(e)},e.readAsDataURL(n))},Lk.prototype.uploadFile=function(){var t=this;this.uploading=!0,this.amplifyService.storage().put(this.s3ImagePath,this.s3ImageFile,this._storageOptions).then(function(e){t.uploaded.emit(e),t.completeFileUpload()}).catch(function(e){t.completeFileUpload(e)})},Lk.prototype.completeFileUpload=function(e){if(e)return this._setError(e);this.s3ImagePath="",this.photoUrl=null,this.s3ImageFile=null,this.uploading=!1},Lk.prototype.onPhotoError=function(){this.hasPhoto=!1},Lk.prototype.onAlertClose=function(){this._setError(null)},Lk.prototype._setError=function(e){this.errorMessage=e?e.message||e:null},Lk.decorators=[{type:f.Component,args:[{selector:"amplify-photo-picker-core",template:'\n<div class="amplify-photo-picker">\n<div class="amplify-photo-picker-container">\n  <div class="amplify-form-header">Select Photos</div>\n  <div class="amplify-photo-picker-upload" *ngIf="!hasPhoto"></div>\n  <div class="amplify-photo-picker-preview">\n    <img\n      class="amplify-photo-picker-preview"\n      src="{{photoUrl}}"\n      *ngIf="hasPhoto"\n      (error)="onPhotoError()"\n    />\n  </div>\n  <div class="amplify-upload-input">\n    <input type="file" \n      accept="image/*"\n      (change)="pick($event)"/>\n      <button \n        *ngIf="hasPhoto" \n        class="amplify-form-button amplify-upload-button" \n        (click)="uploadFile()">\n        Upload Photo\n      </button>\n  </div>\n</div>\n<div class="amplify-alert" *ngIf="errorMessage">\n  <div class="amplify-alert-body">\n    <span class="amplify-alert-icon">&#9888;</span>\n    <div class="amplify-alert-message">{{ errorMessage }}</div>\n    <a class="amplify-alert-close" (click)="onAlertClose()">&times;</a>\n  </div>\n</div>\n</div>\n'}]}],Lk.ctorParameters=function(){return[{type:BO,decorators:[{type:f.Inject,args:[BO]}]}]},Lk.propDecorators={url:[{type:f.Input}],storageOptions:[{type:f.Input}],path:[{type:f.Input}],data:[{type:f.Input}],picked:[{type:f.Output}],loaded:[{type:f.Output}],uploaded:[{type:f.Output}]},Lk);function Lk(e){this.amplifyService=e,this.hasPhoto=!1,this.uploading=!1,this.s3ImageFile=null,this.s3ImagePath="",this._storageOptions={},this.picked=new f.EventEmitter,this.loaded=new f.EventEmitter,this.uploaded=new f.EventEmitter,this.logger=this.amplifyService.logger("PhotoPickerComponent")}var Mk,Rk,cT=(Mk=function(e,t){return(Mk=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}Mk(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),Uk=(cT(Dk,Rk=Nk),Dk.decorators=[{type:f.Component,args:[{selector:"amplify-photo-picker-ionic",template:'\n<div class="amplify-photo-picker">\n<div class="amplify-photo-picker-container">\n  <div class="amplify-form-header">Select Photos</div>\n  <div class="amplify-photo-picker-upload" *ngIf="!hasPhoto"></div>\n  <div class="amplify-photo-picker-preview">\n    <img\n      class="amplify-photo-picker-preview"\n      src="{{photoUrl}}"\n      *ngIf="hasPhoto"\n      (error)="onPhotoError()"\n    />\n  </div>\n  <div class="amplify-upload-input">\n    <input type="file" \n      accept="image/*"\n      (change)="pick($event)"/>\n      <button \n        *ngIf="hasPhoto" \n        class="amplify-form-button amplify-upload-button" \n        (click)="uploadFile()">\n        Upload Photo\n      </button>\n  </div>\n</div>\n<div class="amplify-alert" *ngIf="errorMessage">\n  <div class="amplify-alert-body">\n    <span class="amplify-alert-icon">&#9888;</span>\n    <div class="amplify-alert-message">{{ errorMessage }}</div>\n    <a class="amplify-alert-close" (click)="onAlertClose()">&times;</a>\n  </div>\n</div>\n</div>\n'}]}],Dk.ctorParameters=function(){return[{type:BO,decorators:[{type:f.Inject,args:[BO]}]}]},Dk);function Dk(e){var t=Rk.call(this,e)||this;return t.amplifyService=e,t}Fk.prototype.ngOnInit=function(){this.loadComponent()},Fk.prototype.ngOnDestroy=function(){},Fk.prototype.loadComponent=function(){var t=this,e=this.framework&&"ionic"===this.framework.toLowerCase()?new So(Uk,{url:this.url,path:this.path,storageOptions:this.storageOptions}):new So(Nk,{url:this.url,path:this.path,storageOptions:this.storageOptions}),n=this.componentFactoryResolver.resolveComponentFactory(e.component),r=this.componentHost.viewContainerRef;r.clear();n=r.createComponent(n);n.instance.data=e.data,n.instance.picked.subscribe(function(e){t.picked.emit(e)}),n.instance.loaded.subscribe(function(e){t.loaded.emit(e)}),n.instance.uploaded.subscribe(function(e){t.uploaded.emit(e)})},Fk.decorators=[{type:f.Component,args:[{selector:"amplify-photo-picker",template:'\n\t\t<div class="amplify-component">\n\t\t\t<ng-template component-host></ng-template>\n\t\t</div>\n\t'}]}],Fk.ctorParameters=function(){return[{type:f.ComponentFactoryResolver}]},Fk.propDecorators={framework:[{type:f.Input}],url:[{type:f.Input}],path:[{type:f.Input}],storageOptions:[{type:f.Input}],picked:[{type:f.Output}],loaded:[{type:f.Output}],uploaded:[{type:f.Output}],componentHost:[{type:f.ViewChild,args:[dn]}]},oT=Fk;function Fk(e){this.componentFactoryResolver=e,this.picked=new f.EventEmitter,this.loaded=new f.EventEmitter,this.uploaded=new f.EventEmitter}var jk=function(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{o(u.next(e))}catch(e){t(e)}}function i(e){try{o(u.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,i)}o((u=u.apply(e,s||[])).next())})},Bk=function(n,r){var i,o,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,o&&(s=2&t[0]?o.return:t[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,t[1])).done)return s;switch(o=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,o=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],o=0}finally{i=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}};require("./aws-lex-audio.js");var Vk={INITIAL:{MESSAGE:"Type your message or click  🎤",ICON:"🎤"},LISTENING:{MESSAGE:"Listening... click 🔴 again to cancel",ICON:"🔴"},SENDING:{MESSAGE:"Please wait...",ICON:"🔊"},SPEAKING:{MESSAGE:"Speaking...",ICON:"..."}},zk={silenceDetectionConfig:{time:2e3,amplitude:.2}},qk=(Object.defineProperty(Kk.prototype,"data",{set:function(e){this.botName=e.bot,this.chatTitle=e.title,this.clearComplete=e.clearComplete,this.conversationModeOn=!M.isUndefined(e.conversationModeOn)&&e.conversationModeOn,this.voiceEnabled=!M.isUndefined(e.voiceEnabled)&&e.voiceEnabled,this.textEnabled=!!M.isUndefined(e.textEnabled)||e.textEnabled,this.voiceConfig=e.voiceConfig||this.voiceConfig,this.performOnComplete=this.performOnComplete.bind(this),this.amplifyService.interactions().onComplete(this.botName,this.performOnComplete),!this.textEnabled&&this.voiceEnabled&&(this.currentVoiceState="Click the mic button",Vk.INITIAL.MESSAGE="Click the mic button"),!this.voiceEnabled&&this.textEnabled&&(this.currentVoiceState="Type a message",Vk.INITIAL.MESSAGE="Type a message"),this.voiceEnabled&&(this.audioControl=new LexAudio.audioControl)},enumerable:!0,configurable:!0}),Object.defineProperty(Kk.prototype,"bot",{set:function(e){this.botName=e,this.performOnComplete=this.performOnComplete.bind(this),this.amplifyService.interactions().onComplete(e,this.performOnComplete)},enumerable:!0,configurable:!0}),Object.defineProperty(Kk.prototype,"title",{set:function(e){this.chatTitle=e},enumerable:!0,configurable:!0}),Object.defineProperty(Kk.prototype,"clearOnComplete",{set:function(e){this.clearComplete=e},enumerable:!0,configurable:!0}),Kk.prototype.ngOnInit=function(){if(!this.amplifyService.interactions())throw new Error("Interactions module not registered on AmplifyService provider")},Kk.prototype.performOnComplete=function(e){this.complete.emit(e),this.clearComplete&&(this.messages=[])},Kk.prototype.onInputChange=function(e){this.inputText=e},Kk.prototype.onSubmit=function(e){var t,n=this;this.inputText&&(t={me:this.inputText,meSentTime:(new Date).toLocaleTimeString(),bot:"",botSentTime:""},this.amplifyService.interactions().send(this.botName,this.inputText).then(function(e){n.inputText="",t.bot=e.message,t.botSentTime=(new Date).toLocaleTimeString(),n.messages.push(t)}).catch(function(e){return n.logger.error(e)}))},Kk.prototype.reset=function(){this.audioControl.clear(),this.inputText="",this.currentVoiceState=Vk.INITIAL.MESSAGE,this.inputDisabled=!1,this.micText=Vk.INITIAL.ICON,this.continueConversation=!1,this.micButtonDisabled=!1,this.ref.detectChanges()},Kk.prototype.onError=function(e){this.logger.error(e)},Kk.prototype.lexResponseHandler=function(){return jk(this,void 0,void 0,function(){var t;return Bk(this,function(e){switch(e.label){case 0:return this.continueConversation?(t={content:this.audioInput,options:{messageType:"voice"}},[4,this.amplifyService.interactions().send(this.botName,t)]):[2];case 1:return t=e.sent(),this.lexResponse=t,this.currentVoiceState=Vk.SPEAKING.MESSAGE,this.micText=Vk.SPEAKING.ICON,this.micButtonDisabled=!0,t={me:this.lexResponse.inputTranscript,meSentTime:(new Date).toLocaleTimeString(),bot:"",botSentTime:""},this.inputText="",t.bot=this.lexResponse.message,t.botSentTime=(new Date).toLocaleTimeString(),this.messages.push(t),this.doneSpeakingHandler(),this.ref.detectChanges(),[2]}})})},Kk.prototype.doneSpeakingHandler=function(){var e=this;this.continueConversation&&("audio/mpeg"===this.lexResponse.contentType?this.audioControl.play(this.lexResponse.audioStream,function(){"ReadyForFulfillment"!==e.lexResponse.dialogState&&"Fulfilled"!==e.lexResponse.dialogState&&"Failed"!==e.lexResponse.dialogState&&e.conversationModeOn?(e.currentVoiceState=Vk.LISTENING.MESSAGE,e.micText=Vk.LISTENING.ICON,e.micButtonDisabled=!1,e.audioControl.startRecording(e.onSilenceHandler,null,e.voiceConfig.silenceDetectionConfig)):(e.inputDisabled=!1,e.currentVoiceState=Vk.INITIAL.MESSAGE,e.micText=Vk.INITIAL.ICON,e.micButtonDisabled=!1,e.continueConversation=!1),e.ref.detectChanges()}):(this.inputDisabled=!1,this.currentVoiceState=Vk.INITIAL.MESSAGE,this.micText=Vk.INITIAL.ICON,this.micButtonDisabled=!1,this.continueConversation=!1,this.ref.detectChanges()))},Kk.prototype.micButtonHandler=function(){return jk(this,void 0,void 0,function(){return Bk(this,function(e){return this.continueConversation?this.reset():(this.inputDisabled=!0,this.continueConversation=!0,this.currentVoiceState=Vk.LISTENING.MESSAGE,this.micText=Vk.LISTENING.ICON,this.micButtonDisabled=!1,this.audioControl.startRecording(this.onSilenceHandler,null,this.voiceConfig.silenceDetectionConfig)),this.ref.detectChanges(),[2]})})},Kk.decorators=[{type:f.Component,args:[{selector:"amplify-interactions-core",template:'\n<div class="amplify-interactions">\n\t<div class="amplify-interactions-container">\n\t\t<div class="amplify-form-container">\n\t\t\t<div class="amplify-form-row">\n\t\t\t\t<div class="amplify-interactions-conversation">\n\t\t\t\t\t<div *ngFor="let message of messages">\n\t\t\t\t\t\t<div class="amplify-interactions-input">{{message.me}}</div>\n\t\t\t\t\t\t<div class="amplify-interactions-input-timestamp">{{message.meSentTime}}</div>\n\t\t\t\t\t\t<div class="amplify-interactions-response">{{message.bot}}</div>\n\t\t\t\t\t\t<div class="amplify-interactions-response-timestamp">{{message.botSentTime}}</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class="amplify-interactions-actions">\n\t\t\t\t<input #inputValue\n\t\t\t\t\tdata-test="chatbot-message-input"\n\t\t\t\t\ttype=\'text\'\n\t\t\t\t\tclass="amplify-form-input"\n\t\t\t\t\tplaceholder="{{currentVoiceState}}"\n\t\t\t\t\t[value]="inputText"\n\t\t\t\t\t(keyup.enter)="onSubmit(inputValue.value)"\n\t\t\t\t\t(change)="onInputChange($event.target.value)"\n\t\t\t\t\t[disabled]="inputDisabled"\n\t\t\t\t\t*ngIf="textEnabled">\n\t\t\t\t<input #inputValue\n\t\t\t\t\ttype=\'text\'\n\t\t\t\t\tclass="amplify-form-input"\n\t\t\t\t\tplaceholder="{{currentVoiceState}}"\n\t\t\t\t\t[disabled]="!textEnabled"\n\t\t\t\t\t*ngIf="!textEnabled">\n\n\t\t\t\t<button\n\t\t\t\t\ttype="button"\n\t\t\t\t\t*ngIf="voiceEnabled"\n\t\t\t\t\tng-style="{float: \'right\'}"\n\t\t\t\t\t(click)="micButtonHandler()"\n\t\t\t\t\t[disabled]="micButtonDisabled"\n\t\t\t\t>\n\t\t\t\t\t{{micText}}\n\t\t\t\t</button>\n\t\t\t\t<button\n\t\t\t\t\ttype="button"\n\t\t\t\t\t*ngIf="textEnabled"\n\t\t\t\t\tng-style="{float: \'right\'}"\n\t\t\t\t\tclass="amplify-interactions-button"\n\t\t\t\t\t[disabled]="inputDisabled"\n\t\t\t\t\tng-click="!inputDisabled || onSubmit(inputValue.value)"\n\t\t\t\t></button>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>\n'}]}],Kk.ctorParameters=function(){return[{type:f.ChangeDetectorRef},{type:BO,decorators:[{type:f.Inject,args:[BO]}]}]},Kk.propDecorators={complete:[{type:f.Output}],data:[{type:f.Input}],bot:[{type:f.Input}],title:[{type:f.Input}],clearOnComplete:[{type:f.Input}]},Kk);function Kk(e,t){var n=this;this.amplifyService=t,this.inputText="",this.clearComplete=!1,this.messages=[],this.completions={},this.currentVoiceState=Vk.INITIAL.MESSAGE,this.inputDisabled=!1,this.micText=Vk.INITIAL.ICON,this.voiceConfig=zk,this.continueConversation=!1,this.micButtonDisabled=!1,this.conversationModeOn=!1,this.voiceEnabled=!1,this.textEnabled=!0,this.complete=new f.EventEmitter,this.onSilenceHandler=function(){n.continueConversation&&(n.audioControl.exportWAV(function(e){n.currentVoiceState=Vk.SENDING.MESSAGE,n.audioInput=e,n.micText=Vk.SENDING.ICON,n.micButtonDisabled=!0,n.lexResponseHandler()}),n.ref.detectChanges())},this.ref=e,this.continueConversation=!1,this.logger=this.amplifyService.logger("ChatbotComponent")}var Hk,Gk,lT=(Hk=function(e,t){return(Hk=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}Hk(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),Wk=(lT($k,Gk=qk),$k.decorators=[{type:f.Component,args:[{selector:"amplify-interactions-ionic",template:'\n<div class="amplify-interactions-container">\n\t<div class="amplify-form-container">\n\t\t<ion-grid>\n\t\t\t<ion-row *ngIf="chatTitle"> \n\t\t\t\t<ion-col>\n\t\t\t\t\t<ion-row>\n\t\t\t\t\t\t<ion-col align-self-start>\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<ion-chip color="primary">\n\t\t\t\t\t\t\t\t\t<ion-label>{{chatTitle}}</ion-label>\n\t\t\t\t\t\t\t\t</ion-chip>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</ion-col>\n\t\t\t\t\t\t<ion-col align-self-end>\n\t\t\t\t\t\t\t&nbsp;\n\t\t\t\t\t\t</ion-col>\n\t\t\t\t\t</ion-row>\n\t\t\t\t</ion-col>\n\t\t\t</ion-row>\n\t\t\t<ion-row *ngFor="let message of messages">\n\t\t\t\t<ion-col>\n\t\t\t\t\t<ion-row>\n\t\t\t\t\t\t<ion-col align-self-start>\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t&nbsp;\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</ion-col>\n\t\t\t\t\t\t<ion-col align-self-end>\n\t\t\t\t\t\t\t<ion-chip style="float:right">\n\t\t\t\t\t\t\t\t<ion-label>{{message.me}}</ion-label>\n\t\t\t\t\t\t\t</ion-chip>\n\t\t\t\t\t\t</ion-col>\n\t\t\t\t\t</ion-row>\n\t\t\t\t\t<ion-row>\n\t\t\t\t\t\t<ion-col align-self-start>\n\t\t\t\t\t\t\t<ion-chip color="primary">\n\t\t\t\t\t\t\t\t<ion-label>{{message.bot}}</ion-label>\n\t\t\t\t\t\t\t</ion-chip>\n\t\t\t\t\t\t</ion-col>\n\t\t\t\t\t\t<ion-col align-self-end>\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t&nbsp;\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</ion-col>\n\t\t\t\t\t</ion-row>\n\t\t\t\t</ion-col>\n\t\t\t</ion-row>\n\t\t</ion-grid>\n\t\t<div class="amplify-form-row">\n\t\t    <ion-input #inputValue\n\t\t\t\ttype=\'text\'\n\t\t        class="amplify-form-input amplify-form-input-interactions-ionic"\n\t\t        placeholder="{{currentVoiceState}}"\n\t\t        [value]="inputText"\n\t\t        (keyup.enter)="onSubmit(inputValue.value)"\n\t\t\t\t(ionChange)="onInputChange($event.target.value)"\n\t\t\t\t[disabled]="inputDisabled"\n\t\t\t\t*ngIf="textEnabled"></ion-input>\n\t\t\t<ion-input #inputValue\n\t\t\t\ttype=\'text\'\n\t\t\t\tclass="amplify-form-input amplify-form-input-interactions-ionic"\n\t\t\t\tplaceholder="{{currentVoiceState}}"\n\t\t\t\t[disabled]="!textEnabled"\n\t\t\t\t*ngIf="!textEnabled"></ion-input>\n\t\t\t<ion-button \n\t\t\t\texpand="block"\n\t\t\t\t*ngIf="voiceEnabled"\n\t\t\t\tng-style="{float: \'right\'}"\n\t\t\t\t(click)="micButtonHandler()"\n\t\t\t\t[disabled]="micButtonDisabled"\n\t\t\t>\n\t\t\t\t{{micText}}\n\t\t\t</ion-button>\n\t\t\t<ion-button\n\t\t\t\texpand="block"\n\t\t\t\t*ngIf="textEnabled"\n\t\t\t\tng-style="{float: \'right\'}"\n\t\t\t\t(click)="inputDisabled === false || onSubmit(inputValue.value)"\n\t\t\t>\n\t\t\t\tSend\n\t\t\t</ion-button>\n\t\t</div>\n\t</div>\n</div>\n'}]}],$k.ctorParameters=function(){return[{type:f.ChangeDetectorRef},{type:BO,decorators:[{type:f.Inject,args:[BO]}]}]},$k);function $k(e,t){e=Gk.call(this,e,t)||this;return e.amplifyService=t,e}Yk.prototype.ngOnInit=function(){this.loadComponent()},Yk.prototype.ngOnDestroy=function(){},Yk.prototype.loadComponent=function(){var t=this,e={bot:this.bot,title:this.title,clearComplete:this.clearComplete,conversationModeOn:this.conversationModeOn,voiceConfig:this.voiceConfig,voiceEnabled:this.voiceEnabled,textEnabled:this.textEnabled},n=this.framework&&"ionic"===this.framework.toLowerCase()?new So(Wk,e):new So(qk,e),r=this.componentFactoryResolver.resolveComponentFactory(n.component),e=this.componentHost.viewContainerRef;e.clear();r=e.createComponent(r);r.instance.data=n.data,r.instance.complete.subscribe(function(e){t.complete.emit(e)})},Yk.decorators=[{type:f.Component,args:[{selector:"amplify-interactions",template:'\n\t\t<div class="amplify-component">\n\t\t\t<ng-template component-host></ng-template>\n\t\t</div>\n\t'}]}],Yk.ctorParameters=function(){return[{type:f.ComponentFactoryResolver}]},Yk.propDecorators={framework:[{type:f.Input}],bot:[{type:f.Input}],title:[{type:f.Input}],clearComplete:[{type:f.Input}],conversationModeOn:[{type:f.Input}],voiceConfig:[{type:f.Input}],voiceEnabled:[{type:f.Input}],textEnabled:[{type:f.Input}],complete:[{type:f.Output}],componentHost:[{type:f.ViewChild,args:[dn]}]},sT=Yk;function Yk(e){this.componentFactoryResolver=e,this.complete=new f.EventEmitter}Object.defineProperty(Jk.prototype,"title",{set:function(e){this.title=e},enumerable:!0,configurable:!0}),Jk.decorators=[{type:f.Component,args:[{selector:"amplify-form",template:'\n<div class="amplify-form">\n  <div class="form-header">\n    <div class="form-title">{{ title }}</div>\n  </div>\n  <div class="form-body">\n    <ng-content select="[form-body]"></ng-content>\n  </div>\n  <div class="form-footer">\n    <ng-content select="[form-footer]"></ng-content>\n  </div>\n</div>\n'}]}],Jk.propDecorators={title:[{type:f.Input}]},cT=Jk;function Jk(){}var Zk=function(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{o(u.next(e))}catch(e){t(e)}}function i(e){try{o(u.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,i)}o((u=u.apply(e,s||[])).next())})},Qk=function(n,r){var i,o,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,o&&(s=2&t[0]?o.return:t[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,t[1])).done)return s;switch(o=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,o=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],o=0}finally{i=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},lT='\n<div id="sumerian-scene-container" class={{amplifyUI.sumerianSceneContainer}} data-test="'+YO+'">\n  <div id="sumerian-scene-dom-id" class={{amplifyUI.sumerianScene}} data-test="'+JO+'">\n    <sumerian-scene-loading-core *ngIf="loading" loadPercentage={{loadPercentage}} sceneName={{sceneName}} sceneError={{sceneError}} data-test="'+ZO+'"></sumerian-scene-loading-core>\n  </div>\n  <div *ngIf="!loading" class={{amplifyUI.sceneBar}} data-test="'+nT+'">\n    <span class={{amplifyUI.sceneActions}} data-test="'+rT+'">\n      <div [ngClass]="[amplifyUI.tooltip, showEnableAudio ? amplifyUI.autoShowTooltip : \'\']" [attr.data-text]="showEnableAudio ? \'The scene is muted. Click to unmute.\' : (muted ? \'Unmute\' : \'Mute\')" (click)="muted ? setMuted(false) : setMuted(true)">\n        <button class={{amplifyUI.actionButton}}>\n          <svg *ngIf="muted" width="19px" height="19px" viewBox="0 0 19 19" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n            <g id="icons/minis/volumeOff" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n              <path d="M3.48026899,12.9630494 C3.63825091,12.9630494 3.79237961,13.0108921 3.92264322,13.1003479 L8.77467683,16.8113609 C9.29423971,17.1679383 10,16.7950396 10,16.1637406 L10,3.78619489 C10,3.15489596 9.29423971,2.78199725 8.77467683,3.13857463 L3.92264322,6.84545211 C3.79237961,6.93490793 3.63825091,6.9827506 3.48026899,6.9827506 L1.78294894,6.9827506 C1.3505185,6.9827506 1,7.33409518 1,7.76754476 L1,12.1781306 C1,12.6117048 1.3505185,12.9630494 1.78294894,12.9630494 L3.48026899,12.9630494 Z M17.2118156,7 L15.0918385,9.11997713 L12.9718614,7 L12,7.97174685 L14.1200917,10.091724 L12,12.2118156 L12.9718614,13.1835625 L15.0918385,11.0635854 L17.2118156,13.1835625 L18.1835625,12.2118156 L16.0635854,10.091724 L18.1835625,7.97174685 L17.2118156,7 Z" id="Fill-2" fill="#FFFFFF"></path>\n            </g>\n          </svg>\n          <svg *ngIf="!muted" width="19px" height="19px" viewBox="0 0 19 19" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n            <g id="icons/minis/volumeOn" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n              <path d="M3.48026899,12.9630494 L1.78294894,12.9630494 C1.3505185,12.9630494 1,12.6117048 1,12.1781306 L1,7.76754476 C1,7.33409518 1.3505185,6.9827506 1.78294894,6.9827506 L3.48026899,6.9827506 C3.63825091,6.9827506 3.79237961,6.93490793 3.92264322,6.84545211 L8.77467683,3.13857463 C9.29423971,2.78199725 10,3.15489596 10,3.78619489 L10,16.1637406 C10,16.7950396 9.29423971,17.1679383 8.77467683,16.8113609 L3.92264322,13.1003479 C3.79237961,13.0108921 3.63825091,12.9630494 3.48026899,12.9630494 Z M14.9270376,3.03232286 C15.1729267,3.03232286 15.4040399,3.12815658 15.5777627,3.3022351 C17.3699891,5.09889099 18.3570052,7.48235058 18.3570052,10.0135053 C18.3570052,12.54466 17.3699891,14.9281196 15.5777627,16.7247755 C15.4041045,16.898854 15.1729914,16.9947524 14.9270052,16.9947524 C14.6820861,16.9947524 14.4515549,16.899436 14.2777674,16.7263598 C13.9192316,16.3684383 13.9185203,15.7852882 14.2762477,15.4264291 C15.7222893,13.9769926 16.5186727,12.0545954 16.5186727,10.0135053 C16.5186727,7.97241524 15.7222893,6.05001801 14.2762154,4.60058152 C13.9184879,4.24175473 13.9191992,3.65857229 14.277832,3.30065081 C14.4514256,3.1275746 14.6819567,3.03232286 14.9270376,3.03232286 Z M13.5730665,6.11570485 C14.6133991,7.15574642 15.1862998,8.54003279 15.1862998,10.0134924 C15.1862998,11.4892799 14.6113945,12.8741159 13.5675376,13.9128965 C13.3942351,14.0855848 13.1639626,14.1806425 12.9191727,14.1806425 C12.6727016,14.1806425 12.4412975,14.0844531 12.2677039,13.9097926 C12.0944984,13.7358111 11.9994406,13.5047303 11.9999903,13.2592291 C12.0005723,13.0136956 12.096794,12.7831644 12.2708079,12.6100882 C12.9654406,11.9185917 13.3479995,10.996467 13.3479995,10.0134924 C13.3479995,9.03119677 12.966346,8.1086194 12.2733298,7.4157649 C11.9150203,7.05745543 11.9149233,6.47436998 12.2731358,6.11589885 C12.4467617,5.94224065 12.6775838,5.84666559 12.923085,5.84666559 C13.1685538,5.84666559 13.3993436,5.94220831 13.5730665,6.11570485 Z" id="Fill-2" fill="#FFFFFF"></path>\n            </g>\n          </svg>\n        </button>\n      </div>\n      <div *ngIf="isVRCapable && !isVRPresentationActive" class={{amplifyUI.tooltip}} data-text="Enter VR" (click)="toggleVRPresentation()">\n        <button class={{amplifyUI.actionButton}}>\n          <svg width="19px" height="19px" viewBox="0 0 17 10" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n            <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n              <g id="VRon" fill="#FFFFFF" fill-rule="nonzero">\n                <path d="M15.7856977,0.02395184 L15.8915734,0.02395184 C16.5037405,0.02395184 17,0.520211324 17,1.13237842 L17,1.54663675 L17,8.8915038 C17,9.5034193 16.4560011,10 15.7856977,10 L12.0095825,10 C9.98324439,7.1593807 8.80676009,5.741338 8.48012959,5.74587199 C8.16206045,5.75028714 7.01003321,7.1683298 5.02404785,10 L1.21426911,10 C0.543965735,10 3.32031236e-05,9.5034193 3.32031236e-05,8.8915038 L3.32031236e-05,1.54663675 L3.32031236e-05,1.13237842 L3.32031236e-05,1.13237842 C3.32031236e-05,0.520211324 0.496292687,0.02395184 1.10845978,0.02395184 L1.21426911,0.02395184 L15.7856977,0.02395184 Z M4.5,6 C5.32842712,6 6,5.32842712 6,4.5 C6,3.67157288 5.32842712,3 4.5,3 C3.67157288,3 3,3.67157288 3,4.5 C3,5.32842712 3.67157288,6 4.5,6 Z M12.5,6 C13.3284271,6 14,5.32842712 14,4.5 C14,3.67157288 13.3284271,3 12.5,3 C11.6715729,3 11,3.67157288 11,4.5 C11,5.32842712 11.6715729,6 12.5,6 Z" id="Fill-1"></path>\n              </g>\n            </g>\n          </svg>\n        </button>\n      </div>\n      <div *ngIf="isVRCapable && isVRPresentationActive" class={{amplifyUI.tooltip}} data-text="Exit VR" (click)="toggleVRPresentation()">\n        <button class={{amplifyUI.actionButton}}>\n          <svg width="19px" height="19px" viewBox="0 0 19 19" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n            <g id="icons/minis/VRon-Copy" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n              <g id="Group-7-Copy" transform="translate(1.000000, 3.000000)" fill="#FFFFFF">\n                <path d="M15.7856977,3.02395184 L17,3.02395184 L17,4.13237842 L17,4.54663675 L17,11.8915038 C17,12.5034193 16.4560011,13 15.7856977,13 L12.0095825,13 C9.98324439,10.1593807 8.80676009,8.741338 8.48012959,8.74587199 C8.16206045,8.75028714 7.01003321,10.1683298 5.02404785,13 L1.21426911,13 C0.543965735,13 3.32031236e-05,12.5034193 3.32031236e-05,11.8915038 L3.32031236e-05,4.54663675 L3.32031236e-05,4.13237842 L3.32031236e-05,3.02395184 L1.21426911,3.02395184 L15.7856977,3.02395184 Z M4.5,9 C5.32842712,9 6,8.32842712 6,7.5 C6,6.67157288 5.32842712,6 4.5,6 C3.67157288,6 3,6.67157288 3,7.5 C3,8.32842712 3.67157288,9 4.5,9 Z M12.5,9 C13.3284271,9 14,8.32842712 14,7.5 C14,6.67157288 13.3284271,6 12.5,6 C11.6715729,6 11,6.67157288 11,7.5 C11,8.32842712 11.6715729,9 12.5,9 Z M2.5486669,0 L14.420089,0 C14.7977406,0 15.1613805,0.149260956 15.4374308,0.417695511 L16.9999668,2.00634766 L0,2.00634766 L1.58537972,0.395493117 C1.84682061,0.141306827 2.19106994,0 2.5486669,0 Z" id="Fill-1"></path>\n              </g>\n            </g>\n          </svg>\n        </button>\n      </div>\n      <div *ngIf="!isFullscreen" class={{amplifyUI.tooltip}} data-text="Fullscreen">\n        <button class={{amplifyUI.actionButton}} (click)="maximize()">\n          <svg width="19px" height="19px" viewBox="0 0 19 19" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n            <g id="icons/minis/screenfull" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n              <path d="M2.04162598,3 L2.04162598,16 L17.0147705,16 L17.0147705,3 L2.04162598,3 Z M1,2 L18,2 L18,17 L1,17 L1,2 Z M3,4 L16,4 L16,15 L3,15 L3,4 Z" id="Rectangle-Copy" fill="#FFFFFF" fill-rule="nonzero"></path>\n            </g>\n          </svg>\n        </button>\n      </div>\n      <div *ngIf="isFullscreen" class={{amplifyUI.tooltip}} data-text="Exit Fullscreen">\n        <button class={{amplifyUI.actionButton}} (click)="minimize()">\n          <svg width="19px" height="19px" viewBox="0 0 19 19" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n            <g id="icons/minis/screensmall" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n              <path d="M11,16 L17.0147705,16 L17.0147705,3 L2.04162598,3 L2.04162598,10 L11,10 L11,16 Z M1,2 L18,2 L18,17 L1,17 L1,2 Z" id="Rectangle" fill="#FFFFFF" fill-rule="nonzero"></path>\n            </g>\n          </svg>\n        </button>\n      </div>\n    </span>\n  </div>\n</div>\n',Xk=(Object.defineProperty(ex.prototype,"data",{set:function(e){this.sceneName=e.sceneName},enumerable:!0,configurable:!0}),ex.prototype.ngOnInit=function(){if(document.addEventListener("fullscreenchange",this.onFullscreenChange.bind(this)),document.addEventListener("webkitfullscreenchange",this.onFullscreenChange.bind(this)),document.addEventListener("mozfullscreenchange",this.onFullscreenChange.bind(this)),document.addEventListener("MSFullscreenChange",this.onFullscreenChange.bind(this)),!this.amplifyService.xr())throw new Error("XR module not registered on AmplifyService provider");this.loadAndStartScene()},ex.prototype.ngOnDestroy=function(){document.removeEventListener("fullscreenchange",this.onFullscreenChange.bind(this)),document.removeEventListener("webkitfullscreenchange",this.onFullscreenChange.bind(this)),document.removeEventListener("mozfullscreenchange",this.onFullscreenChange.bind(this)),document.removeEventListener("MSFullscreenChange",this.onFullscreenChange.bind(this))},ex.prototype.loadAndStartScene=function(){return Zk(this,void 0,void 0,function(){var t,n=this;return Qk(this,function(e){switch(e.label){case 0:this.loading=!0,t={progressCallback:this.progressCallback},e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this.amplifyService.xr().loadScene(this.sceneName,"sumerian-scene-dom-id",t)];case 2:return e.sent(),[3,4];case 3:return t=e.sent(),this.sceneError="Failed to load scene",this.logger.error(this.sceneError,t),[2];case 4:return this.amplifyService.xr().start(this.sceneName),this.loading=!1,this.muted=this.amplifyService.xr().isMuted(this.sceneName),this.isVRCapable=this.amplifyService.xr().isVRCapable(this.sceneName),this.isVRPresentationActive=this.amplifyService.xr().isVRPresentationActive(this.sceneName),this.amplifyService.xr().onSceneEvent(this.sceneName,"AudioEnabled",function(){return n.showEnableAudio=!1}),this.amplifyService.xr().onSceneEvent(this.sceneName,"AudioDisabled",function(){return n.showEnableAudio=!0}),[2]}})})},ex.prototype.setMuted=function(e){this.muted=e,this.amplifyService.xr().setMuted(this.sceneName,e),this.showEnableAudio&&(this.amplifyService.xr().enableAudio(this.sceneName),this.showEnableAudio=!1)},ex.prototype.toggleVRPresentation=function(){try{this.isVRPresentationActive?this.amplifyService.xr().exitVR(this.sceneName):this.amplifyService.xr().enterVR(this.sceneName)}catch(e){return void this.logger.error("Unable to start/stop WebVR System: "+e.message)}this.isVRPresentationActive=!this.isVRPresentationActive},ex.prototype.onFullscreenChange=function(){var e=document;this.isFullscreen=null!==e.fullscreenElement},ex.prototype.maximize=function(){return Zk(this,void 0,void 0,function(){var t;return Qk(this,function(e){return t=document.getElementById("sumerian-scene-container"),(t.requestFullscreen||t.msRequestFullscreen||t.mozRequestFullScreen||t.webkitRequestFullscreen).call(t),[2]})})},ex.prototype.minimize=function(){return Zk(this,void 0,void 0,function(){var t;return Qk(this,function(e){return(t=document).exitFullscreen?t.exitFullscreen():t.mozCancelFullScreen?t.mozCancelFullScreen():t.webkitExitFullscreen&&t.webkitExitFullscreen(),[2]})})},ex.decorators=[{type:f.Component,args:[{selector:"sumerian-scene-core",template:lT}]}],ex.ctorParameters=function(){return[{type:BO}]},ex.propDecorators={sceneName:[{type:f.Input}],data:[{type:f.Input}]},ex);function ex(e){var t=this;this.amplifyService=e,this.loading=!1,this.loadPercentage=0,this.muted=!1,this.showEnableAudio=!1,this.isVRCapable=!1,this.isVRPresentationActive=!1,this.isFullscreen=!1,this.sceneError=null,this.progressCallback=function(e){e*=100;t.loadPercentage=e},this.amplifyUI=R,this.logger=this.amplifyService.logger("SumerianSceneComponentCore")}var tx,nx,lT=(tx=function(e,t){return(tx=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}tx(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),nT='\n<div id="sumerian-scene-container" [ngClass]="amplifyUI.sumerianSceneContainer" data-test="'+YO+'">\n  <div id="sumerian-scene-dom-id" [class]="amplifyUI.sumerianScene" data-test="'+JO+'">\n    <sumerian-scene-loading-ionic *ngIf="loading" loadPercentage={{loadPercentage}} sceneName={{sceneName}} data-test="'+ZO+'"></sumerian-scene-loading-ionic>\n  </div>\n  <div *ngIf="!loading" class={{amplifyUI.sceneBar}} data-test="'+nT+'">\n    <span class={{amplifyUI.sceneActions}} data-test="'+rT+'">\n      <div [ngClass]="[amplifyUI.tooltip, showEnableAudio ? amplifyUI.autoShowTooltip : \'\']" [attr.data-text]="showEnableAudio ? \'The scene is muted. Click to unmute.\' : (muted ? \'Unmute\' : \'Mute\')" (click)="muted ? setMuted(false) : setMuted(true)">\n        <button class={{amplifyUI.actionButton}}>\n          <svg *ngIf="muted" width="19px" height="19px" viewBox="0 0 19 19" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n            <g id="icons/minis/volumeOff" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n              <path d="M3.48026899,12.9630494 C3.63825091,12.9630494 3.79237961,13.0108921 3.92264322,13.1003479 L8.77467683,16.8113609 C9.29423971,17.1679383 10,16.7950396 10,16.1637406 L10,3.78619489 C10,3.15489596 9.29423971,2.78199725 8.77467683,3.13857463 L3.92264322,6.84545211 C3.79237961,6.93490793 3.63825091,6.9827506 3.48026899,6.9827506 L1.78294894,6.9827506 C1.3505185,6.9827506 1,7.33409518 1,7.76754476 L1,12.1781306 C1,12.6117048 1.3505185,12.9630494 1.78294894,12.9630494 L3.48026899,12.9630494 Z M17.2118156,7 L15.0918385,9.11997713 L12.9718614,7 L12,7.97174685 L14.1200917,10.091724 L12,12.2118156 L12.9718614,13.1835625 L15.0918385,11.0635854 L17.2118156,13.1835625 L18.1835625,12.2118156 L16.0635854,10.091724 L18.1835625,7.97174685 L17.2118156,7 Z" id="Fill-2" fill="#FFFFFF"></path>\n            </g>\n          </svg>\n          <svg *ngIf="!muted" width="19px" height="19px" viewBox="0 0 19 19" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n            <g id="icons/minis/volumeOn" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n              <path d="M3.48026899,12.9630494 L1.78294894,12.9630494 C1.3505185,12.9630494 1,12.6117048 1,12.1781306 L1,7.76754476 C1,7.33409518 1.3505185,6.9827506 1.78294894,6.9827506 L3.48026899,6.9827506 C3.63825091,6.9827506 3.79237961,6.93490793 3.92264322,6.84545211 L8.77467683,3.13857463 C9.29423971,2.78199725 10,3.15489596 10,3.78619489 L10,16.1637406 C10,16.7950396 9.29423971,17.1679383 8.77467683,16.8113609 L3.92264322,13.1003479 C3.79237961,13.0108921 3.63825091,12.9630494 3.48026899,12.9630494 Z M14.9270376,3.03232286 C15.1729267,3.03232286 15.4040399,3.12815658 15.5777627,3.3022351 C17.3699891,5.09889099 18.3570052,7.48235058 18.3570052,10.0135053 C18.3570052,12.54466 17.3699891,14.9281196 15.5777627,16.7247755 C15.4041045,16.898854 15.1729914,16.9947524 14.9270052,16.9947524 C14.6820861,16.9947524 14.4515549,16.899436 14.2777674,16.7263598 C13.9192316,16.3684383 13.9185203,15.7852882 14.2762477,15.4264291 C15.7222893,13.9769926 16.5186727,12.0545954 16.5186727,10.0135053 C16.5186727,7.97241524 15.7222893,6.05001801 14.2762154,4.60058152 C13.9184879,4.24175473 13.9191992,3.65857229 14.277832,3.30065081 C14.4514256,3.1275746 14.6819567,3.03232286 14.9270376,3.03232286 Z M13.5730665,6.11570485 C14.6133991,7.15574642 15.1862998,8.54003279 15.1862998,10.0134924 C15.1862998,11.4892799 14.6113945,12.8741159 13.5675376,13.9128965 C13.3942351,14.0855848 13.1639626,14.1806425 12.9191727,14.1806425 C12.6727016,14.1806425 12.4412975,14.0844531 12.2677039,13.9097926 C12.0944984,13.7358111 11.9994406,13.5047303 11.9999903,13.2592291 C12.0005723,13.0136956 12.096794,12.7831644 12.2708079,12.6100882 C12.9654406,11.9185917 13.3479995,10.996467 13.3479995,10.0134924 C13.3479995,9.03119677 12.966346,8.1086194 12.2733298,7.4157649 C11.9150203,7.05745543 11.9149233,6.47436998 12.2731358,6.11589885 C12.4467617,5.94224065 12.6775838,5.84666559 12.923085,5.84666559 C13.1685538,5.84666559 13.3993436,5.94220831 13.5730665,6.11570485 Z" id="Fill-2" fill="#FFFFFF"></path>\n            </g>\n          </svg>\n        </button>\n      </div>\n      <div *ngIf="isVRCapable && !isVRPresentationActive" class={{amplifyUI.tooltip}} data-text="Enter VR" (click)="toggleVRPresentation()">\n        <button class={{amplifyUI.actionButton}}>\n          <svg width="19px" height="19px" viewBox="0 0 17 10" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n            <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n              <g id="VRon" fill="#FFFFFF" fill-rule="nonzero">\n                <path d="M15.7856977,0.02395184 L15.8915734,0.02395184 C16.5037405,0.02395184 17,0.520211324 17,1.13237842 L17,1.54663675 L17,8.8915038 C17,9.5034193 16.4560011,10 15.7856977,10 L12.0095825,10 C9.98324439,7.1593807 8.80676009,5.741338 8.48012959,5.74587199 C8.16206045,5.75028714 7.01003321,7.1683298 5.02404785,10 L1.21426911,10 C0.543965735,10 3.32031236e-05,9.5034193 3.32031236e-05,8.8915038 L3.32031236e-05,1.54663675 L3.32031236e-05,1.13237842 L3.32031236e-05,1.13237842 C3.32031236e-05,0.520211324 0.496292687,0.02395184 1.10845978,0.02395184 L1.21426911,0.02395184 L15.7856977,0.02395184 Z M4.5,6 C5.32842712,6 6,5.32842712 6,4.5 C6,3.67157288 5.32842712,3 4.5,3 C3.67157288,3 3,3.67157288 3,4.5 C3,5.32842712 3.67157288,6 4.5,6 Z M12.5,6 C13.3284271,6 14,5.32842712 14,4.5 C14,3.67157288 13.3284271,3 12.5,3 C11.6715729,3 11,3.67157288 11,4.5 C11,5.32842712 11.6715729,6 12.5,6 Z" id="Fill-1"></path>\n              </g>\n            </g>\n          </svg>\n        </button>\n      </div>\n      <div *ngIf="isVRCapable && isVRPresentationActive" class={{amplifyUI.tooltip}} data-text="Exit VR" (click)="toggleVRPresentation()">\n        <button class={{amplifyUI.actionButton}}>\n          <svg width="19px" height="19px" viewBox="0 0 19 19" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n            <g id="icons/minis/VRon-Copy" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n              <g id="Group-7-Copy" transform="translate(1.000000, 3.000000)" fill="#FFFFFF">\n                <path d="M15.7856977,3.02395184 L17,3.02395184 L17,4.13237842 L17,4.54663675 L17,11.8915038 C17,12.5034193 16.4560011,13 15.7856977,13 L12.0095825,13 C9.98324439,10.1593807 8.80676009,8.741338 8.48012959,8.74587199 C8.16206045,8.75028714 7.01003321,10.1683298 5.02404785,13 L1.21426911,13 C0.543965735,13 3.32031236e-05,12.5034193 3.32031236e-05,11.8915038 L3.32031236e-05,4.54663675 L3.32031236e-05,4.13237842 L3.32031236e-05,3.02395184 L1.21426911,3.02395184 L15.7856977,3.02395184 Z M4.5,9 C5.32842712,9 6,8.32842712 6,7.5 C6,6.67157288 5.32842712,6 4.5,6 C3.67157288,6 3,6.67157288 3,7.5 C3,8.32842712 3.67157288,9 4.5,9 Z M12.5,9 C13.3284271,9 14,8.32842712 14,7.5 C14,6.67157288 13.3284271,6 12.5,6 C11.6715729,6 11,6.67157288 11,7.5 C11,8.32842712 11.6715729,9 12.5,9 Z M2.5486669,0 L14.420089,0 C14.7977406,0 15.1613805,0.149260956 15.4374308,0.417695511 L16.9999668,2.00634766 L0,2.00634766 L1.58537972,0.395493117 C1.84682061,0.141306827 2.19106994,0 2.5486669,0 Z" id="Fill-1"></path>\n              </g>\n            </g>\n          </svg>\n        </button>\n      </div>\n      <div *ngIf="!isFullscreen" class={{amplifyUI.tooltip}} data-text="Fullscreen">\n        <button class={{amplifyUI.actionButton}} (click)="maximize()">\n          <svg width="19px" height="19px" viewBox="0 0 19 19" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n            <g id="icons/minis/screenfull" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n              <path d="M2.04162598,3 L2.04162598,16 L17.0147705,16 L17.0147705,3 L2.04162598,3 Z M1,2 L18,2 L18,17 L1,17 L1,2 Z M3,4 L16,4 L16,15 L3,15 L3,4 Z" id="Rectangle-Copy" fill="#FFFFFF" fill-rule="nonzero"></path>\n            </g>\n          </svg>\n        </button>\n      </div>\n      <div *ngIf="isFullscreen" class={{amplifyUI.tooltip}} data-text="Exit Fullscreen">\n        <button class={{amplifyUI.actionButton}} (click)="minimize()">\n          <svg width="19px" height="19px" viewBox="0 0 19 19" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n            <g id="icons/minis/screensmall" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n              <path d="M11,16 L17.0147705,16 L17.0147705,3 L2.04162598,3 L2.04162598,10 L11,10 L11,16 Z M1,2 L18,2 L18,17 L1,17 L1,2 Z" id="Rectangle" fill="#FFFFFF" fill-rule="nonzero"></path>\n            </g>\n          </svg>\n        </button>\n      </div>\n    </span>\n  </div>\n</div>\n',rx=(lT(ix,nx=Xk),ix.decorators=[{type:f.Component,args:[{selector:"sumerian-scene-ionic",template:nT}]}],ix.ctorParameters=function(){return[{type:BO}]},ix);function ix(e){var t=nx.call(this,e)||this;return t.amplifyService=e,t}ox.prototype.ngOnInit=function(){this.loadComponent()},ox.prototype.ngOnDestroy=function(){},ox.prototype.loadComponent=function(){var e=this.framework&&"ionic"===this.framework.toLowerCase()?new So(rx,{sceneName:this.sceneName}):new So(Xk,{sceneName:this.sceneName}),t=this.componentFactoryResolver.resolveComponentFactory(e.component),n=this.componentHost.viewContainerRef;n.clear(),n.createComponent(t).instance.data=e.data},ox.decorators=[{type:f.Component,args:[{selector:"amplify-sumerian-scene",template:"\n\t\t<ng-template component-host></ng-template>\n\t"}]}],ox.ctorParameters=function(){return[{type:f.ComponentFactoryResolver}]},ox.propDecorators={framework:[{type:f.Input}],sceneName:[{type:f.Input}],componentHost:[{type:f.ViewChild,args:[dn]}]},rT=ox;function ox(e){this.componentFactoryResolver=e}lT='\n<div class={{AmplifyUI.loadingOverlay}}>\n  <div class={{AmplifyUI.loadingContainer}}>\n    <div class={{AmplifyUI.loadingLogo}} data-test="'+QO+'">\n      <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n      viewBox="0 0 2000 1195" style="enable-background:new 0 0 2000 1195;" xml:space="preserve">\n        <g>\n          <path class="st0" d="M1026.8,146.2c-0.7,2.3-1.2,3.7-1.6,5.1C991.8,291,958.5,430.6,925,570.3c-1.6,6.7-3.8,13.3-6.2,19.7\n            c-3.9,10.4-12,16.3-22.8,16.5c-26.3,0.5-52.6,0.5-78.9,0c-9.5-0.2-17.3-5.3-21.2-14.2c-4.1-9.2-7.6-18.7-10.6-28.3\n            c-51-167.3-101.9-334.6-152.7-502c-2.5-8.4-4.7-16.9-6.2-25.5c-2-11.7,3.8-18.9,15.5-19c24.6-0.2,49.2,0.1,73.8,0.4\n            c12,0.2,21.1,5.9,24.8,17.3c5.4,16.3,10.1,32.8,14.4,49.4c33.9,133.3,67.7,266.6,101.5,399.9c0.3,1.3,0.8,2.6,1.5,5\n            c0.7-2,1.3-3,1.5-4.1c19.9-84.2,39.7-168.4,59.6-252.7c14.5-61.3,28.9-122.6,43.4-183.8c0.9-3.6,2.1-7.1,3.2-10.6\n            c4-13.2,13.5-19.8,26.6-20.1c24.1-0.6,48.2-0.5,72.3,0c12.6,0.2,21.5,7.2,25.1,19.2c3.9,12.9,7.1,26,10.1,39.1\n            c32.5,137.8,65,275.6,97.5,413.4c0.3,1.4,0.8,2.8,1.7,5.7c1.7-6.1,3-10.7,4.2-15.3c36.8-142.6,73.6-285.2,110.5-427.8\n            c1.4-5.5,3.7-10.8,5.7-16.2c4.5-12,13.8-17.8,26.1-18.1c21.7-0.6,43.5-0.5,65.2-0.7c2.2,0,4.4,0,6.6,0.3c9.9,1,14.9,5.9,14.3,15.9\n            c-0.4,7.5-1.8,15.1-4.1,22.3c-33.5,107.9-67.2,215.6-100.9,323.5c-20.5,65.7-41,131.4-61.6,197.1c-1.3,4-2.8,7.9-4.3,11.9\n            c-4.9,12.9-14.9,19.1-28.1,19.4c-23.9,0.5-47.9,0.4-71.8,0c-13.6-0.2-23.3-7.1-27.2-20.2c-4.5-15.5-8.3-31.2-12.1-46.9\n            c-31.2-129.6-62.3-259.3-93.4-388.9C1028,150.1,1027.5,148.7,1026.8,146.2z"/>\n          <path class="st0" d="M995.7,1194.2c-23.1,0-46.2,0.8-69.3-0.2c-25.4-1.1-50.7-3.5-76-5.7c-77.9-7-154.6-20.9-230.3-40.5\n            c-68.1-17.6-134.6-40.1-199.4-67.3C330.7,1042.5,245.3,996,164.5,941c-53.7-36.6-104.7-76.7-153-120.1c-3.5-3.1-6.6-6.8-9-10.8\n            c-3.5-5.8-3.4-12.1,0.8-17.5c4.3-5.6,10.5-7.4,17.2-5.7c4.5,1.2,8.8,3.3,12.9,5.5c42.2,22.1,83.9,45.3,126.7,66.4\n            c63.2,31.2,128.6,57.4,195.1,80.8c68.4,24,137.7,44.8,208.4,60.6c48.4,10.8,97.2,19.9,146,28.7c29.8,5.3,59.9,8.8,89.9,12.3\n            c23.4,2.7,46.9,4.6,70.3,6.3c22.8,1.7,45.7,3.3,68.5,4c39.8,1.1,79.5,2.1,119.3,1.8c29.9-0.2,59.9-2,89.8-4\n            c26.2-1.7,52.4-3.7,78.4-7.1c46.8-6.2,93.6-12.7,140.1-20.9c99-17.3,196-42.9,290.8-76.1c40.7-14.3,80.6-30.6,120.8-46.1\n            c12-4.6,23.6-5.4,34.7,2c11.5,7.7,15.3,22.7,7.6,34.2c-4,6-9.6,11.4-15.4,15.7c-81,59.3-169.6,104.7-262.8,141.3\n            c-77,30.2-156,53.6-237,70.3c-37.9,7.8-76.1,13.8-114.3,19.6c-24.7,3.7-49.7,6-74.7,8.2c-22.1,1.9-44.3,3.3-66.5,4.1\n            c-17.8,0.7-35.7,0.1-53.6,0.1C995.7,1194.3,995.7,1194.2,995.7,1194.2z"/>\n          <path class="st0" d="M1714.8,0c39.2,0.9,85.7,8.5,130.2,26.1c9.3,3.7,17.9,9.3,26.1,15.1c9,6.4,13.3,15.9,13.4,27.1\n            c0,12,0.1,23.9,0,35.9c0,2.5-0.4,5.1-1,7.5c-2.1,8.7-7.4,12.7-16.2,11.4c-5.7-0.9-11.6-2.6-16.8-5c-46.6-21.8-95.9-30.1-147-28.3\n            c-21.5,0.8-42.6,3.5-62.7,11.9c-37.6,15.6-54.4,54.2-39.7,91c7.1,17.8,21.1,28.8,37.3,37.7c21.4,11.8,44.5,19.1,67.6,26.5\n            c31.6,10,63.3,19.7,94.6,30.6c28.5,9.9,55.1,24,76.4,46.1c23.3,24.1,36.4,53.2,39.9,86.5c9.1,86.7-40.5,150.8-109.3,180.7\n            c-38.9,16.8-79.7,24.4-122,24.6c-56.9,0.2-112-9.7-164.9-30.7c-9.4-3.8-18.3-9.3-26.9-14.8c-9.7-6.2-13.6-16.1-13.9-27.3\n            c-0.4-13-0.3-26-0.1-38.9c0.3-14.9,8.1-21.1,22.5-17.3c8.2,2.2,16.2,5.6,24.1,9c52.7,22.5,107.7,31.7,164.8,29.6\n            c24.9-0.9,49.4-4.7,72-16c29.7-14.9,45.7-38.5,44.5-72.4c-0.9-23.7-11.9-41.7-31.7-54.4c-17.2-10.9-36.1-18-55.4-24.1\n            c-36.4-11.5-73.1-22.4-109.3-34.6c-30.8-10.4-58.7-26.2-81.4-50.2c-43.4-45.8-56.3-116.8-30.6-172.5c18.1-39.3,48.5-66.6,86.9-85.5\n            C1624,6.4,1664.5,0,1714.8,0z"/>\n          <path class="st0" d="M1860.6,746.5c33.3,0.4,66.3,2.8,98.5,11.6c8.4,2.3,16.5,5.8,24.6,9.1c7.5,3.1,11.9,9.2,13.5,17.2\n            c2.5,12.2,3.1,24.5,2.5,37.1c-1.2,24-5,47.5-10.5,70.8c-12.3,51.3-31.6,99.8-60.1,144.4c-16.5,25.9-36,49.3-59.4,69.2\n            c-5.2,4.4-10.7,8.3-17.9,8.4c-6.8,0-10.7-3.5-10.3-10.2c0.2-4.1,1.3-8.3,2.9-12.1c17-42.7,33.7-85.6,47-129.7\n            c7.6-25.2,14.3-50.6,16.5-76.9c0.7-8.8,0.1-17.9-1.1-26.7c-1.6-12-9.3-19.8-20.2-24.6c-12.5-5.4-25.8-8.2-39.2-9.1\n            c-18.6-1.3-37.4-2.3-56-2c-20.7,0.4-41.3,2.1-62,3.7c-18.8,1.4-37.5,3.3-56.3,5.2c-9.9,1-19.7,2.4-29.5,3.6c-1,0.1-2,0.4-3,0.3\n            c-4.8-0.2-9.7-0.8-12.4-5.4c-2.7-4.6-1.8-9.7,1.5-13.2c5.1-5.5,10.6-10.8,16.9-14.9c36.4-24,76.8-38.4,119.4-46.2\n            c22.1-4,44.6-5.9,67-8.3C1842.1,746.9,1851.4,746.9,1860.6,746.5z"/>\n          <path class="st0" d="M591.6,541.4c-21.4-36.5-29.7-76.2-29.7-117.9c-0.1-70.3,0.1-140.6-0.1-211c-0.1-29.6-3.8-58.8-13-87.1\n            c-15.6-48-45.4-83.2-92.4-102.9C424.8,9.3,391.7,3.9,357.9,2c-63.7-3.6-125.3,6.4-184.7,29.3c-11.7,4.5-23,10.3-34.3,16\n            c-11.6,5.8-17.3,15.4-17.1,28.6c0.2,12.6-0.1,25.3,0,37.9c0,2.9,0.1,5.8,0.7,8.5c2,9.5,7.9,13.7,17.3,11.2c8.4-2.2,16.8-5,24.9-8.2\n            c40.4-15.9,81.7-28.9,125.3-32.1c29.7-2.2,59.3-1.4,88.3,6.5c24.2,6.6,44.8,18.5,57.2,41.5c10.1,18.6,15.1,38.7,16.1,59.5\n            c1.3,24.7,1,49.5,1.4,74.3c0,0.8-0.2,1.6-0.3,2.8c-16.1-3.3-31.5-6.6-47.1-9.5c-46.9-8.6-94.1-13.2-141.8-7.7\n            c-33.5,3.9-65.4,12.9-94.4,30.5c-37.4,22.6-64.8,53.5-78.2,95.7c-10.9,34.3-11.9,69.4-4.4,104.4c12,56.1,44.4,96,97.9,117.4\n            c41.8,16.6,85.2,17.2,128.9,9.5c57.4-10.1,104-39.3,142.3-82.5c1.3-1.5,2.7-2.9,4.3-4.8c1.7,3.4,3.1,6.2,4.5,9\n            c10.4,21.4,22.2,42,38.5,59.7c11.2,12.1,24,14.5,37.5,5.8c14.5-9.3,28.8-18.8,42.9-28.6C597.7,567,600.3,556.1,591.6,541.4z\n              M448.3,436.2c-7.1,29.5-25.4,50.8-49.1,68.2c-22,16.2-47.4,23.8-73.8,28.5c-20.7,3.6-41.6,4.4-62.3-0.2\n            c-35.6-8-59.6-35.5-63.5-72.3c-2.3-21.9-1.9-43.5,7-64.1c11.9-27.6,34-43.2,61.9-51.5c21.4-6.4,43.4-7.9,63.7-7.5\n            c41.1,0.2,79.8,5.3,117.9,14.4c1.6,0.4,4.1,2.4,4.1,3.7C454.7,382.5,454.7,409.6,448.3,436.2z"/>\n        </g>\n      </svg>\n    </div>\n    <div class={{AmplifyUI.loadingSceneName}} data-test="'+XO+'">{{sceneName}}</div>\n    <div *ngIf="sceneError" class={{AmplifyUI.sceneErrorText}} data-test="'+tT+'">{{sceneError}}</div>\n    <div *ngIf="!sceneError" class={{AmplifyUI.loadingBar}} data-test="'+eT+"\">\n      <div class={{AmplifyUI.loadingBarFill}} [ngStyle]=\"{ 'width': loadPercentage + '%' }\"></div>\n    </div>\n  </div>\n</div>\n",sx.decorators=[{type:f.Component,args:[{selector:"sumerian-scene-loading-core",template:lT}]}],sx.ctorParameters=function(){return[]},sx.propDecorators={loadPercentage:[{type:f.Input}],sceneName:[{type:f.Input}],sceneError:[{type:f.Input}]},nT=sx;function sx(){this.AmplifyUI=R}lT=function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var r=Array(e),i=0,t=0;t<n;t++)for(var o=arguments[t],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r},rT=[at,zO,rO,dT,fn,CT,iO,kT,pn,BT,AI,WT,XP,ek,FP,ak,uT,AO,pT,vk,iT,Ik,oT,Nk,sT,qk,cT,rT,Xk,nT],ax.decorators=[{type:f.NgModule,args:[{imports:[t.CommonModule,cn],declarations:lT([dn],rT),entryComponents:lT(rT),providers:[],exports:lT(rT)}]}],dn=ax;function ax(){}var ux,cx,lT=(ux=function(e,t){return(ux=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}ux(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),rT='\n<ion-grid class="amplify-ionic-grid-padding-left">\n    <ion-row>\n        <ion-col size="6" class="amplify-ionic-grid-padding-left">\n            <ion-label class="amplify-input-label push-right"\n                position="stacked" \n                for="localPhoneNumberField">\n                {{ this.amplifyService.i18n().get(this._label) }}\n                <span *ngIf="_required">*</span>\n            </ion-label>\n            <ion-select \n            #countryCodeField\n            name="countryCode"\n            class="amplify-select-phone-country"\n            [value]="_country_code"\n            (ionChange)="setCountryCode($event.target.value)"\n            data-test="'+aT.dialCodeSelect+'">\n            <ion-select-option *ngFor="let country of _countries"\n            value={{country.value}}>\n                {{country.label}}\n            </ion-select-option>\n            </ion-select>\n        </ion-col>\n        <ion-col size="6">\n            <ion-label class="amplify-input-label push-right">&nbsp;</ion-label>\n            <ion-input\n            #localPhoneNumberField\n            class="amplify-form-input-phone-ionic"\n            placeholder="{{ this.amplifyService.i18n().get(this.getPlaceholder()) }}"\n            name="local_phone_number"\n            type="tel"\n            (ionChange)="setLocalPhoneNumber($event.target.value)"\n            data-test="'+aT.phoneNumberInput+'"\n            ></ion-input>\n        </ion-col>\n    </ion-row>\n</ion-grid>',AO=(lT(lx,cx=AO),lx.decorators=[{type:f.Component,args:[{selector:"amplify-auth-phone-field-ionic",template:rT}]}],lx.ctorParameters=function(){return[{type:BO,decorators:[{type:f.Inject,args:[BO]}]}]},lx);function lx(e){var t=cx.call(this,e)||this;return t.amplifyService=e,t}var px,dx,rT=(px=function(e,t){return(px=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}px(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),aT='\n\n    <ion-item lines="none" *ngIf="this._usernameAttributes === \'email\'">\n        <ion-label class="amplify-input-label amplify-input-label-ionic" for="emailField" position="stacked">{{ this.amplifyService.i18n().get(\'Email *\') }}</ion-label>\n        <ion-input type="text"\n            #emailField\n            class="amplify-form-input"\n            type="email"\n            placeholder="{{ this.amplifyService.i18n().get(this.getPlaceholder()) }}"\n            (input)="setEmail($event.target.value)"\n            data-test="'+aT.emailInput+'"\n        ></ion-input>\n    </ion-item> \n    <ion-item lines="none" *ngIf="this._usernameAttributes === \'phone_number\'">\n       <amplify-auth-phone-field-ionic\n            (phoneFieldChanged)="onPhoneFieldChanged($event)"\n        ></amplify-auth-phone-field-ionic>\n    </ion-item>\n    <ion-item lines="none" *ngIf="this._usernameAttributes !== \'email\' && this._usernameAttributes !== \'phone_number\'">\n        <ion-label class="amplify-input-label amplify-input-label-ionic" for="usernameField" position="stacked">{{ this.amplifyService.i18n().get(getUsernameLabel()) }} *</ion-label>\n        <ion-input type="text"\n            #usernameField\n            class="amplify-form-input"\n            type="text"\n            placeholder="{{ this.amplifyService.i18n().get(this.getPlaceholder()) }}"\n            (input)="setUsername($event.target.value)"\n            data-test="'+aT.usernameInput+'"\n        ></ion-input>\n    </ion-item>\n\n',uT=(rT(fx,dx=uT),fx.decorators=[{type:f.Component,args:[{selector:"amplify-auth-username-field-ionic",template:aT}]}],fx.ctorParameters=function(){return[{type:BO,decorators:[{type:f.Inject,args:[BO]}]}]},fx);function fx(e){var t=dx.call(this,e)||this;return t.amplifyService=e,t}var hx,gx,aT=(hx=function(e,t){return(hx=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}hx(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),eT='\n<div class={{AmplifyUI.loadingOverlay}}>\n  <div class={{AmplifyUI.loadingContainer}}>\n    <div class={{AmplifyUI.loadingLogo}} data-test="'+QO+'">\n      <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n      viewBox="0 0 2000 1195" style="enable-background:new 0 0 2000 1195;" xml:space="preserve">\n        <g>\n          <path class="st0" d="M1026.8,146.2c-0.7,2.3-1.2,3.7-1.6,5.1C991.8,291,958.5,430.6,925,570.3c-1.6,6.7-3.8,13.3-6.2,19.7\n            c-3.9,10.4-12,16.3-22.8,16.5c-26.3,0.5-52.6,0.5-78.9,0c-9.5-0.2-17.3-5.3-21.2-14.2c-4.1-9.2-7.6-18.7-10.6-28.3\n            c-51-167.3-101.9-334.6-152.7-502c-2.5-8.4-4.7-16.9-6.2-25.5c-2-11.7,3.8-18.9,15.5-19c24.6-0.2,49.2,0.1,73.8,0.4\n            c12,0.2,21.1,5.9,24.8,17.3c5.4,16.3,10.1,32.8,14.4,49.4c33.9,133.3,67.7,266.6,101.5,399.9c0.3,1.3,0.8,2.6,1.5,5\n            c0.7-2,1.3-3,1.5-4.1c19.9-84.2,39.7-168.4,59.6-252.7c14.5-61.3,28.9-122.6,43.4-183.8c0.9-3.6,2.1-7.1,3.2-10.6\n            c4-13.2,13.5-19.8,26.6-20.1c24.1-0.6,48.2-0.5,72.3,0c12.6,0.2,21.5,7.2,25.1,19.2c3.9,12.9,7.1,26,10.1,39.1\n            c32.5,137.8,65,275.6,97.5,413.4c0.3,1.4,0.8,2.8,1.7,5.7c1.7-6.1,3-10.7,4.2-15.3c36.8-142.6,73.6-285.2,110.5-427.8\n            c1.4-5.5,3.7-10.8,5.7-16.2c4.5-12,13.8-17.8,26.1-18.1c21.7-0.6,43.5-0.5,65.2-0.7c2.2,0,4.4,0,6.6,0.3c9.9,1,14.9,5.9,14.3,15.9\n            c-0.4,7.5-1.8,15.1-4.1,22.3c-33.5,107.9-67.2,215.6-100.9,323.5c-20.5,65.7-41,131.4-61.6,197.1c-1.3,4-2.8,7.9-4.3,11.9\n            c-4.9,12.9-14.9,19.1-28.1,19.4c-23.9,0.5-47.9,0.4-71.8,0c-13.6-0.2-23.3-7.1-27.2-20.2c-4.5-15.5-8.3-31.2-12.1-46.9\n            c-31.2-129.6-62.3-259.3-93.4-388.9C1028,150.1,1027.5,148.7,1026.8,146.2z"/>\n          <path class="st0" d="M995.7,1194.2c-23.1,0-46.2,0.8-69.3-0.2c-25.4-1.1-50.7-3.5-76-5.7c-77.9-7-154.6-20.9-230.3-40.5\n            c-68.1-17.6-134.6-40.1-199.4-67.3C330.7,1042.5,245.3,996,164.5,941c-53.7-36.6-104.7-76.7-153-120.1c-3.5-3.1-6.6-6.8-9-10.8\n            c-3.5-5.8-3.4-12.1,0.8-17.5c4.3-5.6,10.5-7.4,17.2-5.7c4.5,1.2,8.8,3.3,12.9,5.5c42.2,22.1,83.9,45.3,126.7,66.4\n            c63.2,31.2,128.6,57.4,195.1,80.8c68.4,24,137.7,44.8,208.4,60.6c48.4,10.8,97.2,19.9,146,28.7c29.8,5.3,59.9,8.8,89.9,12.3\n            c23.4,2.7,46.9,4.6,70.3,6.3c22.8,1.7,45.7,3.3,68.5,4c39.8,1.1,79.5,2.1,119.3,1.8c29.9-0.2,59.9-2,89.8-4\n            c26.2-1.7,52.4-3.7,78.4-7.1c46.8-6.2,93.6-12.7,140.1-20.9c99-17.3,196-42.9,290.8-76.1c40.7-14.3,80.6-30.6,120.8-46.1\n            c12-4.6,23.6-5.4,34.7,2c11.5,7.7,15.3,22.7,7.6,34.2c-4,6-9.6,11.4-15.4,15.7c-81,59.3-169.6,104.7-262.8,141.3\n            c-77,30.2-156,53.6-237,70.3c-37.9,7.8-76.1,13.8-114.3,19.6c-24.7,3.7-49.7,6-74.7,8.2c-22.1,1.9-44.3,3.3-66.5,4.1\n            c-17.8,0.7-35.7,0.1-53.6,0.1C995.7,1194.3,995.7,1194.2,995.7,1194.2z"/>\n          <path class="st0" d="M1714.8,0c39.2,0.9,85.7,8.5,130.2,26.1c9.3,3.7,17.9,9.3,26.1,15.1c9,6.4,13.3,15.9,13.4,27.1\n            c0,12,0.1,23.9,0,35.9c0,2.5-0.4,5.1-1,7.5c-2.1,8.7-7.4,12.7-16.2,11.4c-5.7-0.9-11.6-2.6-16.8-5c-46.6-21.8-95.9-30.1-147-28.3\n            c-21.5,0.8-42.6,3.5-62.7,11.9c-37.6,15.6-54.4,54.2-39.7,91c7.1,17.8,21.1,28.8,37.3,37.7c21.4,11.8,44.5,19.1,67.6,26.5\n            c31.6,10,63.3,19.7,94.6,30.6c28.5,9.9,55.1,24,76.4,46.1c23.3,24.1,36.4,53.2,39.9,86.5c9.1,86.7-40.5,150.8-109.3,180.7\n            c-38.9,16.8-79.7,24.4-122,24.6c-56.9,0.2-112-9.7-164.9-30.7c-9.4-3.8-18.3-9.3-26.9-14.8c-9.7-6.2-13.6-16.1-13.9-27.3\n            c-0.4-13-0.3-26-0.1-38.9c0.3-14.9,8.1-21.1,22.5-17.3c8.2,2.2,16.2,5.6,24.1,9c52.7,22.5,107.7,31.7,164.8,29.6\n            c24.9-0.9,49.4-4.7,72-16c29.7-14.9,45.7-38.5,44.5-72.4c-0.9-23.7-11.9-41.7-31.7-54.4c-17.2-10.9-36.1-18-55.4-24.1\n            c-36.4-11.5-73.1-22.4-109.3-34.6c-30.8-10.4-58.7-26.2-81.4-50.2c-43.4-45.8-56.3-116.8-30.6-172.5c18.1-39.3,48.5-66.6,86.9-85.5\n            C1624,6.4,1664.5,0,1714.8,0z"/>\n          <path class="st0" d="M1860.6,746.5c33.3,0.4,66.3,2.8,98.5,11.6c8.4,2.3,16.5,5.8,24.6,9.1c7.5,3.1,11.9,9.2,13.5,17.2\n            c2.5,12.2,3.1,24.5,2.5,37.1c-1.2,24-5,47.5-10.5,70.8c-12.3,51.3-31.6,99.8-60.1,144.4c-16.5,25.9-36,49.3-59.4,69.2\n            c-5.2,4.4-10.7,8.3-17.9,8.4c-6.8,0-10.7-3.5-10.3-10.2c0.2-4.1,1.3-8.3,2.9-12.1c17-42.7,33.7-85.6,47-129.7\n            c7.6-25.2,14.3-50.6,16.5-76.9c0.7-8.8,0.1-17.9-1.1-26.7c-1.6-12-9.3-19.8-20.2-24.6c-12.5-5.4-25.8-8.2-39.2-9.1\n            c-18.6-1.3-37.4-2.3-56-2c-20.7,0.4-41.3,2.1-62,3.7c-18.8,1.4-37.5,3.3-56.3,5.2c-9.9,1-19.7,2.4-29.5,3.6c-1,0.1-2,0.4-3,0.3\n            c-4.8-0.2-9.7-0.8-12.4-5.4c-2.7-4.6-1.8-9.7,1.5-13.2c5.1-5.5,10.6-10.8,16.9-14.9c36.4-24,76.8-38.4,119.4-46.2\n            c22.1-4,44.6-5.9,67-8.3C1842.1,746.9,1851.4,746.9,1860.6,746.5z"/>\n          <path class="st0" d="M591.6,541.4c-21.4-36.5-29.7-76.2-29.7-117.9c-0.1-70.3,0.1-140.6-0.1-211c-0.1-29.6-3.8-58.8-13-87.1\n            c-15.6-48-45.4-83.2-92.4-102.9C424.8,9.3,391.7,3.9,357.9,2c-63.7-3.6-125.3,6.4-184.7,29.3c-11.7,4.5-23,10.3-34.3,16\n            c-11.6,5.8-17.3,15.4-17.1,28.6c0.2,12.6-0.1,25.3,0,37.9c0,2.9,0.1,5.8,0.7,8.5c2,9.5,7.9,13.7,17.3,11.2c8.4-2.2,16.8-5,24.9-8.2\n            c40.4-15.9,81.7-28.9,125.3-32.1c29.7-2.2,59.3-1.4,88.3,6.5c24.2,6.6,44.8,18.5,57.2,41.5c10.1,18.6,15.1,38.7,16.1,59.5\n            c1.3,24.7,1,49.5,1.4,74.3c0,0.8-0.2,1.6-0.3,2.8c-16.1-3.3-31.5-6.6-47.1-9.5c-46.9-8.6-94.1-13.2-141.8-7.7\n            c-33.5,3.9-65.4,12.9-94.4,30.5c-37.4,22.6-64.8,53.5-78.2,95.7c-10.9,34.3-11.9,69.4-4.4,104.4c12,56.1,44.4,96,97.9,117.4\n            c41.8,16.6,85.2,17.2,128.9,9.5c57.4-10.1,104-39.3,142.3-82.5c1.3-1.5,2.7-2.9,4.3-4.8c1.7,3.4,3.1,6.2,4.5,9\n            c10.4,21.4,22.2,42,38.5,59.7c11.2,12.1,24,14.5,37.5,5.8c14.5-9.3,28.8-18.8,42.9-28.6C597.7,567,600.3,556.1,591.6,541.4z\n              M448.3,436.2c-7.1,29.5-25.4,50.8-49.1,68.2c-22,16.2-47.4,23.8-73.8,28.5c-20.7,3.6-41.6,4.4-62.3-0.2\n            c-35.6-8-59.6-35.5-63.5-72.3c-2.3-21.9-1.9-43.5,7-64.1c11.9-27.6,34-43.2,61.9-51.5c21.4-6.4,43.4-7.9,63.7-7.5\n            c41.1,0.2,79.8,5.3,117.9,14.4c1.6,0.4,4.1,2.4,4.1,3.7C454.7,382.5,454.7,409.6,448.3,436.2z"/>\n        </g>\n      </svg>\n    </div>\n    <div class={{AmplifyUI.loadingSceneName}} data-test="'+XO+'">{{sceneName}}</div>\n    <div *ngIf="sceneError" class={{AmplifyUI.sceneErrorText}} data-test="'+tT+'">{{sceneError}}</div>\n    <div *ngIf="!sceneError" class={{AmplifyUI.loadingBar}} data-test="'+eT+"\">\n      <div class={{AmplifyUI.loadingBarFill}} [ngStyle]=\"{ 'width': loadPercentage + '%' }\"></div>\n    </div>\n  </div>\n</div>\n",nT=(aT(mx,gx=nT),mx.decorators=[{type:f.Component,args:[{selector:"sumerian-scene-loading-ionic",template:eT}]}],mx.ctorParameters=function(){return[]},mx);function mx(){return gx.call(this)||this}eT=function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var r=Array(e),i=0,t=0;t<n;t++)for(var o=arguments[t],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r},nT=[GO,mT,AT,pk,ik,MT,KT,uT,AO,ZT,Uk,Ck,Tk,Wk,rx,nT],yx.decorators=[{type:f.NgModule,args:[{imports:[t.CommonModule,cn],declarations:eT(nT),entryComponents:eT(nT),providers:[BO],schemas:[f.CUSTOM_ELEMENTS_SCHEMA],exports:eT(nT)}]}],nT=yx;function yx(){}e.AmplifyAngularModule=dn,e.AmplifyIonicModule=nT,e.AmplifyModules=function(e){return new BO(e)},e.AmplifyService=BO,Object.defineProperty(e,"__esModule",{value:!0})});
