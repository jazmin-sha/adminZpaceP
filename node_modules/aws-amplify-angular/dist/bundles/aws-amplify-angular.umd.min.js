!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/common"),require("@aws-amplify/core"),require("lodash"),require("url"),require("buffer"),require("http"),require("fs"),require("os"),require("path"),require("child_process"),require("crypto"),require("uuid"),require("https"),require("stream"),require("http2"),require("process"),require("@aws-crypto/crc32"),require("lodash/isEmpty"),require("lodash/isEqual"),require("lodash/get"),require("crypto-js/core"),require("crypto-js/lib-typedarrays"),require("crypto-js/sha256"),require("crypto-js/hmac-sha256"),require("crypto-js/enc-base64"),require("isomorphic-unfetch"),require("js-cookie"),require("fast-xml-parser"),require("axios"),require("events"),require("zen-observable"),require("paho-mqtt"),require("util"),require("@aws-amplify/ui")):"function"==typeof define&&define.amd?define(["exports","@angular/core","@angular/common","@aws-amplify/core","lodash","url","buffer","http","fs","os","path","child_process","crypto","uuid","https","stream","http2","process","@aws-crypto/crc32","lodash/isEmpty","lodash/isEqual","lodash/get","crypto-js/core","crypto-js/lib-typedarrays","crypto-js/sha256","crypto-js/hmac-sha256","crypto-js/enc-base64","isomorphic-unfetch","js-cookie","fast-xml-parser","axios","events","zen-observable","paho-mqtt","util","@aws-amplify/ui"],t):t((e=e||self)["aws-amplify-angular"]={},e.ng.core,e.ng.common,e.Amplify,e._,e.url,e.buffer,e.http,e.fs,e.os,e.path,e.child_process,e.crypto$1,e.uuid,e.https,e.stream,e.http2,e.process$1,e.crc32,e.isEmpty,e.isEqual,e.get,e.CryptoJS,e.libTypedarrays,e.SHA256,e.HmacSHA256,e.Base64,0,e.Cookies,e.fastXmlParser,e.axios,e.events,e.zenObservable,e.Paho,e.util,e.AmplifyUI)}(this,function(e,f,t,E,v,S,d,h,a,o,i,c,n,m,g,s,r,u,l,p,y,b,w,C,_,I,A,P,O,k,T,x,N,M,R,U){"use strict";var D="default"in E?E.default:E;u=u&&Object.prototype.hasOwnProperty.call(u,"default")?u.default:u,p=p&&Object.prototype.hasOwnProperty.call(p,"default")?p.default:p,y=y&&Object.prototype.hasOwnProperty.call(y,"default")?y.default:y,b=b&&Object.prototype.hasOwnProperty.call(b,"default")?b.default:b,w=w&&Object.prototype.hasOwnProperty.call(w,"default")?w.default:w,C=C&&Object.prototype.hasOwnProperty.call(C,"default")?C.default:C,_=_&&Object.prototype.hasOwnProperty.call(_,"default")?_.default:_,I=I&&Object.prototype.hasOwnProperty.call(I,"default")?I.default:I,A=A&&Object.prototype.hasOwnProperty.call(A,"default")?A.default:A,T=T&&Object.prototype.hasOwnProperty.call(T,"default")?T.default:T,N=N&&Object.prototype.hasOwnProperty.call(N,"default")?N.default:N;var L=function(e,t){return(L=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function F(e,t){function n(){this.constructor=e}L(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var j=function(){return(j=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function B(e,t){var n={};for(o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,o=Object.getOwnPropertySymbols(e);r<o.length;r++)t.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(n[o[r]]=e[o[r]]);return n}function V(e,t,n,r){var o,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;0<=a;a--)(o=e[a])&&(s=(i<3?o(s):3<i?o(t,n,s):o(t,n))||s);return 3<i&&s&&Object.defineProperty(t,n,s),s}function z(n,r){return function(e,t){r(e,t,n)}}function q(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function K(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,o)}i((u=u.apply(e,s||[])).next())})}function H(n,r){var o,i,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&t[0]?i.return:t[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,t[1])).done)return s;switch(i=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,i=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],i=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}}function G(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return{value:(e=e&&r>=e.length?void 0:e)&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function W(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(r=i.next()).done;)s.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s}function $(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(W(arguments[t]));return e}function Y(e){return this instanceof Y?(this.v=e,this):new Y(e)}function J(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o=n.apply(e,t||[]),i=[],s={};return r("next"),r("throw"),r("return"),s[Symbol.asyncIterator]=function(){return this},s;function r(r){o[r]&&(s[r]=function(n){return new Promise(function(e,t){1<i.push([r,n,e,t])||a(r,n)})})}function a(e,t){try{(n=o[e](t)).value instanceof Y?Promise.resolve(n.value.v).then(u,c):l(i[0][2],n)}catch(e){l(i[0][3],e)}var n}function u(e){a("next",e)}function c(e){a("throw",e)}function l(e,t){e(t),i.shift(),i.length&&a(i[0][0],i[0][1])}}function Z(s){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,t=s[Symbol.asyncIterator];return t?t.call(s):(s=G(s),e={},n("next"),n("throw"),n("return"),e[Symbol.asyncIterator]=function(){return this},e);function n(i){e[i]=s[i]&&function(o){return new Promise(function(e,t){var n,r;o=s[i](o),n=e,e=t,r=o.done,t=o.value,Promise.resolve(t).then(function(e){n({value:e,done:r})},e)})}}}function Q(e){return"function"==typeof e}var X=!1,ee={Promise:void 0,set useDeprecatedSynchronousErrorHandling(e){e&&(new Error).stack,X=e},get useDeprecatedSynchronousErrorHandling(){return X}};function te(e){setTimeout(function(){throw e},0)}var ne={closed:!0,next:function(e){},error:function(e){if(ee.useDeprecatedSynchronousErrorHandling)throw e;te(e)},complete:function(){}},re=Array.isArray||function(e){return e&&"number"==typeof e.length};function oe(e){return null!==e&&"object"==typeof e}var ie,se=(ce.prototype=Object.create(Error.prototype),ce),ae=(ue.prototype.unsubscribe=function(){var e;if(!this.closed){var t=this._parentOrParents,n=this._ctorUnsubscribe,r=this._unsubscribe,o=this._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,t instanceof ue)t.remove(this);else if(null!==t)for(var i=0;i<t.length;++i)t[i].remove(this);if(Q(r)){n&&(this._unsubscribe=void 0);try{r.call(this)}catch(t){e=t instanceof se?le(t.errors):[t]}}if(re(o))for(var i=-1,s=o.length;++i<s;){var a=o[i];if(oe(a))try{a.unsubscribe()}catch(t){e=e||[],t instanceof se?e=e.concat(le(t.errors)):e.push(t)}}if(e)throw new se(e)}},ue.prototype.add=function(e){var t,n=e;if(!e)return ue.EMPTY;switch(typeof e){case"function":n=new ue(e);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;n instanceof ue||(t=n,(n=new ue)._subscriptions=[t]);break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}var r=n._parentOrParents;if(null===r)n._parentOrParents=this;else if(r instanceof ue){if(r===this)return n;n._parentOrParents=[r,this]}else{if(-1!==r.indexOf(this))return n;r.push(this)}return null===(r=this._subscriptions)?this._subscriptions=[n]:r.push(n),n},ue.prototype.remove=function(e){var t=this._subscriptions;!t||-1!==(e=t.indexOf(e))&&t.splice(e,1)},ue.EMPTY=((ie=new ue).closed=!0,ie),ue);function ue(e){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,e&&(this._ctorUnsubscribe=!0,this._unsubscribe=e)}function ce(e){return Error.call(this),this.message=e?e.length+" errors occurred during unsubscription:\n"+e.map(function(e,t){return t+1+") "+e.toString()}).join("\n  "):"",this.name="UnsubscriptionError",this.errors=e,this}function le(e){return e.reduce(function(e,t){return e.concat(t instanceof se?t.errors:t)},[])}var pe,de,fe="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random(),he=(F(ye,de=ae),ye.prototype[fe]=function(){return this},ye.create=function(e,t,n){return(n=new ye(e,t,n)).syncErrorThrowable=!1,n},ye.prototype.next=function(e){this.isStopped||this._next(e)},ye.prototype.error=function(e){this.isStopped||(this.isStopped=!0,this._error(e))},ye.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},ye.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,de.prototype.unsubscribe.call(this))},ye.prototype._next=function(e){this.destination.next(e)},ye.prototype._error=function(e){this.destination.error(e),this.unsubscribe()},ye.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},ye.prototype._unsubscribeAndRecycle=function(){var e=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=e,this},ye),me=(F(ge,pe=he),ge.prototype.next=function(e){var t;!this.isStopped&&this._next&&(t=this._parentSubscriber,ee.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e))},ge.prototype.error=function(e){if(!this.isStopped){var t=this._parentSubscriber,n=ee.useDeprecatedSynchronousErrorHandling;if(this._error)n&&t.syncErrorThrowable?this.__tryOrSetError(t,this._error,e):this.__tryOrUnsub(this._error,e),this.unsubscribe();else if(t.syncErrorThrowable)n?(t.syncErrorValue=e,t.syncErrorThrown=!0):te(e),this.unsubscribe();else{if(this.unsubscribe(),n)throw e;te(e)}}},ge.prototype.complete=function(){var e,t,n=this;this.isStopped||(e=this._parentSubscriber,this._complete&&(t=function(){return n._complete.call(n._context)},ee.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,t):this.__tryOrUnsub(t)),this.unsubscribe())},ge.prototype.__tryOrUnsub=function(e,t){try{e.call(this._context,t)}catch(e){if(this.unsubscribe(),ee.useDeprecatedSynchronousErrorHandling)throw e;te(e)}},ge.prototype.__tryOrSetError=function(e,t,n){if(!ee.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{t.call(this._context,n)}catch(t){return ee.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=t,e.syncErrorThrown=!0):(te(t),!0)}return!1},ge.prototype._unsubscribe=function(){var e=this._parentSubscriber;this._context=null,this._parentSubscriber=null,e.unsubscribe()},ge);function ge(e,t,n,r){var o,i=pe.call(this)||this;return i._parentSubscriber=e,e=i,Q(t)?o=t:t&&(o=t.next,n=t.error,r=t.complete,t!==ne&&(Q((e=Object.create(t)).unsubscribe)&&i.add(e.unsubscribe.bind(e)),e.unsubscribe=i.unsubscribe.bind(i))),i._context=e,i._next=o,i._error=n,i._complete=r,i}function ye(e,t,n){var r=de.call(this)||this;switch(r.syncErrorValue=null,r.syncErrorThrown=!1,r.syncErrorThrowable=!1,r.isStopped=!1,arguments.length){case 0:r.destination=ne;break;case 1:if(!e){r.destination=ne;break}if("object"==typeof e){e instanceof ye?(r.syncErrorThrowable=e.syncErrorThrowable,(r.destination=e).add(r)):(r.syncErrorThrowable=!0,r.destination=new me(r,e));break}default:r.syncErrorThrowable=!0,r.destination=new me(r,e,t,n)}return r}var ve="function"==typeof Symbol&&Symbol.observable||"@@observable";var be=(we.prototype.lift=function(e){var t=new we;return t.source=this,t.operator=e,t},we.prototype.subscribe=function(e,t,n){var r=this.operator,n=function(e,t,n){if(e){if(e instanceof he)return e;if(e[fe])return e[fe]()}return e||t||n?new he(e,t,n):new he(ne)}(e,t,n);if(r?n.add(r.call(n,this.source)):n.add(this.source||ee.useDeprecatedSynchronousErrorHandling&&!n.syncErrorThrowable?this._subscribe(n):this._trySubscribe(n)),ee.useDeprecatedSynchronousErrorHandling&&n.syncErrorThrowable&&(n.syncErrorThrowable=!1,n.syncErrorThrown))throw n.syncErrorValue;return n},we.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(e){ee.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),function(e){for(;e;){var t=e.closed,n=e.destination,r=e.isStopped;if(t||r)return;e=n&&n instanceof he?n:null}return 1}(t)?t.error(e):console.warn(e)}},we.prototype.forEach=function(r,e){var o=this;return new(e=Se(e))(function(e,t){var n=o.subscribe(function(e){try{r(e)}catch(e){t(e),n&&n.unsubscribe()}},t,e)})},we.prototype._subscribe=function(e){var t=this.source;return t&&t.subscribe(e)},we.prototype[ve]=function(){return this},we.prototype.pipe=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return 0===e.length?this:(0===(t=e).length?function(e){return e}:1===t.length?t[0]:function(e){return t.reduce(function(e,t){return t(e)},e)})(this)},we.prototype.toPromise=function(e){var r=this;return new(e=Se(e))(function(e,t){var n;r.subscribe(function(e){return n=e},function(e){return t(e)},function(){return e(n)})})},we.create=function(e){return new we(e)},we);function we(e){this._isScalar=!1,e&&(this._subscribe=e)}function Se(e){if(!(e=e||Promise))throw new Error("no Promise impl found");return e}var Ce,_e,Ee,Ie,Ae=(Ue.prototype=Object.create(Error.prototype),Ue),Pe=(F(Re,Ie=ae),Re.prototype.unsubscribe=function(){var e,t;this.closed||(this.closed=!0,e=(t=this.subject).observers,this.subject=null,!e||0===e.length||t.isStopped||t.closed||-1!==(t=e.indexOf(this.subscriber))&&e.splice(t,1))},Re),Oe=(F(Me,Ee=he),Me),ke=(F(Ne,_e=be),Ne.prototype[fe]=function(){return new Oe(this)},Ne.prototype.lift=function(e){var t=new Te(this,this);return t.operator=e,t},Ne.prototype.next=function(e){if(this.closed)throw new Ae;if(!this.isStopped)for(var t=this.observers,n=t.length,r=t.slice(),o=0;o<n;o++)r[o].next(e)},Ne.prototype.error=function(e){if(this.closed)throw new Ae;this.hasError=!0,this.thrownError=e,this.isStopped=!0;for(var t=this.observers,n=t.length,r=t.slice(),o=0;o<n;o++)r[o].error(e);this.observers.length=0},Ne.prototype.complete=function(){if(this.closed)throw new Ae;this.isStopped=!0;for(var e=this.observers,t=e.length,n=e.slice(),r=0;r<t;r++)n[r].complete();this.observers.length=0},Ne.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},Ne.prototype._trySubscribe=function(e){if(this.closed)throw new Ae;return _e.prototype._trySubscribe.call(this,e)},Ne.prototype._subscribe=function(e){if(this.closed)throw new Ae;return this.hasError?(e.error(this.thrownError),ae.EMPTY):this.isStopped?(e.complete(),ae.EMPTY):(this.observers.push(e),new Pe(this,e))},Ne.prototype.asObservable=function(){var e=new be;return e.source=this,e},Ne.create=function(e,t){return new Te(e,t)},Ne),Te=(F(xe,Ce=ke),xe.prototype.next=function(e){var t=this.destination;t&&t.next&&t.next(e)},xe.prototype.error=function(e){var t=this.destination;t&&t.error&&this.destination.error(e)},xe.prototype.complete=function(){var e=this.destination;e&&e.complete&&this.destination.complete()},xe.prototype._subscribe=function(e){return this.source?this.source.subscribe(e):ae.EMPTY},xe);function xe(e,t){var n=Ce.call(this)||this;return n.destination=e,n.source=t,n}function Ne(){var e=_e.call(this)||this;return e.observers=[],e.closed=!1,e.isStopped=!1,e.hasError=!1,e.thrownError=null,e}function Me(e){var t=Ee.call(this,e)||this;return t.destination=e,t}function Re(e,t){var n=Ie.call(this)||this;return n.subject=e,n.subscriber=t,n.closed=!1,n}function Ue(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}function De(t,n){return function(e){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return e.lift(new Fe(t,n))}}var Le,Fe=(Ve.prototype.call=function(e,t){return t.subscribe(new je(e,this.project,this.thisArg))},Ve),je=(F(Be,Le=he),Be.prototype._next=function(e){var t;try{t=this.project.call(this.thisArg,e,this.count++)}catch(e){return void this.destination.error(e)}this.destination.next(t)},Be);function Be(e,t,n){return(e=Le.call(this,e)||this).project=t,e.count=0,e.thisArg=n||e,e}function Ve(e,t){this.project=e,this.thisArg=t}var ze="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator",qe=function(e){return e&&"number"==typeof e.length&&"function"!=typeof e};function Ke(e){return e&&"function"!=typeof e.subscribe&&"function"==typeof e.then}var He=function(e){if(e&&"function"==typeof e[ve])return i=e,function(e){var t=i[ve]();if("function"!=typeof t.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return t.subscribe(e)};if(qe(e))return o=e,function(e){for(var t=0,n=o.length;t<n&&!e.closed;t++)e.next(o[t]);e.complete()};if(Ke(e))return n=e,function(t){return n.then(function(e){t.closed||(t.next(e),t.complete())},function(e){return t.error(e)}).then(null,te),t};if(e&&"function"==typeof e[ze])return r=e,function(e){for(var t=r[ze]();;){var n=void 0;try{n=t.next()}catch(t){return e.error(t),e}if(n.done){e.complete();break}if(e.next(n.value),e.closed)break}return"function"==typeof t.return&&e.add(function(){t.return&&t.return()}),e};var r,n,o,i,e=oe(e)?"an invalid object":"'"+e+"'";throw new TypeError("You provided "+e+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.")};function Ge(e,t){return t?function(e,t){if(null!=e){if((n=e)&&"function"==typeof n[ve])return a=e,u=t,new be(function(t){var n=new ae;return n.add(u.schedule(function(){var e=a[ve]();n.add(e.subscribe({next:function(e){n.add(u.schedule(function(){return t.next(e)}))},error:function(e){n.add(u.schedule(function(){return t.error(e)}))},complete:function(){n.add(u.schedule(function(){return t.complete()}))}}))})),n});if(Ke(e))return i=e,s=t,new be(function(t){var n=new ae;return n.add(s.schedule(function(){return i.then(function(e){n.add(s.schedule(function(){t.next(e),n.add(s.schedule(function(){return t.complete()}))}))},function(e){n.add(s.schedule(function(){return t.error(e)}))})})),n});if(qe(e))return r=e,o=t,new be(function(e){var t=new ae,n=0;return t.add(o.schedule(function(){n!==r.length?(e.next(r[n++]),e.closed||t.add(this.schedule())):e.complete()})),t});if((n=e)&&"function"==typeof n[ze]||"string"==typeof e)return function(t,n){if(!t)throw new Error("Iterable cannot be null");return new be(function(r){var o,e=new ae;return e.add(function(){o&&"function"==typeof o.return&&o.return()}),e.add(n.schedule(function(){o=t[ze](),e.add(n.schedule(function(){if(!r.closed){try{var e=o.next(),t=e.value,n=e.done}catch(e){return void r.error(e)}n?r.complete():(r.next(t),this.schedule())}}))})),e})}(e,t)}var r,o,i,s,a,u,n;throw new TypeError((null!==e&&typeof e||e)+" is not observable")}(e,t):e instanceof be?e:new be(He(e))}function We(u,c){return new be(function(r){var o=u.length;if(0!==o)for(var i=new Array(o),s=0,a=0,e=0;e<o;e++)!function(t){var e=Ge(u[t]),n=!1;r.add(e.subscribe({next:function(e){n||(n=!0,a++),i[t]=e},error:function(e){return r.error(e)},complete:function(){++s!==o&&n||(a===o&&r.next(c?c.reduce(function(e,t,n){return e[t]=i[n],e},{}):i),r.complete())}}))}(e);else r.complete()})}var $e=null,Ye=(Object.defineProperty(Je.prototype,"attrToPropMap",{get:function(){return this._attrToPropMap},set:function(e){this._attrToPropMap=e},enumerable:!0,configurable:!0}),Je);function Je(){this.resourceLoaderType=null}var Ze,Qe=(F(Xe,Ze=Ye),Xe.prototype.getDistributedNodes=function(e){return e.getDistributedNodes()},Xe.prototype.resolveAndSetHref=function(e,t,n){e.href=null==n?t:t+"/../"+n},Xe.prototype.supportsDOMEvents=function(){return!0},Xe.prototype.supportsNativeShadowDOM=function(){return"function"==typeof document.body.createShadowRoot},Xe.prototype.getAnimationPrefix=function(){return this._animationPrefix||""},Xe.prototype.getTransitionEnd=function(){return this._transitionEnd||""},Xe.prototype.supportsAnimation=function(){return null!=this._animationPrefix&&null!=this._transitionEnd},Xe);function Xe(){var t=Ze.call(this)||this;t._animationPrefix=null,t._transitionEnd=null;try{var n=t.createElement("div",document);if(null!=t.getStyle(n,"animationName"))t._animationPrefix="";else for(var e=["Webkit","Moz","O","ms"],r=0;r<e.length;r++)if(null!=t.getStyle(n,e[r]+"AnimationName")){t._animationPrefix="-"+e[r].toLowerCase()+"-";break}var o={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};Object.keys(o).forEach(function(e){null!=t.getStyle(n,e)&&(t._transitionEnd=o[e])})}catch(e){t._animationPrefix=null,t._transitionEnd=null}return t}var et,tt={class:"className",innerHtml:"innerHTML",readonly:"readOnly",tabindex:"tabIndex"},nt={"\b":"Backspace","\t":"Tab","":"Delete","":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},rt={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","Â":"NumLock"};f["Éµglobal"].Node&&(et=f["Éµglobal"].Node.prototype.contains||function(e){return!!(16&this.compareDocumentPosition(e))});var ot,it=(F(st,ot=Qe),st.prototype.parse=function(e){throw new Error("parse not implemented")},st.makeCurrent=function(){var e=new st;$e=$e||e},st.prototype.hasProperty=function(e,t){return t in e},st.prototype.setProperty=function(e,t,n){e[t]=n},st.prototype.getProperty=function(e,t){return e[t]},st.prototype.invoke=function(e,t,n){e[t].apply(e,n)},st.prototype.logError=function(e){window.console&&(console.error?console.error(e):console.log(e))},st.prototype.log=function(e){window.console&&window.console.log&&window.console.log(e)},st.prototype.logGroup=function(e){window.console&&window.console.group&&window.console.group(e)},st.prototype.logGroupEnd=function(){window.console&&window.console.groupEnd&&window.console.groupEnd()},Object.defineProperty(st.prototype,"attrToPropMap",{get:function(){return tt},enumerable:!0,configurable:!0}),st.prototype.contains=function(e,t){return et.call(e,t)},st.prototype.querySelector=function(e,t){return e.querySelector(t)},st.prototype.querySelectorAll=function(e,t){return e.querySelectorAll(t)},st.prototype.on=function(e,t,n){e.addEventListener(t,n,!1)},st.prototype.onAndCancel=function(e,t,n){return e.addEventListener(t,n,!1),function(){e.removeEventListener(t,n,!1)}},st.prototype.dispatchEvent=function(e,t){e.dispatchEvent(t)},st.prototype.createMouseEvent=function(e){var t=this.getDefaultDocument().createEvent("MouseEvent");return t.initEvent(e,!0,!0),t},st.prototype.createEvent=function(e){var t=this.getDefaultDocument().createEvent("Event");return t.initEvent(e,!0,!0),t},st.prototype.preventDefault=function(e){e.preventDefault(),e.returnValue=!1},st.prototype.isPrevented=function(e){return e.defaultPrevented||null!=e.returnValue&&!e.returnValue},st.prototype.getInnerHTML=function(e){return e.innerHTML},st.prototype.getTemplateContent=function(e){return"content"in e&&this.isTemplateElement(e)?e.content:null},st.prototype.getOuterHTML=function(e){return e.outerHTML},st.prototype.nodeName=function(e){return e.nodeName},st.prototype.nodeValue=function(e){return e.nodeValue},st.prototype.type=function(e){return e.type},st.prototype.content=function(e){return this.hasProperty(e,"content")?e.content:e},st.prototype.firstChild=function(e){return e.firstChild},st.prototype.nextSibling=function(e){return e.nextSibling},st.prototype.parentElement=function(e){return e.parentNode},st.prototype.childNodes=function(e){return e.childNodes},st.prototype.childNodesAsList=function(e){for(var t=e.childNodes,n=new Array(t.length),r=0;r<t.length;r++)n[r]=t[r];return n},st.prototype.clearNodes=function(e){for(;e.firstChild;)e.removeChild(e.firstChild)},st.prototype.appendChild=function(e,t){e.appendChild(t)},st.prototype.removeChild=function(e,t){e.removeChild(t)},st.prototype.replaceChild=function(e,t,n){e.replaceChild(t,n)},st.prototype.remove=function(e){return e.parentNode&&e.parentNode.removeChild(e),e},st.prototype.insertBefore=function(e,t,n){e.insertBefore(n,t)},st.prototype.insertAllBefore=function(t,n,e){e.forEach(function(e){return t.insertBefore(e,n)})},st.prototype.insertAfter=function(e,t,n){e.insertBefore(n,t.nextSibling)},st.prototype.setInnerHTML=function(e,t){e.innerHTML=t},st.prototype.getText=function(e){return e.textContent},st.prototype.setText=function(e,t){e.textContent=t},st.prototype.getValue=function(e){return e.value},st.prototype.setValue=function(e,t){e.value=t},st.prototype.getChecked=function(e){return e.checked},st.prototype.setChecked=function(e,t){e.checked=t},st.prototype.createComment=function(e){return this.getDefaultDocument().createComment(e)},st.prototype.createTemplate=function(e){var t=this.getDefaultDocument().createElement("template");return t.innerHTML=e,t},st.prototype.createElement=function(e,t){return(t=t||this.getDefaultDocument()).createElement(e)},st.prototype.createElementNS=function(e,t,n){return(n=n||this.getDefaultDocument()).createElementNS(e,t)},st.prototype.createTextNode=function(e,t){return(t=t||this.getDefaultDocument()).createTextNode(e)},st.prototype.createScriptTag=function(e,t,n){return(n=(n=n||this.getDefaultDocument()).createElement("SCRIPT")).setAttribute(e,t),n},st.prototype.createStyleElement=function(e,t){var n=(t=t||this.getDefaultDocument()).createElement("style");return this.appendChild(n,this.createTextNode(e,t)),n},st.prototype.createShadowRoot=function(e){return e.createShadowRoot()},st.prototype.getShadowRoot=function(e){return e.shadowRoot},st.prototype.getHost=function(e){return e.host},st.prototype.clone=function(e){return e.cloneNode(!0)},st.prototype.getElementsByClassName=function(e,t){return e.getElementsByClassName(t)},st.prototype.getElementsByTagName=function(e,t){return e.getElementsByTagName(t)},st.prototype.classList=function(e){return Array.prototype.slice.call(e.classList,0)},st.prototype.addClass=function(e,t){e.classList.add(t)},st.prototype.removeClass=function(e,t){e.classList.remove(t)},st.prototype.hasClass=function(e,t){return e.classList.contains(t)},st.prototype.setStyle=function(e,t,n){e.style[t]=n},st.prototype.removeStyle=function(e,t){e.style[t]=""},st.prototype.getStyle=function(e,t){return e.style[t]},st.prototype.hasStyle=function(e,t,n){return t=this.getStyle(e,t)||"",n?t==n:0<t.length},st.prototype.tagName=function(e){return e.tagName},st.prototype.attributeMap=function(e){for(var t=new Map,n=e.attributes,r=0;r<n.length;r++){var o=n.item(r);t.set(o.name,o.value)}return t},st.prototype.hasAttribute=function(e,t){return e.hasAttribute(t)},st.prototype.hasAttributeNS=function(e,t,n){return e.hasAttributeNS(t,n)},st.prototype.getAttribute=function(e,t){return e.getAttribute(t)},st.prototype.getAttributeNS=function(e,t,n){return e.getAttributeNS(t,n)},st.prototype.setAttribute=function(e,t,n){e.setAttribute(t,n)},st.prototype.setAttributeNS=function(e,t,n,r){e.setAttributeNS(t,n,r)},st.prototype.removeAttribute=function(e,t){e.removeAttribute(t)},st.prototype.removeAttributeNS=function(e,t,n){e.removeAttributeNS(t,n)},st.prototype.templateAwareRoot=function(e){return this.isTemplateElement(e)?this.content(e):e},st.prototype.createHtmlDocument=function(){return document.implementation.createHTMLDocument("fakeTitle")},st.prototype.getDefaultDocument=function(){return document},st.prototype.getBoundingClientRect=function(e){try{return e.getBoundingClientRect()}catch(e){return{top:0,bottom:0,left:0,right:0,width:0,height:0}}},st.prototype.getTitle=function(e){return e.title},st.prototype.setTitle=function(e,t){e.title=t||""},st.prototype.elementMatches=function(e,t){return!!this.isElementNode(e)&&(e.matches&&e.matches(t)||e.msMatchesSelector&&e.msMatchesSelector(t)||e.webkitMatchesSelector&&e.webkitMatchesSelector(t))},st.prototype.isTemplateElement=function(e){return this.isElementNode(e)&&"TEMPLATE"===e.nodeName},st.prototype.isTextNode=function(e){return e.nodeType===Node.TEXT_NODE},st.prototype.isCommentNode=function(e){return e.nodeType===Node.COMMENT_NODE},st.prototype.isElementNode=function(e){return e.nodeType===Node.ELEMENT_NODE},st.prototype.hasShadowRoot=function(e){return null!=e.shadowRoot&&e instanceof HTMLElement},st.prototype.isShadowRoot=function(e){return e instanceof DocumentFragment},st.prototype.importIntoDoc=function(e){return document.importNode(this.templateAwareRoot(e),!0)},st.prototype.adoptNode=function(e){return document.adoptNode(e)},st.prototype.getHref=function(e){return e.getAttribute("href")},st.prototype.getEventKey=function(e){var t=e.key;if(null==t){if(null==(t=e.keyIdentifier))return"Unidentified";t.startsWith("U+")&&(t=String.fromCharCode(parseInt(t.substring(2),16)),3===e.location&&rt.hasOwnProperty(t)&&(t=rt[t]))}return nt[t]||t},st.prototype.getGlobalEventTarget=function(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null},st.prototype.getHistory=function(){return window.history},st.prototype.getLocation=function(){return window.location},st.prototype.getBaseHref=function(e){var t,n=(ut=ut||document.querySelector("base"))?ut.getAttribute("href"):null;return null==n?null:(t=n,(at=at||document.createElement("a")).setAttribute("href",t),"/"===at.pathname.charAt(0)?at.pathname:"/"+at.pathname)},st.prototype.resetBaseElement=function(){ut=null},st.prototype.getUserAgent=function(){return window.navigator.userAgent},st.prototype.setData=function(e,t,n){this.setAttribute(e,"data-"+t,n)},st.prototype.getData=function(e,t){return this.getAttribute(e,"data-"+t)},st.prototype.getComputedStyle=function(e){return getComputedStyle(e)},st.prototype.supportsWebAnimation=function(){return"function"==typeof Element.prototype.animate},st.prototype.performanceNow=function(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()},st.prototype.supportsCookies=function(){return!0},st.prototype.getCookie=function(e){return t["ÉµparseCookieValue"](document.cookie,e)},st.prototype.setCookie=function(e,t){document.cookie=encodeURIComponent(e)+"="+encodeURIComponent(t)},st);function st(){return null!==ot&&ot.apply(this,arguments)||this}var at,ut=null,ct=t.DOCUMENT;function lt(){return window.history.pushState}var pt,dt=(F(ft,pt=t.PlatformLocation),ft.prototype._init=function(){this.location=$e.getLocation(),this._history=$e.getHistory()},ft.prototype.getBaseHrefFromDOM=function(){return $e.getBaseHref(this._doc)},ft.prototype.onPopState=function(e){$e.getGlobalEventTarget(this._doc,"window").addEventListener("popstate",e,!1)},ft.prototype.onHashChange=function(e){$e.getGlobalEventTarget(this._doc,"window").addEventListener("hashchange",e,!1)},Object.defineProperty(ft.prototype,"pathname",{get:function(){return this.location.pathname},set:function(e){this.location.pathname=e},enumerable:!0,configurable:!0}),Object.defineProperty(ft.prototype,"search",{get:function(){return this.location.search},enumerable:!0,configurable:!0}),Object.defineProperty(ft.prototype,"hash",{get:function(){return this.location.hash},enumerable:!0,configurable:!0}),ft.prototype.pushState=function(e,t,n){lt()?this._history.pushState(e,t,n):this.location.hash=n},ft.prototype.replaceState=function(e,t,n){lt()?this._history.replaceState(e,t,n):this.location.hash=n},ft.prototype.forward=function(){this._history.forward()},ft.prototype.back=function(){this._history.back()},ft.decorators=[{type:f.Injectable}],ft.ctorParameters=function(){return[{type:void 0,decorators:[{type:f.Inject,args:[ct]}]}]},ft);function ft(e){var t=pt.call(this)||this;return t._doc=e,t._init(),t}f.Injectable,new f.InjectionToken("TRANSITION_ID");var ht=(mt.init=function(){f.setTestabilityGetter(new mt)},mt.prototype.addToWindow=function(n){f["Éµglobal"].getAngularTestability=function(e,t){if(void 0===t&&(t=!0),null==(t=n.findTestabilityInTree(e,t)))throw new Error("Could not find testability for element.");return t},f["Éµglobal"].getAllAngularTestabilities=function(){return n.getAllTestabilities()},f["Éµglobal"].getAllAngularRootElements=function(){return n.getAllRootElements()},f["Éµglobal"].frameworkStabilizers||(f["Éµglobal"].frameworkStabilizers=[]),f["Éµglobal"].frameworkStabilizers.push(function(t){function n(e){o=o||e,0==--r&&t(o)}var e=f["Éµglobal"].getAllAngularTestabilities(),r=e.length,o=!1;e.forEach(function(e){e.whenStable(n)})})},mt.prototype.findTestabilityInTree=function(e,t,n){if(null==t)return null;var r=e.getTestability(t);return null!=r?r:n?$e.isShadowRoot(t)?this.findTestabilityInTree(e,$e.getHost(t),!0):this.findTestabilityInTree(e,$e.parentElement(t),!0):null},mt);function mt(){}f.Injectable;f.ApplicationRef,f.NgZone;f.APP_INITIALIZER,f.NgProbeToken,new f.Optional;var gt=new f.InjectionToken("EventManagerPlugins");yt.prototype.addEventListener=function(e,t,n){return this._findPluginFor(t).addEventListener(e,t,n)},yt.prototype.addGlobalEventListener=function(e,t,n){return this._findPluginFor(t).addGlobalEventListener(e,t,n)},yt.prototype.getZone=function(){return this._zone},yt.prototype._findPluginFor=function(e){var t=this._eventNameToPlugin.get(e);if(t)return t;for(var n=this._plugins,r=0;r<n.length;r++){var o=n[r];if(o.supports(e))return this._eventNameToPlugin.set(e,o),o}throw new Error("No event manager plugin found for event "+e)},yt.decorators=[{type:f.Injectable}],yt.ctorParameters=function(){return[{type:Array,decorators:[{type:f.Inject,args:[gt]}]},{type:f.NgZone}]};function yt(e,t){var n=this;this._zone=t,this._eventNameToPlugin=new Map,e.forEach(function(e){return e.manager=n}),this._plugins=e.slice().reverse()}var vt=(bt.prototype.addGlobalEventListener=function(e,t,n){if(!(e=$e.getGlobalEventTarget(this._doc,e)))throw new Error("Unsupported event target "+e+" for event "+t);return this.addEventListener(e,t,n)},bt);function bt(e){this._doc=e}var wt=(St.prototype.addStyles=function(e){var t=this,n=new Set;e.forEach(function(e){t._stylesSet.has(e)||(t._stylesSet.add(e),n.add(e))}),this.onStylesAdded(n)},St.prototype.onStylesAdded=function(e){},St.prototype.getAllStyles=function(){return Array.from(this._stylesSet)},St.decorators=[{type:f.Injectable}],St.ctorParameters=function(){return[]},St);function St(){this._stylesSet=new Set}var Ct;F(_t,Ct=wt),_t.prototype._addStylesToHost=function(e,n){var r=this;e.forEach(function(e){var t=r._doc.createElement("style");t.textContent=e,r._styleNodes.add(n.appendChild(t))})},_t.prototype.addHost=function(e){this._addStylesToHost(this._stylesSet,e),this._hostNodes.add(e)},_t.prototype.removeHost=function(e){this._hostNodes.delete(e)},_t.prototype.onStylesAdded=function(t){var n=this;this._hostNodes.forEach(function(e){return n._addStylesToHost(t,e)})},_t.prototype.ngOnDestroy=function(){this._styleNodes.forEach(function(e){return $e.remove(e)})},_t.decorators=[{type:f.Injectable}],_t.ctorParameters=function(){return[{type:void 0,decorators:[{type:f.Inject,args:[ct]}]}]};function _t(e){var t=Ct.call(this)||this;return t._doc=e,t._hostNodes=new Set,t._styleNodes=new Set,t._hostNodes.add(e.head),t}var Et={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},It=/%COMP%/g;function At(e,t,n){for(var r=0;r<t.length;r++){var o=t[r];Array.isArray(o)?At(e,o,n):(o=o.replace(It,e),n.push(o))}return n}function Pt(t){return function(e){!1===t(e)&&(e.preventDefault(),e.returnValue=!1)}}f.Injectable;var Ot=(kt.prototype.destroy=function(){},kt.prototype.createElement=function(e,t){return t?document.createElementNS(Et[t],e):document.createElement(e)},kt.prototype.createComment=function(e){return document.createComment(e)},kt.prototype.createText=function(e){return document.createTextNode(e)},kt.prototype.appendChild=function(e,t){e.appendChild(t)},kt.prototype.insertBefore=function(e,t,n){e&&e.insertBefore(t,n)},kt.prototype.removeChild=function(e,t){e&&e.removeChild(t)},kt.prototype.selectRootElement=function(e){var t="string"==typeof e?document.querySelector(e):e;if(!t)throw new Error('The selector "'+e+'" did not match any elements');return t.textContent="",t},kt.prototype.parentNode=function(e){return e.parentNode},kt.prototype.nextSibling=function(e){return e.nextSibling},kt.prototype.setAttribute=function(e,t,n,r){r?(t=r+":"+t,(r=Et[r])?e.setAttributeNS(r,t,n):e.setAttribute(t,n)):e.setAttribute(t,n)},kt.prototype.removeAttribute=function(e,t,n){var r;n?(r=Et[n])?e.removeAttributeNS(r,t):e.removeAttribute(n+":"+t):e.removeAttribute(t)},kt.prototype.addClass=function(e,t){e.classList.add(t)},kt.prototype.removeClass=function(e,t){e.classList.remove(t)},kt.prototype.setStyle=function(e,t,n,r){r&f.RendererStyleFlags2.DashCase?e.style.setProperty(t,n,r&f.RendererStyleFlags2.Important?"important":""):e.style[t]=n},kt.prototype.removeStyle=function(e,t,n){n&f.RendererStyleFlags2.DashCase?e.style.removeProperty(t):e.style[t]=""},kt.prototype.setProperty=function(e,t,n){xt(t,"property"),e[t]=n},kt.prototype.setValue=function(e,t){e.nodeValue=t},kt.prototype.listen=function(e,t,n){return xt(t,"listener"),"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Pt(n)):this.eventManager.addEventListener(e,t,Pt(n))},kt);function kt(e){this.eventManager=e,this.data=Object.create(null)}var Tt="@".charCodeAt(0);function xt(e,t){if(e.charCodeAt(0)===Tt)throw new Error("Found the synthetic "+t+" "+e+'. Please include either "BrowserAnimationsModule" or "NoopAnimationsModule" in your application.')}var Nt;F(Mt,Nt=Ot),Mt.prototype.applyToHost=function(e){Nt.prototype.setAttribute.call(this,e,this.hostAttr,"")},Mt.prototype.createElement=function(e,t){return t=Nt.prototype.createElement.call(this,e,t),Nt.prototype.setAttribute.call(this,t,this.contentAttr,""),t};function Mt(e,t,n){var r=Nt.call(this,e)||this,e=At((r.component=n).id,n.styles,[]);return t.addStyles(e),r.contentAttr=(e=n.id,"_ngcontent-%COMP%".replace(It,e)),r.hostAttr=(n=n.id,"_nghost-%COMP%".replace(It,n)),r}var Rt;F(Ut,Rt=Ot),Ut.prototype.nodeOrShadowRoot=function(e){return e===this.hostEl?this.shadowRoot:e},Ut.prototype.destroy=function(){this.sharedStylesHost.removeHost(this.shadowRoot)},Ut.prototype.appendChild=function(e,t){return Rt.prototype.appendChild.call(this,this.nodeOrShadowRoot(e),t)},Ut.prototype.insertBefore=function(e,t,n){return Rt.prototype.insertBefore.call(this,this.nodeOrShadowRoot(e),t,n)},Ut.prototype.removeChild=function(e,t){return Rt.prototype.removeChild.call(this,this.nodeOrShadowRoot(e),t)},Ut.prototype.parentNode=function(e){return this.nodeOrShadowRoot(Rt.prototype.parentNode.call(this,this.nodeOrShadowRoot(e)))};function Ut(e,t,n,r){var o=Rt.call(this,e)||this;o.sharedStylesHost=t,o.hostEl=n,o.component=r,o.shadowRoot=n.createShadowRoot(),o.sharedStylesHost.addHost(o.shadowRoot);for(var i=At(r.id,r.styles,[]),s=0;s<i.length;s++){var a=document.createElement("style");a.textContent=i[s],o.shadowRoot.appendChild(a)}return o}var Dt,Lt,Ft="undefined"!=typeof Zone&&Zone.__symbol__||function(e){return"__zone_symbol__"+e},jt=Ft("addEventListener"),Bt=Ft("removeEventListener"),Vt={},zt="removeEventListener",qt="__zone_symbol__propagationStopped",Kt="__zone_symbol__stopImmediatePropagation";function Ht(e){return Dt&&Dt.hasOwnProperty(e)}function Gt(e){var t=Vt[e.type];if(t=t&&this[t]){var n=[e];if(1===t.length)return(r=t[0]).zone!==Zone.current?r.zone.run(r.handler,this,n):r.handler.apply(this,n);for(var r,o=t.slice(),i=0;i<o.length&&!0!==e[qt];i++)(r=o[i]).zone!==Zone.current?r.zone.run(r.handler,this,n):r.handler.apply(this,n)}}function Wt(e,t){return(e=Lt.call(this,e)||this).ngZone=t,e.patchEvent(),e}(or="undefined"!=typeof Zone&&Zone[Ft("BLACK_LISTED_EVENTS")])&&(Dt={},or.forEach(function(e){Dt[e]=e})),F(Wt,Lt=vt),Wt.prototype.patchEvent=function(){var e;Event&&Event.prototype&&(Event.prototype[Kt]||(e=Event.prototype[Kt]=Event.prototype.stopImmediatePropagation,Event.prototype.stopImmediatePropagation=function(){this&&(this[qt]=!0),e&&e.apply(this,arguments)}))},Wt.prototype.supports=function(e){return!0},Wt.prototype.addEventListener=function(e,t,n){var r=this,o=e[jt],i=n;if(!o||f.NgZone.isInAngularZone()&&!Ht(t))e.addEventListener(t,i,!1);else{var n=(n=Vt[t])||(Vt[t]=Ft("ANGULAR"+t+"FALSE")),o=(s=e[n])&&0<s.length,s=s||(e[n]=[]),n=Ht(t)?Zone.root:Zone.current;if(0===s.length)s.push({zone:n,handler:i});else{for(var a=!1,u=0;u<s.length;u++)if(s[u].handler===i){a=!0;break}a||s.push({zone:n,handler:i})}o||e[jt](t,Gt,!1)}return function(){return r.removeEventListener(e,t,i)}},Wt.prototype.removeEventListener=function(e,t,n){var r=e[Bt];if(!r)return e[zt].apply(e,[t,n,!1]);var o=Vt[t],i=o&&e[o];if(!i)return e[zt].apply(e,[t,n,!1]);for(var s=!1,a=0;a<i.length;a++)if(i[a].handler===n){s=!0,i.splice(a,1);break}s?0===i.length&&r.apply(e,[t,Gt,!1]):e[zt].apply(e,[t,n,!1])},Wt.decorators=[{type:f.Injectable}],Wt.ctorParameters=function(){return[{type:void 0,decorators:[{type:f.Inject,args:[ct]}]},{type:f.NgZone}]};var $t,Yt={pan:!0,panstart:!0,panmove:!0,panend:!0,pancancel:!0,panleft:!0,panright:!0,panup:!0,pandown:!0,pinch:!0,pinchstart:!0,pinchmove:!0,pinchend:!0,pinchcancel:!0,pinchin:!0,pinchout:!0,press:!0,pressup:!0,rotate:!0,rotatestart:!0,rotatemove:!0,rotateend:!0,rotatecancel:!0,swipe:!0,swipeleft:!0,swiperight:!0,swipeup:!0,swipedown:!0,tap:!0},Jt=new f.InjectionToken("HammerGestureConfig"),Zt=(Qt.prototype.buildHammer=function(e){var t,n=new Hammer(e);for(t in n.get("pinch").set({enable:!0}),n.get("rotate").set({enable:!0}),this.overrides)n.get(t).set(this.overrides[t]);return n},Qt.decorators=[{type:f.Injectable}],Qt.ctorParameters=function(){return[]},Qt);function Qt(){this.events=[],this.overrides={}}function Xt(e,t){return(e=$t.call(this,e)||this)._config=t,e}F(Xt,$t=vt),Xt.prototype.supports=function(e){if(!Yt.hasOwnProperty(e.toLowerCase())&&!this.isCustomEvent(e))return!1;if(!window.Hammer)throw new Error("Hammer.js is not loaded, can not bind "+e+" event");return!0},Xt.prototype.addEventListener=function(n,r,o){var i=this,s=this.manager.getZone();return r=r.toLowerCase(),s.runOutsideAngular(function(){function e(e){s.runGuarded(function(){o(e)})}var t=i._config.buildHammer(n);return t.on(r,e),function(){return t.off(r,e)}})},Xt.prototype.isCustomEvent=function(e){return-1<this._config.events.indexOf(e)},Xt.decorators=[{type:f.Injectable}],Xt.ctorParameters=function(){return[{type:void 0,decorators:[{type:f.Inject,args:[ct]}]},{type:Zt,decorators:[{type:f.Inject,args:[Jt]}]}]};var en,tn=["alt","control","meta","shift"],nn={alt:function(e){return e.altKey},control:function(e){return e.ctrlKey},meta:function(e){return e.metaKey},shift:function(e){return e.shiftKey}};function rn(e){return en.call(this,e)||this}F(rn,en=vt),rn.prototype.supports=function(e){return null!=rn.parseEventName(e)},rn.prototype.addEventListener=function(e,t,n){var r=rn.parseEventName(t),o=rn.eventCallback(r.fullKey,n,this.manager.getZone());return this.manager.getZone().runOutsideAngular(function(){return $e.onAndCancel(e,r.domEventName,o)})},rn.parseEventName=function(e){var n=e.toLowerCase().split("."),t=n.shift();if(0===n.length||"keydown"!==t&&"keyup"!==t)return null;var e=rn._normalizeKey(n.pop()),r="";return tn.forEach(function(e){var t=n.indexOf(e);-1<t&&(n.splice(t,1),r+=e+".")}),r+=e,0!=n.length||0===e.length?null:((e={}).domEventName=t,e.fullKey=r,e)},rn.getEventFullKey=function(t){var n="",r=$e.getEventKey(t);return" "===(r=r.toLowerCase())?r="space":"."===r&&(r="dot"),tn.forEach(function(e){e!=r&&(0,nn[e])(t)&&(n+=e+".")}),n+=r},rn.eventCallback=function(t,n,r){return function(e){rn.getEventFullKey(e)===t&&r.runGuarded(function(){return n(e)})}},rn._normalizeKey=function(e){return"esc"!==e?e:"escape"},rn.decorators=[{type:f.Injectable}],rn.ctorParameters=function(){return[{type:void 0,decorators:[{type:f.Inject,args:[ct]}]}]};var on=(sn.prototype.getInertBodyElement_XHR=function(e){e="<body><remove></remove>"+e+"</body>";try{e=encodeURI(e)}catch(e){return null}var t=new XMLHttpRequest;return t.responseType="document",t.open("GET","data:text/html;charset=utf-8,"+e,!1),t.send(null),(t=t.response.body).removeChild(t.firstChild),t},sn.prototype.getInertBodyElement_DOMParser=function(e){e="<body><remove></remove>"+e+"</body>";try{var t=(new window.DOMParser).parseFromString(e,"text/html").body;return t.removeChild(t.firstChild),t}catch(e){return null}},sn.prototype.getInertBodyElement_InertDocument=function(e){var t=this.DOM.createElement("template");return"content"in t?(this.DOM.setInnerHTML(t,e),t):(this.DOM.setInnerHTML(this.inertBodyElement,e),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(this.inertBodyElement),this.inertBodyElement)},sn.prototype.stripCustomNsAttrs=function(n){var r=this;this.DOM.attributeMap(n).forEach(function(e,t){"xmlns:ns1"!==t&&0!==t.indexOf("ns1:")||r.DOM.removeAttribute(n,t)});for(var e=0,t=this.DOM.childNodesAsList(n);e<t.length;e++){var o=t[e];this.DOM.isElementNode(o)&&this.stripCustomNsAttrs(o)}},sn);function sn(e,t){this.defaultDoc=e,this.DOM=t,e=this.DOM.createHtmlDocument(),this.inertBodyElement=e.body,null==this.inertBodyElement&&(t=this.DOM.createElement("html",e),this.inertBodyElement=this.DOM.createElement("body",e),this.DOM.appendChild(t,this.inertBodyElement),this.DOM.appendChild(e,t)),this.DOM.setInnerHTML(this.inertBodyElement,'<svg><g onload="this.parentNode.remove()"></g></svg>'),!this.inertBodyElement.querySelector||this.inertBodyElement.querySelector("svg")?(this.DOM.setInnerHTML(this.inertBodyElement,'<svg><p><style><img src="</style><img src=x onerror=alert(1)//">'),this.inertBodyElement.querySelector&&this.inertBodyElement.querySelector("svg img")&&function(){try{return window.DOMParser}catch(e){return}}()?this.getInertBodyElement=this.getInertBodyElement_DOMParser:this.getInertBodyElement=this.getInertBodyElement_InertDocument):this.getInertBodyElement=this.getInertBodyElement_XHR}var an=/^(?:(?:https?|mailto|ftp|tel|file):|[^&:/?#]*(?:[/?#]|$))/gi,un=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function cn(e){return(e=String(e)).match(an)||e.match(un)?e:(f.isDevMode()&&$e.log("WARNING: sanitizing unsafe URL value "+e+" (see http://g.co/ng/security#xss)"),"unsafe:"+e)}function ln(e){for(var t={},n=0,r=e.split(",");n<r.length;n++)t[r[n]]=!0;return t}function pn(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n={},r=0,o=e;r<o.length;r++){var i,s=o[r];for(i in s)s.hasOwnProperty(i)&&(n[i]=!0)}return n}var dn=ln("area,br,col,hr,img,wbr"),fn=ln("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),hn=pn(pr=ln("rp,rt"),fn),mn=pn(fn,ln("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),gn=pn(pr,ln("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),yn=pn(dn,mn,gn,hn),vn=ln("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),bn=ln("srcset"),p=ln("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),wn=pn(vn,bn,p),Sn=(Cn.prototype.sanitizeChildren=function(e){for(var t=this.DOM.firstChild(e);t;)if(this.DOM.isElementNode(t)?this.startElement(t):this.DOM.isTextNode(t)?this.chars(this.DOM.nodeValue(t)):this.sanitizedSomething=!0,this.DOM.firstChild(t))t=this.DOM.firstChild(t);else for(;t;){this.DOM.isElementNode(t)&&this.endElement(t);var n=this.checkClobberedElement(t,this.DOM.nextSibling(t));if(n){t=n;break}t=this.checkClobberedElement(t,this.DOM.parentElement(t))}return this.buf.join("")},Cn.prototype.startElement=function(e){var r=this,t=this.DOM.nodeName(e).toLowerCase();yn.hasOwnProperty(t)?(this.buf.push("<"),this.buf.push(t),this.DOM.attributeMap(e).forEach(function(e,t){var n=t.toLowerCase();wn.hasOwnProperty(n)?(vn[n]&&(e=cn(e)),bn[n]&&(n=e,e=(n=String(n)).split(",").map(function(e){return cn(e.trim())}).join(", ")),r.buf.push(" "),r.buf.push(t),r.buf.push('="'),r.buf.push(An(e)),r.buf.push('"')):r.sanitizedSomething=!0}),this.buf.push(">")):this.sanitizedSomething=!0},Cn.prototype.endElement=function(e){e=this.DOM.nodeName(e).toLowerCase(),yn.hasOwnProperty(e)&&!dn.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))},Cn.prototype.chars=function(e){this.buf.push(An(e))},Cn.prototype.checkClobberedElement=function(e,t){if(t&&this.DOM.contains(e,t))throw new Error("Failed to sanitize html because the element is clobbered: "+this.DOM.getOuterHTML(e));return t},Cn);function Cn(){this.sanitizedSomething=!1,this.buf=[],this.DOM=$e}var _n,En=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,In=/([^\#-~ |!])/g;function An(e){return e.replace(/&/g,"&amp;").replace(En,function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"}).replace(In,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}var Pn,On=new RegExp("^([-,.\"'%_!# a-zA-Z0-9]+|(?:(?:matrix|translate|scale|rotate|skew|perspective)(?:X|Y|3d)?|(?:rgb|hsl)a?|(?:repeating-)?(?:linear|radial)-gradient|(?:calc|attr))\\([-0-9.%, #a-zA-Z]+\\))$","g"),kn=/^url\(([^)]+)\)$/;function Tn(e){var t=Pn.call(this)||this;return t._doc=e,t}F(Tn,Pn=function(){}),Tn.prototype.sanitize=function(e,t){if(null==t)return null;switch(e){case f.SecurityContext.NONE:return t;case f.SecurityContext.HTML:return t instanceof Rn?t.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(t,"HTML"),function(e,t){var n=$e,r=null;try{_n=_n||new on(e,n);var o=t?String(t):"",r=_n.getInertBodyElement(o),i=5,s=o;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable")}while(i--,o=s,s=n.getInnerHTML(r),r=_n.getInertBodyElement(o),o!==s);var a=new Sn,u=a.sanitizeChildren(n.getTemplateContent(r)||r);return f.isDevMode()&&a.sanitizedSomething&&n.log("WARNING: sanitizing HTML stripped some content (see http://g.co/ng/security#xss)."),u}finally{if(r)for(var c=n.getTemplateContent(r)||r,l=0,p=n.childNodesAsList(c);l<p.length;l++){var d=p[l];n.removeChild(c,d)}}}(this._doc,String(t)));case f.SecurityContext.STYLE:return t instanceof Ln?t.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(t,"Style"),function(e){if(!(e=String(e).trim()))return"";var t=e.match(kn);return t&&cn(t[1])===t[1]||e.match(On)&&function(e){for(var t=!0,n=!0,r=0;r<e.length;r++){var o=e.charAt(r);"'"===o&&n?t=!t:'"'===o&&t&&(n=!n)}return t&&n}(e)?e:(f.isDevMode()&&$e.log("WARNING: sanitizing unsafe style value "+e+" (see http://g.co/ng/security#xss)."),"unsafe")}(t));case f.SecurityContext.SCRIPT:if(t instanceof Bn)return t.changingThisBreaksApplicationSecurity;throw this.checkNotSafeValue(t,"Script"),new Error("unsafe value used in a script context");case f.SecurityContext.URL:return t instanceof Gn||t instanceof qn?t.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(t,"URL"),cn(String(t)));case f.SecurityContext.RESOURCE_URL:if(t instanceof Gn)return t.changingThisBreaksApplicationSecurity;throw this.checkNotSafeValue(t,"ResourceURL"),new Error("unsafe value used in a resource URL context (see http://g.co/ng/security#xss)");default:throw new Error("Unexpected SecurityContext "+e+" (see http://g.co/ng/security#xss)")}},Tn.prototype.checkNotSafeValue=function(e,t){if(e instanceof xn)throw new Error("Required a safe "+t+", got a "+e.getTypeName()+" (see http://g.co/ng/security#xss)")},Tn.prototype.bypassSecurityTrustHtml=function(e){return new Rn(e)},Tn.prototype.bypassSecurityTrustStyle=function(e){return new Ln(e)},Tn.prototype.bypassSecurityTrustScript=function(e){return new Bn(e)},Tn.prototype.bypassSecurityTrustUrl=function(e){return new qn(e)},Tn.prototype.bypassSecurityTrustResourceUrl=function(e){return new Gn(e)},Tn.decorators=[{type:f.Injectable}],Tn.ctorParameters=function(){return[{type:void 0,decorators:[{type:f.Inject,args:[ct]}]}]};var xn=(Nn.prototype.toString=function(){return"SafeValue must use [property]=binding: "+this.changingThisBreaksApplicationSecurity+" (see http://g.co/ng/security#xss)"},Nn);function Nn(e){this.changingThisBreaksApplicationSecurity=e}var Mn,Rn=(F(Un,Mn=xn),Un.prototype.getTypeName=function(){return"HTML"},Un);function Un(){return null!==Mn&&Mn.apply(this,arguments)||this}var Dn,Ln=(F(Fn,Dn=xn),Fn.prototype.getTypeName=function(){return"Style"},Fn);function Fn(){return null!==Dn&&Dn.apply(this,arguments)||this}var jn,Bn=(F(Vn,jn=xn),Vn.prototype.getTypeName=function(){return"Script"},Vn);function Vn(){return null!==jn&&jn.apply(this,arguments)||this}var zn,qn=(F(Kn,zn=xn),Kn.prototype.getTypeName=function(){return"URL"},Kn);function Kn(){return null!==zn&&zn.apply(this,arguments)||this}var Hn,Gn=(F(Wn,Hn=xn),Wn.prototype.getTypeName=function(){return"ResourceURL"},Wn);function Wn(){return null!==Hn&&Hn.apply(this,arguments)||this}function $n(){}y=[{provide:f.PLATFORM_ID,useValue:t["ÉµPLATFORM_BROWSER_ID"]},{provide:f.PLATFORM_INITIALIZER,useValue:function(){it.makeCurrent(),ht.init()},multi:!0},{provide:t.PlatformLocation,useClass:dt,deps:[ct]},{provide:ct,useFactory:function(){return document},deps:[]}],f.createPlatformFactory(f.platformCore,"browser",y),f.Injectable,new f.Version("5.2.11"),Object.defineProperty($n.prototype,"value",{get:function(){return this.control?this.control.value:null},enumerable:!0,configurable:!0}),Object.defineProperty($n.prototype,"valid",{get:function(){return this.control?this.control.valid:null},enumerable:!0,configurable:!0}),Object.defineProperty($n.prototype,"invalid",{get:function(){return this.control?this.control.invalid:null},enumerable:!0,configurable:!0}),Object.defineProperty($n.prototype,"pending",{get:function(){return this.control?this.control.pending:null},enumerable:!0,configurable:!0}),Object.defineProperty($n.prototype,"disabled",{get:function(){return this.control?this.control.disabled:null},enumerable:!0,configurable:!0}),Object.defineProperty($n.prototype,"enabled",{get:function(){return this.control?this.control.enabled:null},enumerable:!0,configurable:!0}),Object.defineProperty($n.prototype,"errors",{get:function(){return this.control?this.control.errors:null},enumerable:!0,configurable:!0}),Object.defineProperty($n.prototype,"pristine",{get:function(){return this.control?this.control.pristine:null},enumerable:!0,configurable:!0}),Object.defineProperty($n.prototype,"dirty",{get:function(){return this.control?this.control.dirty:null},enumerable:!0,configurable:!0}),Object.defineProperty($n.prototype,"touched",{get:function(){return this.control?this.control.touched:null},enumerable:!0,configurable:!0}),Object.defineProperty($n.prototype,"status",{get:function(){return this.control?this.control.status:null},enumerable:!0,configurable:!0}),Object.defineProperty($n.prototype,"untouched",{get:function(){return this.control?this.control.untouched:null},enumerable:!0,configurable:!0}),Object.defineProperty($n.prototype,"statusChanges",{get:function(){return this.control?this.control.statusChanges:null},enumerable:!0,configurable:!0}),Object.defineProperty($n.prototype,"valueChanges",{get:function(){return this.control?this.control.valueChanges:null},enumerable:!0,configurable:!0}),Object.defineProperty($n.prototype,"path",{get:function(){return null},enumerable:!0,configurable:!0}),$n.prototype.reset=function(e){void 0===e&&(e=void 0),this.control&&this.control.reset(e)},$n.prototype.hasError=function(e,t){return!!this.control&&this.control.hasError(e,t)},$n.prototype.getError=function(e,t){return this.control?this.control.getError(e,t):null};var Yn,C=(F(Jn,Yn=b=$n),Object.defineProperty(Jn.prototype,"formDirective",{get:function(){return null},enumerable:!0,configurable:!0}),Object.defineProperty(Jn.prototype,"path",{get:function(){return null},enumerable:!0,configurable:!0}),Jn);function Jn(){return null!==Yn&&Yn.apply(this,arguments)||this}function Zn(e){return null==e||0===e.length}var Ye=new f.InjectionToken("NgValidators"),Qe=new f.InjectionToken("NgAsyncValidators"),Qn=/^(?=.{1,254}$)(?=.{1,64}@)[-!#$%&'*+/0-9=?A-Z^_`a-z{|}~]+(\.[-!#$%&'*+/0-9=?A-Z^_`a-z{|}~]+)*@[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?(\.[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?)*$/,Xn=(er.min=function(n){return function(e){if(Zn(e.value)||Zn(n))return null;var t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}},er.max=function(n){return function(e){if(Zn(e.value)||Zn(n))return null;var t=parseFloat(e.value);return!isNaN(t)&&n<t?{max:{max:n,actual:e.value}}:null}},er.required=function(e){return Zn(e.value)?{required:!0}:null},er.requiredTrue=function(e){return!0===e.value?null:{required:!0}},er.email=function(e){return Zn(e.value)||Qn.test(e.value)?null:{email:!0}},er.minLength=function(t){return function(e){return!Zn(e.value)&&(e=e.value?e.value.length:0)<t?{minlength:{requiredLength:t,actualLength:e}}:null}},er.maxLength=function(t){return function(e){return e=e.value?e.value.length:0,t<e?{maxlength:{requiredLength:t,actualLength:e}}:null}},er.pattern=function(e){if(!e)return er.nullValidator;var t,n="string"==typeof e?(t="","^"!==e.charAt(0)&&(t+="^"),t+=e,"$"!==e.charAt(e.length-1)&&(t+="$"),new RegExp(t)):(t=e.toString(),e);return function(e){return Zn(e.value)?null:(e=e.value,n.test(e)?null:{pattern:{requiredPattern:t,actualValue:e}})}},er.nullValidator=function(e){return null},er.compose=function(e){if(!e)return null;var n=e.filter(tr);return 0==n.length?null:function(e){return rr((t=e,n.map(function(e){return e(t)})));var t}},er.composeAsync=function(e){if(!e)return null;var n=e.filter(tr);return 0==n.length?null:function(e){var t;return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(1===e.length){var n=e[0];if(re(n))return We(n,null);if(oe(n)&&Object.getPrototypeOf(n)===Object.prototype){var r=Object.keys(n);return We(r.map(function(e){return n[e]}),r)}}if("function"!=typeof e[e.length-1])return We(e,null);var o=e.pop();return We(e=1===e.length&&re(e[0])?e[0]:e,null).pipe(De(function(e){return o.apply(void 0,e)}))}((t=e,n.map(function(e){return e(t)}).map(nr))).pipe(De(rr))}},er);function er(){}function tr(e){return null!=e}function nr(e){if(e=f["ÉµisPromise"](e)?Ge(e):e,!f["ÉµisObservable"](e))throw new Error("Expected validator to return Promise or Observable.");return e}function rr(e){return e=e.reduce(function(e,t){return null!=t?j({},e,t):e},{}),0===Object.keys(e).length?null:e}var or={provide:wt=new f.InjectionToken("NgValueAccessor"),useExisting:f.forwardRef(function(){return ir}),multi:!0},ir=(sr.prototype.writeValue=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"checked",e)},sr.prototype.registerOnChange=function(e){this.onChange=e},sr.prototype.registerOnTouched=function(e){this.onTouched=e},sr.prototype.setDisabledState=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)},V([f.Directive({selector:"input[type=checkbox][formControlName],input[type=checkbox][formControl],input[type=checkbox][ngModel]",host:{"(change)":"onChange($event.target.checked)","(blur)":"onTouched()"},providers:[or]}),q("design:paramtypes",[f.Renderer2,f.ElementRef])],sr));function sr(e,t){this._renderer=e,this._elementRef=t,this.onChange=function(e){},this.onTouched=function(){}}vt={provide:wt,useExisting:f.forwardRef(function(){return ar}),multi:!0};var fn=new f.InjectionToken("CompositionEventMode"),ar=(ur.prototype.writeValue=function(e){e=null==e?"":e,this._renderer.setProperty(this._elementRef.nativeElement,"value",e)},ur.prototype.registerOnChange=function(e){this.onChange=e},ur.prototype.registerOnTouched=function(e){this.onTouched=e},ur.prototype.setDisabledState=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)},ur.prototype._handleInput=function(e){this._compositionMode&&(!this._compositionMode||this._composing)||this.onChange(e)},ur.prototype._compositionStart=function(){this._composing=!0},ur.prototype._compositionEnd=function(e){this._composing=!1,this._compositionMode&&this.onChange(e)},V([f.Directive({selector:"input:not([type=checkbox])[formControlName],textarea[formControlName],input:not([type=checkbox])[formControl],textarea[formControl],input:not([type=checkbox])[ngModel],textarea[ngModel],[ngDefaultControl]",host:{"(input)":"$any(this)._handleInput($event.target.value)","(blur)":"onTouched()","(compositionstart)":"$any(this)._compositionStart()","(compositionend)":"$any(this)._compositionEnd($event.target.value)"},providers:[vt]}),z(2,f.Optional()),z(2,f.Inject(fn)),q("design:paramtypes",[f.Renderer2,f.ElementRef,Boolean])],ur));function ur(e,t,n){this._renderer=e,this._elementRef=t,this._compositionMode=n,this.onChange=function(e){},this.onTouched=function(){},this._composing=!1,null==this._compositionMode&&(this._compositionMode=(n=$e?$e.getUserAgent():"",!/android (\d+)/.test(n.toLowerCase())))}function cr(t){return t.validate?function(e){return t.validate(e)}:t}function lr(t){return t.validate?function(e){return t.validate(e)}:t}var pr={provide:wt,useExisting:f.forwardRef(function(){return dr}),multi:!0},dr=(fr.prototype.writeValue=function(e){e=null==e?"":e,this._renderer.setProperty(this._elementRef.nativeElement,"value",e)},fr.prototype.registerOnChange=function(t){this.onChange=function(e){t(""==e?null:parseFloat(e))}},fr.prototype.registerOnTouched=function(e){this.onTouched=e},fr.prototype.setDisabledState=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)},V([f.Directive({selector:"input[type=number][formControlName],input[type=number][formControl],input[type=number][ngModel]",host:{"(change)":"onChange($event.target.value)","(input)":"onChange($event.target.value)","(blur)":"onTouched()"},providers:[pr]}),q("design:paramtypes",[f.Renderer2,f.ElementRef])],fr));function fr(e,t){this._renderer=e,this._elementRef=t,this.onChange=function(e){},this.onTouched=function(){}}function hr(){throw new Error("unimplemented")}var mr,gr=(F(yr,mr=b),Object.defineProperty(yr.prototype,"validator",{get:hr,enumerable:!0,configurable:!0}),Object.defineProperty(yr.prototype,"asyncValidator",{get:hr,enumerable:!0,configurable:!0}),yr);function yr(){var e=null!==mr&&mr.apply(this,arguments)||this;return e._parent=null,e.name=null,e.valueAccessor=null,e._rawValidators=[],e._rawAsyncValidators=[],e}function vr(){this._accessors=[]}mn={provide:wt,useExisting:f.forwardRef(function(){return br}),multi:!0},vr.prototype.add=function(e,t){this._accessors.push([e,t])},vr.prototype.remove=function(e){for(var t=this._accessors.length-1;0<=t;--t)if(this._accessors[t][1]===e)return void this._accessors.splice(t,1)},vr.prototype.select=function(t){var n=this;this._accessors.forEach(function(e){n._isSameGroup(e,t)&&e[1]!==t&&e[1].fireUncheck(t.value)})},vr.prototype._isSameGroup=function(e,t){return!!e[0].control&&e[0]._parent===t._control._parent&&e[1].name===t.name},gn=V([f.Injectable()],vr);var br=(wr.prototype.ngOnInit=function(){this._control=this._injector.get(gr),this._checkName(),this._registry.add(this._control,this)},wr.prototype.ngOnDestroy=function(){this._registry.remove(this)},wr.prototype.writeValue=function(e){this._state=e===this.value,this._renderer.setProperty(this._elementRef.nativeElement,"checked",this._state)},wr.prototype.registerOnChange=function(e){var t=this;this._fn=e,this.onChange=function(){e(t.value),t._registry.select(t)}},wr.prototype.fireUncheck=function(e){this.writeValue(e)},wr.prototype.registerOnTouched=function(e){this.onTouched=e},wr.prototype.setDisabledState=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)},wr.prototype._checkName=function(){this.name&&this.formControlName&&this.name!==this.formControlName&&this._throwNameError(),!this.name&&this.formControlName&&(this.name=this.formControlName)},wr.prototype._throwNameError=function(){throw new Error('\n      If you define both a name and a formControlName attribute on your radio button, their values\n      must match. Ex: <input type="radio" formControlName="food" name="food">\n    ')},V([f.Input(),q("design:type",String)],wr.prototype,"name",void 0),V([f.Input(),q("design:type",String)],wr.prototype,"formControlName",void 0),V([f.Input(),q("design:type",Object)],wr.prototype,"value",void 0),V([f.Directive({selector:"input[type=radio][formControlName],input[type=radio][formControl],input[type=radio][ngModel]",host:{"(change)":"onChange()","(blur)":"onTouched()"},providers:[mn]}),q("design:paramtypes",[f.Renderer2,f.ElementRef,gn,f.Injector])],wr));function wr(e,t,n,r){this._renderer=e,this._elementRef=t,this._registry=n,this._injector=r,this.onChange=function(){},this.onTouched=function(){}}var hn={provide:wt,useExisting:f.forwardRef(function(){return Sr}),multi:!0},Sr=(Cr.prototype.writeValue=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"value",parseFloat(e))},Cr.prototype.registerOnChange=function(t){this.onChange=function(e){t(""==e?null:parseFloat(e))}},Cr.prototype.registerOnTouched=function(e){this.onTouched=e},Cr.prototype.setDisabledState=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)},V([f.Directive({selector:"input[type=range][formControlName],input[type=range][formControl],input[type=range][ngModel]",host:{"(change)":"onChange($event.target.value)","(input)":"onChange($event.target.value)","(blur)":"onTouched()"},providers:[hn]}),q("design:paramtypes",[f.Renderer2,f.ElementRef])],Cr));function Cr(e,t){this._renderer=e,this._elementRef=t,this.onChange=function(e){},this.onTouched=function(){}}var _r='\n    <div [formGroup]="myGroup">\n      <input formControlName="firstName">\n    </div>\n\n    In your class:\n\n    this.myGroup = new FormGroup({\n       firstName: new FormControl()\n    });',Er='\n    <div [formGroup]="myGroup">\n       <div formGroupName="person">\n          <input formControlName="firstName">\n       </div>\n    </div>\n\n    In your class:\n\n    this.myGroup = new FormGroup({\n       person: new FormGroup({ firstName: new FormControl() })\n    });',Ir='\n    <form>\n       <div ngModelGroup="person">\n          <input [(ngModel)]="person.name" name="firstName">\n       </div>\n    </form>',Ar=(Pr.controlParentException=function(){throw new Error("formControlName must be used with a parent formGroup directive.  You'll want to add a formGroup\n       directive and pass it an existing FormGroup instance (you can create one in your class).\n\n      Example:\n\n      "+_r)},Pr.ngModelGroupException=function(){throw new Error('formControlName cannot be used with an ngModelGroup parent. It is only compatible with parents\n       that also have a "form" prefix: formGroupName, formArrayName, or formGroup.\n\n       Option 1:  Update the parent to be formGroupName (reactive form strategy)\n\n        '+Er+"\n\n        Option 2: Use ngModel instead of formControlName (template-driven strategy)\n\n        "+Ir)},Pr.missingFormException=function(){throw new Error("formGroup expects a FormGroup instance. Please pass one in.\n\n       Example:\n\n       "+_r)},Pr.groupParentException=function(){throw new Error("formGroupName must be used with a parent formGroup directive.  You'll want to add a formGroup\n      directive and pass it an existing FormGroup instance (you can create one in your class).\n\n      Example:\n\n      "+Er)},Pr.arrayParentException=function(){throw new Error('formArrayName must be used with a parent formGroup directive.  You\'ll want to add a formGroup\n       directive and pass it an existing FormGroup instance (you can create one in your class).\n\n        Example:\n\n        \n    <div [formGroup]="myGroup">\n      <div formArrayName="cities">\n        <div *ngFor="let city of cityArray.controls; index as i">\n          <input [formControlName]="i">\n        </div>\n      </div>\n    </div>\n\n    In your class:\n\n    this.cityArray = new FormArray([new FormControl(\'SF\')]);\n    this.myGroup = new FormGroup({\n      cities: this.cityArray\n    });')},Pr.disabledAttrWarning=function(){console.warn("\n      It looks like you're using the disabled attribute with a reactive form directive. If you set disabled to true\n      when you set up this control in your component class, the disabled attribute will actually be set in the DOM for\n      you. We recommend using this approach to avoid 'changed after checked' errors.\n       \n      Example: \n      form = new FormGroup({\n        first: new FormControl({value: 'Nancy', disabled: true}, Validators.required),\n        last: new FormControl('Drew', Validators.required)\n      });\n    ")},Pr.ngModelWarning=function(e){console.warn("\n    It looks like you're using ngModel on the same form field as "+e+". \n    Support for using the ngModel input property and ngModelChange event with \n    reactive form directives has been deprecated in Angular v6 and will be removed \n    in Angular v7.\n    \n    For more information on this, see our API docs here:\n    https://angular.io/api/forms/"+("formControl"===e?"FormControlDirective":"FormControlName")+"#use-with-ngmodel\n    ")},Pr);function Pr(){}function Or(e,t){return null==e?""+t:(e+": "+(t=t&&"object"==typeof t?"Object":t)).slice(0,50)}p={provide:wt,useExisting:f.forwardRef(function(){return kr}),multi:!0};var kr=(Object.defineProperty(Tr.prototype,"compareWith",{set:function(e){if("function"!=typeof e)throw new Error("compareWith must be a function, but received "+JSON.stringify(e));this._compareWith=e},enumerable:!0,configurable:!0}),Tr.prototype.writeValue=function(e){this.value=e;var t=this._getOptionId(e);null==t&&this._renderer.setProperty(this._elementRef.nativeElement,"selectedIndex",-1),e=Or(t,e),this._renderer.setProperty(this._elementRef.nativeElement,"value",e)},Tr.prototype.registerOnChange=function(t){var n=this;this.onChange=function(e){n.value=n._getOptionValue(e),t(n.value)}},Tr.prototype.registerOnTouched=function(e){this.onTouched=e},Tr.prototype.setDisabledState=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)},Tr.prototype._registerOption=function(){return(this._idCounter++).toString()},Tr.prototype._getOptionId=function(e){var t,n;try{for(var r=G(Array.from(this._optionMap.keys())),o=r.next();!o.done;o=r.next()){var i=o.value;if(this._compareWith(this._optionMap.get(i),e))return i}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}return null},Tr.prototype._getOptionValue=function(e){var t=e.split(":")[0];return this._optionMap.has(t)?this._optionMap.get(t):e},V([f.Input(),q("design:type",Function),q("design:paramtypes",[Function])],Tr.prototype,"compareWith",null),V([f.Directive({selector:"select:not([multiple])[formControlName],select:not([multiple])[formControl],select:not([multiple])[ngModel]",host:{"(change)":"onChange($event.target.value)","(blur)":"onTouched()"},providers:[p]}),q("design:paramtypes",[f.Renderer2,f.ElementRef])],Tr));function Tr(e,t){this._renderer=e,this._elementRef=t,this._optionMap=new Map,this._idCounter=0,this.onChange=function(e){},this.onTouched=function(){},this._compareWith=f["ÉµlooseIdentical"]}function xr(e,t,n){this._element=e,this._renderer=t,this._select=n,this._select&&(this.id=this._select._registerOption())}function Nr(e,t){return null==e?""+t:(e+": "+(t=(t="string"==typeof t?"'"+t+"'":t)&&"object"==typeof t?"Object":t)).slice(0,50)}Object.defineProperty(xr.prototype,"ngValue",{set:function(e){null!=this._select&&(this._select._optionMap.set(this.id,e),this._setElementValue(Or(this.id,e)),this._select.writeValue(this._select.value))},enumerable:!0,configurable:!0}),Object.defineProperty(xr.prototype,"value",{set:function(e){this._setElementValue(e),this._select&&this._select.writeValue(this._select.value)},enumerable:!0,configurable:!0}),xr.prototype._setElementValue=function(e){this._renderer.setProperty(this._element.nativeElement,"value",e)},xr.prototype.ngOnDestroy=function(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))},V([f.Input("ngValue"),q("design:type",Object),q("design:paramtypes",[Object])],xr.prototype,"ngValue",null),V([f.Input("value"),q("design:type",Object),q("design:paramtypes",[Object])],xr.prototype,"value",null),dt=V([f.Directive({selector:"option"}),z(2,f.Optional()),z(2,f.Host()),q("design:paramtypes",[f.ElementRef,f.Renderer2,kr])],xr),y={provide:wt,useExisting:f.forwardRef(function(){return Mr}),multi:!0};var Mr=(Object.defineProperty(Rr.prototype,"compareWith",{set:function(e){if("function"!=typeof e)throw new Error("compareWith must be a function, but received "+JSON.stringify(e));this._compareWith=e},enumerable:!0,configurable:!0}),Rr.prototype.writeValue=function(e){var n,t=this;this.value=e,e=Array.isArray(e)?(n=e.map(function(e){return t._getOptionId(e)}),function(e,t){e._setSelected(-1<n.indexOf(t.toString()))}):function(e,t){e._setSelected(!1)},this._optionMap.forEach(e)},Rr.prototype.registerOnChange=function(s){var a=this;this.onChange=function(e){var t=[];if(e.hasOwnProperty("selectedOptions"))for(var n=e.selectedOptions,r=0;r<n.length;r++){var o=n.item(r),i=a._getOptionValue(o.value);t.push(i)}else for(n=e.options,r=0;r<n.length;r++)(o=n.item(r)).selected&&(i=a._getOptionValue(o.value),t.push(i));a.value=t,s(t)}},Rr.prototype.registerOnTouched=function(e){this.onTouched=e},Rr.prototype.setDisabledState=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)},Rr.prototype._registerOption=function(e){var t=(this._idCounter++).toString();return this._optionMap.set(t,e),t},Rr.prototype._getOptionId=function(e){var t,n;try{for(var r=G(Array.from(this._optionMap.keys())),o=r.next();!o.done;o=r.next()){var i=o.value;if(this._compareWith(this._optionMap.get(i)._value,e))return i}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}return null},Rr.prototype._getOptionValue=function(e){var t=e.split(":")[0];return this._optionMap.has(t)?this._optionMap.get(t)._value:e},V([f.Input(),q("design:type",Function),q("design:paramtypes",[Function])],Rr.prototype,"compareWith",null),V([f.Directive({selector:"select[multiple][formControlName],select[multiple][formControl],select[multiple][ngModel]",host:{"(change)":"onChange($event.target)","(blur)":"onTouched()"},providers:[y]}),q("design:paramtypes",[f.Renderer2,f.ElementRef])],Rr));function Rr(e,t){this._renderer=e,this._elementRef=t,this._optionMap=new Map,this._idCounter=0,this.onChange=function(e){},this.onTouched=function(){},this._compareWith=f["ÉµlooseIdentical"]}function Ur(e,t,n){this._element=e,this._renderer=t,this._select=n,this._select&&(this.id=this._select._registerOption(this))}function Dr(e,t){return $(t.path,[e])}function Lr(t,n){var r,o,i,e,s;t||Vr(n,"Cannot find control with"),n.valueAccessor||Vr(n,"No value accessor for form control with"),t.validator=Xn.compose([t.validator,n.validator]),t.asyncValidator=Xn.composeAsync([t.asyncValidator,n.asyncValidator]),n.valueAccessor.writeValue(t.value),r=t,(o=n).valueAccessor.registerOnChange(function(e){r._pendingValue=e,r._pendingChange=!0,r._pendingDirty=!0,"change"===r.updateOn&&Fr(r,o)}),i=n,t.registerOnChange(function(e,t){i.valueAccessor.writeValue(e),t&&i.viewToModelUpdate(e)}),e=t,(s=n).valueAccessor.registerOnTouched(function(){e._pendingTouched=!0,"blur"===e.updateOn&&e._pendingChange&&Fr(e,s),"submit"!==e.updateOn&&e.markAsTouched()}),n.valueAccessor.setDisabledState&&t.registerOnDisabledChange(function(e){n.valueAccessor.setDisabledState(e)}),n._rawValidators.forEach(function(e){e.registerOnValidatorChange&&e.registerOnValidatorChange(function(){return t.updateValueAndValidity()})}),n._rawAsyncValidators.forEach(function(e){e.registerOnValidatorChange&&e.registerOnValidatorChange(function(){return t.updateValueAndValidity()})})}function Fr(e,t){e._pendingDirty&&e.markAsDirty(),e.setValue(e._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1}function jr(e,t){null==e&&Vr(t,"Cannot find control with"),e.validator=Xn.compose([e.validator,t.validator]),e.asyncValidator=Xn.composeAsync([e.asyncValidator,t.asyncValidator])}function Br(e){return Vr(e,"There is no FormControl instance attached to form control element with")}function Vr(e,t){throw e=1<e.path.length?"path: '"+e.path.join(" -> ")+"'":e.path[0]?"name: '"+e.path+"'":"unspecified name attribute",new Error(t+" "+e)}function zr(e){return null!=e?Xn.compose(e.map(cr)):null}function qr(e){return null!=e?Xn.composeAsync(e.map(lr)):null}function Kr(e,t){return e.hasOwnProperty("model")&&((e=e.model).isFirstChange()||!f["ÉµlooseIdentical"](t,e.currentValue))}Object.defineProperty(Ur.prototype,"ngValue",{set:function(e){null!=this._select&&(this._value=e,this._setElementValue(Nr(this.id,e)),this._select.writeValue(this._select.value))},enumerable:!0,configurable:!0}),Object.defineProperty(Ur.prototype,"value",{set:function(e){this._select?(this._value=e,this._setElementValue(Nr(this.id,e)),this._select.writeValue(this._select.value)):this._setElementValue(e)},enumerable:!0,configurable:!0}),Ur.prototype._setElementValue=function(e){this._renderer.setProperty(this._element.nativeElement,"value",e)},Ur.prototype._setSelected=function(e){this._renderer.setProperty(this._element.nativeElement,"selected",e)},Ur.prototype.ngOnDestroy=function(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))},V([f.Input("ngValue"),q("design:type",Object),q("design:paramtypes",[Object])],Ur.prototype,"ngValue",null),V([f.Input("value"),q("design:type",Object),q("design:paramtypes",[Object])],Ur.prototype,"value",null),or=V([f.Directive({selector:"option"}),z(2,f.Optional()),z(2,f.Host()),q("design:paramtypes",[f.ElementRef,f.Renderer2,Mr])],Ur);var Hr=[ir,Sr,dr,kr,Mr,br];function Gr(e,t){e._syncPendingControls(),t.forEach(function(e){var t=e.control;"submit"===t.updateOn&&t._pendingChange&&(e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1)})}function Wr(n,e){if(!e)return null;Array.isArray(e)||Vr(n,"Value accessor was not provided as an array for form control with");var r=void 0,o=void 0,i=void 0;return e.forEach(function(e){var t;e.constructor===ar?r=e:(t=e,Hr.some(function(e){return t.constructor===e})?(o&&Vr(n,"More than one built-in value accessor matches form control with"),o=e):(i&&Vr(n,"More than one custom value accessor matches form control with"),i=e))}),i||o||r||(Vr(n,"No valid value accessor for form control with"),null)}function $r(e,t){-1<(t=e.indexOf(t))&&e.splice(t,1)}function Yr(e,t,n,r){f.isDevMode()&&"never"!==r&&((null!==r&&"once"!==r||t._ngModelWarningSentOnce)&&("always"!==r||n._ngModelWarningSent)||(Ar.ngModelWarning(e),t._ngModelWarningSentOnce=!0,n._ngModelWarningSent=!0))}var Jr,Zr=(F(Qr,Jr=C),Qr.prototype.ngOnInit=function(){this._checkParentType(),this.formDirective.addFormGroup(this)},Qr.prototype.ngOnDestroy=function(){this.formDirective&&this.formDirective.removeFormGroup(this)},Object.defineProperty(Qr.prototype,"control",{get:function(){return this.formDirective.getFormGroup(this)},enumerable:!0,configurable:!0}),Object.defineProperty(Qr.prototype,"path",{get:function(){return Dr(this.name,this._parent)},enumerable:!0,configurable:!0}),Object.defineProperty(Qr.prototype,"formDirective",{get:function(){return this._parent?this._parent.formDirective:null},enumerable:!0,configurable:!0}),Object.defineProperty(Qr.prototype,"validator",{get:function(){return zr(this._validators)},enumerable:!0,configurable:!0}),Object.defineProperty(Qr.prototype,"asyncValidator",{get:function(){return qr(this._asyncValidators)},enumerable:!0,configurable:!0}),Qr.prototype._checkParentType=function(){},Qr);function Qr(){return null!==Jr&&Jr.apply(this,arguments)||this}function Xr(e){this._cd=e}Object.defineProperty(Xr.prototype,"ngClassUntouched",{get:function(){return!!this._cd.control&&this._cd.control.untouched},enumerable:!0,configurable:!0}),Object.defineProperty(Xr.prototype,"ngClassTouched",{get:function(){return!!this._cd.control&&this._cd.control.touched},enumerable:!0,configurable:!0}),Object.defineProperty(Xr.prototype,"ngClassPristine",{get:function(){return!!this._cd.control&&this._cd.control.pristine},enumerable:!0,configurable:!0}),Object.defineProperty(Xr.prototype,"ngClassDirty",{get:function(){return!!this._cd.control&&this._cd.control.dirty},enumerable:!0,configurable:!0}),Object.defineProperty(Xr.prototype,"ngClassValid",{get:function(){return!!this._cd.control&&this._cd.control.valid},enumerable:!0,configurable:!0}),Object.defineProperty(Xr.prototype,"ngClassInvalid",{get:function(){return!!this._cd.control&&this._cd.control.invalid},enumerable:!0,configurable:!0}),Object.defineProperty(Xr.prototype,"ngClassPending",{get:function(){return!!this._cd.control&&this._cd.control.pending},enumerable:!0,configurable:!0});var eo,fn={"[class.ng-untouched]":"ngClassUntouched","[class.ng-touched]":"ngClassTouched","[class.ng-pristine]":"ngClassPristine","[class.ng-dirty]":"ngClassDirty","[class.ng-valid]":"ngClassValid","[class.ng-invalid]":"ngClassInvalid","[class.ng-pending]":"ngClassPending"},pr=(F(to,eo=vt=Xr),V([f.Directive({selector:"[formControlName],[ngModel],[formControl]",host:fn}),z(0,f.Self()),q("design:paramtypes",[gr])],to));function to(e){return eo.call(this,e)||this}var no,b=(F(ro,no=vt),V([f.Directive({selector:"[formGroupName],[formArrayName],[ngModelGroup],[formGroup],form:not([ngNoForm]),[ngForm]",host:fn}),z(0,f.Self()),q("design:paramtypes",[C])],ro));function ro(e){return no.call(this,e)||this}var oo="VALID",io="INVALID",so="PENDING",ao="DISABLED";function uo(e){return e=lo(e)?e.validators:e,Array.isArray(e)?zr(e):e||null}function co(e,t){return e=lo(t)?t.asyncValidators:e,Array.isArray(e)?qr(e):e||null}function lo(e){return null!=e&&!Array.isArray(e)&&"object"==typeof e}function po(e,t){this.validator=e,this.asyncValidator=t,this._onCollectionChange=function(){},this.pristine=!0,this.touched=!1,this._onDisabledChange=[]}Object.defineProperty(po.prototype,"parent",{get:function(){return this._parent},enumerable:!0,configurable:!0}),Object.defineProperty(po.prototype,"valid",{get:function(){return this.status===oo},enumerable:!0,configurable:!0}),Object.defineProperty(po.prototype,"invalid",{get:function(){return this.status===io},enumerable:!0,configurable:!0}),Object.defineProperty(po.prototype,"pending",{get:function(){return this.status==so},enumerable:!0,configurable:!0}),Object.defineProperty(po.prototype,"disabled",{get:function(){return this.status===ao},enumerable:!0,configurable:!0}),Object.defineProperty(po.prototype,"enabled",{get:function(){return this.status!==ao},enumerable:!0,configurable:!0}),Object.defineProperty(po.prototype,"dirty",{get:function(){return!this.pristine},enumerable:!0,configurable:!0}),Object.defineProperty(po.prototype,"untouched",{get:function(){return!this.touched},enumerable:!0,configurable:!0}),Object.defineProperty(po.prototype,"updateOn",{get:function(){return this._updateOn||(this.parent?this.parent.updateOn:"change")},enumerable:!0,configurable:!0}),po.prototype.setValidators=function(e){this.validator=uo(e)},po.prototype.setAsyncValidators=function(e){this.asyncValidator=co(e)},po.prototype.clearValidators=function(){this.validator=null},po.prototype.clearAsyncValidators=function(){this.asyncValidator=null},po.prototype.markAsTouched=function(e){void 0===e&&(e={}),this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)},po.prototype.markAsUntouched=function(e){void 0===e&&(e={}),this.touched=!1,this._pendingTouched=!1,this._forEachChild(function(e){e.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)},po.prototype.markAsDirty=function(e){void 0===e&&(e={}),this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)},po.prototype.markAsPristine=function(e){void 0===e&&(e={}),this.pristine=!0,this._pendingDirty=!1,this._forEachChild(function(e){e.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)},po.prototype.markAsPending=function(e){void 0===e&&(e={}),!(this.status=so)!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)},po.prototype.disable=function(t){void 0===t&&(t={}),this.status=ao,this.errors=null,this._forEachChild(function(e){e.disable(j({},t,{onlySelf:!0}))}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(t),this._onDisabledChange.forEach(function(e){return e(!0)})},po.prototype.enable=function(t){void 0===t&&(t={}),this.status=oo,this._forEachChild(function(e){e.enable(j({},t,{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(t),this._onDisabledChange.forEach(function(e){return e(!1)})},po.prototype._updateAncestors=function(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),this._parent._updatePristine(),this._parent._updateTouched())},po.prototype.setParent=function(e){this._parent=e},po.prototype.updateValueAndValidity=function(e){void 0===e&&(e={}),this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),this.status!==oo&&this.status!==so||this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)},po.prototype._updateTreeValidity=function(t){void 0===t&&(t={emitEvent:!0}),this._forEachChild(function(e){return e._updateTreeValidity(t)}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})},po.prototype._setInitialStatus=function(){this.status=this._allControlsDisabled()?ao:oo},po.prototype._runValidator=function(){return this.validator?this.validator(this):null},po.prototype._runAsyncValidator=function(t){var e,n=this;this.asyncValidator&&(this.status=so,e=nr(this.asyncValidator(this)),this._asyncValidationSubscription=e.subscribe(function(e){return n.setErrors(e,{emitEvent:t})}))},po.prototype._cancelExistingSubscription=function(){this._asyncValidationSubscription&&this._asyncValidationSubscription.unsubscribe()},po.prototype.setErrors=function(e,t){void 0===t&&(t={}),this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)},po.prototype.get=function(e){return null==e||(e=e instanceof Array?e:e.split("."))instanceof Array&&0===e.length?null:e.reduce(function(e,t){return e instanceof yo?e.controls.hasOwnProperty(t)?e.controls[t]:null:e instanceof wo&&e.at(t)||null},this)},po.prototype.getError=function(e,t){return(t=t?this.get(t):this)&&t.errors?t.errors[e]:null},po.prototype.hasError=function(e,t){return!!this.getError(e,t)},Object.defineProperty(po.prototype,"root",{get:function(){for(var e=this;e._parent;)e=e._parent;return e},enumerable:!0,configurable:!0}),po.prototype._updateControlsErrors=function(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)},po.prototype._initObservables=function(){this.valueChanges=new f.EventEmitter,this.statusChanges=new f.EventEmitter},po.prototype._calculateStatus=function(){return this._allControlsDisabled()?ao:this.errors?io:this._anyControlsHaveStatus(so)?so:this._anyControlsHaveStatus(io)?io:oo},po.prototype._anyControlsHaveStatus=function(t){return this._anyControls(function(e){return e.status===t})},po.prototype._anyControlsDirty=function(){return this._anyControls(function(e){return e.dirty})},po.prototype._anyControlsTouched=function(){return this._anyControls(function(e){return e.touched})},po.prototype._updatePristine=function(e){void 0===e&&(e={}),this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)},po.prototype._updateTouched=function(e){void 0===e&&(e={}),this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)},po.prototype._isBoxedValue=function(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e},po.prototype._registerOnCollectionChange=function(e){this._onCollectionChange=e},po.prototype._setUpdateStrategy=function(e){lo(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)};var fo,ho=(F(mo,fo=mn=po),mo.prototype.setValue=function(e,t){var n=this;void 0===t&&(t={}),this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(function(e){return e(n.value,!1!==t.emitViewToModelChange)}),this.updateValueAndValidity(t)},mo.prototype.patchValue=function(e,t){void 0===t&&(t={}),this.setValue(e,t)},mo.prototype.reset=function(e,t){void 0===e&&(e=null),void 0===t&&(t={}),this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1},mo.prototype._updateValue=function(){},mo.prototype._anyControls=function(e){return!1},mo.prototype._allControlsDisabled=function(){return this.disabled},mo.prototype.registerOnChange=function(e){this._onChange.push(e)},mo.prototype._clearChangeFns=function(){this._onChange=[],this._onDisabledChange=[],this._onCollectionChange=function(){}},mo.prototype.registerOnDisabledChange=function(e){this._onDisabledChange.push(e)},mo.prototype._forEachChild=function(e){},mo.prototype._syncPendingControls=function(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))},mo.prototype._applyFormState=function(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e},mo);function mo(e,t,n){return void 0===e&&(e=null),(n=fo.call(this,uo(t),co(n,t))||this)._onChange=[],n._applyFormState(e),n._setUpdateStrategy(t),n.updateValueAndValidity({onlySelf:!0,emitEvent:!1}),n._initObservables(),n}var go,yo=(F(vo,go=mn),vo.prototype.registerControl=function(e,t){return this.controls[e]||((this.controls[e]=t).setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)},vo.prototype.addControl=function(e,t){this.registerControl(e,t),this.updateValueAndValidity(),this._onCollectionChange()},vo.prototype.removeControl=function(e){this.controls[e]&&this.controls[e]._registerOnCollectionChange(function(){}),delete this.controls[e],this.updateValueAndValidity(),this._onCollectionChange()},vo.prototype.setControl=function(e,t){this.controls[e]&&this.controls[e]._registerOnCollectionChange(function(){}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity(),this._onCollectionChange()},vo.prototype.contains=function(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled},vo.prototype.setValue=function(t,n){var r=this;void 0===n&&(n={}),this._checkAllValuesPresent(t),Object.keys(t).forEach(function(e){r._throwIfControlMissing(e),r.controls[e].setValue(t[e],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)},vo.prototype.patchValue=function(t,n){var r=this;void 0===n&&(n={}),Object.keys(t).forEach(function(e){r.controls[e]&&r.controls[e].patchValue(t[e],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)},vo.prototype.reset=function(n,r){void 0===n&&(n={}),void 0===r&&(r={}),this._forEachChild(function(e,t){e.reset(n[t],{onlySelf:!0,emitEvent:r.emitEvent})}),this.updateValueAndValidity(r),this._updatePristine(r),this._updateTouched(r)},vo.prototype.getRawValue=function(){return this._reduceChildren({},function(e,t,n){return e[n]=t instanceof ho?t.value:t.getRawValue(),e})},vo.prototype._syncPendingControls=function(){var e=this._reduceChildren(!1,function(e,t){return!!t._syncPendingControls()||e});return e&&this.updateValueAndValidity({onlySelf:!0}),e},vo.prototype._throwIfControlMissing=function(e){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet.  If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[e])throw new Error("Cannot find form control with name: "+e+".")},vo.prototype._forEachChild=function(t){var n=this;Object.keys(this.controls).forEach(function(e){return t(n.controls[e],e)})},vo.prototype._setUpControls=function(){var t=this;this._forEachChild(function(e){e.setParent(t),e._registerOnCollectionChange(t._onCollectionChange)})},vo.prototype._updateValue=function(){this.value=this._reduceValue()},vo.prototype._anyControls=function(n){var r=this,o=!1;return this._forEachChild(function(e,t){o=o||r.contains(t)&&n(e)}),o},vo.prototype._reduceValue=function(){var r=this;return this._reduceChildren({},function(e,t,n){return(t.enabled||r.disabled)&&(e[n]=t.value),e})},vo.prototype._reduceChildren=function(e,n){var r=e;return this._forEachChild(function(e,t){r=n(r,e,t)}),r},vo.prototype._allControlsDisabled=function(){var e,t;try{for(var n=G(Object.keys(this.controls)),r=n.next();!r.done;r=n.next()){var o=r.value;if(this.controls[o].enabled)return!1}}catch(t){e={error:t}}finally{try{r&&!r.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}return 0<Object.keys(this.controls).length||this.disabled},vo.prototype._checkAllValuesPresent=function(n){this._forEachChild(function(e,t){if(void 0===n[t])throw new Error("Must supply a value for form control with name: '"+t+"'.")})},vo);function vo(e,t,n){return(n=go.call(this,uo(t),co(n,t))||this).controls=e,n._initObservables(),n._setUpdateStrategy(t),n._setUpControls(),n.updateValueAndValidity({onlySelf:!0,emitEvent:!1}),n}var bo,wo=(F(So,bo=mn),So.prototype.at=function(e){return this.controls[e]},So.prototype.push=function(e){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity(),this._onCollectionChange()},So.prototype.insert=function(e,t){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity()},So.prototype.removeAt=function(e){this.controls[e]&&this.controls[e]._registerOnCollectionChange(function(){}),this.controls.splice(e,1),this.updateValueAndValidity()},So.prototype.setControl=function(e,t){this.controls[e]&&this.controls[e]._registerOnCollectionChange(function(){}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity(),this._onCollectionChange()},Object.defineProperty(So.prototype,"length",{get:function(){return this.controls.length},enumerable:!0,configurable:!0}),So.prototype.setValue=function(e,n){var r=this;void 0===n&&(n={}),this._checkAllValuesPresent(e),e.forEach(function(e,t){r._throwIfControlMissing(t),r.at(t).setValue(e,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)},So.prototype.patchValue=function(e,n){var r=this;void 0===n&&(n={}),e.forEach(function(e,t){r.at(t)&&r.at(t).patchValue(e,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)},So.prototype.reset=function(n,r){void 0===n&&(n=[]),void 0===r&&(r={}),this._forEachChild(function(e,t){e.reset(n[t],{onlySelf:!0,emitEvent:r.emitEvent})}),this.updateValueAndValidity(r),this._updatePristine(r),this._updateTouched(r)},So.prototype.getRawValue=function(){return this.controls.map(function(e){return e instanceof ho?e.value:e.getRawValue()})},So.prototype._syncPendingControls=function(){var e=this.controls.reduce(function(e,t){return!!t._syncPendingControls()||e},!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e},So.prototype._throwIfControlMissing=function(e){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet.  If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(e))throw new Error("Cannot find form control at index "+e)},So.prototype._forEachChild=function(n){this.controls.forEach(function(e,t){n(e,t)})},So.prototype._updateValue=function(){var t=this;this.value=this.controls.filter(function(e){return e.enabled||t.disabled}).map(function(e){return e.value})},So.prototype._anyControls=function(t){return this.controls.some(function(e){return e.enabled&&t(e)})},So.prototype._setUpControls=function(){var t=this;this._forEachChild(function(e){return t._registerControl(e)})},So.prototype._checkAllValuesPresent=function(n){this._forEachChild(function(e,t){if(void 0===n[t])throw new Error("Must supply a value for form control at index: "+t+".")})},So.prototype._allControlsDisabled=function(){var e,t;try{for(var n=G(this.controls),r=n.next();!r.done;r=n.next())if(r.value.enabled)return!1}catch(t){e={error:t}}finally{try{r&&!r.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}return 0<this.controls.length||this.disabled},So.prototype._registerControl=function(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)},So);function So(e,t,n){return(n=bo.call(this,uo(t),co(n,t))||this).controls=e,n._initObservables(),n._setUpdateStrategy(t),n._setUpControls(),n.updateValueAndValidity({onlySelf:!0,emitEvent:!1}),n}var Co,hn={provide:C,useExisting:f.forwardRef(function(){return Eo})},_o=Promise.resolve(null),Eo=(F(Io,Co=C),Io.prototype.ngAfterViewInit=function(){this._setUpdateStrategy()},Object.defineProperty(Io.prototype,"formDirective",{get:function(){return this},enumerable:!0,configurable:!0}),Object.defineProperty(Io.prototype,"control",{get:function(){return this.form},enumerable:!0,configurable:!0}),Object.defineProperty(Io.prototype,"path",{get:function(){return[]},enumerable:!0,configurable:!0}),Object.defineProperty(Io.prototype,"controls",{get:function(){return this.form.controls},enumerable:!0,configurable:!0}),Io.prototype.addControl=function(t){var n=this;_o.then(function(){var e=n._findContainer(t.path);t.control=e.registerControl(t.name,t.control),Lr(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),n._directives.push(t)})},Io.prototype.getControl=function(e){return this.form.get(e.path)},Io.prototype.removeControl=function(t){var n=this;_o.then(function(){var e=n._findContainer(t.path);e&&e.removeControl(t.name),$r(n._directives,t)})},Io.prototype.addFormGroup=function(n){var r=this;_o.then(function(){var e=r._findContainer(n.path),t=new yo({});jr(t,n),e.registerControl(n.name,t),t.updateValueAndValidity({emitEvent:!1})})},Io.prototype.removeFormGroup=function(t){var n=this;_o.then(function(){var e=n._findContainer(t.path);e&&e.removeControl(t.name)})},Io.prototype.getFormGroup=function(e){return this.form.get(e.path)},Io.prototype.updateModel=function(e,t){var n=this;_o.then(function(){n.form.get(e.path).setValue(t)})},Io.prototype.setValue=function(e){this.control.setValue(e)},Io.prototype.onSubmit=function(e){return this.submitted=!0,Gr(this.form,this._directives),this.ngSubmit.emit(e),!1},Io.prototype.onReset=function(){this.resetForm()},Io.prototype.resetForm=function(e){void 0===e&&(e=void 0),this.form.reset(e),this.submitted=!1},Io.prototype._setUpdateStrategy=function(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)},Io.prototype._findContainer=function(e){return e.pop(),e.length?this.form.get(e):this.form},V([f.Input("ngFormOptions"),q("design:type",Object)],Io.prototype,"options",void 0),V([f.Directive({selector:"form:not([ngNoForm]):not([formGroup]),ngForm,[ngForm]",providers:[hn],host:{"(submit)":"onSubmit($event)","(reset)":"onReset()"},outputs:["ngSubmit"],exportAs:"ngForm"}),z(0,f.Optional()),z(0,f.Self()),z(0,f.Inject(Ye)),z(1,f.Optional()),z(1,f.Self()),z(1,f.Inject(Qe)),q("design:paramtypes",[Array,Array])],Io));function Io(e,t){var n=Co.call(this)||this;return n.submitted=!1,n._directives=[],n.ngSubmit=new f.EventEmitter,n.form=new yo({},zr(e),qr(t)),n}var Ao=(Po.modelParentException=function(){throw new Error('\n      ngModel cannot be used to register form controls with a parent formGroup directive.  Try using\n      formGroup\'s partner directive "formControlName" instead.  Example:\n\n      '+_r+'\n\n      Or, if you\'d like to avoid registering this form control, indicate that it\'s standalone in ngModelOptions:\n\n      Example:\n\n      \n    <div [formGroup]="myGroup">\n       <input formControlName="firstName">\n       <input [(ngModel)]="showMoreControls" [ngModelOptions]="{standalone: true}">\n    </div>\n  ')},Po.formGroupNameException=function(){throw new Error("\n      ngModel cannot be used to register form controls with a parent formGroupName or formArrayName directive.\n\n      Option 1: Use formControlName instead of ngModel (reactive strategy):\n\n      "+Er+"\n\n      Option 2:  Update ngModel's parent be ngModelGroup (template-driven strategy):\n\n      "+Ir)},Po.missingNameException=function(){throw new Error('If ngModel is used within a form tag, either the name attribute must be set or the form\n      control must be defined as \'standalone\' in ngModelOptions.\n\n      Example 1: <input [(ngModel)]="person.firstName" name="first">\n      Example 2: <input [(ngModel)]="person.firstName" [ngModelOptions]="{standalone: true}">')},Po.modelGroupParentException=function(){throw new Error("\n      ngModelGroup cannot be used with a parent formGroup directive.\n\n      Option 1: Use formGroupName instead of ngModelGroup (reactive strategy):\n\n      "+Er+"\n\n      Option 2:  Use a regular form tag instead of the formGroup directive (template-driven strategy):\n\n      "+Ir)},Po);function Po(){}var Oo,ko,p={provide:C,useExisting:f.forwardRef(function(){return To})},To=(F(xo,Oo=Zr),(ko=xo).prototype._checkParentType=function(){this._parent instanceof ko||this._parent instanceof Eo||Ao.modelGroupParentException()},V([f.Input("ngModelGroup"),q("design:type",String)],xo.prototype,"name",void 0),ko=V([f.Directive({selector:"[ngModelGroup]",providers:[p],exportAs:"ngModelGroup"}),z(0,f.Host()),z(0,f.SkipSelf()),z(1,f.Optional()),z(1,f.Self()),z(1,f.Inject(Ye)),z(2,f.Optional()),z(2,f.Self()),z(2,f.Inject(Qe)),q("design:paramtypes",[C,Array,Array])],xo));function xo(e,t,n){var r=Oo.call(this)||this;return r._parent=e,r._validators=t,r._asyncValidators=n,r}var No,y={provide:gr,useExisting:f.forwardRef(function(){return Ro})},Mo=Promise.resolve(null),Ro=(F(Uo,No=gr),Uo.prototype.ngOnChanges=function(e){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in e&&this._updateDisabled(e),Kr(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)},Uo.prototype.ngOnDestroy=function(){this.formDirective&&this.formDirective.removeControl(this)},Object.defineProperty(Uo.prototype,"path",{get:function(){return this._parent?Dr(this.name,this._parent):[this.name]},enumerable:!0,configurable:!0}),Object.defineProperty(Uo.prototype,"formDirective",{get:function(){return this._parent?this._parent.formDirective:null},enumerable:!0,configurable:!0}),Object.defineProperty(Uo.prototype,"validator",{get:function(){return zr(this._rawValidators)},enumerable:!0,configurable:!0}),Object.defineProperty(Uo.prototype,"asyncValidator",{get:function(){return qr(this._rawAsyncValidators)},enumerable:!0,configurable:!0}),Uo.prototype.viewToModelUpdate=function(e){this.viewModel=e,this.update.emit(e)},Uo.prototype._setUpControl=function(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0},Uo.prototype._setUpdateStrategy=function(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)},Uo.prototype._isStandalone=function(){return!this._parent||!(!this.options||!this.options.standalone)},Uo.prototype._setUpStandalone=function(){Lr(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})},Uo.prototype._checkForErrors=function(){this._isStandalone()||this._checkParentType(),this._checkName()},Uo.prototype._checkParentType=function(){!(this._parent instanceof To)&&this._parent instanceof Zr?Ao.formGroupNameException():this._parent instanceof To||this._parent instanceof Eo||Ao.modelParentException()},Uo.prototype._checkName=function(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()||this.name||Ao.missingNameException()},Uo.prototype._updateValue=function(e){var t=this;Mo.then(function(){t.control.setValue(e,{emitViewToModelChange:!1})})},Uo.prototype._updateDisabled=function(e){var t=this,n=""===(e=e.isDisabled.currentValue)||e&&"false"!==e;Mo.then(function(){n&&!t.control.disabled?t.control.disable():!n&&t.control.disabled&&t.control.enable()})},V([f.Input(),q("design:type",String)],Uo.prototype,"name",void 0),V([f.Input("disabled"),q("design:type",Boolean)],Uo.prototype,"isDisabled",void 0),V([f.Input("ngModel"),q("design:type",Object)],Uo.prototype,"model",void 0),V([f.Input("ngModelOptions"),q("design:type",Object)],Uo.prototype,"options",void 0),V([f.Output("ngModelChange"),q("design:type",Object)],Uo.prototype,"update",void 0),V([f.Directive({selector:"[ngModel]:not([formControlName]):not([formControl])",providers:[y],exportAs:"ngModel"}),z(0,f.Optional()),z(0,f.Host()),z(1,f.Optional()),z(1,f.Self()),z(1,f.Inject(Ye)),z(2,f.Optional()),z(2,f.Self()),z(2,f.Inject(Qe)),z(3,f.Optional()),z(3,f.Self()),z(3,f.Inject(wt)),q("design:paramtypes",[C,Array,Array,Array])],Uo));function Uo(e,t,n,r){var o=No.call(this)||this;return o.control=new ho,o._registered=!1,o.update=new f.EventEmitter,o._parent=e,o._rawValidators=t||[],o._rawAsyncValidators=n||[],o.valueAccessor=Wr(o,r),o}var Do,Lo,Fo=new f.InjectionToken("NgModelWithFormControlWarning"),vt={provide:gr,useExisting:f.forwardRef(function(){return jo})},jo=(F(Bo,Do=gr),Lo=Bo,Object.defineProperty(Bo.prototype,"isDisabled",{set:function(e){Ar.disabledAttrWarning()},enumerable:!0,configurable:!0}),Bo.prototype.ngOnChanges=function(e){this._isControlChanged(e)&&(Lr(this.form,this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this.form.updateValueAndValidity({emitEvent:!1})),Kr(e,this.viewModel)&&(Yr("formControl",Lo,this,this._ngModelWarningConfig),this.form.setValue(this.model),this.viewModel=this.model)},Object.defineProperty(Bo.prototype,"path",{get:function(){return[]},enumerable:!0,configurable:!0}),Object.defineProperty(Bo.prototype,"validator",{get:function(){return zr(this._rawValidators)},enumerable:!0,configurable:!0}),Object.defineProperty(Bo.prototype,"asyncValidator",{get:function(){return qr(this._rawAsyncValidators)},enumerable:!0,configurable:!0}),Object.defineProperty(Bo.prototype,"control",{get:function(){return this.form},enumerable:!0,configurable:!0}),Bo.prototype.viewToModelUpdate=function(e){this.viewModel=e,this.update.emit(e)},Bo.prototype._isControlChanged=function(e){return e.hasOwnProperty("form")},Bo._ngModelWarningSentOnce=!1,V([f.Input("formControl"),q("design:type",ho)],Bo.prototype,"form",void 0),V([f.Input("disabled"),q("design:type",Boolean),q("design:paramtypes",[Boolean])],Bo.prototype,"isDisabled",null),V([f.Input("ngModel"),q("design:type",Object)],Bo.prototype,"model",void 0),V([f.Output("ngModelChange"),q("design:type",Object)],Bo.prototype,"update",void 0),Lo=V([f.Directive({selector:"[formControl]",providers:[vt],exportAs:"ngForm"}),z(0,f.Optional()),z(0,f.Self()),z(0,f.Inject(Ye)),z(1,f.Optional()),z(1,f.Self()),z(1,f.Inject(Qe)),z(2,f.Optional()),z(2,f.Self()),z(2,f.Inject(wt)),z(3,f.Optional()),z(3,f.Inject(Fo)),q("design:paramtypes",[Array,Array,Array,Object])],Bo));function Bo(e,t,n,r){var o=Do.call(this)||this;return o._ngModelWarningConfig=r,o.update=new f.EventEmitter,o._ngModelWarningSent=!1,o._rawValidators=e||[],o._rawAsyncValidators=t||[],o.valueAccessor=Wr(o,n),o}var Vo,fn={provide:C,useExisting:f.forwardRef(function(){return zo})},zo=(F(qo,Vo=C),qo.prototype.ngOnChanges=function(e){this._checkFormPresent(),e.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations())},Object.defineProperty(qo.prototype,"formDirective",{get:function(){return this},enumerable:!0,configurable:!0}),Object.defineProperty(qo.prototype,"control",{get:function(){return this.form},enumerable:!0,configurable:!0}),Object.defineProperty(qo.prototype,"path",{get:function(){return[]},enumerable:!0,configurable:!0}),qo.prototype.addControl=function(e){var t=this.form.get(e.path);return Lr(t,e),t.updateValueAndValidity({emitEvent:!1}),this.directives.push(e),t},qo.prototype.getControl=function(e){return this.form.get(e.path)},qo.prototype.removeControl=function(e){$r(this.directives,e)},qo.prototype.addFormGroup=function(e){var t=this.form.get(e.path);jr(t,e),t.updateValueAndValidity({emitEvent:!1})},qo.prototype.removeFormGroup=function(e){},qo.prototype.getFormGroup=function(e){return this.form.get(e.path)},qo.prototype.addFormArray=function(e){var t=this.form.get(e.path);jr(t,e),t.updateValueAndValidity({emitEvent:!1})},qo.prototype.removeFormArray=function(e){},qo.prototype.getFormArray=function(e){return this.form.get(e.path)},qo.prototype.updateModel=function(e,t){this.form.get(e.path).setValue(t)},qo.prototype.onSubmit=function(e){return this.submitted=!0,Gr(this.form,this.directives),this.ngSubmit.emit(e),!1},qo.prototype.onReset=function(){this.resetForm()},qo.prototype.resetForm=function(e){void 0===e&&(e=void 0),this.form.reset(e),this.submitted=!1},qo.prototype._updateDomValue=function(){var o=this;this.directives.forEach(function(e){var t,n,r=o.form.get(e.path);e.control!==r&&(t=e.control,(n=e).valueAccessor.registerOnChange(function(){return Br(n)}),n.valueAccessor.registerOnTouched(function(){return Br(n)}),n._rawValidators.forEach(function(e){e.registerOnValidatorChange&&e.registerOnValidatorChange(null)}),n._rawAsyncValidators.forEach(function(e){e.registerOnValidatorChange&&e.registerOnValidatorChange(null)}),t&&t._clearChangeFns(),r&&Lr(r,e),e.control=r)}),this.form._updateTreeValidity({emitEvent:!1})},qo.prototype._updateRegistrations=function(){var e=this;this.form._registerOnCollectionChange(function(){return e._updateDomValue()}),this._oldForm&&this._oldForm._registerOnCollectionChange(function(){}),this._oldForm=this.form},qo.prototype._updateValidators=function(){var e=zr(this._validators);this.form.validator=Xn.compose([this.form.validator,e]),e=qr(this._asyncValidators),this.form.asyncValidator=Xn.composeAsync([this.form.asyncValidator,e])},qo.prototype._checkFormPresent=function(){this.form||Ar.missingFormException()},V([f.Input("formGroup"),q("design:type",yo)],qo.prototype,"form",void 0),V([f.Output(),q("design:type",Object)],qo.prototype,"ngSubmit",void 0),V([f.Directive({selector:"[formGroup]",providers:[fn],host:{"(submit)":"onSubmit($event)","(reset)":"onReset()"},exportAs:"ngForm"}),z(0,f.Optional()),z(0,f.Self()),z(0,f.Inject(Ye)),z(1,f.Optional()),z(1,f.Self()),z(1,f.Inject(Qe)),q("design:paramtypes",[Array,Array])],qo));function qo(e,t){var n=Vo.call(this)||this;return n._validators=e,n._asyncValidators=t,n.submitted=!1,n.directives=[],n.form=null,n.ngSubmit=new f.EventEmitter,n}var Ko,mn={provide:C,useExisting:f.forwardRef(function(){return Ho})},Ho=(F(Go,Ko=Zr),Go.prototype._checkParentType=function(){Jo(this._parent)&&Ar.groupParentException()},V([f.Input("formGroupName"),q("design:type",String)],Go.prototype,"name",void 0),V([f.Directive({selector:"[formGroupName]",providers:[mn]}),z(0,f.Optional()),z(0,f.Host()),z(0,f.SkipSelf()),z(1,f.Optional()),z(1,f.Self()),z(1,f.Inject(Ye)),z(2,f.Optional()),z(2,f.Self()),z(2,f.Inject(Qe)),q("design:paramtypes",[C,Array,Array])],Go));function Go(e,t,n){var r=Ko.call(this)||this;return r._parent=e,r._validators=t,r._asyncValidators=n,r}var Wo,hn={provide:C,useExisting:f.forwardRef(function(){return $o})},$o=(F(Yo,Wo=C),Yo.prototype.ngOnInit=function(){this._checkParentType(),this.formDirective.addFormArray(this)},Yo.prototype.ngOnDestroy=function(){this.formDirective&&this.formDirective.removeFormArray(this)},Object.defineProperty(Yo.prototype,"control",{get:function(){return this.formDirective.getFormArray(this)},enumerable:!0,configurable:!0}),Object.defineProperty(Yo.prototype,"formDirective",{get:function(){return this._parent?this._parent.formDirective:null},enumerable:!0,configurable:!0}),Object.defineProperty(Yo.prototype,"path",{get:function(){return Dr(this.name,this._parent)},enumerable:!0,configurable:!0}),Object.defineProperty(Yo.prototype,"validator",{get:function(){return zr(this._validators)},enumerable:!0,configurable:!0}),Object.defineProperty(Yo.prototype,"asyncValidator",{get:function(){return qr(this._asyncValidators)},enumerable:!0,configurable:!0}),Yo.prototype._checkParentType=function(){Jo(this._parent)&&Ar.arrayParentException()},V([f.Input("formArrayName"),q("design:type",String)],Yo.prototype,"name",void 0),V([f.Directive({selector:"[formArrayName]",providers:[hn]}),z(0,f.Optional()),z(0,f.Host()),z(0,f.SkipSelf()),z(1,f.Optional()),z(1,f.Self()),z(1,f.Inject(Ye)),z(2,f.Optional()),z(2,f.Self()),z(2,f.Inject(Qe)),q("design:paramtypes",[C,Array,Array])],Yo));function Yo(e,t,n){var r=Wo.call(this)||this;return r._parent=e,r._validators=t,r._asyncValidators=n,r}function Jo(e){return!(e instanceof Ho||e instanceof zo||e instanceof $o)}var Zo,Qo,p={provide:gr,useExisting:f.forwardRef(function(){return Xo})},Xo=(F(ei,Zo=gr),Qo=ei,Object.defineProperty(ei.prototype,"isDisabled",{set:function(e){Ar.disabledAttrWarning()},enumerable:!0,configurable:!0}),ei.prototype.ngOnChanges=function(e){this._added||this._setUpControl(),Kr(e,this.viewModel)&&(Yr("formControlName",Qo,this,this._ngModelWarningConfig),this.viewModel=this.model,this.formDirective.updateModel(this,this.model))},ei.prototype.ngOnDestroy=function(){this.formDirective&&this.formDirective.removeControl(this)},ei.prototype.viewToModelUpdate=function(e){this.viewModel=e,this.update.emit(e)},Object.defineProperty(ei.prototype,"path",{get:function(){return Dr(this.name,this._parent)},enumerable:!0,configurable:!0}),Object.defineProperty(ei.prototype,"formDirective",{get:function(){return this._parent?this._parent.formDirective:null},enumerable:!0,configurable:!0}),Object.defineProperty(ei.prototype,"validator",{get:function(){return zr(this._rawValidators)},enumerable:!0,configurable:!0}),Object.defineProperty(ei.prototype,"asyncValidator",{get:function(){return qr(this._rawAsyncValidators)},enumerable:!0,configurable:!0}),ei.prototype._checkParentType=function(){!(this._parent instanceof Ho)&&this._parent instanceof Zr?Ar.ngModelGroupException():this._parent instanceof Ho||this._parent instanceof zo||this._parent instanceof $o||Ar.controlParentException()},ei.prototype._setUpControl=function(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0},ei._ngModelWarningSentOnce=!1,V([f.Input("formControlName"),q("design:type",String)],ei.prototype,"name",void 0),V([f.Input("disabled"),q("design:type",Boolean),q("design:paramtypes",[Boolean])],ei.prototype,"isDisabled",null),V([f.Input("ngModel"),q("design:type",Object)],ei.prototype,"model",void 0),V([f.Output("ngModelChange"),q("design:type",Object)],ei.prototype,"update",void 0),Qo=V([f.Directive({selector:"[formControlName]",providers:[p]}),z(0,f.Optional()),z(0,f.Host()),z(0,f.SkipSelf()),z(1,f.Optional()),z(1,f.Self()),z(1,f.Inject(Ye)),z(2,f.Optional()),z(2,f.Self()),z(2,f.Inject(Qe)),z(3,f.Optional()),z(3,f.Self()),z(3,f.Inject(wt)),z(4,f.Optional()),z(4,f.Inject(Fo)),q("design:paramtypes",[C,Array,Array,Array,Object])],ei));function ei(e,t,n,r,o){var i=Zo.call(this)||this;return i._ngModelWarningConfig=o,i._added=!1,i.update=new f.EventEmitter,i._ngModelWarningSent=!1,i._parent=e,i._rawValidators=t||[],i._rawAsyncValidators=n||[],i.valueAccessor=Wr(i,r),i}var y={provide:Ye,useExisting:f.forwardRef(function(){return ti}),multi:!0},vt={provide:Ye,useExisting:f.forwardRef(function(){return oi}),multi:!0},ti=(Object.defineProperty(ni.prototype,"required",{get:function(){return this._required},set:function(e){this._required=null!=e&&!1!==e&&""+e!="false",this._onChange&&this._onChange()},enumerable:!0,configurable:!0}),ni.prototype.validate=function(e){return this.required?Xn.required(e):null},ni.prototype.registerOnValidatorChange=function(e){this._onChange=e},V([f.Input(),q("design:type",Object),q("design:paramtypes",[Object])],ni.prototype,"required",null),V([f.Directive({selector:":not([type=checkbox])[required][formControlName],:not([type=checkbox])[required][formControl],:not([type=checkbox])[required][ngModel]",providers:[y],host:{"[attr.required]":'required ? "" : null'}})],ni));function ni(){}var ri,oi=(F(ii,ri=ti),ii.prototype.validate=function(e){return this.required?Xn.requiredTrue(e):null},V([f.Directive({selector:"input[type=checkbox][required][formControlName],input[type=checkbox][required][formControl],input[type=checkbox][required][ngModel]",providers:[vt],host:{"[attr.required]":'required ? "" : null'}})],ii));function ii(){return null!==ri&&ri.apply(this,arguments)||this}var fn={provide:Ye,useExisting:f.forwardRef(function(){return si}),multi:!0},si=(Object.defineProperty(ai.prototype,"email",{set:function(e){this._enabled=""===e||!0===e||"true"===e,this._onChange&&this._onChange()},enumerable:!0,configurable:!0}),ai.prototype.validate=function(e){return this._enabled?Xn.email(e):null},ai.prototype.registerOnValidatorChange=function(e){this._onChange=e},V([f.Input(),q("design:type",Object),q("design:paramtypes",[Object])],ai.prototype,"email",null),V([f.Directive({selector:"[email][formControlName],[email][formControl],[email][ngModel]",providers:[fn]})],ai));function ai(){}var mn={provide:Ye,useExisting:f.forwardRef(function(){return ui}),multi:!0},ui=(ci.prototype.ngOnChanges=function(e){"minlength"in e&&(this._createValidator(),this._onChange&&this._onChange())},ci.prototype.validate=function(e){return null==this.minlength?null:this._validator(e)},ci.prototype.registerOnValidatorChange=function(e){this._onChange=e},ci.prototype._createValidator=function(){this._validator=Xn.minLength(parseInt(this.minlength,10))},V([f.Input(),q("design:type",String)],ci.prototype,"minlength",void 0),V([f.Directive({selector:"[minlength][formControlName],[minlength][formControl],[minlength][ngModel]",providers:[mn],host:{"[attr.minlength]":"minlength ? minlength : null"}})],ci));function ci(){}var hn={provide:Ye,useExisting:f.forwardRef(function(){return li}),multi:!0},li=(pi.prototype.ngOnChanges=function(e){"maxlength"in e&&(this._createValidator(),this._onChange&&this._onChange())},pi.prototype.validate=function(e){return null!=this.maxlength?this._validator(e):null},pi.prototype.registerOnValidatorChange=function(e){this._onChange=e},pi.prototype._createValidator=function(){this._validator=Xn.maxLength(parseInt(this.maxlength,10))},V([f.Input(),q("design:type",String)],pi.prototype,"maxlength",void 0),V([f.Directive({selector:"[maxlength][formControlName],[maxlength][formControl],[maxlength][ngModel]",providers:[hn],host:{"[attr.maxlength]":"maxlength ? maxlength : null"}})],pi));function pi(){}var di,p={provide:Ye,useExisting:f.forwardRef(function(){return fi}),multi:!0},fi=(hi.prototype.ngOnChanges=function(e){"pattern"in e&&(this._createValidator(),this._onChange&&this._onChange())},hi.prototype.validate=function(e){return this._validator(e)},hi.prototype.registerOnValidatorChange=function(e){this._onChange=e},hi.prototype._createValidator=function(){this._validator=Xn.pattern(this.pattern)},V([f.Input(),q("design:type",Object)],hi.prototype,"pattern",void 0),V([f.Directive({selector:"[pattern][formControlName],[pattern][formControl],[pattern][ngModel]",providers:[p],host:{"[attr.pattern]":"pattern ? pattern : null"}})],hi));function hi(){}function mi(){}function gi(){}function yi(e){this.viewContainerRef=e}mi.prototype.group=function(e,t){void 0===t&&(t=null);var n=this._reduceControls(e),e=null!=t?t.validator:null,t=null!=t?t.asyncValidator:null;return new yo(n,e,t)},mi.prototype.control=function(e,t,n){return new ho(e,t,n)},mi.prototype.array=function(e,t,n){var r=this,e=e.map(function(e){return r._createControl(e)});return new wo(e,t,n)},mi.prototype._reduceControls=function(t){var n=this,r={};return Object.keys(t).forEach(function(e){r[e]=n._createControl(t[e])}),r},mi.prototype._createControl=function(e){if(e instanceof ho||e instanceof yo||e instanceof wo)return e;if(Array.isArray(e)){var t=e[0],n=1<e.length?e[1]:null,r=2<e.length?e[2]:null;return this.control(t,n,r)}return this.control(e)},Qe=V([f.Injectable()],mi),new f.Version("6.1.10"),wt=[V([f.Directive({selector:"form:not([ngNoForm]):not([ngNativeValidate])",host:{novalidate:""}})],function(){}),dt,or,ar,dr,Sr,ir,kr,Mr,br,pr,b,ti,ui,li,fi,oi,si],C=[Ro,To,Eo],y=[jo,zo,Xo,Ho,$o],vt=V([f.NgModule({declarations:wt,exports:wt})],function(){}),fn=V([f.NgModule({declarations:C,providers:[gn],exports:[vt,C]})],function(){}),(di=gi).withConfig=function(e){return{ngModule:di,providers:[{provide:Fo,useValue:e.warnOnNgModelWithFormControl}]}},di=V([f.NgModule({declarations:[y],providers:[Qe,gn],exports:[vt,y]})],gi),yi.decorators=[{type:f.Directive,args:[{selector:"[component-host]"}]}],yi.ctorParameters=function(){return[{type:f.ViewContainerRef}]},mn=yi;function vi(e,t){this.component=e,this.data=t}var bi=new E.Logger("AuthDecorator");var wi=function(e,t){return(wi=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function Si(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}wi(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var Ci=function(){return(Ci=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function _i(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,o)}i((u=u.apply(e,s||[])).next())})}function Ei(n,r){var o,i,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&t[0]?i.return:t[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,t[1])).done)return s;switch(i=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,i=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],i=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}}function Ii(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(r=i.next()).done;)s.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s}function Ai(e){var t;return j(j({},e),{tls:null===(t=e.tls)||void 0===t||t,endpoint:e.endpoint?Oi(e):function(){return ki(e)},isCustomEndpoint:!!e.endpoint})}function Pi(e){if(!e.region)throw new Error("Region is missing");return j(j({},e),{region:Ti(e.region)})}var hn="@aws-sdk/client-pinpoint",Ye="1.0.0-rc.4",Oi=function(e){var t=e.endpoint,e=e.urlParser;if("string"==typeof t){var n=Promise.resolve(e(t));return function(){return n}}if("object"!=typeof t)return t;var r=Promise.resolve(t);return function(){return r}},ki=function(r){return K(void 0,void 0,void 0,function(){var t,n;return H(this,function(e){switch(e.label){case 0:return t=void 0===(t=r.tls)||t,[4,r.region()];case 1:if(n=e.sent(),!new RegExp(/^([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9-]{0,61}[a-zA-Z0-9])$/).test(n))throw new Error("Invalid region in client config");return[4,r.regionInfoProvider(n)];case 2:if(!(n=(null!==(n=e.sent())&&void 0!==n?n:{}).hostname))throw new Error("Cannot resolve hostname from client config");return[2,r.urlParser((t?"https:":"http:")+"//"+n)]}})})},p={environmentVariableSelector:function(e){return e.AWS_REGION},configFileSelector:function(e){return e.region},default:function(){throw new Error("Region is missing")}},dt={preferredFile:"credentials"},Ti=function(e){if("string"!=typeof e)return e;var t=Promise.resolve(e);return function(){return t}},or="undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{};function xi(){throw new Error("setTimeout has not been defined")}function Ni(){throw new Error("clearTimeout has not been defined")}var Mi=xi,Ri=Ni;function Ui(t){if(Mi===setTimeout)return setTimeout(t,0);if((Mi===xi||!Mi)&&setTimeout)return Mi=setTimeout,setTimeout(t,0);try{return Mi(t,0)}catch(e){try{return Mi.call(null,t,0)}catch(e){return Mi.call(this,t,0)}}}"function"==typeof or.setTimeout&&(Mi=setTimeout),"function"==typeof or.clearTimeout&&(Ri=clearTimeout);var Di,Li=[],Fi=!1,ji=-1;function Bi(){Fi&&Di&&(Fi=!1,Di.length?Li=Di.concat(Li):ji=-1,Li.length&&Vi())}function Vi(){if(!Fi){var e=Ui(Bi);Fi=!0;for(var t=Li.length;t;){for(Di=Li,Li=[];++ji<t;)Di&&Di[ji].run();ji=-1,t=Li.length}Di=null,Fi=!1,function(t){if(Ri===clearTimeout)return clearTimeout(t);if((Ri===Ni||!Ri)&&clearTimeout)return Ri=clearTimeout,clearTimeout(t);try{Ri(t)}catch(e){try{return Ri.call(null,t)}catch(e){return Ri.call(this,t)}}}(e)}}function zi(e,t){this.fun=e,this.array=t}function qi(){}zi.prototype.run=function(){this.fun.apply(null,this.array)},vt=gn=Qe=C=wt=b=pr=qi;var Ki,Hi=or.performance||{},Gi=Hi.now||Hi.mozNow||Hi.msNow||Hi.oNow||Hi.webkitNow||function(){return(new Date).getTime()},Wi=new Date,$i={nextTick:function(e){var t=new Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];Li.push(new zi(e,t)),1!==Li.length||Fi||Ui(Vi)},title:"browser",browser:!0,env:{},argv:[],version:"",versions:{},on:pr,addListener:b,once:wt,off:C,removeListener:Qe,removeAllListeners:gn,emit:vt,binding:function(e){throw new Error("process.binding is not supported")},cwd:function(){return"/"},chdir:function(e){throw new Error("process.chdir is not supported")},umask:function(){return 0},hrtime:function(e){var t=.001*Gi.call(Hi),n=Math.floor(t),t=Math.floor(t%1*1e9);return e&&(n-=e[0],(t-=e[1])<0&&(n--,t+=1e9)),[n,t]},platform:"browser",release:{},config:{},uptime:function(){return(new Date-Wi)/1e3}},Yi=(F(Ji,Ki=Error),Ji);function Ji(e,t){return void 0===t&&(t=!0),(e=Ki.call(this,e)||this).tryNextLink=t,e}function Zi(){for(var i=[],e=0;e<arguments.length;e++)i[e]=arguments[e];return function(){var e,t,n=Promise.reject(new Yi("No providers in chain"));try{for(var r=G(i),o=r.next();!o.done;o=r.next())!function(t){n=n.catch(function(e){if(null!=e&&e.tryNextLink)return t();throw e})}(o.value)}catch(t){e={error:t}}finally{try{o&&!o.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}return n}}function Qi(n,r,o){var i,s;if(void 0===r)return function(){return s||(i=n(),s=!0),i};var a=!1;return function(){return K(void 0,void 0,void 0,function(){var t;return H(this,function(e){switch(e.label){case 0:return s||(i=n(),s=!0),a?[2,i]:[4,i];case 1:return t=e.sent(),o&&!o(t)?(a=!0,[2,t]):r(t)?[2,i=n()]:[2,t]}})})}}function Xi(t){return new Promise(function(r,o){var e=h.request(j({method:"GET"},t));e.on("error",function(e){o(Object.assign(new Yi("Unable to connect to instance metadata service"),e))}),e.on("timeout",function(){o(new Error("TimeoutError"))}),e.on("response",function(e){var t=e.statusCode;((t=void 0===t?400:t)<200||300<=t)&&o(Object.assign(new Yi("Error response received from instance metadata service"),{statusCode:t}));var n=[];e.on("data",function(e){n.push(e)}),e.on("end",function(){r(d.Buffer.concat(n))})}),e.end()})}var es=function(e){return Boolean(e)&&"object"==typeof e&&"string"==typeof e.AccessKeyId&&"string"==typeof e.SecretAccessKey&&"string"==typeof e.Token&&"string"==typeof e.Expiration},ts=function(e){return{accessKeyId:e.AccessKeyId,secretAccessKey:e.SecretAccessKey,sessionToken:e.Token,expiration:new Date(e.Expiration)}},ns=function(e){var t=e.maxRetries;return{maxRetries:t=void 0===t?0:t,timeout:void 0===(e=e.timeout)?1e3:e}},rs=function(e,t){for(var n=e(),r=0;r<t;r++)n=n.catch(e);return n},os="AWS_CONTAINER_CREDENTIALS_FULL_URI",is="AWS_CONTAINER_CREDENTIALS_RELATIVE_URI",ss="AWS_CONTAINER_AUTHORIZATION_TOKEN";function as(e){var t=this,a=(e=ns(e=void 0===e?{}:e)).timeout,n=e.maxRetries;return function(){return function(){if($i.env[is])return Promise.resolve({hostname:us,path:$i.env[is]});if($i.env[os]){var e=S.parse($i.env[os]);return e.hostname&&e.hostname in cs?e.protocol&&e.protocol in ls?Promise.resolve(j(j({},e),{port:e.port?parseInt(e.port,10):void 0})):Promise.reject(new Yi(e.protocol+" is not a valid container metadata service protocol",!1)):Promise.reject(new Yi(e.hostname+" is not a valid container metadata service hostname",!1))}return Promise.reject(new Yi("The container metadata credential provider cannot be used unless the "+is+" or "+os+" environment variable is set",!1))}().then(function(s){return rs(function(){return K(t,void 0,void 0,function(){var o,i;return H(this,function(e){switch(e.label){case 0:return i=(o=JSON).parse,[4,(t=a,n=s,$i.env[ss]&&((r=void 0===(r=n.headers)?{}:r).Authorization=$i.env[ss],n.headers=r),Xi(j(j({},n),{timeout:t})).then(function(e){return e.toString()}))];case 1:if(o=i.apply(o,[e.sent()]),!es(o))throw new Yi("Invalid response received from instance metadata service.");return[2,ts(o)]}var t,n,r})})},n)})}}var us="169.254.170.2",cs={localhost:!0,"127.0.0.1":!0},ls={"http:":!0,"https:":!0},ps="169.254.169.254",ds="/latest/meta-data/iam/security-credentials/",fs=function(t){return K(void 0,void 0,void 0,function(){return H(this,function(e){return[2,Xi(j(j({},t),{host:ps,path:"/latest/api/token",method:"PUT",headers:{"x-aws-ec2-metadata-token-ttl-seconds":"21600"}}))]})})},hs=function(t){return K(void 0,void 0,void 0,function(){return H(this,function(e){switch(e.label){case 0:return[4,Xi(j(j({},t),{host:ps,path:ds}))];case 1:return[2,e.sent().toString()]}})})},ms=function(r,o){return K(void 0,void 0,void 0,function(){var t,n;return H(this,function(e){switch(e.label){case 0:return n=(t=JSON).parse,[4,Xi(j(j({},o),{host:ps,path:ds+r}))];case 1:if(t=n.apply(t,[e.sent().toString()]),!es(t))throw new Yi("Invalid response received from instance metadata service.");return[2,ts(t)]}})})},gs="AWS_SHARED_CREDENTIALS_FILE",ys="AWS_CONFIG_FILE",vs=function(){return{}};function bs(e){var t=void 0===(t=(e=void 0===e?{}:e).filepath)?$i.env[gs]||i.join(Es(),".aws","credentials"):t,e=void 0===(e=e.configFilepath)?$i.env[ys]||i.join(Es(),".aws","config"):e;return Promise.all([_s(e).then(Cs).then(Ss).catch(vs),_s(t).then(Cs).catch(vs)]).then(function(e){return{configFile:(e=W(e,2))[0],credentialsFile:e[1]}})}var ws=/^profile\s(["'])?([^\1]+)\1$/;function Ss(e){var t,n,r={};try{for(var o=G(Object.keys(e)),i=o.next();!i.done;i=o.next()){var s=i.value,a=void 0;"default"===s?r.default=e.default:(a=ws.exec(s))&&((a=W(a,3))[0],a[1],(a=a[2])&&(r[a]=e[s]))}}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return r}function Cs(e){var t,n,r,o={};try{for(var i=G(e.split(/\r?\n/)),s=i.next();!s.done;s=i.next()){var a=s.value,u=(a=a.split(/(^|\s)[;#]/)[0]).match(/^\s*\[([^\[\]]+)]\s*$/);u?r=u[1]:!r||(a=a.match(/^\s*(.+?)\s*=\s*(.+?)\s*$/))&&(o[r]=o[r]||{},o[r][a[1]]=a[2])}}catch(e){t={error:e}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return o}function _s(e){return new Promise(function(n,r){a.readFile(e,"utf8",function(e,t){e?r(e):n(t)})})}function Es(){var e=(r=$i.env).HOME,t=r.USERPROFILE,n=r.HOMEPATH,r=void 0===(r=r.HOMEDRIVE)?"C:"+i.sep:r;return e||t||(n?""+r+n:o.homedir())}var Is="default",As="AWS_PROFILE";function Ps(e){return Boolean(e)&&"object"==typeof e&&"string"==typeof e.aws_access_key_id&&"string"==typeof e.aws_secret_access_key&&-1<["undefined","string"].indexOf(typeof e.aws_session_token)}function Os(t){return void 0===t&&(t={}),function(){return Ts(t).then(function(e){return function p(d,f,h,m){return void 0===m&&(m={}),K(this,void 0,void 0,function(){var n,r,o,i,s,a,u,c,l;return H(this,function(e){switch(e.label){case 0:if(n=f[d],0<Object.keys(m).length&&Ps(n))return[2,xs(n)];if(t=n,!(Boolean(t)&&"object"==typeof t&&"string"==typeof t.role_arn&&"string"==typeof t.source_profile&&-1<["undefined","string"].indexOf(typeof t.role_session_name)&&-1<["undefined","string"].indexOf(typeof t.external_id)&&-1<["undefined","string"].indexOf(typeof t.mfa_serial)))return[3,4];if(a=n.external_id,r=n.mfa_serial,o=n.role_arn,l=n.role_session_name,s=void 0===l?"aws-sdk-js-"+Date.now():l,i=n.source_profile,!h.roleAssumer)throw new Yi("Profile "+d+" requires a role to be assumed, but no role assumption callback was provided.",!1);if(i in m)throw new Yi("Detected a cycle attempting to resolve credentials for profile "+ks(h)+". Profiles visited: "+Object.keys(m).join(", "),!1);if(l=p(i,f,h,j(j({},m),((l={})[i]=!0,l))),s={RoleArn:o,RoleSessionName:s,ExternalId:a},!r)return[3,2];if(!h.mfaCodeProvider)throw new Yi("Profile "+d+" requires multi-factor authentication, but no MFA code callback was provided.",!1);return s.SerialNumber=r,a=s,[4,h.mfaCodeProvider(r)];case 1:a.TokenCode=e.sent(),e.label=2;case 2:return c=(u=h).roleAssumer,[4,l];case 3:return[2,c.apply(u,[e.sent(),s])];case 4:if(Ps(n))return[2,xs(n)];throw new Yi("Profile "+d+" could not be found or parsed in shared credentials file.")}var t})})}(ks(t),e,t)})}}function ks(e){return e.profile||$i.env[As]||Is}function Ts(e){var t=e.loadedConfig;return(void 0===t?bs(e):t).then(function(e){var t=e.configFile,e=e.credentialsFile;return j(j({},t),e)})}function xs(e){return Promise.resolve({accessKeyId:e.aws_access_key_id,secretAccessKey:e.aws_secret_access_key,sessionToken:e.aws_session_token})}function Ns(e){var t,n,i,r,o,s,a=(e=void 0===e?{}:e).profile;function u(t,o){return K(void 0,void 0,void 0,function(){var r;return H(this,function(e){switch(e.label){case 0:return[4,rs(function(){return K(void 0,void 0,void 0,function(){var t,n;return H(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,hs(o)];case 1:return t=e.sent(),[3,3];case 2:throw 401===(n=e.sent()).statusCode&&(i=!1),n;case 3:return[2,t]}})})},t)];case 1:return r=e.sent().trim(),[2,rs(function(){return K(void 0,void 0,void 0,function(){var t,n;return H(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,ms(r,o)];case 1:return t=e.sent(),[3,3];case 2:throw 401===(n=e.sent()).statusCode&&(i=!1),n;case 3:return[2,t]}})})},t)]}})})}return Qi(e=(void 0===a?$i.env[As]:a)?Os(e):Zi(function(){var e=$i.env.AWS_ACCESS_KEY_ID,t=$i.env.AWS_SECRET_ACCESS_KEY,n=$i.env.AWS_CREDENTIAL_EXPIRATION;return e&&t?Promise.resolve({accessKeyId:e,secretAccessKey:t,sessionToken:$i.env.AWS_SESSION_TOKEN,expiration:n?new Date(n):void 0}):Promise.reject(new Yi("Unable to find environment variable credentials."))},Os(e),(void 0===(s=e)&&(s={}),function(){return Ts(s).then(function(e){return function(u,r){return K(this,void 0,void 0,function(){var n;return H(this,function(e){switch(e.label){case 0:return n=r[u],r[u]?void 0===(n=n.credential_process)?[3,2]:[4,(t=n,new Promise(function(n,r){c.exec(t,function(e,t){e?r(e):n(t.trim())})}).then(function(e){var t;try{t=JSON.parse(e)}catch(e){throw Error("Profile "+u+" credential_process returned invalid JSON.")}var n=t.Version,r=t.AccessKeyId,o=t.SecretAccessKey,i=t.SessionToken,s=t.Expiration;if(1!==n)throw Error("Profile "+u+" credential_process did not return Version 1.");if(void 0===r||void 0===o)throw Error("Profile "+u+" credential_process returned invalid credentials.");if(s){var a=new Date;if(new Date(s)<a)throw Error("Profile "+u+" credential_process returned expired credentials.");a=Math.floor(new Date(s).valueOf()/1e3)}return{accessKeyId:r,secretAccessKey:o,sessionToken:i,expirationUnix:a}}).catch(function(e){throw new Yi(e.message)}))]:[3,4];case 1:return[2,e.sent()];case 2:throw new Yi("Profile "+u+" did not contain credential_process.");case 3:return[3,5];case 4:throw new Yi("Profile "+u+" could not be found in shared credentials file.");case 5:return[2]}var t})})}(ks(s),e)})}),(t=e,$i.env[is]||$i.env[os]?as(t):$i.env.AWS_EC2_METADATA_DISABLED?function(){return Promise.reject(new Yi("EC2 Instance Metadata Service access disabled"))}:(i=!1,r=(n=ns(n=void 0===(n=t)?{}:n)).timeout,o=n.maxRetries,function(){return K(void 0,void 0,void 0,function(){var t,n;return H(this,function(e){switch(e.label){case 0:return i?[2,u(o,{timeout:r})]:[3,1];case 1:t=void 0,e.label=2;case 2:return e.trys.push([2,4,,5]),[4,fs({timeout:r})];case 3:return t=e.sent().toString(),[3,5];case 4:if(400===(null==(n=e.sent())?void 0:n.statusCode))throw Object.assign(n,{message:"EC2 Metadata token request returned error"});return"TimeoutError"!==n.message&&![403,404,405].includes(n.statusCode)||(i=!0),[2,u(o,{timeout:r})];case 5:return[2,u(o,{timeout:r,headers:{"x-aws-ec2-metadata-token":t}})]}})})}))),function(e){return void 0!==e.expiration&&e.expiration.getTime()-Date.now()<3e5},function(e){return void 0!==e.expiration})}function Ms(e){return"function"==typeof ArrayBuffer&&e instanceof ArrayBuffer||"[object ArrayBuffer]"===Object.prototype.toString.call(e)}var Rs=function(e,t,n){if(void 0===t&&(t=0),void 0===n&&(n=e.byteLength-t),!Ms(e))throw new TypeError('The "input" argument must be ArrayBuffer. Received type '+typeof e+" ("+e+")");return d.Buffer.from(e,t,n)},Us=function(e,t){if("string"!=typeof e)throw new TypeError('The "input" argument must be of type string. Received type '+typeof e+" ("+e+")");return t?d.Buffer.from(e,t):d.Buffer.from(e)},y=(Ds.prototype.update=function(e,t){this.hash.update(Ls(e,t))},Ds.prototype.digest=function(){return Promise.resolve(this.hash.digest())},Ds);function Ds(e,t){this.hash=t?n.createHmac(e,Ls(t)):n.createHash(e)}function Ls(e,t){return d.Buffer.isBuffer(e)?e:"string"==typeof e?Us(e,t):ArrayBuffer.isView(e)?Rs(e.buffer,e.byteOffset,e.byteLength):Rs(e)}function Fs(t){return{applyToStack:function(e){var r;e.add((r=t,function(n){return function(t){return K(void 0,void 0,void 0,function(){return H(this,function(e){return[2,r.retryStrategy.retry(n,t)]})})}}),js)}}}var js={name:"retryMiddleware",tags:["RETRY"],step:"finalizeRequest",priority:"high"},Bs=(Vs.isInstance=function(e){return!!e&&("number"==typeof e.statusCode&&"object"==typeof e.headers)},Vs);function Vs(e){this.statusCode=e.statusCode,this.headers=e.headers||{},this.body=e.body}var zs=(qs.isInstance=function(e){return!!e&&("method"in e&&"protocol"in e&&"hostname"in e&&"path"in e&&"object"==typeof e.query&&"object"==typeof e.headers)},qs.prototype.clone=function(){var r,e=new qs(j(j({},this),{headers:j({},this.headers)}));return e.query&&(e.query=(r=e.query,Object.keys(r).reduce(function(e,t){var n=r[t];return j(j({},e),((e={})[t]=Array.isArray(n)?$(n):n,e))},{}))),e},qs);function qs(e){this.method=e.method||"GET",this.hostname=e.hostname||"localhost",this.port=e.port,this.query=e.query||{},this.headers=e.headers||{},this.body=e.body,this.protocol=e.protocol?":"!==e.protocol.substr(-1)?e.protocol+":":e.protocol:"https:",this.path=e.path?"/"!==e.path.charAt(0)?"/"+e.path:e.path:"/"}function Ks(e){return $s.includes(e.name)||1==(null===(e=e.$retryable)||void 0===e?void 0:e.throttling)}function Hs(e,t){return Math.floor(Math.min(2e4,Math.random()*Math.pow(2,t)*e))}function Gs(e){return!!e&&(void 0!==e.$retryable||Ws.includes(e.name)||Ks(e)||Ys.includes(e.name)||Js.includes((null===(e=e.$metadata)||void 0===e?void 0:e.httpStatusCode)||0))}var Ws=["AuthFailure","InvalidSignatureException","RequestExpired","RequestInTheFuture","RequestTimeTooSkewed","SignatureDoesNotMatch"],$s=["Throttling","ThrottlingException","ThrottledException","RequestThrottledException","TooManyRequestsException","ProvisionedThroughputExceededException","TransactionInProgressException","RequestLimitExceeded","BandwidthLimitExceeded","LimitExceededException","RequestThrottled","SlowDown","PriorRequestNotComplete","EC2ThrottledException"],Ys=["AbortError","TimeoutError","RequestTimeout","RequestTimeoutException"],Js=[500,502,503,504],Zs=(Qs.prototype.shouldRetry=function(e,t,n){return t<n&&this.retryDecider(e)&&this.retryQuota.hasRetryTokens(e)},Qs.prototype.getMaxAttempts=function(){return K(this,void 0,void 0,function(){var t;return H(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,this.maxAttemptsProvider()];case 1:return t=e.sent(),[3,3];case 2:return e.sent(),[t=3,3];case 3:return[2,t]}})})},Qs.prototype.retry=function(p,d){return K(this,void 0,void 0,function(){var i,s,a,u,c,l,t;return H(this,function(e){switch(e.label){case 0:return a=s=0,[4,this.getMaxAttempts()];case 1:u=e.sent(),c=d.request,zs.isInstance(c)&&(c.headers["amz-sdk-invocation-id"]=m.v4()),t=function(){var t,n,r,o;return H(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,5]),zs.isInstance(c)&&(c.headers["amz-sdk-request"]="attempt="+(s+1)+"; max="+u),[4,p(d)];case 1:return n=e.sent(),t=n.response,n=n.output,l.retryQuota.releaseRetryTokens(i),n.$metadata.attempts=s+1,n.$metadata.totalRetryDelay=a,[2,{value:{response:t,output:n}}];case 2:return r=e.sent(),s++,l.shouldRetry(r,s,u)?(i=l.retryQuota.retrieveRetryTokens(r),o=l.delayDecider(Ks(r)?500:100,s),a+=o,[4,new Promise(function(e){return setTimeout(e,o)})]):[3,4];case 3:return e.sent(),[2,"continue"];case 4:throw r.$metadata||(r.$metadata={}),r.$metadata.attempts=s,r.$metadata.totalRetryDelay=a,r;case 5:return[2]}})},l=this,e.label=2;case 2:return[5,t()];case 3:return"object"==typeof(t=e.sent())?[2,t.value]:[3,2];case 4:return[2]}})})},Qs);function Qs(e,t){function n(e){return"TimeoutError"===e.name?10:5}function r(e){return n(e)<=i}var o,i;this.maxAttemptsProvider=e,this.retryDecider=null!==(e=null==t?void 0:t.retryDecider)&&void 0!==e?e:Gs,this.delayDecider=null!==(e=null==t?void 0:t.delayDecider)&&void 0!==e?e:Hs,this.retryQuota=null!==(t=null==t?void 0:t.retryQuota)&&void 0!==t?t:(i=o=500,Object.freeze({hasRetryTokens:r,retrieveRetryTokens:function(e){if(!r(e))throw new Error("No retry token available");return e=n(e),i-=e,e},releaseRetryTokens:function(e){i+=null!=e?e:1,i=Math.min(i,o)}}))}function Xs(e){var t=na(e.maxAttempts);return j(j({},e),{maxAttempts:t,retryStrategy:e.retryStrategy||new Zs(t)})}var ea="AWS_MAX_ATTEMPTS",ta="max_attempts",pr={environmentVariableSelector:function(e){var t=e[ea];if(t){if(e=parseInt(t),Number.isNaN(e))throw new Error("Environment variable "+ea+' mast be a number, got "'+t+'"');return e}},configFileSelector:function(e){var t=e[ta];if(t){if(e=parseInt(t),Number.isNaN(e))throw new Error("Shared config file entry "+ta+' mast be a number, got "'+t+'"');return e}},default:3},na=function(e){if("number"!=typeof(e=void 0===e?3:e))return e;var t=Promise.resolve(e);return function(){return t}},b=function(e,t){var s,a,u,n,r,o,i=e.environmentVariableSelector,c=e.configFileSelector,e=e.default;return Qi(Zi((n=i,function(){return K(void 0,void 0,void 0,function(){var t;return H(this,function(e){try{if(void 0===(t=n($i.env)))throw new Error;return[2,t]}catch(e){throw new Yi(e.message||"Cannot load config from environment variables with getter: "+n)}return[2]})})}),(s=c,t=(c=void 0===(c=t=void 0===t?{}:t)?{}:c).preferredFile,a=void 0===t?"config":t,u=B(c,["preferredFile"]),function(){return K(void 0,void 0,void 0,function(){var t,n,r,o,i;return H(this,function(e){switch(e.label){case 0:return t=u.loadedConfig,r=void 0===t?bs(u):t,n=u.profile,t=void 0===n?$i.env.AWS_PROFILE||"default":n,[4,r];case 1:n=e.sent(),r=n.configFile,n=(n=n.credentialsFile)[t]||{},r=r[t]||{},o="config"===a?j(j({},n),r):j(j({},r),n);try{if(void 0===(i=s(o)))throw new Error;return[2,i]}catch(e){throw new Yi(e.message||"Cannot load config for profile "+t+" in SDK configuration files with getter: "+s)}return[2]}})})}),"function"==typeof(r=e)?function(){return K(void 0,void 0,void 0,function(){return H(this,function(e){return[2,r()]})})}:(o=r,function(){return Promise.resolve(o)})))},ra=function(e){return encodeURIComponent(e).replace(/[!'()*]/g,oa)},oa=function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()};function ia(e){var t,n,r=[];try{for(var o=G(Object.keys(e).sort()),i=o.next();!i.done;i=o.next()){var s=e[a=i.value],a=ra(a);if(Array.isArray(s))for(var u=0,c=s.length;u<c;u++)r.push(a+"="+ra(s[u]));else{var l=a;!s&&"string"!=typeof s||(l+="="+ra(s)),r.push(l)}}}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return r.join("&")}var sa=[],aa=[],ua="undefined"!=typeof Uint8Array?Uint8Array:Array,ca=!1;function la(){ca=!0;for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t=0,n=e.length;t<n;++t)sa[t]=e[t],aa[e.charCodeAt(t)]=t;aa["-".charCodeAt(0)]=62,aa["_".charCodeAt(0)]=63}function pa(e){var t;ca||la();for(var n=e.length,r=n%3,o="",i=[],s=0,a=n-r;s<a;s+=16383)i.push(function(e,t,n){for(var r,o=[],i=t;i<n;i+=3)r=(e[i]<<16)+(e[i+1]<<8)+e[i+2],o.push(sa[r>>18&63]+sa[r>>12&63]+sa[r>>6&63]+sa[63&r]);return o.join("")}(e,s,a<s+16383?a:s+16383));return 1==r?(t=e[n-1],o+=sa[t>>2],o+=sa[t<<4&63],o+="=="):2==r&&(t=(e[n-2]<<8)+e[n-1],o+=sa[t>>10],o+=sa[t>>4&63],o+=sa[t<<2&63],o+="="),i.push(o),i.join("")}function da(e,t,n,r,o){var i,s,a=8*o-r-1,u=(1<<a)-1,c=u>>1,l=-7,p=n?o-1:0,d=n?-1:1,n=e[t+p];for(p+=d,i=n&(1<<-l)-1,n>>=-l,l+=a;0<l;i=256*i+e[t+p],p+=d,l-=8);for(s=i&(1<<-l)-1,i>>=-l,l+=r;0<l;s=256*s+e[t+p],p+=d,l-=8);if(0===i)i=1-c;else{if(i===u)return s?NaN:1/0*(n?-1:1);s+=Math.pow(2,r),i-=c}return(n?-1:1)*s*Math.pow(2,i-r)}function fa(e,t,n,r,o,i){var s,a,u=8*i-o-1,c=(1<<u)-1,l=c>>1,p=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,d=r?0:i-1,f=r?1:-1,i=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=c):(s=Math.floor(Math.log(t)/Math.LN2),t*(r=Math.pow(2,-s))<1&&(s--,r*=2),2<=(t+=1<=s+l?p/r:p*Math.pow(2,1-l))*r&&(s++,r/=2),c<=s+l?(a=0,s=c):1<=s+l?(a=(t*r-1)*Math.pow(2,o),s+=l):(a=t*Math.pow(2,l-1)*Math.pow(2,o),s=0));8<=o;e[n+d]=255&a,d+=f,a/=256,o-=8);for(s=s<<o|a,u+=o;0<u;e[n+d]=255&s,d+=f,s/=256,u-=8);e[n+d-f]|=128*i}var ha={}.toString,ma=Array.isArray||function(e){return"[object Array]"==ha.call(e)};function ga(){return va.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function ya(e,t){if(ga()<t)throw new RangeError("Invalid typed array length");return va.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=va.prototype:(e=null===e?new va(t):e).length=t,e}function va(e,t,n){if(!(va.TYPED_ARRAY_SUPPORT||this instanceof va))return new va(e,t,n);if("number"!=typeof e)return ba(this,e,t,n);if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return Sa(this,e)}function ba(e,t,n,r){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,n,r){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");return t=void 0===n&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,n):new Uint8Array(t,n,r),va.TYPED_ARRAY_SUPPORT?(e=t).__proto__=va.prototype:e=Ca(e,t),e}(e,t,n,r):"string"==typeof t?function(e,t,n){if("string"==typeof n&&""!==n||(n="utf8"),!va.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|Ia(t,n);return(n=(e=ya(e,r)).write(t,n))!==r&&(e=e.slice(0,n)),e}(e,t,n):function(e,t){if(Ea(t)){var n=0|_a(t.length);return 0===(e=ya(e,n)).length||t.copy(e,0,0,n),e}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||(r=t.length)!=r?ya(e,0):Ca(e,t);if("Buffer"===t.type&&ma(t.data))return Ca(e,t.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function wa(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function Sa(e,t){if(wa(t),e=ya(e,t<0?0:0|_a(t)),!va.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function Ca(e,t){var n=t.length<0?0:0|_a(t.length);e=ya(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function _a(e){if(e>=ga())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+ga().toString(16)+" bytes");return 0|e}function Ea(e){return null!=e&&e._isBuffer}function Ia(e,t){if(Ea(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;var n=(e="string"!=typeof e?""+e:e).length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return Va(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return za(e).length;default:if(r)return Va(e).length;t=(""+t).toLowerCase(),r=!0}}function Aa(e,o,i){var t,n,r=!1;if((o=void 0===o||o<0?0:o)>this.length)return"";if((i=void 0===i||i>this.length?this.length:i)<=0)return"";if((i>>>=0)<=(o>>>=0))return"";for(e=e||"utf8";;)switch(e){case"hex":return function(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||r<n)&&(n=r);for(var o,i="",s=t;s<n;++s)i+=(o=e[s])<16?"0"+o.toString(16):o.toString(16);return i}(this,o,i);case"utf8":case"utf-8":return xa(this,o,i);case"ascii":return function(e,t,n){var r="";n=Math.min(e.length,n);for(var o=t;o<n;++o)r+=String.fromCharCode(127&e[o]);return r}(this,o,i);case"latin1":case"binary":return function(e,t,n){var r="";n=Math.min(e.length,n);for(var o=t;o<n;++o)r+=String.fromCharCode(e[o]);return r}(this,o,i);case"base64":return n=i,0===(t=o)&&n===this.length?pa(this):pa(this.slice(t,n));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return function(e){for(var t=e.slice(o,i),n="",r=0;r<t.length;r+=2)n+=String.fromCharCode(t[r]+256*t[r+1]);return n}(this);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function Pa(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function Oa(e,t,n,r,o){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):2147483647<n?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,(n=(n=isNaN(n)?o?0:e.length-1:n)<0?e.length+n:n)>=e.length){if(o)return-1;n=e.length-1}else if(n<0){if(!o)return-1;n=0}if(Ea(t="string"==typeof t?va.from(t,r):t))return 0===t.length?-1:ka(e,t,n,r,o);if("number"==typeof t)return t&=255,va.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?(o?Uint8Array.prototype.indexOf:Uint8Array.prototype.lastIndexOf).call(e,t,n):ka(e,[t],n,r,o);throw new TypeError("val must be string, number or Buffer")}function ka(e,t,n,r,o){var i=1,s=e.length,a=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;s/=i=2,a/=2,n/=2}function u(e,t){return 1===i?e[t]:e.readUInt16BE(t*i)}if(o)for(var c=-1,l=n;l<s;l++)if(u(e,l)===u(t,-1===c?0:l-c)){if(l-(c=-1===c?l:c)+1===a)return c*i}else-1!==c&&(l-=l-c),c=-1;else for(l=n=s<n+a?s-a:n;0<=l;l--){for(var p=!0,d=0;d<a;d++)if(u(e,l+d)!==u(t,d)){p=!1;break}if(p)return l}return-1}function Ta(e,t,n,r){return qa(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function xa(e,t,n){n=Math.min(e.length,n);for(var r=[],o=t;o<n;){var i,s,a,u,c=e[o],l=null,p=239<c?4:223<c?3:191<c?2:1;if(o+p<=n)switch(p){case 1:c<128&&(l=c);break;case 2:128==(192&(i=e[o+1]))&&127<(u=(31&c)<<6|63&i)&&(l=u);break;case 3:i=e[o+1],s=e[o+2],128==(192&i)&&128==(192&s)&&2047<(u=(15&c)<<12|(63&i)<<6|63&s)&&(u<55296||57343<u)&&(l=u);break;case 4:i=e[o+1],s=e[o+2],a=e[o+3],128==(192&i)&&128==(192&s)&&128==(192&a)&&65535<(u=(15&c)<<18|(63&i)<<12|(63&s)<<6|63&a)&&u<1114112&&(l=u)}null===l?(l=65533,p=1):65535<l&&(l-=65536,r.push(l>>>10&1023|55296),l=56320|1023&l),r.push(l),o+=p}return function(e){var t=e.length;if(t<=Na)return String.fromCharCode.apply(String,e);for(var n="",r=0;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=Na));return n}(r)}va.TYPED_ARRAY_SUPPORT=void 0===or.TYPED_ARRAY_SUPPORT||or.TYPED_ARRAY_SUPPORT,va.poolSize=8192,va._augment=function(e){return e.__proto__=va.prototype,e},va.from=function(e,t,n){return ba(null,e,t,n)},va.TYPED_ARRAY_SUPPORT&&(va.prototype.__proto__=Uint8Array.prototype,va.__proto__=Uint8Array),va.alloc=function(e,t,n){return r=null,wa(e),e<=0||void 0===t?ya(r,e):"string"==typeof n?ya(r,e).fill(t,n):ya(r,e).fill(t);var r},va.allocUnsafe=function(e){return Sa(null,e)},va.allocUnsafeSlow=function(e){return Sa(null,e)},va.isBuffer=function(e){return null!=e&&(!!e._isBuffer||Ka(e)||"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&Ka(e.slice(0,0)))},va.compare=function(e,t){if(!Ea(e)||!Ea(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,o=0,i=Math.min(n,r);o<i;++o)if(e[o]!==t[o]){n=e[o],r=t[o];break}return n<r?-1:r<n?1:0},va.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},va.concat=function(e,t){if(!ma(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return va.alloc(0);if(void 0===t)for(o=t=0;o<e.length;++o)t+=e[o].length;for(var n=va.allocUnsafe(t),r=0,o=0;o<e.length;++o){var i=e[o];if(!Ea(i))throw new TypeError('"list" argument must be an Array of Buffers');i.copy(n,r),r+=i.length}return n},va.byteLength=Ia,va.prototype._isBuffer=!0,va.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)Pa(this,t,t+1);return this},va.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)Pa(this,t,t+3),Pa(this,t+1,t+2);return this},va.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)Pa(this,t,t+7),Pa(this,t+1,t+6),Pa(this,t+2,t+5),Pa(this,t+3,t+4);return this},va.prototype.toString=function(){var e=0|this.length;return 0==e?"":0===arguments.length?xa(this,0,e):Aa.apply(this,arguments)},va.prototype.equals=function(e){if(!Ea(e))throw new TypeError("Argument must be a Buffer");return this===e||0===va.compare(this,e)},va.prototype.inspect=function(){var e="";return 0<this.length&&(e=this.toString("hex",0,50).match(/.{2}/g).join(" "),50<this.length&&(e+=" ... ")),"<Buffer "+e+">"},va.prototype.compare=function(e,t,n,r,o){if(!Ea(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===o&&(o=this.length),t<0||n>e.length||r<0||o>this.length)throw new RangeError("out of range index");if(o<=r&&n<=t)return 0;if(o<=r)return-1;if(n<=t)return 1;if(this===e)return 0;for(var i=(o>>>=0)-(r>>>=0),s=(n>>>=0)-(t>>>=0),a=Math.min(i,s),u=this.slice(r,o),c=e.slice(t,n),l=0;l<a;++l)if(u[l]!==c[l]){i=u[l],s=c[l];break}return i<s?-1:s<i?1:0},va.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},va.prototype.indexOf=function(e,t,n){return Oa(this,e,t,n,!0)},va.prototype.lastIndexOf=function(e,t,n){return Oa(this,e,t,n,!1)},va.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var o=this.length-t;if((void 0===n||o<n)&&(n=o),0<e.length&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r=r||"utf8";for(var i,s,a,u,c,l,p=!1;;)switch(r){case"hex":return function(e,t,n,r){n=Number(n)||0;var o=e.length-n;if((!r||o<(r=Number(r)))&&(r=o),(o=t.length)%2!=0)throw new TypeError("Invalid hex string");o/2<r&&(r=o/2);for(var i=0;i<r;++i){var s=parseInt(t.substr(2*i,2),16);if(isNaN(s))return i;e[n+i]=s}return i}(this,e,t,n);case"utf8":case"utf-8":return s=t,a=n,qa(Va(e,(i=this).length-s),i,s,a);case"ascii":return Ta(this,e,t,n);case"latin1":case"binary":return Ta(this,e,t,n);case"base64":return i=this,s=t,a=n,qa(za(e),i,s,a);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return c=t,l=n,qa(function(e,t){for(var n,r,o=[],i=0;i<e.length&&!((t-=2)<0);++i)n=(r=e.charCodeAt(i))>>8,r%=256,o.push(r),o.push(n);return o}(e,(u=this).length-c),u,c,l);default:if(p)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),p=!0}},va.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var Na=4096;function Ma(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(n<e+t)throw new RangeError("Trying to access beyond buffer length")}function Ra(e,t,n,r,o,i){if(!Ea(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(o<t||t<i)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function Ua(e,t,n,r){t<0&&(t=65535+t+1);for(var o=0,i=Math.min(e.length-n,2);o<i;++o)e[n+o]=(t&255<<8*(r?o:1-o))>>>8*(r?o:1-o)}function Da(e,t,n,r){t<0&&(t=4294967295+t+1);for(var o=0,i=Math.min(e.length-n,4);o<i;++o)e[n+o]=t>>>8*(r?o:3-o)&255}function La(e,t,n,r){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function Fa(e,t,n,r,o){return o||La(e,0,n,4),fa(e,t,n,r,23,4),n+4}function ja(e,t,n,r,o){return o||La(e,0,n,8),fa(e,t,n,r,52,8),n+8}va.prototype.slice=function(e,t){var n=this.length;if((e=~~e)<0?(e+=n)<0&&(e=0):n<e&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):n<t&&(t=n),t<e&&(t=e),va.TYPED_ARRAY_SUPPORT)(o=this.subarray(e,t)).__proto__=va.prototype;else for(var r=t-e,o=new va(r,void 0),i=0;i<r;++i)o[i]=this[i+e];return o},va.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||Ma(e,t,this.length);for(var r=this[e],o=1,i=0;++i<t&&(o*=256);)r+=this[e+i]*o;return r},va.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||Ma(e,t,this.length);for(var r=this[e+--t],o=1;0<t&&(o*=256);)r+=this[e+--t]*o;return r},va.prototype.readUInt8=function(e,t){return t||Ma(e,1,this.length),this[e]},va.prototype.readUInt16LE=function(e,t){return t||Ma(e,2,this.length),this[e]|this[e+1]<<8},va.prototype.readUInt16BE=function(e,t){return t||Ma(e,2,this.length),this[e]<<8|this[e+1]},va.prototype.readUInt32LE=function(e,t){return t||Ma(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},va.prototype.readUInt32BE=function(e,t){return t||Ma(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},va.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||Ma(e,t,this.length);for(var r=this[e],o=1,i=0;++i<t&&(o*=256);)r+=this[e+i]*o;return(o*=128)<=r&&(r-=Math.pow(2,8*t)),r},va.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||Ma(e,t,this.length);for(var r=t,o=1,i=this[e+--r];0<r&&(o*=256);)i+=this[e+--r]*o;return(o*=128)<=i&&(i-=Math.pow(2,8*t)),i},va.prototype.readInt8=function(e,t){return t||Ma(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},va.prototype.readInt16LE=function(e,t){return t||Ma(e,2,this.length),32768&(e=this[e]|this[e+1]<<8)?4294901760|e:e},va.prototype.readInt16BE=function(e,t){return t||Ma(e,2,this.length),32768&(e=this[e+1]|this[e]<<8)?4294901760|e:e},va.prototype.readInt32LE=function(e,t){return t||Ma(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},va.prototype.readInt32BE=function(e,t){return t||Ma(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},va.prototype.readFloatLE=function(e,t){return t||Ma(e,4,this.length),da(this,e,!0,23,4)},va.prototype.readFloatBE=function(e,t){return t||Ma(e,4,this.length),da(this,e,!1,23,4)},va.prototype.readDoubleLE=function(e,t){return t||Ma(e,8,this.length),da(this,e,!0,52,8)},va.prototype.readDoubleBE=function(e,t){return t||Ma(e,8,this.length),da(this,e,!1,52,8)},va.prototype.writeUIntLE=function(e,t,n,r){e=+e,t|=0,n|=0,r||Ra(this,e,t,n,Math.pow(2,8*n)-1,0);var o=1,i=0;for(this[t]=255&e;++i<n&&(o*=256);)this[t+i]=e/o&255;return t+n},va.prototype.writeUIntBE=function(e,t,n,r){e=+e,t|=0,n|=0,r||Ra(this,e,t,n,Math.pow(2,8*n)-1,0);var o=n-1,i=1;for(this[t+o]=255&e;0<=--o&&(i*=256);)this[t+o]=e/i&255;return t+n},va.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||Ra(this,e,t,1,255,0),va.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},va.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||Ra(this,e,t,2,65535,0),va.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):Ua(this,e,t,!0),t+2},va.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||Ra(this,e,t,2,65535,0),va.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):Ua(this,e,t,!1),t+2},va.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||Ra(this,e,t,4,4294967295,0),va.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):Da(this,e,t,!0),t+4},va.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||Ra(this,e,t,4,4294967295,0),va.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):Da(this,e,t,!1),t+4},va.prototype.writeIntLE=function(e,t,n,r){e=+e,t|=0,r||Ra(this,e,t,n,(r=Math.pow(2,8*n-1))-1,-r);var o=0,i=1,s=0;for(this[t]=255&e;++o<n&&(i*=256);)e<0&&0===s&&0!==this[t+o-1]&&(s=1),this[t+o]=(e/i>>0)-s&255;return t+n},va.prototype.writeIntBE=function(e,t,n,r){e=+e,t|=0,r||Ra(this,e,t,n,(r=Math.pow(2,8*n-1))-1,-r);var o=n-1,i=1,s=0;for(this[t+o]=255&e;0<=--o&&(i*=256);)e<0&&0===s&&0!==this[t+o+1]&&(s=1),this[t+o]=(e/i>>0)-s&255;return t+n},va.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||Ra(this,e,t,1,127,-128),(e=va.TYPED_ARRAY_SUPPORT?e:Math.floor(e))<0&&(e=255+e+1),this[t]=255&e,t+1},va.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||Ra(this,e,t,2,32767,-32768),va.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):Ua(this,e,t,!0),t+2},va.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||Ra(this,e,t,2,32767,-32768),va.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):Ua(this,e,t,!1),t+2},va.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||Ra(this,e,t,4,2147483647,-2147483648),va.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):Da(this,e,t,!0),t+4},va.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||Ra(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),va.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):Da(this,e,t,!1),t+4},va.prototype.writeFloatLE=function(e,t,n){return Fa(this,e,t,!0,n)},va.prototype.writeFloatBE=function(e,t,n){return Fa(this,e,t,!1,n)},va.prototype.writeDoubleLE=function(e,t,n){return ja(this,e,t,!0,n)},va.prototype.writeDoubleBE=function(e,t,n){return ja(this,e,t,!1,n)},va.prototype.copy=function(e,t,n,r){if(n=n||0,r||0===r||(r=this.length),t=(t=t>=e.length?e.length:t)||0,(r=0<r&&r<n?n:r)===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length);var o,i=(r=e.length-t<r-n?e.length-t+n:r)-n;if(this===e&&n<t&&t<r)for(o=i-1;0<=o;--o)e[o+t]=this[o+n];else if(i<1e3||!va.TYPED_ARRAY_SUPPORT)for(o=0;o<i;++o)e[o+t]=this[o+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+i),t);return i},va.prototype.fill=function(e,t,n,r){if("string"==typeof e){var o;if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1!==e.length||(o=e.charCodeAt(0))<256&&(e=o),void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!va.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;if(t>>>=0,n=void 0===n?this.length:n>>>0,"number"==typeof(e=e||0))for(a=t;a<n;++a)this[a]=e;else for(var i=Ea(e)?e:Va(new va(e,r).toString()),s=i.length,a=0;a<n-t;++a)this[a+t]=i[a%s];return this};var Ba=/[^+\/0-9A-Za-z-_]/g;function Va(e,t){var n;t=t||1/0;for(var r=e.length,o=null,i=[],s=0;s<r;++s){if(55295<(n=e.charCodeAt(s))&&n<57344){if(!o){if(56319<n){-1<(t-=3)&&i.push(239,191,189);continue}if(s+1===r){-1<(t-=3)&&i.push(239,191,189);continue}o=n;continue}if(n<56320){-1<(t-=3)&&i.push(239,191,189),o=n;continue}n=65536+(o-55296<<10|n-56320)}else o&&-1<(t-=3)&&i.push(239,191,189);if(o=null,n<128){if(--t<0)break;i.push(n)}else if(n<2048){if((t-=2)<0)break;i.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;i.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;i.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return i}function za(e){return function(e){var t,n,r,o;ca||la();var i=e.length;if(0<i%4)throw new Error("Invalid string. Length must be a multiple of 4");r="="===e[i-2]?2:"="===e[i-1]?1:0,o=new ua(3*i/4-r),t=0<r?i-4:i;for(var s=0,a=0;a<t;a+=4)n=aa[e.charCodeAt(a)]<<18|aa[e.charCodeAt(a+1)]<<12|aa[e.charCodeAt(a+2)]<<6|aa[e.charCodeAt(a+3)],o[s++]=n>>16&255,o[s++]=n>>8&255,o[s++]=255&n;return 2==r?(n=aa[e.charCodeAt(a)]<<2|aa[e.charCodeAt(a+1)]>>4,o[s++]=255&n):1==r&&(n=aa[e.charCodeAt(a)]<<10|aa[e.charCodeAt(a+1)]<<4|aa[e.charCodeAt(a+2)]>>2,o[s++]=n>>8&255,o[s++]=255&n),o}(function(e){var t;if((e=((t=e).trim?t.trim():t.replace(/^\s+|\s+$/g,"")).replace(Ba,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function qa(e,t,n,r){for(var o=0;o<r&&!(o+n>=t.length||o>=e.length);++o)t[o+n]=e[o];return o}function Ka(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}function Ha(e,t){t instanceof s.Readable?t.pipe(e):t?e.end(va.from(t)):e.end()}function Ga(e){var t=(r=void 0===e?{}:e).connectionTimeout,n=r.socketTimeout,e=r.httpAgent,r=r.httpsAgent;this.metadata={handlerProtocol:"http/1.1"},this.connectionTimeout=t,this.socketTimeout=n,this.httpAgent=e||new h.Agent({keepAlive:!0}),this.httpsAgent=r||new g.Agent({keepAlive:!0})}Ga.prototype.destroy=function(){this.httpAgent.destroy(),this.httpsAgent.destroy()},Ga.prototype.handle=function(p,e){var d=this,f=e.abortSignal;return new Promise(function(t,n){if(null!=f&&f.aborted)return(c=new Error("Request aborted")).name="AbortError",void n(c);var r,o,i,s,e,a,u="https:"===p.protocol,c=ia(p.query||{}),c={headers:p.headers,host:p.hostname,method:p.method,path:c?p.path+"?"+c:p.path,port:p.port,agent:u?d.httpsAgent:d.httpAgent},l=(0,(u?g:h).request)(c,function(e){e=new Bs({statusCode:e.statusCode||-1,headers:function(e){var t,n,r={};try{for(var o=G(Object.keys(e)),i=o.next();!i.done;i=o.next()){var s=i.value,a=e[s];r[s]=Array.isArray(a)?a.join(","):a}}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return r}(e.headers),body:e}),t({response:e})});l.on("error",n),c=l,r=n,(o=void 0===(o=d.connectionTimeout)?0:o)&&c.on("socket",function(e){var t,n=this;e.connecting&&(t=setTimeout(function(){n.abort();var e=new Error("Socket timed out without establishing a connection within "+o+" ms");e.name="TimeoutError",r(e)},o),e.on("connect",function(){clearTimeout(t)}))}),c=l,i=n,void 0===(s=d.socketTimeout)&&(s=0),c.setTimeout(s,function(){this.abort();var e=new Error("Connection timed out after "+s+" ms");e.name="TimeoutError",i(e)}),f&&(f.onabort=function(){l.abort();var e=new Error("Request aborted");e.name="AbortError",n(e)}),e=l,"100-continue"===((a=p).headers.Expect||a.headers.expect)?e.on("continue",function(){Ha(e,a.body)}):Ha(e,a.body)})},wt=Ga;var Wa,$a=(F(Ya,Wa=s.Writable),Ya.prototype._write=function(e,t,n){this.bufferedBytes.push(e),n()},Ya);function Ya(){var e=null!==Wa&&Wa.apply(this,arguments)||this;return e.bufferedBytes=[],e}function Ja(e){var t,n=S.parse(e),r=void 0===(o=n.hostname)?"localhost":o,e=void 0===(i=n.pathname)?"/":i,o=n.port,i=void 0===(i=n.protocol)?"https:":i;return(n=n.search)&&(t=function(e){var t,n,r={};if(e=e.replace(/^\?/,""))try{for(var o=G(e.split("&")),i=o.next();!i.done;i=o.next()){var s=(a=W(i.value.split("="),2))[0],a=void 0===(a=a[1])?null:a,s=decodeURIComponent(s),a=a&&decodeURIComponent(a);s in r?Array.isArray(r[s])?r[s].push(a):r[s]=[r[s],a]:r[s]=a}}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return r}(n)),{hostname:r,port:o?parseInt(o):void 0,protocol:i,path:e,query:t}}function Za(e){return e=Us(e,"base64"),new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}function Qa(e){return Rs(e.buffer,e.byteOffset,e.byteLength).toString("base64")}function Xa(e){return e?"string"==typeof e?va.from(e).length:"number"==typeof e.byteLength?e.byteLength:"number"==typeof e.size?e.size:"string"==typeof e.path?a.lstatSync(e.path).size:void 0:0}function eu(e,t){var n=u.platform+"/"+u.version;return u.env.AWS_EXECUTION_ENV&&(n+=" exec-env/"+u.env.AWS_EXECUTION_ENV),"aws-sdk-nodejs-v3-"+e+"/"+t+" "+n}C=function(e){return new Promise(function(t,n){var r=new $a;e.pipe(r),e.on("error",function(e){r.end(),n(e)}),r.on("error",n),r.on("finish",function(){var e=new Uint8Array(va.concat(this.bufferedBytes));t(e)})})};var Qe=function(e){return e=Us(e,"utf8"),new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT)},gn=function(e){return Rs(e.buffer,e.byteOffset,e.byteLength).toString("utf8")},tu="pinpoint.{region}.amazonaws.com",nu=new Set(["ap-east-1","ap-northeast-1","ap-northeast-2","ap-south-1","ap-southeast-1","ap-southeast-2","ca-central-1","eu-central-1","eu-north-1","eu-west-1","eu-west-2","eu-west-3","me-south-1","sa-east-1","us-east-1","us-east-2","us-west-1","us-west-2"]),ru=new Set(["cn-north-1","cn-northwest-1"]),ou=new Set(["us-iso-east-1"]),iu=new Set(["us-isob-east-1"]),su=new Set(["us-gov-east-1","us-gov-west-1"]),au=Ci(Ci({},{apiVersion:"2016-12-01",disableHostPrefix:!1,logger:{},regionInfoProvider:function(e,t){var n=void 0;switch(e){case"ap-south-1":n={hostname:"pinpoint.ap-south-1.amazonaws.com",partition:"aws",signingService:"mobiletargeting"};break;case"ap-southeast-2":n={hostname:"pinpoint.ap-southeast-2.amazonaws.com",partition:"aws",signingService:"mobiletargeting"};break;case"eu-central-1":n={hostname:"pinpoint.eu-central-1.amazonaws.com",partition:"aws",signingService:"mobiletargeting"};break;case"eu-west-1":n={hostname:"pinpoint.eu-west-1.amazonaws.com",partition:"aws",signingService:"mobiletargeting"};break;case"us-east-1":n={hostname:"pinpoint.us-east-1.amazonaws.com",partition:"aws",signingService:"mobiletargeting"};break;case"us-west-2":n={hostname:"pinpoint.us-west-2.amazonaws.com",partition:"aws",signingService:"mobiletargeting"};break;default:nu.has(e)&&(n={hostname:tu.replace("{region}",e),partition:"aws",signingService:"mobiletargeting"}),ru.has(e)&&(n={hostname:"pinpoint.{region}.amazonaws.com.cn".replace("{region}",e),partition:"aws-cn"}),ou.has(e)&&(n={hostname:"pinpoint.{region}.c2s.ic.gov".replace("{region}",e),partition:"aws-iso"}),iu.has(e)&&(n={hostname:"pinpoint.{region}.sc2s.sgov.gov".replace("{region}",e),partition:"aws-iso-b"}),void 0===(n=su.has(e)?{hostname:"pinpoint.{region}.amazonaws.com".replace("{region}",e),partition:"aws-us-gov"}:n)&&(n={hostname:tu.replace("{region}",e),partition:"aws",signingService:"mobiletargeting"})}return Promise.resolve(n)},signingName:"mobiletargeting"}),{runtime:"node",base64Decoder:Za,base64Encoder:Qa,bodyLengthChecker:Xa,credentialDefaultProvider:Ns,defaultUserAgent:eu(hn,Ye),maxAttempts:b(pr),region:b(p,dt),requestHandler:new wt,sha256:y.bind(null,"sha256"),streamCollector:C,urlParser:Ja,utf8Decoder:Qe,utf8Encoder:gn}),uu="content-length";function cu(t){return{applyToStack:function(e){e.add(function(a){var e=this;return function(s){return function(i){return K(e,void 0,void 0,function(){var t,n,r,o;return H(this,function(e){return t=i.request,zs.isInstance(t)&&(o=t.body,n=t.headers,o&&-1===Object.keys(n).map(function(e){return e.toLowerCase()}).indexOf(uu)&&void 0!==(r=a(o))&&(t.headers=j(j({},t.headers),((o={})[uu]=String(r),o)))),[2,s(j(j({},i),{request:t}))]})})}}}(t.bodyLengthChecker),lu)}}}var lu={step:"build",tags:["SET_CONTENT_LENGTH","CONTENT_LENGTH"],name:"contentLengthMiddleware"};function pu(t){return{applyToStack:function(e){var i;e.add((i=t,function(o){return function(r){return K(void 0,void 0,void 0,function(){var t,n;return H(this,function(e){return zs.isInstance(r.request)&&(t=r.request,0<=(void 0===(n=(i.requestHandler.metadata||{}).handlerProtocol)?"":n).indexOf("h2")&&!t.headers[":authority"]?(delete t.headers.host,t.headers[":authority"]=""):t.headers.host||(t.headers.host=t.hostname)),[2,o(r)]})})}}),fu)}}}function du(){return{applyToStack:function(e){e.add(function(i,s){return function(o){return K(void 0,void 0,void 0,function(){var t,n,r;return H(this,function(e){switch(e.label){case 0:return r=s.logger,[4,i(o)];case 1:return t=e.sent(),r&&(n=t.response,"function"==typeof r.info&&r.info({metadata:{statusCode:n.statusCode,requestId:null!==(r=n.headers["x-amzn-requestid"])&&void 0!==r?r:n.headers["x-amzn-request-id"],extendedRequestId:n.headers["x-amz-id-2"],cfId:n.headers["x-amz-cf-id"]}})),[2,t]}})})}},hu)}}}var fu={name:"hostHeaderMiddleware",step:"build",priority:"low",tags:["HOST"]},hu={name:"loggerMiddleware",tags:["LOGGER"],step:"initialize"},mu="X-Amz-Date",gu="X-Amz-Signature",yu="X-Amz-Security-Token",vu="authorization",bu=mu.toLowerCase(),wu=[vu,bu,"date"],Su=gu.toLowerCase(),Cu="x-amz-content-sha256",_u=yu.toLowerCase(),Eu={authorization:!0,"cache-control":!0,connection:!0,expect:!0,from:!0,"keep-alive":!0,"max-forwards":!0,pragma:!0,referer:!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0,"user-agent":!0,"x-amzn-trace-id":!0},Iu=/^proxy-/,Au=/^sec-/,Pu="AWS4-HMAC-SHA256",Ou="AWS4-HMAC-SHA256-PAYLOAD",ku="aws4_request",Tu={},xu=[];function Nu(e,t,n){return e+"/"+t+"/"+n+"/"+ku}function Mu(a,u,c,l,p){var d=c+":"+l+":"+p+":"+u.accessKeyId+":"+u.sessionToken;if(d in Tu)return Tu[d];for(xu.push(d);50<xu.length;)delete Tu[xu.shift()];return Tu[d]=new Promise(function(e,t){var n,r,o=Promise.resolve("AWS4"+u.secretAccessKey);try{for(var i=G([c,l,p,ku]),s=i.next();!s.done;s=i.next())!function(r){(o=o.then(function(e){return n=r,(t=new a(t=e)).update(n),t.digest();var t,n})).catch(function(){})}(s.value)}catch(e){n={error:e}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}o.then(e,function(e){delete Tu[d],t(e)})})}for(var Ru={},Uu={},Du=0;Du<256;Du++){var Lu=Du.toString(16).toLowerCase();1===Lu.length&&(Lu="0"+Lu),Ru[Du]=Lu,Uu[Lu]=Du}function Fu(e){for(var t="",n=0;n<e.byteLength;n++)t+=Ru[e[n]];return t}function ju(e,t,n){var r,o,i=e.headers,s={};try{for(var a=G(Object.keys(i).sort()),u=a.next();!u.done;u=a.next()){var c=u.value,l=c.toLowerCase();(l in Eu||null!=t&&t.has(l)||Iu.test(l)||Au.test(l))&&(!n||n&&!n.has(l))||(s[l]=i[c].trim().replace(/\s+/g," "))}}catch(e){r={error:e}}finally{try{u&&!u.done&&(o=a.return)&&o.call(a)}finally{if(r)throw r.error}}return s}function Bu(e,u){var c=e.headers,l=e.body;return K(this,void 0,void 0,function(){var t,n,r,o,i,s,a;return H(this,function(e){switch(e.label){case 0:try{for(t=G(Object.keys(c)),n=t.next();!n.done;n=t.next())if((r=n.value).toLowerCase()===Cu)return[2,c[r]]}catch(e){s={error:e}}finally{try{n&&!n.done&&(a=t.return)&&a.call(t)}finally{if(s)throw s.error}}return null!=l?[3,1]:[2,"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855"];case 1:return"string"==typeof l||ArrayBuffer.isView(l)||Ms(l)?((o=new u).update(l),i=Fu,[4,o.digest()]):[3,3];case 2:return[2,i.apply(void 0,[e.sent()])];case 3:return[2,"UNSIGNED-PAYLOAD"]}})})}function Vu(e){var r,t=e.headers,n=e.query,e=B(e,["headers","query"]);return j(j({},e),{headers:j({},t),query:n?(r=n,Object.keys(r).reduce(function(e,t){var n=r[t];return j(j({},e),((e={})[t]=Array.isArray(n)?$(n):n,e))},{})):void 0})}function zu(e){var t,n;e="function"==typeof e.clone?e.clone():Vu(e);try{for(var r=G(Object.keys(e.headers)),o=r.next();!o.done;o=r.next()){var i=o.value;-1<wu.indexOf(i.toLowerCase())&&delete e.headers[i]}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}return e}var qu=(Ku.prototype.presign=function(g,y){return void 0===y&&(y={}),K(this,void 0,void 0,function(){var t,n,r,o,i,s,a,u,c,l,p,d,f,h,m;return H(this,function(e){switch(e.label){case 0:return s=y.signingDate,a=void 0===s?new Date:s,o=y.expiresIn,t=void 0===o?3600:o,n=y.unsignableHeaders,r=y.signableHeaders,s=y.signingRegion,o=y.signingService,[4,this.credentialProvider()];case 1:return i=e.sent(),null==s?[3,2]:(u=s,[3,4]);case 2:return[4,this.regionProvider()];case 3:u=e.sent(),e.label=4;case 4:return s=u,u=Hu(a),a=u.longDate,u=u.shortDate,604800<t?[2,Promise.reject("Signature version 4 presigned URLs must have an expiration date less than one week in the future")]:(h=Nu(u,s,null!=o?o:this.service),c=function(e){var t,n,r="function"==typeof e.clone?e.clone():Vu(e),o=r.headers,i=void 0===(r=r.query)?{}:r;try{for(var s=G(Object.keys(o)),a=s.next();!a.done;a=s.next()){var u=a.value;"x-amz-"===u.toLowerCase().substr(0,6)&&(i[u]=o[u],delete o[u])}}catch(e){t={error:e}}finally{try{a&&!a.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}return j(j({},e),{headers:o,query:i})}(zu(g)),i.sessionToken&&(c.query[yu]=i.sessionToken),c.query["X-Amz-Algorithm"]=Pu,c.query["X-Amz-Credential"]=i.accessKeyId+"/"+h,c.query[mu]=a,c.query["X-Amz-Expires"]=t.toString(10),m=ju(c,n,r),c.query["X-Amz-SignedHeaders"]=Gu(m),l=c.query,p=gu,d=this.getSignature,f=[a,h,this.getSigningKey(i,s,u,o)],h=this.createCanonicalRequest,m=[c,m],[4,Bu(g,this.sha256)]);case 5:return[4,d.apply(this,f.concat([h.apply(this,m.concat([e.sent()]))]))];case 6:return l[p]=e.sent(),[2,c]}})})},Ku.prototype.sign=function(t,n){return K(this,void 0,void 0,function(){return H(this,function(e){return"string"==typeof t?[2,this.signString(t,n)]:t.headers&&t.payload?[2,this.signEvent(t,n)]:[2,this.signRequest(t,n)]})})},Ku.prototype.signEvent=function(e,t){var u=e.headers,c=e.payload,l=void 0===(e=t.signingDate)?new Date:e,p=t.priorSignature,d=t.signingRegion,f=t.signingService;return K(this,void 0,void 0,function(){var t,n,r,o,i,s,a;return H(this,function(e){switch(e.label){case 0:return null==d?[3,1]:(n=d,[3,3]);case 1:return[4,this.regionProvider()];case 2:n=e.sent(),e.label=3;case 3:return t=n,o=Hu(l),i=o.shortDate,r=o.longDate,o=Nu(i,t,null!=f?f:this.service),[4,Bu({headers:{},body:c},this.sha256)];case 4:return a=e.sent(),(i=new this.sha256).update(u),s=Fu,[4,i.digest()];case 5:return s=s.apply(void 0,[e.sent()]),a=[Ou,r,o,p,s,a].join("\n"),[2,this.signString(a,{signingDate:l,signingRegion:t,signingService:f})]}})})},Ku.prototype.signString=function(a,e){var t=void 0===e?{}:e,u=void 0===(e=t.signingDate)?new Date:e,c=t.signingRegion,l=t.signingService;return K(this,void 0,void 0,function(){var t,n,r,o,i,s;return H(this,function(e){switch(e.label){case 0:return[4,this.credentialProvider()];case 1:return t=e.sent(),null==c?[3,2]:(r=c,[3,4]);case 2:return[4,this.regionProvider()];case 3:r=e.sent(),e.label=4;case 4:return n=r,r=Hu(u).shortDate,i=(o=this.sha256).bind,[4,this.getSigningKey(t,n,r,l)];case 5:return(o=new(i.apply(o,[void 0,e.sent()]))).update(a),s=Fu,[4,o.digest()];case 6:return[2,s.apply(void 0,[e.sent()])]}})})},Ku.prototype.signRequest=function(l,e){var t=void 0===e?{}:e,p=void 0===(e=t.signingDate)?new Date:e,d=t.signableHeaders,f=t.unsignableHeaders,h=t.signingRegion,m=t.signingService;return K(this,void 0,void 0,function(){var t,n,r,o,i,s,a,u,c;return H(this,function(e){switch(e.label){case 0:return[4,this.credentialProvider()];case 1:return t=e.sent(),null==h?[3,2]:(r=h,[3,4]);case 2:return[4,this.regionProvider()];case 3:r=e.sent(),e.label=4;case 4:return n=r,o=zu(l),a=Hu(p),i=a.longDate,s=a.shortDate,a=Nu(s,n,null!=m?m:this.service),o.headers[bu]=i,t.sessionToken&&(o.headers[_u]=t.sessionToken),[4,Bu(o,this.sha256)];case 5:return c=e.sent(),!function(e,t){var n,r;e=e.toLowerCase();try{for(var o=G(Object.keys(t)),i=o.next();!i.done;i=o.next())if(e===i.value.toLowerCase())return 1}catch(e){n={error:e}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}}(Cu,o.headers)&&this.applyChecksum&&(o.headers[Cu]=c),u=ju(o,f,d),[4,this.getSignature(i,a,this.getSigningKey(t,n,s,m),this.createCanonicalRequest(o,u,c))];case 6:return c=e.sent(),o.headers[vu]=Pu+" Credential="+t.accessKeyId+"/"+a+", SignedHeaders="+Gu(u)+", Signature="+c,[2,o]}})})},Ku.prototype.createCanonicalRequest=function(e,t,n){var r=Object.keys(t).sort();return e.method+"\n"+this.getCanonicalPath(e)+"\n"+function(e){var t,n,r=void 0===(e=e.query)?{}:e,o=[],i={};try{for(var s=G(Object.keys(r).sort()),a=s.next();!a.done;a=s.next())!function(n){var e;n.toLowerCase()!==Su&&(o.push(n),"string"==typeof(e=r[n])?i[n]=ra(n)+"="+ra(e):Array.isArray(e)&&(i[n]=e.slice(0).sort().reduce(function(e,t){return e.concat([ra(n)+"="+ra(t)])},[]).join("&")))}(a.value)}catch(e){t={error:e}}finally{try{a&&!a.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}return o.map(function(e){return i[e]}).filter(function(e){return e}).join("&")}(e)+"\n"+r.map(function(e){return e+":"+t[e]}).join("\n")+"\n\n"+r.join(";")+"\n"+n},Ku.prototype.createStringToSign=function(n,r,o){return K(this,void 0,void 0,function(){var t;return H(this,function(e){switch(e.label){case 0:return(t=new this.sha256).update(o),[4,t.digest()];case 1:return t=e.sent(),[2,Pu+"\n"+n+"\n"+r+"\n"+Fu(t)]}})})},Ku.prototype.getCanonicalPath=function(e){return e=e.path,this.uriEscapePath?"/"+encodeURIComponent(e.replace(/^\//,"")).replace(/%2F/g,"/"):e},Ku.prototype.getSignature=function(i,s,a,u){return K(this,void 0,void 0,function(){var t,n,r,o;return H(this,function(e){switch(e.label){case 0:return[4,this.createStringToSign(i,s,u)];case 1:return t=e.sent(),r=(n=this.sha256).bind,[4,a];case 2:return(n=new(r.apply(n,[void 0,e.sent()]))).update(t),o=Fu,[4,n.digest()];case 3:return[2,o.apply(void 0,[e.sent()])]}})})},Ku.prototype.getSigningKey=function(e,t,n,r){return Mu(this.sha256,e,n,t,r||this.service)},Ku);function Ku(e){var t=e.applyChecksum,n=e.credentials,r=e.region,o=e.service,i=e.sha256,e=void 0===(e=e.uriEscapePath)||e;this.service=o,this.sha256=i,this.uriEscapePath=e,this.applyChecksum="boolean"!=typeof t||t,this.regionProvider=Wu(r),this.credentialProvider=$u(n)}var Hu=function(e){var t;return{longDate:e=("number"==typeof(t=e)?new Date(1e3*t):"string"!=typeof t?t:Number(t)?new Date(1e3*Number(t)):new Date(t)).toISOString().replace(/\.\d{3}Z$/,"Z").replace(/[\-:]/g,""),shortDate:e.substr(0,8)}},Gu=function(e){return Object.keys(e).sort().join(";")},Wu=function(e){if("string"!=typeof e)return e;var t=Promise.resolve(e);return function(){return t}},$u=function(e){if("object"!=typeof e)return e;var t=Promise.resolve(e);return function(){return t}};function Yu(r){var e=this,o=Ju(r.credentials||r.credentialDefaultProvider(r)),i=void 0===(t=r.signingEscapePath)||t,t=void 0===(n=r.systemClockOffset)?r.systemClockOffset||0:n,s=r.sha256,n=r.signer?Ju(r.signer):function(){return Ju(r.region)().then(function(t){return K(e,void 0,void 0,function(){return H(this,function(e){switch(e.label){case 0:return[4,r.regionInfoProvider(t)];case 1:return[2,[e.sent()||{},t]]}})})}).then(function(e){var t=(n=W(e,2))[0],e=n[1],n=void 0===(n=t.signingRegion)?r.signingRegion:n,t=void 0===(t=t.signingService)?r.signingName:t;return r.signingRegion=r.signingRegion||n||e,r.signingName=r.signingName||t,new qu({credentials:o,region:r.signingRegion,service:r.signingName,sha256:s,uriEscapePath:i})})};return j(j({},r),{systemClockOffset:t,signingEscapePath:i,credentials:o,signer:n})}function Ju(e){if("object"!=typeof e)return e;var t=Promise.resolve(e);return function(){return t}}var Zu=function(e){return new Date(Date.now()+e)};function Qu(t){return{applyToStack:function(e){var l;e.addRelativeTo((l=t,function(u,c){return function(a){return K(this,void 0,void 0,function(){var r,o,i,s;return H(this,function(e){switch(e.label){case 0:return zs.isInstance(a.request)?"function"!=typeof l.signer?[3,2]:[4,l.signer()]:[2,u(a)];case 1:return r=e.sent(),[3,3];case 2:r=l.signer,e.label=3;case 3:return o=u,i=[j({},a)],s={},[4,r.sign(a.request,{signingDate:new Date(Date.now()+l.systemClockOffset),signingRegion:c.signing_region,signingService:c.signing_service})];case 4:return[4,o.apply(void 0,[j.apply(void 0,i.concat([(s.request=e.sent(),s)]))])];case 5:return i=e.sent(),(s=(s=i.response.headers)&&(s.date||s.Date))&&(t=s=Date.parse(s),n=l.systemClockOffset,3e5<=Math.abs(Zu(n).getTime()-t)&&(l.systemClockOffset=s-Date.now())),[2,i]}var t,n})})}}),Xu)}}}var Xu={name:"awsAuthMiddleware",tags:["SIGNATURE","AWSAUTH"],relation:"after",toMiddleware:"retryMiddleware"};function ec(t){return{applyToStack:function(e){var i;e.add((i=t,function(o){return function(e){var t=e.request;if(!zs.isInstance(t))return o(e);var n=t.headers,r="node"===i.runtime?"user-agent":"x-amz-user-agent";return n[r]?n[r]+=" "+i.defaultUserAgent:n[r]=""+i.defaultUserAgent,i.customUserAgent&&(n[r]+=" "+i.customUserAgent),o(j(j({},e),{request:t}))}}),tc)}}}var tc={name:"getUserAgentMiddleware",step:"build",tags:["SET_USER_AGENT","USER_AGENT"]},nc=function(){function n(t){return c.forEach(function(e){t.add(e.middleware,j({},e))}),l.forEach(function(e){t.addRelativeTo(e.middleware,j({},e))}),t}var c=[],l=[],o=new Set,p=function(e){var t=[];return e.before.forEach(function(e){0===e.before.length&&0===e.after.length?t.push(e):t.push.apply(t,$(p(e)))}),t.push(e),e.after.reverse().forEach(function(e){0===e.before.length&&0===e.after.length?t.push(e):t.push.apply(t,$(p(e)))}),t},t={add:function(e,t){var n=(t=void 0===t?{}:t).name,t=j({step:"initialize",priority:"normal",middleware:e},t);if(n){if(o.has(n))throw new Error("Duplicate middleware name '"+n+"'");o.add(n)}c.push(t)},addRelativeTo:function(e,t){var n=t.name,t=j({middleware:e},t);if(n){if(o.has(n))throw new Error("Duplicated middleware name '"+n+"'");o.add(n)}l.push(t)},clone:function(){return n(nc())},use:function(e){e.applyToStack(t)},remove:function(e){return("string"==typeof e?function(t){function e(e){return!e.name||e.name!==t||(n=!0,o.delete(t),!1)}var n=!1;return c=c.filter(e),l=l.filter(e),n}:function(t){function e(e){return e.middleware!==t||(n=!0,e.name&&o.delete(e.name),!1)}var n=!1;return c=c.filter(e),l=l.filter(e),n})(e)},removeByTag:function(n){function e(e){var t=e.tags,e=e.name;return!(t&&t.includes(n)&&(e&&o.delete(e),r=!0))}var r=!1;return c=c.filter(e),l=l.filter(e),r},concat:function(e){var t=n(nc());return t.use(e),t},applyToStack:n,resolve:function(e,t){var n,r,o,i,s;try{for(var a=G((o=[],i=[],s={},c.forEach(function(e){(e=j(j({},e),{before:[],after:[]})).name&&(s[e.name]=e),o.push(e)}),l.forEach(function(e){(e=j(j({},e),{before:[],after:[]})).name&&(s[e.name]=e),i.push(e)}),i.forEach(function(e){if(e.toMiddleware){var t=s[e.toMiddleware];if(void 0===t)throw new Error(e.toMiddleware+" is not found when adding "+(e.name||"anonymous")+" middleware "+e.relation+" "+e.toMiddleware);"after"===e.relation&&t.after.push(e),"before"===e.relation&&t.before.push(e)}}),o.sort(function(e,t){return rc[t.step]-rc[e.step]||oc[t.priority||"normal"]-oc[e.priority||"normal"]}).map(p).reduce(function(e,t){return e.push.apply(e,$(t)),e},[]).map(function(e){return e.middleware}).reverse())),u=a.next();!u.done;u=a.next())e=(0,u.value)(e,t)}catch(e){n={error:e}}finally{try{u&&!u.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}return e}};return t},rc={initialize:5,serialize:4,build:3,finalizeRequest:2,deserialize:1},oc={high:3,normal:2,low:1},vt=(ic.prototype.send=function(e,t,n){var r="function"!=typeof t?t:void 0,o="function"==typeof t?t:n,r=e.resolveMiddleware(this.middlewareStack,this.config,r);if(!o)return r(e).then(function(e){return e.output});r(e).then(function(e){return o(null,e.output)},function(e){return o(e)}).catch(function(){})},ic.prototype.destroy=function(){this.config.requestHandler.destroy&&this.config.requestHandler.destroy()},ic);function ic(e){this.middlewareStack=nc(),this.config=e}function sc(e){return encodeURIComponent(e).replace(/[!'()*]/g,function(e){return"%"+e.charCodeAt(0).toString(16)})}function ac(e){return Array.isArray(e)?e:[e]}hn=function(){this.middlewareStack=nc()};var uc=function(e){for(var t in e)e.hasOwnProperty(t)&&void 0!==e[t]["#text"]?e[t]=e[t]["#text"]:"object"==typeof e[t]&&null!==e[t]&&(e[t]=uc(e[t]));return e};(Ye=function(){var e=Object.getPrototypeOf(this).constructor,t=new(Function.bind.apply(String,$([null],arguments)));return Object.setPrototypeOf(t,e.prototype),t}).prototype=Object.create(String.prototype,{constructor:{value:Ye,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf(Ye,String);var cc,lc=(F(pc,cc=Ye),pc.prototype.deserializeJSON=function(){return JSON.parse(cc.prototype.toString.call(this))},pc.prototype.toJSON=function(){return cc.prototype.toString.call(this)},pc.fromObject=function(e){return e instanceof pc?e:e instanceof String||"string"==typeof e?new pc(e):new pc(JSON.stringify(e))},pc);function pc(){return null!==cc&&cc.apply(this,arguments)||this}var dc=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],fc=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function hc(e){var t=e.getUTCFullYear(),n=e.getUTCMonth(),r=e.getUTCDay(),o=e.getUTCDate(),i=e.getUTCHours(),s=e.getUTCMinutes(),e=e.getUTCSeconds();return dc[r]+", "+(o<10?"0"+o:""+o)+" "+fc[n]+" "+t+" "+(i<10?"0"+i:""+i)+":"+(s<10?"0"+s:""+s)+":"+(e<10?"0"+e:""+e)+" GMT"}var mc,gc="***SensitiveInformation***",yc=(Si(vc,mc=vt),vc.prototype.destroy=function(){mc.prototype.destroy.call(this)},vc);function vc(e){var t=this,e=Xs(e=Yu(Ai(e=Pi(e=Ci(Ci({},au),e)))));return(t=mc.call(this,e)||this).config=e,t.middlewareStack.use(Qu(t.config)),t.middlewareStack.use(Fs(t.config)),t.middlewareStack.use(ec(t.config)),t.middlewareStack.use(cu(t.config)),t.middlewareStack.use(pu(t.config)),t.middlewareStack.use(du(t.config)),t}function bc(e){return Ci(Ci(Ci(Ci(Ci(Ci(Ci(Ci({},void 0!==e.AppVersion&&{AppVersion:e.AppVersion}),void 0!==e.Locale&&{Locale:e.Locale}),void 0!==e.Make&&{Make:e.Make}),void 0!==e.Model&&{Model:e.Model}),void 0!==e.ModelVersion&&{ModelVersion:e.ModelVersion}),void 0!==e.Platform&&{Platform:e.Platform}),void 0!==e.PlatformVersion&&{PlatformVersion:e.PlatformVersion}),void 0!==e.Timezone&&{Timezone:e.Timezone})}function wc(e){return Ci(Ci(Ci(Ci(Ci(Ci({},void 0!==e.City&&{City:e.City}),void 0!==e.Country&&{Country:e.Country}),void 0!==e.Latitude&&{Latitude:e.Latitude}),void 0!==e.Longitude&&{Longitude:e.Longitude}),void 0!==e.PostalCode&&{PostalCode:e.PostalCode}),void 0!==e.Region&&{Region:e.Region})}function Sc(e,t){return Object.entries(e).reduce(function(e,t){var n,t=(r=Ii(t,2))[0],r=r[1];return Ci(Ci({},e),((e={})[t]=Ci(Ci(Ci(Ci(Ci(Ci(Ci(Ci(Ci(Ci({},void 0!==r.AppPackageName&&{AppPackageName:r.AppPackageName}),void 0!==r.AppTitle&&{AppTitle:r.AppTitle}),void 0!==r.AppVersionCode&&{AppVersionCode:r.AppVersionCode}),void 0!==r.Attributes&&{Attributes:(n=r.Attributes,Object.entries(n).reduce(function(e,t){var t=(n=Ii(t,2))[0],n=n[1];return Ci(Ci({},e),((e={})[t]=n,e))},{}))}),void 0!==r.ClientSdkVersion&&{ClientSdkVersion:r.ClientSdkVersion}),void 0!==r.EventType&&{EventType:r.EventType}),void 0!==r.Metrics&&{Metrics:Rc(r.Metrics)}),void 0!==r.SdkName&&{SdkName:r.SdkName}),void 0!==r.Session&&{Session:Fc(r.Session)}),void 0!==r.Timestamp&&{Timestamp:r.Timestamp}),e))},{})}var Cc,_c,Ec,Ic,Ac=function(r,e){return _i(void 0,void 0,void 0,function(){var t,n;return Ei(this,function(e){return t={name:"BadRequestException",$fault:"client",$metadata:Bc(r),Message:void 0,RequestID:void 0},void 0!==(n=r.body).Message&&null!==n.Message&&(t.Message=n.Message),void 0!==n.RequestID&&null!==n.RequestID&&(t.RequestID=n.RequestID),[2,t]})})},Pc=function(r,e){return _i(void 0,void 0,void 0,function(){var t,n;return Ei(this,function(e){return t={name:"ForbiddenException",$fault:"client",$metadata:Bc(r),Message:void 0,RequestID:void 0},void 0!==(n=r.body).Message&&null!==n.Message&&(t.Message=n.Message),void 0!==n.RequestID&&null!==n.RequestID&&(t.RequestID=n.RequestID),[2,t]})})},Oc=function(r,e){return _i(void 0,void 0,void 0,function(){var t,n;return Ei(this,function(e){return t={name:"InternalServerErrorException",$fault:"server",$metadata:Bc(r),Message:void 0,RequestID:void 0},void 0!==(n=r.body).Message&&null!==n.Message&&(t.Message=n.Message),void 0!==n.RequestID&&null!==n.RequestID&&(t.RequestID=n.RequestID),[2,t]})})},kc=function(r,e){return _i(void 0,void 0,void 0,function(){var t,n;return Ei(this,function(e){return t={name:"MethodNotAllowedException",$fault:"client",$metadata:Bc(r),Message:void 0,RequestID:void 0},void 0!==(n=r.body).Message&&null!==n.Message&&(t.Message=n.Message),void 0!==n.RequestID&&null!==n.RequestID&&(t.RequestID=n.RequestID),[2,t]})})},Tc=function(r,e){return _i(void 0,void 0,void 0,function(){var t,n;return Ei(this,function(e){return t={name:"NotFoundException",$fault:"client",$metadata:Bc(r),Message:void 0,RequestID:void 0},void 0!==(n=r.body).Message&&null!==n.Message&&(t.Message=n.Message),void 0!==n.RequestID&&null!==n.RequestID&&(t.RequestID=n.RequestID),[2,t]})})},xc=function(r,e){return _i(void 0,void 0,void 0,function(){var t,n;return Ei(this,function(e){return t={name:"PayloadTooLargeException",$fault:"client",$metadata:Bc(r),Message:void 0,RequestID:void 0},void 0!==(n=r.body).Message&&null!==n.Message&&(t.Message=n.Message),void 0!==n.RequestID&&null!==n.RequestID&&(t.RequestID=n.RequestID),[2,t]})})},Nc=function(r,e){return _i(void 0,void 0,void 0,function(){var t,n;return Ei(this,function(e){return t={name:"TooManyRequestsException",$fault:"client",$metadata:Bc(r),Message:void 0,RequestID:void 0},void 0!==(n=r.body).Message&&null!==n.Message&&(t.Message=n.Message),void 0!==n.RequestID&&null!==n.RequestID&&(t.RequestID=n.RequestID),[2,t]})})},Mc=function(e,t){return Ci(Ci({},void 0!==e.UserAttributes&&{UserAttributes:Dc(e.UserAttributes)}),void 0!==e.UserId&&{UserId:e.UserId})},Rc=function(e,t){return Object.entries(e).reduce(function(e,t){var t=(n=Ii(t,2))[0],n=n[1];return Ci(Ci({},e),((e={})[t]=n,e))},{})},Uc=function(e,t){return Object.entries(e).reduce(function(e,t){var t=(n=Ii(t,2))[0],n=n[1];return Ci(Ci({},e),((e={})[t]=Ci(Ci({},void 0!==n.Endpoint&&{Endpoint:Lc(n.Endpoint)}),void 0!==n.Events&&{Events:Sc(n.Events)}),e))},{})},Dc=function(e,t){return Object.entries(e).reduce(function(e,t){var t=(n=Ii(t,2))[0],n=n[1];return Ci(Ci({},e),((e={})[t]=n.map(function(e){return e}),e))},{})},Lc=function(e,t){return Ci(Ci(Ci(Ci(Ci(Ci(Ci(Ci(Ci(Ci(Ci({},void 0!==e.Address&&{Address:e.Address}),void 0!==e.Attributes&&{Attributes:Dc(e.Attributes)}),void 0!==e.ChannelType&&{ChannelType:e.ChannelType}),void 0!==e.Demographic&&{Demographic:bc(e.Demographic)}),void 0!==e.EffectiveDate&&{EffectiveDate:e.EffectiveDate}),void 0!==e.EndpointStatus&&{EndpointStatus:e.EndpointStatus}),void 0!==e.Location&&{Location:wc(e.Location)}),void 0!==e.Metrics&&{Metrics:Rc(e.Metrics)}),void 0!==e.OptOut&&{OptOut:e.OptOut}),void 0!==e.RequestId&&{RequestId:e.RequestId}),void 0!==e.User&&{User:Mc(e.User)})},Fc=function(e,t){return Ci(Ci(Ci(Ci({},void 0!==e.Duration&&{Duration:e.Duration}),void 0!==e.Id&&{Id:e.Id}),void 0!==e.StartTimestamp&&{StartTimestamp:e.StartTimestamp}),void 0!==e.StopTimestamp&&{StopTimestamp:e.StopTimestamp})},jc=function(e,t){return Object.entries(e).reduce(function(e,t){var n,t=(r=Ii(t,2))[0],r=r[1];return Ci(Ci({},e),((e={})[t]={EndpointItemResponse:void 0!==(t=r).EndpointItemResponse&&null!==t.EndpointItemResponse?{Message:void 0!==(r=t.EndpointItemResponse).Message&&null!==r.Message?r.Message:void 0,StatusCode:void 0!==r.StatusCode&&null!==r.StatusCode?r.StatusCode:void 0}:void 0,EventsItemResponse:void 0!==t.EventsItemResponse&&null!==t.EventsItemResponse?(n=t.EventsItemResponse,Object.entries(n).reduce(function(e,t){var t=(n=Ii(t,2))[0],n=n[1];return Ci(Ci({},e),((e={})[t]={Message:void 0!==n.Message&&null!==n.Message?n.Message:void 0,StatusCode:void 0!==n.StatusCode&&null!==n.StatusCode?n.StatusCode:void 0},e))},{})):void 0},e))},{})},Bc=function(e){return{httpStatusCode:e.statusCode,httpHeaders:e.headers,requestId:e.headers["x-amzn-requestid"]}},Vc=function(e,t){return o=r=t,((n=void 0===(n=e)?new Uint8Array:n)instanceof Uint8Array?Promise.resolve(n):o.streamCollector(n)||Promise.resolve(new Uint8Array)).then(function(e){return r.utf8Encoder(e)}).then(function(e){return e.length?JSON.parse(e):{}});var n,r,o},zc=function(e,t){function n(e){return 0<=(e=0<=e.indexOf(":")?e.split(":")[0]:e).indexOf("#")?e.split("#")[1]:e}var r,o=(r=e.headers,Object.keys(r).find(function(e){return e.toLowerCase()==="x-amzn-errortype".toLowerCase()}));return void 0!==o?n(e.headers[o]):void 0!==t.code?n(t.code):void 0!==t.__type?n(t.__type):""},qc={name:"deserializerMiddleware",step:"deserialize",tags:["DESERIALIZER"]},Kc={name:"serializerMiddleware",step:"serialize",tags:["SERIALIZER"]};function Hc(t,n,r){return{applyToStack:function(e){var c,l,s,a;e.add((c=t,l=r,function(a,u){return function(s){return K(void 0,void 0,void 0,function(){var t,n,r,o,i;return H(this,function(e){switch(e.label){case 0:return t=u.logger,n=u.outputFilterSensitiveLog,[4,a(s)];case 1:return r=e.sent().response,"function"==typeof(null==t?void 0:t.debug)&&t.debug({httpResponse:r}),[4,l(r,c)];case 2:return(o=e.sent()).$metadata,i=B(o,["$metadata"]),"function"==typeof(null==t?void 0:t.info)&&t.info({output:n(i)}),[2,{response:r,output:o}]}})})}}),qc),e.add((s=t,a=n,function(o,i){return function(r){return K(void 0,void 0,void 0,function(){var t,n;return H(this,function(e){switch(e.label){case 0:return t=i.logger,n=i.inputFilterSensitiveLog,"function"==typeof(null==t?void 0:t.info)&&t.info({input:n(r.input)}),[4,a(r.input,s)];case 1:return n=e.sent(),"function"==typeof(null==t?void 0:t.debug)&&t.debug({httpRequest:n}),[2,o(j(j({},r),{request:n}))]}})})}}),Kc)}}}(Cc=Cc||{}).filterSensitiveLog=function(e){return Ci({},e)},(_c=_c||{}).filterSensitiveLog=function(e){return Ci({},e)},(Ec=Ec||{}).filterSensitiveLog=function(e){return Ci({},e)},(Ic=Ic||{}).filterSensitiveLog=function(e){return Ci({},e)},(rl||{}).filterSensitiveLog=function(e){return Ci({},e)},(al=al||{}).filterSensitiveLog=function(e){return Ci({},e)},(Vl||{}).filterSensitiveLog=function(e){return Ci({},e)};var Gc,Wc=(Si($c,Gc=hn),$c.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Hc(t,this.serialize,this.deserialize));var r=e.concat(this.middlewareStack),o=t.logger,i="PinpointClient",s="PutEventsCommand",e={logger:o,clientName:i,commandName:s,inputFilterSensitiveLog:Cc.filterSensitiveLog,outputFilterSensitiveLog:_c.filterSensitiveLog};"function"==typeof o.info&&o.info({clientName:i,commandName:s});var a=t.requestHandler;return r.resolve(function(e){return a.handle(e.request,n||{})},e)},$c.prototype.serialize=function(e,t){return u=e,c=t,_i(void 0,void 0,void 0,function(){var n,r,o,i,s,a;return Ei(this,function(e){switch(e.label){case 0:if(n={"Content-Type":"application/json"},r="/v1/apps/{ApplicationId}/events",void 0===u.ApplicationId)throw new Error("No value provided for input HTTP label: ApplicationId.");if((s=u.ApplicationId).length<=0)throw new Error("Empty value provided for input HTTP label: ApplicationId.");return r=r.replace("{ApplicationId}",sc(s)),void 0===(o=void 0!==u.EventsRequest?(t=u.EventsRequest,Ci({},void 0!==t.BatchItem&&{BatchItem:Uc(t.BatchItem)})):o)&&(o={}),o=JSON.stringify(o),[4,c.endpoint()];case 1:return a=e.sent(),i=a.hostname,s=void 0===(s=a.protocol)?"https":s,a=a.port,[2,new zs({protocol:s,hostname:i,port:a,method:"POST",headers:n,path:r,body:o})]}var t})});var u,c},$c.prototype.deserialize=function(e,t){return o=e,i=t,_i(void 0,void 0,void 0,function(){var n,r;return Ei(this,function(e){switch(e.label){case 0:return 202!==o.statusCode&&300<=o.statusCode?[2,(f=o,h=i,_i(void 0,void 0,void 0,function(){var t,n,r,o,i,s,a,u,c,l,p,d;return Ei(this,function(e){switch(e.label){case 0:return t=[Ci({},f)],d={},[4,Vc(f.body,h)];case 1:switch(l=Ci.apply(void 0,t.concat([(d.body=e.sent(),d)])),p="UnknownError",p=zc(f,l.body)){case"BadRequestException":case"com.amazonaws.pinpoint#BadRequestException":return[3,2];case"ForbiddenException":case"com.amazonaws.pinpoint#ForbiddenException":return[3,4];case"InternalServerErrorException":case"com.amazonaws.pinpoint#InternalServerErrorException":return[3,6];case"MethodNotAllowedException":case"com.amazonaws.pinpoint#MethodNotAllowedException":return[3,8];case"NotFoundException":case"com.amazonaws.pinpoint#NotFoundException":return[3,10];case"PayloadTooLargeException":case"com.amazonaws.pinpoint#PayloadTooLargeException":return[3,12];case"TooManyRequestsException":case"com.amazonaws.pinpoint#TooManyRequestsException":return[3,14]}return[3,16];case 2:return r=[{}],[4,Ac(l)];case 3:return n=Ci.apply(void 0,[Ci.apply(void 0,r.concat([e.sent()])),{name:p,$metadata:Bc(f)}]),[3,17];case 4:return o=[{}],[4,Pc(l)];case 5:return n=Ci.apply(void 0,[Ci.apply(void 0,o.concat([e.sent()])),{name:p,$metadata:Bc(f)}]),[3,17];case 6:return i=[{}],[4,Oc(l)];case 7:return n=Ci.apply(void 0,[Ci.apply(void 0,i.concat([e.sent()])),{name:p,$metadata:Bc(f)}]),[3,17];case 8:return s=[{}],[4,kc(l)];case 9:return n=Ci.apply(void 0,[Ci.apply(void 0,s.concat([e.sent()])),{name:p,$metadata:Bc(f)}]),[3,17];case 10:return a=[{}],[4,Tc(l)];case 11:return n=Ci.apply(void 0,[Ci.apply(void 0,a.concat([e.sent()])),{name:p,$metadata:Bc(f)}]),[3,17];case 12:return u=[{}],[4,xc(l)];case 13:return n=Ci.apply(void 0,[Ci.apply(void 0,u.concat([e.sent()])),{name:p,$metadata:Bc(f)}]),[3,17];case 14:return c=[{}],[4,Nc(l)];case 15:return n=Ci.apply(void 0,[Ci.apply(void 0,c.concat([e.sent()])),{name:p,$metadata:Bc(f)}]),[3,17];case 16:l=l.body,p=l.code||l.Code||p,n=Ci(Ci({},l),{name:""+p,message:l.message||l.Message||p,$fault:"client",$metadata:Bc(f)}),e.label=17;case 17:return p=n.message||n.Message||p,n.message=p,delete n.Message,[2,Promise.reject(Object.assign(new Error(p),n))]}})}))]:(n={$metadata:Bc(o),EventsResponse:void 0},[4,Vc(o.body,i)]);case 1:return r=e.sent(),n.EventsResponse={Results:void 0!==(t=r).Results&&null!==t.Results?jc(t.Results):void 0},[2,Promise.resolve(n)]}var t,f,h})});var o,i},$c);function $c(e){var t=Gc.call(this)||this;return t.input=e,t}var Yc,Jc=(Si(Zc,Yc=hn),Zc.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Hc(t,this.serialize,this.deserialize));var r=e.concat(this.middlewareStack),o=t.logger,i="PinpointClient",s="UpdateEndpointCommand",e={logger:o,clientName:i,commandName:s,inputFilterSensitiveLog:Ec.filterSensitiveLog,outputFilterSensitiveLog:Ic.filterSensitiveLog};"function"==typeof o.info&&o.info({clientName:i,commandName:s});var a=t.requestHandler;return r.resolve(function(e){return a.handle(e.request,n||{})},e)},Zc.prototype.serialize=function(e,t){return u=e,c=t,_i(void 0,void 0,void 0,function(){var n,r,o,i,s,a;return Ei(this,function(e){switch(e.label){case 0:if(n={"Content-Type":"application/json"},r="/v1/apps/{ApplicationId}/endpoints/{EndpointId}",void 0===u.ApplicationId)throw new Error("No value provided for input HTTP label: ApplicationId.");if((s=u.ApplicationId).length<=0)throw new Error("Empty value provided for input HTTP label: ApplicationId.");if(r=r.replace("{ApplicationId}",sc(s)),void 0===u.EndpointId)throw new Error("No value provided for input HTTP label: EndpointId.");if((s=u.EndpointId).length<=0)throw new Error("Empty value provided for input HTTP label: EndpointId.");return r=r.replace("{EndpointId}",sc(s)),void 0===(o=void 0!==u.EndpointRequest?(t=u.EndpointRequest,Ci(Ci(Ci(Ci(Ci(Ci(Ci(Ci(Ci(Ci(Ci({},void 0!==t.Address&&{Address:t.Address}),void 0!==t.Attributes&&{Attributes:Dc(t.Attributes)}),void 0!==t.ChannelType&&{ChannelType:t.ChannelType}),void 0!==t.Demographic&&{Demographic:bc(t.Demographic)}),void 0!==t.EffectiveDate&&{EffectiveDate:t.EffectiveDate}),void 0!==t.EndpointStatus&&{EndpointStatus:t.EndpointStatus}),void 0!==t.Location&&{Location:wc(t.Location)}),void 0!==t.Metrics&&{Metrics:Rc(t.Metrics)}),void 0!==t.OptOut&&{OptOut:t.OptOut}),void 0!==t.RequestId&&{RequestId:t.RequestId}),void 0!==t.User&&{User:Mc(t.User)})):o)&&(o={}),o=JSON.stringify(o),[4,c.endpoint()];case 1:return a=e.sent(),i=a.hostname,s=void 0===(s=a.protocol)?"https":s,a=a.port,[2,new zs({protocol:s,hostname:i,port:a,method:"PUT",headers:n,path:r,body:o})]}var t})});var u,c},Zc.prototype.deserialize=function(e,t){return o=e,i=t,_i(void 0,void 0,void 0,function(){var n,r;return Ei(this,function(e){switch(e.label){case 0:return 202!==o.statusCode&&300<=o.statusCode?[2,(f=o,h=i,_i(void 0,void 0,void 0,function(){var t,n,r,o,i,s,a,u,c,l,p,d;return Ei(this,function(e){switch(e.label){case 0:return t=[Ci({},f)],d={},[4,Vc(f.body,h)];case 1:switch(l=Ci.apply(void 0,t.concat([(d.body=e.sent(),d)])),p="UnknownError",p=zc(f,l.body)){case"BadRequestException":case"com.amazonaws.pinpoint#BadRequestException":return[3,2];case"ForbiddenException":case"com.amazonaws.pinpoint#ForbiddenException":return[3,4];case"InternalServerErrorException":case"com.amazonaws.pinpoint#InternalServerErrorException":return[3,6];case"MethodNotAllowedException":case"com.amazonaws.pinpoint#MethodNotAllowedException":return[3,8];case"NotFoundException":case"com.amazonaws.pinpoint#NotFoundException":return[3,10];case"PayloadTooLargeException":case"com.amazonaws.pinpoint#PayloadTooLargeException":return[3,12];case"TooManyRequestsException":case"com.amazonaws.pinpoint#TooManyRequestsException":return[3,14]}return[3,16];case 2:return r=[{}],[4,Ac(l)];case 3:return n=Ci.apply(void 0,[Ci.apply(void 0,r.concat([e.sent()])),{name:p,$metadata:Bc(f)}]),[3,17];case 4:return o=[{}],[4,Pc(l)];case 5:return n=Ci.apply(void 0,[Ci.apply(void 0,o.concat([e.sent()])),{name:p,$metadata:Bc(f)}]),[3,17];case 6:return i=[{}],[4,Oc(l)];case 7:return n=Ci.apply(void 0,[Ci.apply(void 0,i.concat([e.sent()])),{name:p,$metadata:Bc(f)}]),[3,17];case 8:return s=[{}],[4,kc(l)];case 9:return n=Ci.apply(void 0,[Ci.apply(void 0,s.concat([e.sent()])),{name:p,$metadata:Bc(f)}]),[3,17];case 10:return a=[{}],[4,Tc(l)];case 11:return n=Ci.apply(void 0,[Ci.apply(void 0,a.concat([e.sent()])),{name:p,$metadata:Bc(f)}]),[3,17];case 12:return u=[{}],[4,xc(l)];case 13:return n=Ci.apply(void 0,[Ci.apply(void 0,u.concat([e.sent()])),{name:p,$metadata:Bc(f)}]),[3,17];case 14:return c=[{}],[4,Nc(l)];case 15:return n=Ci.apply(void 0,[Ci.apply(void 0,c.concat([e.sent()])),{name:p,$metadata:Bc(f)}]),[3,17];case 16:l=l.body,p=l.code||l.Code||p,n=Ci(Ci({},l),{name:""+p,message:l.message||l.Message||p,$fault:"client",$metadata:Bc(f)}),e.label=17;case 17:return p=n.message||n.Message||p,n.message=p,delete n.Message,[2,Promise.reject(Object.assign(new Error(p),n))]}})}))]:(n={$metadata:Bc(o),MessageBody:void 0},[4,Vc(o.body,i)]);case 1:return r=e.sent(),n.MessageBody={Message:void 0!==(t=r).Message&&null!==t.Message?t.Message:void 0,RequestID:void 0!==t.RequestID&&null!==t.RequestID?t.RequestID:void 0},[2,Promise.resolve(n)]}var t,f,h})});var o,i},Zc);function Zc(e){var t=Yc.call(this)||this;return t.input=e,t}var Qc={keyPrefix:"aws-amplify-cache",capacityInBytes:1048576,itemMaxSize:21e4,defaultTTL:2592e5,defaultPriority:5,warningThreshold:.8,storage:(new E.StorageHelper).getStorage()};function Xc(e){for(var t=0,t=e.length,n=e.length;0<=n;--n){var r=e.charCodeAt(n);127<r&&r<=2047?t+=1:2047<r&&r<=65535&&(t+=2),56320<=r&&r<=57343&&--n}return t}function el(){return(new Date).getTime()}function tl(e){return Number.isInteger?Number.isInteger(e):"number"==typeof e&&isFinite(e)&&Math.floor(e)===e}var nl=new E.ConsoleLogger("StorageCache"),rl=(ol.prototype.getModuleName=function(){return"Cache"},ol.prototype.checkConfig=function(){tl(this.config.capacityInBytes)||(nl.error("Invalid parameter: capacityInBytes. It should be an Integer. Setting back to default."),this.config.capacityInBytes=Qc.capacityInBytes),tl(this.config.itemMaxSize)||(nl.error("Invalid parameter: itemMaxSize. It should be an Integer. Setting back to default."),this.config.itemMaxSize=Qc.itemMaxSize),tl(this.config.defaultTTL)||(nl.error("Invalid parameter: defaultTTL. It should be an Integer. Setting back to default."),this.config.defaultTTL=Qc.defaultTTL),tl(this.config.defaultPriority)||(nl.error("Invalid parameter: defaultPriority. It should be an Integer. Setting back to default."),this.config.defaultPriority=Qc.defaultPriority),this.config.itemMaxSize>this.config.capacityInBytes&&(nl.error("Invalid parameter: itemMaxSize. It should be smaller than capacityInBytes. Setting back to default."),this.config.itemMaxSize=Qc.itemMaxSize),(5<this.config.defaultPriority||this.config.defaultPriority<1)&&(nl.error("Invalid parameter: defaultPriority. It should be between 1 and 5. Setting back to default."),this.config.defaultPriority=Qc.defaultPriority),(1<Number(this.config.warningThreshold)||Number(this.config.warningThreshold)<0)&&(nl.error("Invalid parameter: warningThreshold. It should be between 0 and 1. Setting back to default."),this.config.warningThreshold=Qc.warningThreshold),5242880<this.config.capacityInBytes&&(nl.error("Cache Capacity should be less than 5MB. Setting back to default. Setting back to default."),this.config.capacityInBytes=Qc.capacityInBytes)},ol.prototype.fillCacheItem=function(e,t,n){return(t={key:e,data:t,timestamp:el(),visitedTime:el(),priority:n.priority,expires:n.expires,type:typeof t,byteSize:0}).byteSize=Xc(JSON.stringify(t)),t.byteSize=Xc(JSON.stringify(t)),t},ol.prototype.configure=function(e){return e&&(e.keyPrefix&&nl.warn("Don't try to configure keyPrefix!"),this.config=Object.assign({},this.config,e,e.Cache),this.checkConfig()),this.config},ol);function ol(e){this.config=Object.assign({},e),this.cacheCurSizeKey=this.config.keyPrefix+"CurSize",this.checkConfig()}var il,sl,al=(il=function(e,t){return(il=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}il(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),ul=new E.ConsoleLogger("Cache");function cl(e){var t=this,e=e?Object.assign({},Qc,e):Qc;return(t=sl.call(this,e)||this).config.storage=e.storage,t.getItem=t.getItem.bind(t),t.setItem=t.setItem.bind(t),t.removeItem=t.removeItem.bind(t),t}var ll=(al(cl,sl=rl),cl.prototype._decreaseCurSizeInBytes=function(e){var t=this.getCacheCurSize();this.config.storage.setItem(this.cacheCurSizeKey,(t-e).toString())},cl.prototype._increaseCurSizeInBytes=function(e){var t=this.getCacheCurSize();this.config.storage.setItem(this.cacheCurSizeKey,(t+e).toString())},cl.prototype._refreshItem=function(e,t){return e.visitedTime=el(),this.config.storage.setItem(t,JSON.stringify(e)),e},cl.prototype._isExpired=function(e){return e=this.config.storage.getItem(e),e=JSON.parse(e),el()>=e.expires},cl.prototype._removeItem=function(e,t){t=t||JSON.parse(this.config.storage.getItem(e)).byteSize,this._decreaseCurSizeInBytes(t),this.config.storage.removeItem(e)},cl.prototype._setItem=function(e,t){this._increaseCurSizeInBytes(t.byteSize);try{this.config.storage.setItem(e,JSON.stringify(t))}catch(e){this._decreaseCurSizeInBytes(t.byteSize),ul.error("Failed to set item "+e)}},cl.prototype._sizeToPop=function(e){var t=this.getCacheCurSize()+e-this.config.capacityInBytes;return(e=(1-this.config.warningThreshold)*this.config.capacityInBytes)<t?t:e},cl.prototype._isCacheFull=function(e){return e+this.getCacheCurSize()>this.config.capacityInBytes},cl.prototype._findValidKeys=function(){for(var e=[],t=[],n=0;n<this.config.storage.length;n+=1)t.push(this.config.storage.key(n));for(n=0;n<t.length;n+=1){var r=t[n];0===r.indexOf(this.config.keyPrefix)&&r!==this.cacheCurSizeKey&&(this._isExpired(r)?this._removeItem(r):e.push(r))}return e},cl.prototype._popOutItems=function(e,t){for(var n=[],r=t,o=0;o<e.length;o+=1){var i=this.config.storage.getItem(e[o]);null!=i&&(i=JSON.parse(i),n.push(i))}for(n.sort(function(e,t){return e.priority>t.priority||!(e.priority<t.priority)&&e.visitedTime<t.visitedTime?-1:1}),o=0;o<n.length;o+=1)if(this._removeItem(n[o].key,n[o].byteSize),(r-=n[o].byteSize)<=0)return},cl.prototype.setItem=function(e,t,n){ul.log("Set item: key is "+e+", value is "+t+" with options: "+n);var r=this.config.keyPrefix+e;if(r!==this.config.keyPrefix&&r!==this.cacheCurSizeKey)if(void 0!==t)if((n={priority:n&&void 0!==n.priority?n.priority:this.config.defaultPriority,expires:n&&void 0!==n.expires?n.expires:this.config.defaultTTL+el()}).priority<1||5<n.priority)ul.warn("Invalid parameter: priority due to out or range. It should be within 1 and 5.");else{var o=this.fillCacheItem(r,t,n);if(o.byteSize>this.config.itemMaxSize)ul.warn("Item with key: "+e+" you are trying to put into is too big!");else try{var i,s=this.config.storage.getItem(r);s&&this._removeItem(r,JSON.parse(s).byteSize),this._isCacheFull(o.byteSize)&&(i=this._findValidKeys(),this._isCacheFull(o.byteSize)&&(s=this._sizeToPop(o.byteSize),this._popOutItems(i,s))),this._setItem(r,o)}catch(e){ul.warn("setItem failed! "+e)}}else ul.warn("The value of item should not be undefined!");else ul.warn("Invalid key: should not be empty or 'CurSize'")},cl.prototype.getItem=function(e,t){ul.log("Get item: key is "+e+" with options "+t);var n=null,r=this.config.keyPrefix+e;if(r===this.config.keyPrefix||r===this.cacheCurSizeKey)return ul.warn("Invalid key: should not be empty or 'CurSize'"),null;try{if(null!=(n=this.config.storage.getItem(r))){if(!this._isExpired(r)){var o=JSON.parse(n);return(o=this._refreshItem(o,r)).data}this._removeItem(r,JSON.parse(n).byteSize),n=null}return t&&void 0!==t.callback?(null!==(o=t.callback())&&this.setItem(e,o,t),o):null}catch(e){return ul.warn("getItem failed! "+e),null}},cl.prototype.removeItem=function(e){ul.log("Remove item: key is "+e);var t=this.config.keyPrefix+e;if(t!==this.config.keyPrefix&&t!==this.cacheCurSizeKey)try{var n=this.config.storage.getItem(t);n&&this._removeItem(t,JSON.parse(n).byteSize)}catch(e){ul.warn("removeItem failed! "+e)}},cl.prototype.clear=function(){ul.log("Clear Cache");for(var e=[],t=0;t<this.config.storage.length;t+=1){var n=this.config.storage.key(t);0===n.indexOf(this.config.keyPrefix)&&e.push(n)}try{for(t=0;t<e.length;t+=1)this.config.storage.removeItem(e[t])}catch(e){ul.warn("clear failed! "+e)}},cl.prototype.getAllKeys=function(){for(var e=[],t=0;t<this.config.storage.length;t+=1){var n=this.config.storage.key(t);0===n.indexOf(this.config.keyPrefix)&&n!==this.cacheCurSizeKey&&e.push(n.substring(this.config.keyPrefix.length))}return e},cl.prototype.getCacheCurSize=function(){var e=this.config.storage.getItem(this.cacheCurSizeKey);return e||(this.config.storage.setItem(this.cacheCurSizeKey,"0"),e="0"),Number(e)},cl.prototype.createInstance=function(e){return e.keyPrefix&&e.keyPrefix!==Qc.keyPrefix||(ul.error("invalid keyPrefix, setting keyPrefix with timeStamp"),e.keyPrefix=el.toString()),new cl(e)},new cl);E.Amplify.register(ll);function pl(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(r=i.next()).done;)s.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s}var dl=new E.ConsoleLogger("EventsBuffer"),fl=[429,500],hl=[202],ml=(gl.prototype.push=function(e){if(this._buffer>this._config.bufferSize)return dl.debug("Exceeded analytics events buffer size"),e.handlers.reject(new Error("Exceeded the size of analytics events buffer"));var t=((t={})[e.params.event.eventId]=e,t);this._buffer.push(t)},gl.prototype.pause=function(){this._pause=!0},gl.prototype.resume=function(){this._pause=!1},gl.prototype.updateClient=function(e){this._client=e},gl.prototype.flush=function(){this._flush=!0},gl.prototype._startLoop=function(){this._interval&&clearInterval(this._interval);var e=this._config.flushInterval;this._interval=setInterval(this._sendBatch,e)},gl.prototype._sendBatch=function(){var e,t=this._buffer.length;this._flush&&!t&&clearInterval(this._interval),!this._pause&&t&&(e=this._config.flushSize,t=Math.min(e,t),t=this._buffer.splice(0,t),this._putEvents(t))},gl.prototype._putEvents=function(p){return e=this,u=function(){var t,n,r,o,i,s,a,u,c,e;return o=this,i=function(e){switch(e.label){case 0:t=this._bufferToMap(p),n=this._generateBatchEventParams(t),e.label=1;case 1:return e.trys.push([1,3,,4]),n=new Wc(n),[4,this._client.send(n)];case 2:return r=e.sent(),this._processPutEventsSuccessResponse(r,t),[3,4];case 3:return r=e.sent(),[2,this._handlePutEventsFailure(r,t)];case 4:return[2]}},c={label:0,sent:function(){if(1&u[0])throw u[1];return u[1]},trys:[],ops:[]},e={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function l(t){return function(e){return function(t){if(s)throw new TypeError("Generator is already executing.");for(;c;)try{if(s=1,a&&(u=2&t[0]?a.return:t[0]?a.throw||((u=a.return)&&u.call(a),0):a.next)&&!(u=u.call(a,t[1])).done)return u;switch(a=0,(t=u?[2&t[0],u.value]:t)[0]){case 0:case 1:u=t;break;case 4:return c.label++,{value:t[1],done:!1};case 5:c.label++,a=t[1],t=[0];continue;case 7:t=c.ops.pop(),c.trys.pop();continue;default:if(!(u=0<(u=c.trys).length&&u[u.length-1])&&(6===t[0]||2===t[0])){c=0;continue}if(3===t[0]&&(!u||t[1]>u[0]&&t[1]<u[3])){c.label=t[1];break}if(6===t[0]&&c.label<u[1]){c.label=u[1],u=t;break}if(u&&c.label<u[2]){c.label=u[2],c.ops.push(t);break}u[2]&&c.ops.pop(),c.trys.pop();continue}t=i.call(o,c)}catch(e){t=[6,e],a=0}finally{s=u=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},new(a=(a=s=void 0)||Promise)(function(n,t){function r(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,o)}i((u=u.apply(e,s||[])).next())});var e,s,a,u},gl.prototype._generateBatchEventParams=function(e){var c={ApplicationId:"",EventsRequest:{BatchItem:{}}};return Object.values(e).forEach(function(e){var t=(u=e.params).event,n=u.timestamp,r=u.config,o=t.name,i=t.attributes,s=t.metrics,a=t.eventId,e=t.session,u=r.appId,t=r.endpointId,r=c.EventsRequest.BatchItem;c.ApplicationId=c.ApplicationId||u,r[t]||(r[t]={Endpoint:{},Events:{}}),r[t].Events[a]={EventType:o,Timestamp:new Date(n).toISOString(),Attributes:i,Metrics:s,Session:e}}),c},gl.prototype._handlePutEventsFailure=function(e,t){dl.debug("_putEvents Failed: ",e),e=e.$metadata&&e.$metadata.httpStatusCode,fl.includes(e)&&(t=Object.values(t),this._retry(t))},gl.prototype._processPutEventsSuccessResponse=function(e,a){var e=e.EventsResponse.Results,u=[];Object.entries(e).forEach(function(e){var s=(e=pl(e,2))[0],e=e[1].EventsItemResponse;Object.entries(e).forEach(function(e){var t=(i=pl(e,2))[0],n=i[1],r=n.StatusCode,o=n.Message,e=a[t],i={EventsResponse:{Results:((i={})[s]={EventsItemResponse:((n={})[t]={StatusCode:r,Message:o},n)},i)}};if(hl.includes(r))e.handlers.resolve(i);else{if(!fl.includes(r))return r=e.params.event.name,dl.error("event "+t+" : "+r+" failed with error: "+o),e.handlers.reject(i);u.push(e)}})}),u.length&&this._retry(u)},gl.prototype._retry=function(e){var o=[];e.forEach(function(e){var t=e.params,n=(r=t.event).eventId,r=r.name;if(0<t.resendLimit--)return dl.debug("resending event "+n+" : "+r+" with "+t.resendLimit+" retry attempts remaining"),void o.push(((t={})[n]=e,t));dl.debug("no retry attempts remaining for event "+n+" : "+r)}),(e=this._buffer).unshift.apply(e,function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(pl(arguments[t]));return e}(o))},gl.prototype._bufferToMap=function(e){return e.reduce(function(e,t){var n=pl(Object.entries(t),1),n=(t=pl(n[0],2))[0],t=t[1];return e[n]=t,e},{})},gl);function gl(e,t){this._pause=!1,this._flush=!1,dl.debug("Instantiating buffer with config:",t),this._buffer=[],this._client=e,this._config=t,this._sendBatch=this._sendBatch.bind(this),this._startLoop()}function yl(e,t){E.Hub.dispatch("analytics",{event:e,data:t},"Analytics",Cl)}function vl(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,o)}i((u=u.apply(e,s||[])).next())})}function bl(n,r){var o,i,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&t[0]?i.return:t[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,t[1])).done)return s;switch(i=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,i=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],i=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}}function wl(e,t){var n={};for(o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,o=Object.getOwnPropertySymbols(e);r<o.length;r++)t.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(n[o[r]]=e[o[r]]);return n}var Sl=function(){return(Sl=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},Cl="undefined"!=typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("amplify_default"):"@@amplify_default",_l=new E.ConsoleLogger("AWSPinpointProvider"),El=[429,500],Il=[202],Al="_update_endpoint",Pl="_session.stop",Ol="undefined"!=typeof navigator&&navigator&&"function"==typeof navigator.sendBeacon,kl=(Tl.prototype.getCategory=function(){return Tl.category},Tl.prototype.getProviderName=function(){return Tl.providerName},Tl.prototype.configure=function(e){var t=this;_l.debug("configure Analytics",e);var n=e||{};return this._config=Object.assign({},this._config,n),this._endpointGenerating=!!e.autoSessionRecord,this._config.appId&&!this._config.disabled?this._config.endpointId?yl("pinpointProvider_configured",null):(e=this.getProviderName()+"_"+this._config.appId,this._getEndpointId(e).then(function(e){_l.debug("setting endpoint id from the cache",e),t._config.endpointId=e,yl("pinpointProvider_configured",null)}).catch(function(e){_l.debug("Failed to generate endpointId",e)})):this._flushBuffer(),this._config},Tl.prototype.record=function(n,r){return vl(this,void 0,void 0,function(){var t;return bl(this,function(e){switch(e.label){case 0:return _l.debug("_public record",n),[4,this._getCredentials()];case 1:return(t=e.sent())&&this._config.appId&&this._config.region?(this._initClients(t),t=(new Date).getTime(),this._generateSession(n),n.event.eventId=m.v1(),Object.assign(n,{timestamp:t,config:this._config}),n.event.immediate?[2,this._send(n,r)]:(this._putToBuffer(n,r),[2])):(_l.debug("cannot send events without credentials, applicationId or region"),[2,r.reject(new Error("No credentials, applicationId or region"))])}})})},Tl.prototype._sendEndpointUpdate=function(n){return vl(this,void 0,void 0,function(){var t;return bl(this,function(e){switch(e.label){case 0:return this._endpointUpdateInProgress?(this._endpointBuffer.push(n),[2]):(this._endpointUpdateInProgress=!0,[4,this._updateEndpoint(n)]);case 1:return e.sent(),t=this._endpointBuffer.shift(),this._endpointUpdateInProgress=!1,t&&this._sendEndpointUpdate(t),[2]}})})},Tl.prototype._putToBuffer=function(e,t){e.event.name!==Al?this._buffer&&this._buffer.push({params:e,handlers:t}):this._sendEndpointUpdate({params:e,handlers:t})},Tl.prototype._generateSession=function(e){this._sessionId=this._sessionId||m.v1();var t=e.event;switch(t.name){case"_session.start":this._sessionStartTimestamp=(new Date).getTime(),this._sessionId=m.v1(),t.session={Id:this._sessionId,StartTimestamp:new Date(this._sessionStartTimestamp).toISOString()};break;case Pl:var n=(new Date).getTime();this._sessionStartTimestamp=this._sessionStartTimestamp||(new Date).getTime(),this._sessionId=this._sessionId||m.v1(),t.session={Id:this._sessionId,Duration:n-this._sessionStartTimestamp,StartTimestamp:new Date(this._sessionStartTimestamp).toISOString(),StopTimestamp:new Date(n).toISOString()},this._sessionId=void 0,this._sessionStartTimestamp=void 0;break;default:this._sessionStartTimestamp=this._sessionStartTimestamp||(new Date).getTime(),this._sessionId=this._sessionId||m.v1(),t.session={Id:this._sessionId,StartTimestamp:new Date(this._sessionStartTimestamp).toISOString()}}},Tl.prototype._send=function(t,n){return vl(this,void 0,void 0,function(){return bl(this,function(e){switch(t.event.name){case Al:return[2,this._updateEndpoint({params:t,handlers:n})];case Pl:return[2,this._pinpointSendStopSession(t,n)];default:return[2,this._pinpointPutEvents(t,n)]}})})},Tl.prototype._generateBatchItemContext=function(e){var t=e.event,n=e.timestamp,r=e.config,o=t.name,i=t.attributes,s=t.metrics,a=t.eventId,u=t.session,c=r.appId,e=r.endpointId,t={ApplicationId:c,EventsRequest:{BatchItem:{}}};return(r={Endpoint:{}}).Events=((c={})[a]={EventType:o,Timestamp:new Date(n).toISOString(),Attributes:i,Metrics:s,Session:u},c),t.EventsRequest.BatchItem[e]=r,t},Tl.prototype._pinpointPutEvents=function(i,s){return vl(this,void 0,void 0,function(){var t,n,r,o;return bl(this,function(e){switch(e.label){case 0:t=i.event.eventId,n=i.config.endpointId,r=this._generateBatchItemContext(i),r=new Wc(r),e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this.pinpointClient.send(r)];case 2:return o=e.sent(),r=o.EventsResponse.Results[n].EventsItemResponse[t],n=r.StatusCode,r=r.Message,Il.includes(n)?(_l.debug("record event success. ",o),[2,s.resolve(o)]):El.includes(n)?(this._retry(i,s),[3,4]):(_l.error("Event "+t+" is not accepted, the error is "+r),[2,s.reject(o)]);case 3:return o=e.sent(),this._eventError(o),[2,s.reject(o)];case 4:return[2]}})})},Tl.prototype._pinpointSendStopSession=function(e,t){if(Ol){var n=this._generateBatchItemContext(e),r=this._config.region,o=n.ApplicationId,i=n.EventsRequest,n={secret_key:this._config.credentials.secretAccessKey,access_key:this._config.credentials.accessKeyId,session_token:this._config.credentials.sessionToken},o={url:o="https://pinpoint."+r+".amazonaws.com/v1/apps/"+o+"/events/legacy",body:i=JSON.stringify(i),method:"POST"},r={region:r,service:"mobiletargeting"},r=E.Signer.signUrl(o,n,r,null);return navigator.sendBeacon(r,i)?t.resolve("sendBeacon success"):t.reject("sendBeacon failure")}this._pinpointPutEvents(e,t)},Tl.prototype._retry=function(e,t){var n=e.config.resendLimit;e.resendLimit="number"==typeof e.resendLimit?e.resendLimit:n,0<e.resendLimit--?(_l.debug("resending event "+e.eventName+" with "+e.resendLimit+" retry times left"),this._pinpointPutEvents(e,t)):_l.debug("retry times used up for event "+e.eventName)},Tl.prototype._updateEndpoint=function(a){return vl(this,void 0,void 0,function(){var t,n,r,o,i,s;return bl(this,function(e){switch(e.label){case 0:s=a.params,t=a.handlers,n=s.config,o=s.event,r=n.appId,s=n.endpointId,o=this._endpointRequest(n,E.JS.transferKeyToLowerCase(o,[],["attributes","userAttributes","Attributes","UserAttributes"])),s={ApplicationId:r,EndpointId:s,EndpointRequest:o},e.label=1;case 1:return e.trys.push([1,3,,4]),o=new Jc(s),[4,this.pinpointClient.send(o)];case 2:return i=e.sent(),_l.debug("updateEndpoint success",i),this._endpointGenerating=!1,this._resumeBuffer(),t.resolve(i),[2];case 3:return i=e.sent(),s={err:i,update_params:s,endpointObject:a},[2,this._handleEndpointUpdateFailure(s)];case 4:return[2]}})})},Tl.prototype._handleEndpointUpdateFailure=function(o){return vl(this,void 0,void 0,function(){var t,n,r;return bl(this,function(e){return t=o.err,n=o.endpointObject,r=t.$metadata&&t.$metadata.httpStatusCode,_l.debug("updateEndpoint error",t),403===r?[2,this._handleEndpointUpdateForbidden(o)]:El.includes(r)?[2,this._retryEndpointUpdate(n,!0)]:(_l.error("updateEndpoint failed",t),n.handlers.reject(t),[2])})})},Tl.prototype._handleEndpointUpdateForbidden=function(e){var t=e.err,n=e.endpointObject,r=t.code,e=t.retryable;if("ExpiredTokenException"!==r&&!e)return n.handlers.reject(t);this._retryEndpointUpdate(n)},Tl.prototype._retryEndpointUpdate=function(e,t){_l.debug("_retryEndpointUpdate",e);var n=e.params,r=n.config.resendLimit;if(n.resendLimit="number"==typeof n.resendLimit?n.resendLimit:r,0<n.resendLimit--)return _l.debug("resending endpoint update "+n.event.eventId+" with "+n.resendLimit+" retry attempts remaining"),void(this._endpointBuffer.length?this._endpointBuffer.unshift(e):this._updateEndpoint(e));_l.warn("resending endpoint update "+n.event.eventId+" failed after "+n.config.resendLimit+" attempts"),this._endpointGenerating&&_l.error("Initial endpoint update failed. ")},Tl.prototype._initClients=function(r){return vl(this,void 0,void 0,function(){var t,n;return bl(this,function(e){return _l.debug("init clients"),this.pinpointClient&&this._config.credentials&&this._config.credentials.sessionToken===r.sessionToken&&this._config.credentials.identityId===r.identityId?_l.debug("no change for aws credentials, directly return from init"):(t=this._config.credentials?this._config.credentials.identityId:null,this._config.credentials=r,n=this._config.region,_l.debug("init clients with credentials",r),this.pinpointClient=new yc({region:n,credentials:r,customUserAgent:E.getAmplifyUserAgent()}),this.pinpointClient.middlewareStack.addRelativeTo(function(t){return function(e){return delete e.request.headers["amz-sdk-invocation-id"],delete e.request.headers["amz-sdk-request"],t(e)}},{step:"finalizeRequest",relation:"after",toMiddleware:"retryMiddleware"}),this._bufferExists()&&t===r.identityId?this._updateBufferClient():this._initBuffer(),this._customizePinpointClientReq()),[2]})})},Tl.prototype._bufferExists=function(){return this._buffer&&this._buffer instanceof ml},Tl.prototype._initBuffer=function(){this._bufferExists()&&this._flushBuffer(),this._buffer=new ml(this.pinpointClient,this._config),this._endpointGenerating&&this._buffer.pause()},Tl.prototype._updateBufferClient=function(){this._bufferExists()&&this._buffer.updateClient(this.pinpointClient)},Tl.prototype._flushBuffer=function(){this._bufferExists()&&(this._buffer.flush(),this._buffer=null)},Tl.prototype._resumeBuffer=function(){this._bufferExists()&&this._buffer.resume()},Tl.prototype._customizePinpointClientReq=function(){},Tl.prototype._getEndpointId=function(n){return vl(this,void 0,void 0,function(){var t;return bl(this,function(e){switch(e.label){case 0:return[4,ll.getItem(n)];case 1:return t=e.sent(),_l.debug("endpointId from cache",t,"type",typeof t),t||(t=m.v1(),ll.setItem(n,t)),[2,t]}})})},Tl.prototype._endpointRequest=function(e,t){var n=e.credentials,r=this._clientInfo||{},o=e.clientContext||{},i=e.endpoint||{},e={appVersion:r.appVersion,make:r.make,model:r.model,modelVersion:r.version,platform:r.platform},o=wl(o,["clientId","appTitle","appVersionName","appVersionCode","appPackageName"]),r=t.address?"android"===r.platform?"GCM":"APNS":void 0,t=((t=Sl(Sl(Sl({channelType:r,requestId:m.v1(),effectiveDate:(new Date).toISOString()},i),t),{attributes:Sl(Sl({},i.attributes),t.attributes),demographic:Sl(Sl(Sl(Sl({},e),o),i.demographic),t.demographic),location:Sl(Sl({},i.location),t.location),metrics:Sl(Sl({},i.metrics),t.metrics),user:{userId:t.userId||i.userId||n.identityId,userAttributes:Sl(Sl({},i.userAttributes),t.userAttributes)}})).userId,t.userAttributes,t.name,t.session,t.eventId,t.immediate,wl(t,["userId","userAttributes","name","session","eventId","immediate"]));return E.JS.transferKeyToUpperCase(t,[],["metrics","userAttributes","attributes"])},Tl.prototype._eventError=function(e){_l.error("record event failed.",e),_l.warn('Please ensure you have updated your Pinpoint IAM Policy with the Action: "mobiletargeting:PutEvents" in order to record events')},Tl.prototype._getCredentials=function(){return vl(this,void 0,void 0,function(){var t;return bl(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,E.Credentials.get()];case 1:return(t=e.sent())?(_l.debug("set credentials for analytics",t),[2,E.Credentials.shear(t)]):[2,null];case 2:return t=e.sent(),_l.debug("ensure credentials error",t),[2,null];case 3:return[2]}})})},Tl.category="Analytics",Tl.providerName="AWSPinpoint",Tl);function Tl(e){this._endpointGenerating=!0,this._endpointUpdateInProgress=!1,this._buffer=null,this._endpointBuffer=[],this._config=e||{},this._config.bufferSize=this._config.bufferSize||1e3,this._config.flushSize=this._config.flushSize||100,this._config.flushInterval=this._config.flushInterval||5e3,this._config.resendLimit=this._config.resendLimit||5,this._clientInfo=E.ClientDevice.clientInfo()}function xl(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(r=i.next()).done;)s.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s}(arguments[t]));return e}var Nl=[],Ml=(Rl.add=function(e,t,n){Ul(e,t).set(n)},Rl.remove=function(e,t){Ul(e,t).remove()},Rl.prototype.set=function(n){var r=this;this.context[this.methodName]=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return n(r._originalMethod.apply(r,xl(e)))}},Rl.prototype.remove=function(){this.context[this.methodName]=this._originalMethod},Rl);function Rl(e,t){this.context=e,this.methodName=t,this._originalMethod=e[t].bind(e)}function Ul(t,n){var e=Nl.filter(function(e){return e.context===t&&e.methodName===n})[0];return e||(e=new Ml(t,n),Nl.push(e)),e}function Dl(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,o)}i((u=u.apply(e,s||[])).next())})}function Ll(n,r){var o,i,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&t[0]?i.return:t[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,t[1])).done)return s;switch(i=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,i=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],i=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}}var Fl=new E.ConsoleLogger("PageViewTracker"),jl="aws-amplify-analytics-prevUrl",Bl={enable:!1,provider:"AWSPinpoint",getUrl:function(){return E.JS.browserOrNode().isBrowser?window.location.origin+window.location.pathname:""}},Vl=(zl.prototype.configure=function(e){return Object.assign(this._config,e),"SPA"===this._config.type&&this._pageViewTrackSPA(),this._config},zl.prototype._isSameUrl=function(){return sessionStorage.getItem(jl)===this._config.getUrl()&&(Fl.debug("the url is same"),!0)},zl.prototype._pageViewTrackDefault=function(){return Dl(this,void 0,void 0,function(){var t,n;return Ll(this,function(e){switch(e.label){case 0:return E.JS.browserOrNode().isBrowser&&window.addEventListener&&window.sessionStorage?(t=this._config.getUrl(),"function"!=typeof this._config.attributes?[3,2]:[4,this._config.attributes()]):(Fl.debug("not in the supported web enviroment"),[2]);case 1:return n=e.sent(),[3,3];case 2:n=this._config.attributes,e.label=3;case 3:return n=Object.assign({url:t},n),this._config.enable&&!this._isSameUrl()&&(this._tracker({name:this._config.eventName||"pageView",attributes:n},this._config.provider).catch(function(e){Fl.debug("Failed to record the page view event",e)}),sessionStorage.setItem(jl,t)),[2]}})})},zl.prototype._trackFunc=function(){return Dl(this,void 0,void 0,function(){var t,n;return Ll(this,function(e){switch(e.label){case 0:return E.JS.browserOrNode().isBrowser&&window.addEventListener&&history.pushState&&window.sessionStorage?(t=this._config.getUrl(),"function"!=typeof this._config.attributes?[3,2]:[4,this._config.attributes()]):(Fl.debug("not in the supported web enviroment"),[2]);case 1:return n=e.sent(),[3,3];case 2:n=this._config.attributes,e.label=3;case 3:return n=Object.assign({url:t},n),this._isSameUrl()||(this._tracker({name:this._config.eventName||"pageView",attributes:n},this._config.provider).catch(function(e){Fl.debug("Failed to record the page view event",e)}),sessionStorage.setItem(jl,t)),[2]}})})},zl.prototype._pageViewTrackSPA=function(){E.JS.browserOrNode().isBrowser&&window.addEventListener&&history.pushState?this._config.enable&&!this._hasEnabled?(Ml.add(history,"pushState",this._trackFunc),Ml.add(history,"replaceState",this._trackFunc),window.addEventListener("popstate",this._trackFunc),this._trackFunc(),this._hasEnabled=!0):(Ml.remove(history,"pushState"),Ml.remove(history,"replaceState"),window.removeEventListener("popstate",this._trackFunc),this._hasEnabled=!1):Fl.debug("not in the supported web enviroment")},zl);function zl(e,t){Fl.debug("initialize pageview tracker with opts",t),this._config=Object.assign({},Bl,t),this._tracker=e,this._hasEnabled=!1,this._trackFunc=this._trackFunc.bind(this),"SPA"===this._config.type?this._pageViewTrackSPA():this._pageViewTrackDefault()}var ql=(al=E.JS.browserOrNode().isBrowser&&window.Element?window.Element.prototype:null)?al.matches||al.matchesSelector||al.webkitMatchesSelector||al.mozMatchesSelector||al.msMatchesSelector||al.oMatchesSelector:null;function Kl(e,t){if(e&&1===e.nodeType&&t){if("string"==typeof t||1===t.nodeType)return e===t||Hl(e,t);if("length"in t)for(var n,r=0;n=t[r];r++)if(e===n||Hl(e,n))return 1}}function Hl(e,t){if("string"!=typeof t)return!1;if(ql)return ql.call(e,t);for(var n,r=e.parentNode.querySelectorAll(t),o=0;n=r[o];o++)if(n===e)return!0;return!1}function Gl(e,t,i,s,a){function n(e){var t;if(a.composed&&"function"==typeof e.composedPath)for(var n,r=e.composedPath(),o=0;n=r[o];o++)1===n.nodeType&&Kl(n,i)&&(t=n);else t=function(n,e,t){if(void 0===t&&(t=!1),n&&1===n.nodeType&&e)for(var r,o=(t?[n]:[]).concat(function(){for(var e=[],t=n;t&&t.parentNode&&1===t.parentNode.nodeType;)t=t.parentNode,e.push(t);return e}()),i=0;r=o[i];i++)if(Kl(r,e))return r}(e.target,i,!0);t&&s.call(t,e,t)}return void 0===a&&(a={}),e.addEventListener(t,n,a.useCapture),{destroy:function(){e.removeEventListener(t,n,a.useCapture)}}}var Wl=new E.ConsoleLogger("EventTracker"),$l={enable:!1,events:["click"],selectorPrefix:"data-amplify-analytics-",provider:"AWSPinpoint"},rl=(Yl.prototype.configure=function(e){var t,n=this;return Object.assign(this._config,e),this._config.enable?this._config.enable&&0===Object.keys(this._delegates).length&&(t="["+this._config.selectorPrefix+"on]",this._config.events.forEach(function(e){n._delegates[e]=Gl(document,e,t,n._trackFunc,{composed:!0,useCapture:!0})})):(Object.keys(this._delegates).forEach(function(e){"function"==typeof n._delegates[e].destroy&&n._delegates[e].destroy()}),this._delegates={}),this._config},Yl.prototype._trackFunc=function(f,h){return e=this,u=function(){var t,n,r,o,i,s,a,u,c,l,p,e;return s=this,a=function(e){switch(e.label){case 0:return t={},n=h.getAttribute(this._config.selectorPrefix+"on").split(/\s*,\s*/),r=h.getAttribute(this._config.selectorPrefix+"name"),(o=h.getAttribute(this._config.selectorPrefix+"attrs"))&&o.split(/\s*,\s*/).forEach(function(e){e=e.trim().split(/\s*:\s*/),t[e[0]]=e[1]}),"function"!=typeof this._config.attributes?[3,2]:[4,this._config.attributes()];case 1:return i=e.sent(),[3,3];case 2:i=this._config.attributes,e.label=3;case 3:return i=Object.assign({type:f.type,target:f.target.localName+" with id "+f.target.id},i,t),Wl.debug("events needed to be recorded",n),Wl.debug("attributes needed to be attached",t),n.indexOf(f.type)<0?Wl.debug("event "+f.type+" is not selected to be recorded"):this._tracker({name:r||"event",attributes:i},this._config.provider).catch(function(e){Wl.debug("Failed to record the "+f.type+" event', "+e)}),[2]}},p={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]},e={next:d(0),throw:d(1),return:d(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function d(t){return function(e){return function(t){if(u)throw new TypeError("Generator is already executing.");for(;p;)try{if(u=1,c&&(l=2&t[0]?c.return:t[0]?c.throw||((l=c.return)&&l.call(c),0):c.next)&&!(l=l.call(c,t[1])).done)return l;switch(c=0,(t=l?[2&t[0],l.value]:t)[0]){case 0:case 1:l=t;break;case 4:return p.label++,{value:t[1],done:!1};case 5:p.label++,c=t[1],t=[0];continue;case 7:t=p.ops.pop(),p.trys.pop();continue;default:if(!(l=0<(l=p.trys).length&&l[l.length-1])&&(6===t[0]||2===t[0])){p=0;continue}if(3===t[0]&&(!l||t[1]>l[0]&&t[1]<l[3])){p.label=t[1];break}if(6===t[0]&&p.label<l[1]){p.label=l[1],l=t;break}if(l&&p.label<l[2]){p.label=l[2],p.ops.push(t);break}l[2]&&p.ops.pop(),p.trys.pop();continue}t=a.call(s,p)}catch(e){t=[6,e],c=0}finally{u=l=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},new(a=(a=s=void 0)||Promise)(function(n,t){function r(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,o)}i((u=u.apply(e,s||[])).next())});var e,s,a,u},Yl);function Yl(e,t){E.JS.browserOrNode().isBrowser&&window.addEventListener?(this._config=Object.assign({},$l,t),this._tracker=e,this._delegates={},this._trackFunc=this._trackFunc.bind(this),Wl.debug("initialize pageview tracker with opts",this._config),this.configure(this._config)):Wl.debug("not in the supported web environment")}function Jl(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,o)}i((u=u.apply(e,s||[])).next())})}function Zl(n,r){var o,i,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&t[0]?i.return:t[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,t[1])).done)return s;switch(i=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,i=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],i=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}}var Ql=new E.ConsoleLogger("SessionTracker"),Xl={enable:!1,provider:"AWSPinpoint"},ep=!1,al=(tp.prototype._envCheck=function(){if(!E.JS.browserOrNode().isBrowser)return!1;if(!document||!document.addEventListener)return Ql.debug("not in the supported web environment"),!1;if(void 0!==document.hidden)this._hidden="hidden",this._visibilityChange="visibilitychange";else if(void 0!==document.msHidden)this._hidden="msHidden",this._visibilityChange="msvisibilitychange";else{if(void 0===document.webkitHidden)return Ql.debug("not in the supported web environment"),!1;this._hidden="webkitHidden",this._visibilityChange="webkitvisibilitychange"}return!0},tp.prototype._trackFunc=function(){return Jl(this,void 0,void 0,function(){var t;return Zl(this,function(e){switch(e.label){case 0:return"function"!=typeof this._config.attributes?[3,2]:[4,this._config.attributes()];case 1:return t=e.sent(),[3,3];case 2:t=this._config.attributes,e.label=3;case 3:return t=Object.assign({},t),document.visibilityState===this._hidden?this._tracker({name:"_session.stop",attributes:t},this._config.provider).catch(function(e){Ql.debug("record session stop event failed.",e)}):this._tracker({name:"_session.start",attributes:t},this._config.provider).catch(function(e){Ql.debug("record session start event failed.",e)}),[2]}})})},tp.prototype._trackBeforeUnload=function(e){var t=this;("function"==typeof this._config.attributes?Promise.resolve(this._config.attributes()):Promise.resolve(this._config.attributes)).then(function(e){e=Object.assign({},e),t._tracker({name:"_session.stop",attributes:e,immediate:!0},t._config.provider).catch(function(e){Ql.debug("record session stop event failed.",e)})})},tp.prototype._sendInitialEvent=function(){return Jl(this,void 0,void 0,function(){var t;return Zl(this,function(e){switch(e.label){case 0:return ep?(Ql.debug("the start session has been sent when the page is loaded"),[2]):(ep=!0,"function"!=typeof this._config.attributes?[3,2]:[4,this._config.attributes()]);case 1:return t=e.sent(),[3,3];case 2:t=this._config.attributes,e.label=3;case 3:return t=Object.assign({},t),this._tracker({name:"_session.start",attributes:t},this._config.provider).catch(function(e){Ql.debug("record session start event failed.",e)}),[2]}})})},tp.prototype.configure=function(e){return this._envCheck()&&(Object.assign(this._config,e),this._config.enable&&!this._hasEnabled?(this._sendInitialEvent(),document.addEventListener(this._visibilityChange,this._trackFunc,!1),window.addEventListener("beforeunload",this._trackBeforeUnload,!1),this._hasEnabled=!0):!this._config.enable&&this._hasEnabled&&(document.removeEventListener(this._visibilityChange,this._trackFunc,!1),window.removeEventListener("beforeunload",this._trackBeforeUnload,!1),this._hasEnabled=!1)),this._config},tp);function tp(e,t){this._config=Object.assign({},Xl,t),this._tracker=e,this._hasEnabled=!1,this._trackFunc=this._trackFunc.bind(this),this._trackBeforeUnload=this._trackBeforeUnload.bind(this),this.configure(this._config)}function np(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,o)}i((u=u.apply(e,s||[])).next())})}function rp(n,r){var o,i,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&t[0]?i.return:t[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,t[1])).done)return s;switch(i=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,i=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],i=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}}var op=function(){return(op=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},ip=new E.ConsoleLogger("AnalyticsClass"),sp="undefined"!=typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("amplify_default"):"@@amplify_default",ap={pageView:Vl,event:rl,session:al},up=null,al=(cp.prototype.getModuleName=function(){return"Analytics"},cp.prototype.configure=function(e){var n=this;if(!e)return this._config;ip.debug("configure Analytics",e);var t=E.Parser.parseMobilehubConfig(e);return this._config=Object.assign({},this._config,t.Analytics,e),this._config.disabled&&(this._disabled=!0),void 0===this._config.autoSessionRecord&&(this._config.autoSessionRecord=!0),this._pluggables.forEach(function(e){var t="AWSPinpoint"!==e.getProviderName()||n._config.AWSPinpoint?n._config[e.getProviderName()]:n._config;e.configure(op({disabled:n._config.disabled,autoSessionRecord:n._config.autoSessionRecord},t))}),0===this._pluggables.length&&this.addPluggable(new kl),E.Hub.dispatch("analytics",{event:"configured",data:null,message:"The Analytics category has been configured successfully"},"Analytics",sp),ip.debug("current configuration",this._config),this._config},cp.prototype.addPluggable=function(e){if(e&&"Analytics"===e.getCategory()){this._pluggables.push(e);var t="AWSPinpoint"!==e.getProviderName()||this._config.AWSPinpoint?this._config[e.getProviderName()]:this._config,t=op({disabled:this._config.disabled},t);return e.configure(t),t}},cp.prototype.getPluggable=function(e){for(var t=0;t<this._pluggables.length;t+=1){var n=this._pluggables[t];if(n.getProviderName()===e)return n}return ip.debug("No plugin found with providerName",e),null},cp.prototype.removePluggable=function(e){for(var t=0;t<this._pluggables.length&&this._pluggables[t].getProviderName()!==e;)t+=1;t===this._pluggables.length?ip.debug("No plugin found with providerName",e):this._pluggables.splice(t,t+1)},cp.prototype.disable=function(){this._disabled=!0},cp.prototype.enable=function(){this._disabled=!1},cp.prototype.startSession=function(n){return np(this,void 0,void 0,function(){var t;return rp(this,function(e){return t={event:{name:"_session.start"},provider:n},[2,this._sendEvent(t)]})})},cp.prototype.stopSession=function(n){return np(this,void 0,void 0,function(){var t;return rp(this,function(e){return t={event:{name:"_session.stop"},provider:n},[2,this._sendEvent(t)]})})},cp.prototype.record=function(n,r,o){return np(this,void 0,void 0,function(){var t;return rp(this,function(e){return t="string"==typeof n?{event:{name:n,attributes:r,metrics:o},provider:"AWSPinpoint"}:{event:n,provider:r},[2,this._sendEvent(t)]})})},cp.prototype.updateEndpoint=function(n,r){return np(this,void 0,void 0,function(){var t;return rp(this,function(e){return t=op(op({},n),{name:"_update_endpoint"}),[2,this.record(t,r)]})})},cp.prototype._sendEvent=function(r){var e=this;if(this._disabled)return ip.debug("Analytics has been disabled"),Promise.resolve();var o=r.provider||"AWSPinpoint";return new Promise(function(t,n){e._pluggables.forEach(function(e){e.getProviderName()===o&&e.record(r,{resolve:t,reject:n})})})},cp.prototype.autoTrack=function(e,t){var n;ap[e]?("session"===e&&(this._config.autoSessionRecord=t.enable),(n=this._trackers[e])?n.configure(t):this._trackers[e]=new ap[e](this.record,t)):ip.debug("invalid tracker type")},cp);function cp(){this._config={},this._pluggables=[],this._disabled=!1,this._trackers={},(up=this).record=this.record.bind(this),E.Hub.listen("auth",fp),E.Hub.listen("storage",fp),E.Hub.listen("analytics",fp)}var lp=!1,pp=!1,dp=!1,fp=function(e){var t=e.channel,n=e.payload;switch(ip.debug("on hub capsule "+t,n),t){case"auth":mp(n);break;case"storage":hp(n);break;case"analytics":gp(n)}},hp=function(e){var e=(t=e.data).attrs,t=t.metrics;e&&dp&&up.record({name:"Storage",attributes:e,metrics:t}).catch(function(e){ip.debug("Failed to send the storage event automatically",e)})},mp=function(e){if(e=e.event){var t=function(n){return np(void 0,void 0,void 0,function(){var t;return rp(this,function(e){switch(e.label){case 0:if(!pp||!dp)return[3,4];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,up.record({name:"_userauth."+n})];case 2:return[2,e.sent()];case 3:return t=e.sent(),ip.debug("Failed to send the "+n+" event automatically",t),[3,4];case 4:return[2]}})})};switch(e){case"signIn":return t("sign_in");case"signUp":return t("sign_up");case"signOut":return t("sign_out");case"signIn_failure":return t("auth_fail");case"configured":pp=!0,dp&&yp()}}},gp=function(e){(e=e.event)&&"pinpointProvider_configured"===e&&(dp=!0,pp&&dp&&yp())},yp=function(){var e=up.configure();!lp&&e.autoSessionRecord&&(up.updateEndpoint({immediate:!0}).catch(function(e){ip.debug("Failed to update the endpoint",e)}),lp=!0),up.autoTrack("session",{enable:e.autoSessionRecord})},vp=new al;E.Amplify.register(vp);var bp=(wp.fromNumber=function(e){if(0x8000000000000000<e||e<-0x8000000000000000)throw new Error(e+" is too large (or, if negative, too small) to represent as an Int64");for(var t=new Uint8Array(8),n=7,r=Math.abs(Math.round(e));-1<n&&0<r;n--,r/=256)t[n]=r;return e<0&&Sp(t),new wp(t)},wp.prototype.valueOf=function(){var e=this.bytes.slice(0),t=128&e[0];return t&&Sp(e),parseInt(Fu(e),16)*(t?-1:1)},wp.prototype.toString=function(){return String(this.valueOf())},wp);function wp(e){if(8!==(this.bytes=e).byteLength)throw new Error("Int64 buffers must be exactly 8 bytes")}function Sp(e){for(var t=0;t<8;t++)e[t]^=255;for(t=7;-1<t&&(e[t]++,0===e[t]);t--);}var Cp=(_p.prototype.format=function(e){var t,n,r,o,i=[];try{for(var s=G(Object.keys(e)),a=s.next();!a.done;a=s.next()){var u=a.value,c=this.fromUtf8(u);i.push(Uint8Array.from([c.byteLength]),c,this.formatHeaderValue(e[u]))}}catch(e){t={error:e}}finally{try{a&&!a.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}var l=new Uint8Array(i.reduce(function(e,t){return e+t.byteLength},0)),p=0;try{for(var d=G(i),f=d.next();!f.done;f=d.next()){var h=f.value;l.set(h,p),p+=h.byteLength}}catch(e){r={error:e}}finally{try{f&&!f.done&&(o=d.return)&&o.call(d)}finally{if(r)throw r.error}}return l},_p.prototype.formatHeaderValue=function(e){switch(e.type){case"boolean":return Uint8Array.from([e.value?0:1]);case"byte":return Uint8Array.from([2,e.value]);case"short":var t=new DataView(new ArrayBuffer(3));return t.setUint8(0,3),t.setInt16(1,e.value,!1),new Uint8Array(t.buffer);case"integer":var n=new DataView(new ArrayBuffer(5));return n.setUint8(0,4),n.setInt32(1,e.value,!1),new Uint8Array(n.buffer);case"long":return(n=new Uint8Array(9))[0]=5,n.set(e.value.bytes,1),n;case"binary":var r=new DataView(new ArrayBuffer(3+e.value.byteLength));r.setUint8(0,6),r.setUint16(1,e.value.byteLength,!1);var o=new Uint8Array(r.buffer);return o.set(e.value,3),o;case"string":return r=this.fromUtf8(e.value),(o=new DataView(new ArrayBuffer(3+r.byteLength))).setUint8(0,7),o.setUint16(1,r.byteLength,!1),(o=new Uint8Array(o.buffer)).set(r,3),o;case"timestamp":var i=new Uint8Array(9);return i[0]=8,i.set(bp.fromNumber(e.value.valueOf()).bytes,1),i;case"uuid":if(!Mp.test(e.value))throw new Error("Invalid UUID received: "+e.value);return(i=new Uint8Array(17))[0]=9,i.set(function(e){if(e.length%2!=0)throw new Error("Hex encoded strings must have an even number length");for(var t=new Uint8Array(e.length/2),n=0;n<e.length;n+=2){var r=e.substr(n,2).toLowerCase();if(!(r in Uu))throw new Error("Cannot decode unrecognized sequence "+r+" as hexadecimal");t[n/2]=Uu[r]}return t}(e.value.replace(/\-/g,"")),1),i}},_p.prototype.parse=function(e){for(var t={},n=0;n<e.byteLength;){var r=e.getUint8(n++),o=this.toUtf8(new Uint8Array(e.buffer,e.byteOffset+n,r));switch(n+=r,e.getUint8(n++)){case 0:t[o]={type:Ep,value:!0};break;case 1:t[o]={type:Ep,value:!1};break;case 2:t[o]={type:Ip,value:e.getInt8(n++)};break;case 3:t[o]={type:Ap,value:e.getInt16(n,!1)},n+=2;break;case 4:t[o]={type:Pp,value:e.getInt32(n,!1)},n+=4;break;case 5:t[o]={type:Op,value:new bp(new Uint8Array(e.buffer,e.byteOffset+n,8))},n+=8;break;case 6:var i=e.getUint16(n,!1);n+=2,t[o]={type:kp,value:new Uint8Array(e.buffer,e.byteOffset+n,i)},n+=i;break;case 7:var s=e.getUint16(n,!1);n+=2,t[o]={type:Tp,value:this.toUtf8(new Uint8Array(e.buffer,e.byteOffset+n,s))},n+=s;break;case 8:t[o]={type:xp,value:new Date(new bp(new Uint8Array(e.buffer,e.byteOffset+n,8)).valueOf())},n+=8;break;case 9:s=new Uint8Array(e.buffer,e.byteOffset+n,16),n+=16,t[o]={type:Np,value:Fu(s.subarray(0,4))+"-"+Fu(s.subarray(4,6))+"-"+Fu(s.subarray(6,8))+"-"+Fu(s.subarray(8,10))+"-"+Fu(s.subarray(10))};break;default:throw new Error("Unrecognized header type tag")}}return t},_p);function _p(e,t){this.toUtf8=e,this.fromUtf8=t}(al={})[al.boolTrue=0]="boolTrue",al[al.boolFalse=1]="boolFalse",al[al.byte=2]="byte",al[al.short=3]="short",al[al.integer=4]="integer",al[al.long=5]="long",al[al.byteArray=6]="byteArray",al[al.string=7]="string",al[al.timestamp=8]="timestamp",al[al.uuid=9]="uuid";var Ep="boolean",Ip="byte",Ap="short",Pp="integer",Op="long",kp="binary",Tp="string",xp="timestamp",Np="uuid",Mp=/^[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}$/,Rp=(Up.prototype.marshall=function(e){var t=e.headers,n=e.body,r=this.headerMarshaller.format(t),o=r.byteLength+n.byteLength+16,i=new Uint8Array(o),e=new DataView(i.buffer,i.byteOffset,i.byteLength),t=new l.Crc32;return e.setUint32(0,o,!1),e.setUint32(4,r.byteLength,!1),e.setUint32(8,t.update(i.subarray(0,8)).digest(),!1),i.set(r,12),i.set(n,r.byteLength+12),e.setUint32(o-4,t.update(i.subarray(8,o-4)).digest(),!1),i},Up.prototype.unmarshall=function(e){var e=(t=function(e){var t=e.byteLength,n=e.byteOffset,r=e.buffer;if(t<16)throw new Error("Provided message too short to accommodate event stream message overhead");var o=(a=new DataView(r,n,t)).getUint32(0,!1);if(t!==o)throw new Error("Reported message length does not match received message length");var i=a.getUint32(4,!1),s=a.getUint32(8,!1),e=a.getUint32(t-4,!1),a=(new l.Crc32).update(new Uint8Array(r,n,8));if(s!==a.digest())throw new Error("The prelude checksum specified in the message ("+s+") does not match the calculated CRC32 checksum ("+a.digest()+")");if(a.update(new Uint8Array(r,n+8,t-12)),e!==a.digest())throw new Error("The message checksum ("+a.digest()+") did not match the expected value of "+e);return{headers:new DataView(r,n+8+4,i),body:new Uint8Array(r,n+8+4+i,o-i-16)}}(e)).headers,t=t.body;return{headers:this.headerMarshaller.parse(e),body:t}},Up.prototype.formatHeaders=function(e){return this.headerMarshaller.format(e)},Up);function Up(e,t){this.headerMarshaller=new Cp(e,t)}var Dp=(Lp.prototype.deserialize=function(e,t){var s,a,u,c,l,n,p=e=(s=e,u=a=0,l=c=null,(n={})[Symbol.asyncIterator]=function(){return J(this,arguments,function(){var t,n,r,o,i;return H(this,function(e){switch(e.label){case 0:t=s[Symbol.asyncIterator](),e.label=1;case 1:return[4,Y(t.next())];case 2:return o=e.sent(),n=o.value,o.done?a?[3,4]:[4,Y(void 0)]:[3,10];case 3:return[2,e.sent()];case 4:return a!==u?[3,7]:[4,Y(c)];case 5:return[4,e.sent()];case 6:return e.sent(),[3,8];case 7:throw new Error("Truncated event message received.");case 8:return[4,Y(void 0)];case 9:return[2,e.sent()];case 10:i=n.length,r=0,e.label=11;case 11:if(!(r<i))return[3,15];if(!c){if(o=i-r,l=l||new Uint8Array(4),o=Math.min(4-u,o),l.set(n.slice(r,r+o),u),r+=o,(u+=o)<4)return[3,15];!function(e){if("number"!=typeof e)throw new Error("Attempted to allocate an event message where size was not a number: "+e);a=e,u=4,c=new Uint8Array(e),new DataView(c.buffer).setUint32(0,e,!1)}(new DataView(l.buffer).getUint32(0,!1)),l=null}return i=Math.min(a-u,i-r),c.set(n.slice(r,r+i),u),u+=i,r+=i,a&&a===u?[4,Y(c)]:[3,14];case 12:return[4,e.sent()];case 13:e.sent(),c=null,u=a=0,e.label=14;case 14:return[3,11];case 15:return[3,1];case 16:return[2]}})})},n),d={eventMarshaller:this.eventMarshaller,deserializer:t,toUtf8:this.utfEncoder};return(t={})[Symbol.asyncIterator]=function(){return J(this,arguments,function(){var t,n,r,o,i,s,a,u,c,l;return H(this,function(e){switch(e.label){case 0:e.trys.push([0,12,13,18]),t=Z(p),e.label=1;case 1:return[4,Y(t.next())];case 2:if((n=e.sent()).done)return[3,11];if(s=n.value,r=d.eventMarshaller.unmarshall(s),"error"!==(o=r.headers[":message-type"].value))return[3,3];throw(s=new Error(r.headers[":error-message"].value||"UnknownError")).name=r.headers[":error-code"].value,s;case 3:return"exception"!==o?[3,5]:(i=r.headers[":exception-type"].value,(a={})[i]=r,[4,Y(d.deserializer(a))]);case 4:if((s=e.sent()).$unknown)throw(a=new Error(d.toUtf8(r.body))).name=i,a;throw s[i];case 5:return"event"!==o?[3,9]:((u={})[r.headers[":event-type"].value]=r,[4,Y(d.deserializer(u))]);case 6:return(u=e.sent()).$unknown?[3,10]:[4,Y(u)];case 7:return[4,e.sent()];case 8:return e.sent(),[3,10];case 9:throw Error("Unrecognizable event type: "+r.headers[":event-type"].value);case 10:return[3,1];case 11:return[3,18];case 12:return c={error:c=e.sent()},[3,18];case 13:return e.trys.push([13,,16,17]),n&&!n.done&&(l=t.return)?[4,Y(l.call(t))]:[3,15];case 14:e.sent(),e.label=15;case 15:return[3,17];case 16:if(c)throw c.error;return[7];case 17:return[7];case 18:return[2]}})})},t},Lp.prototype.serialize=function(s,a){var u=this,e={};return e[Symbol.asyncIterator]=function(){return J(this,arguments,function(){var t,n,r,o,i;return H(this,function(e){switch(e.label){case 0:e.trys.push([0,7,8,13]),t=Z(s),e.label=1;case 1:return[4,Y(t.next())];case 2:return(n=e.sent()).done?[3,6]:(r=n.value,[4,Y(u.eventMarshaller.marshall(a(r)))]);case 3:return[4,e.sent()];case 4:e.sent(),e.label=5;case 5:return[3,1];case 6:return[3,13];case 7:return o={error:o=e.sent()},[3,13];case 8:return e.trys.push([8,,11,12]),n&&!n.done&&(i=t.return)?[4,Y(i.call(t))]:[3,10];case 9:e.sent(),e.label=10;case 10:return[3,12];case 11:if(o)throw o.error;return[7];case 12:return[7];case 13:return[4,Y(new Uint8Array(0))];case 14:return[4,e.sent()];case 15:return e.sent(),[2]}})})},e},Lp);function Lp(e){var t=e.utf8Encoder,e=e.utf8Decoder;this.eventMarshaller=new Rp(t,e),this.utfEncoder=t}var Fp,jp,Bp=(Vp.prototype.deserialize=function(e,t){return e="function"==typeof e[Symbol.asyncIterator]?e:function(i){return J(this,arguments,function(){var t,n,r,o;return H(this,function(e){switch(e.label){case 0:n=t=!1,r=new Array,i.on("error",function(e){if(t=t||!0,e)throw e}),i.on("data",function(e){r.push(e)}),i.on("end",function(){t=!0}),e.label=1;case 1:return n?[3,6]:[4,Y(new Promise(function(e){return setTimeout(function(){return e(r.shift())},0)}))];case 2:return(o=e.sent())?[4,Y(o)]:[3,5];case 3:return[4,e.sent()];case 4:e.sent(),e.label=5;case 5:return n=t&&0===r.length,[3,1];case 6:return[2]}})})}(e),this.universalMarshaller.deserialize(e,t)},Vp.prototype.serialize=function(e,t){if(t=this.universalMarshaller.serialize(e,t),"function"==typeof s.Readable.from)return s.Readable.from(t);var r=t[Symbol.asyncIterator](),n=new s.Readable({autoDestroy:!0,objectMode:!0,read:function(){return K(this,void 0,void 0,function(){var n=this;return H(this,function(e){return r.next().then(function(e){var t=e.done,e=e.value;t?n.push(null):n.push(e)}).catch(function(e){n.destroy(e)}),[2]})})}});return n.on("error",function(){n.destroy()}),n.on("end",function(){n.destroy()}),n},Vp);function Vp(e){var t=e.utf8Encoder,e=e.utf8Decoder;this.eventMarshaller=new Rp(t,e),this.universalMarshaller=new Dp({utf8Decoder:e,utf8Encoder:t})}function zp(t){return t&&["provider"].find(function(e){return t.hasOwnProperty(e)})}function qp(e){return void 0!==e.redirectSignIn}(al=Fp=Fp||{}).Cognito="COGNITO",al.Google="Google",al.Facebook="Facebook",al.Amazon="LoginWithAmazon",al.Apple="SignInWithApple",(al=jp=jp||{}).NoConfig="noConfig",al.MissingAuthConfig="missingAuthConfig",al.EmptyUsername="emptyUsername",al.InvalidUsername="invalidUsername",al.EmptyPassword="emptyPassword",al.EmptyCode="emptyCode",al.SignUpError="signUpError",al.NoMFA="noMFA",al.InvalidMFA="invalidMFA",al.EmptyChallengeResponse="emptyChallengeResponse",al.NoUserSession="noUserSession",al.Default="default";var Kp,Hp,Gp=((Hp=Wp.prototype).getUsername=function(){return this.username},Hp.getPassword=function(){return this.password},Hp.getValidationData=function(){return this.validationData},Hp.getAuthParameters=function(){return this.authParameters},Hp.getClientMetadata=function(){return this.clientMetadata},Wp);function Wp(e){var t=(o=e||{}).ValidationData,n=o.Username,r=o.Password,e=o.AuthParameters,o=o.ClientMetadata;this.validationData=t||{},this.authParameters=e||{},this.clientMetadata=o||{},this.username=n,this.password=r}if(!(Kp=!(Kp=!(Kp="undefined"!=typeof window&&window.crypto?window.crypto:Kp)&&"undefined"!=typeof window&&window.msCrypto?window.msCrypto:Kp)&&void 0!==or&&or.crypto?or.crypto:Kp)&&"function"==typeof require)try{Kp=require("crypto")}catch(e){}var $p,Yp=(($p=Jp.prototype).random=function(e){for(var t=[],n=0;n<e;n+=4)t.push(function(){if(Kp){if("function"==typeof Kp.getRandomValues)try{return Kp.getRandomValues(new Uint32Array(1))[0]}catch(e){}if("function"==typeof Kp.randomBytes)try{return Kp.randomBytes(4).readInt32LE()}catch(e){}}throw new Error("Native crypto module could not be used to get secure random number.")}());return new Jp(t,e)},$p.toString=function(){return function(e){for(var t=e.words,n=e.sigBytes,r=[],o=0;o<n;o++){var i=t[o>>>2]>>>24-o%4*8&255;r.push((i>>>4).toString(16)),r.push((15&i).toString(16))}return r.join("")}(this)},Jp);function Jp(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:4*e.length}function Zp(e,t){null!=e&&this.fromString(e,t)}function Qp(){return new Zp(null)}or=(al="undefined"!=typeof navigator)&&"Microsoft Internet Explorer"==navigator.appName?(Zp.prototype.am=function(e,t,n,r,o,i){for(var s=32767&t,a=t>>15;0<=--i;){var u=32767&this[e],c=this[e++]>>15,l=a*u+c*s;o=((u=s*u+((32767&l)<<15)+n[r]+(1073741823&o))>>>30)+(l>>>15)+a*c+(o>>>30),n[r++]=1073741823&u}return o},30):al&&"Netscape"!=navigator.appName?(Zp.prototype.am=function(e,t,n,r,o,i){for(;0<=--i;){var s=t*this[e++]+n[r]+o;o=Math.floor(s/67108864),n[r++]=67108863&s}return o},26):(Zp.prototype.am=function(e,t,n,r,o,i){for(var s=16383&t,a=t>>14;0<=--i;){var u=16383&this[e],c=this[e++]>>14,l=a*u+c*s;o=((u=s*u+((16383&l)<<14)+n[r]+o)>>28)+(l>>14)+a*c,n[r++]=268435455&u}return o},28),Zp.prototype.DB=or,Zp.prototype.DM=(1<<or)-1,Zp.prototype.DV=1<<or,Zp.prototype.FV=Math.pow(2,52),Zp.prototype.F1=52-or,Zp.prototype.F2=2*or-52;for(var Xp=new Array,ed="0".charCodeAt(0),td=0;td<=9;++td)Xp[ed++]=td;for(ed="a".charCodeAt(0),td=10;td<36;++td)Xp[ed++]=td;for(ed="A".charCodeAt(0),td=10;td<36;++td)Xp[ed++]=td;function nd(e){return"0123456789abcdefghijklmnopqrstuvwxyz".charAt(e)}function rd(e){var t=Qp();return t.fromInt(e),t}function od(e){var t,n=1;return 0!=(t=e>>>16)&&(e=t,n+=16),0!=(t=e>>8)&&(e=t,n+=8),0!=(t=e>>4)&&(e=t,n+=4),0!=(t=e>>2)&&(e=t,n+=2),0!=(t=e>>1)&&(e=t,n+=1),n}function id(e){this.m=e,this.mp=e.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<e.DB-15)-1,this.mt2=2*e.t}function sd(e){return d.Buffer.from((new Yp).random(e).toString(),"hex")}id.prototype.convert=function(e){var t=Qp();return e.abs().dlShiftTo(this.m.t,t),t.divRemTo(this.m,null,t),e.s<0&&0<t.compareTo(Zp.ZERO)&&this.m.subTo(t,t),t},id.prototype.revert=function(e){var t=Qp();return e.copyTo(t),this.reduce(t),t},id.prototype.reduce=function(e){for(;e.t<=this.mt2;)e[e.t++]=0;for(var t=0;t<this.m.t;++t){var n=32767&e[t],r=n*this.mpl+((n*this.mph+(e[t]>>15)*this.mpl&this.um)<<15)&e.DM;for(e[n=t+this.m.t]+=this.m.am(0,r,e,t,0,this.m.t);e[n]>=e.DV;)e[n]-=e.DV,e[++n]++}e.clamp(),e.drShiftTo(this.m.t,e),0<=e.compareTo(this.m)&&e.subTo(this.m,e)},id.prototype.mulTo=function(e,t,n){e.multiplyTo(t,n),this.reduce(n)},id.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)},Zp.prototype.copyTo=function(e){for(var t=this.t-1;0<=t;--t)e[t]=this[t];e.t=this.t,e.s=this.s},Zp.prototype.fromInt=function(e){this.t=1,this.s=e<0?-1:0,0<e?this[0]=e:e<-1?this[0]=e+this.DV:this.t=0},Zp.prototype.fromString=function(e,t){var n;if(16==t)n=4;else if(8==t)n=3;else if(2==t)n=1;else if(32==t)n=5;else{if(4!=t)throw new Error("Only radix 2, 4, 8, 16, 32 are supported");n=2}this.t=0,this.s=0;for(var r=e.length,o=!1,i=0;0<=--r;){var s=(s=r,null==(s=Xp[e.charCodeAt(s)])?-1:s);s<0?"-"==e.charAt(r)&&(o=!0):(o=!1,0==i?this[this.t++]=s:i+n>this.DB?(this[this.t-1]|=(s&(1<<this.DB-i)-1)<<i,this[this.t++]=s>>this.DB-i):this[this.t-1]|=s<<i,(i+=n)>=this.DB&&(i-=this.DB))}this.clamp(),o&&Zp.ZERO.subTo(this,this)},Zp.prototype.clamp=function(){for(var e=this.s&this.DM;0<this.t&&this[this.t-1]==e;)--this.t},Zp.prototype.dlShiftTo=function(e,t){for(var n=this.t-1;0<=n;--n)t[n+e]=this[n];for(n=e-1;0<=n;--n)t[n]=0;t.t=this.t+e,t.s=this.s},Zp.prototype.drShiftTo=function(e,t){for(var n=e;n<this.t;++n)t[n-e]=this[n];t.t=Math.max(this.t-e,0),t.s=this.s},Zp.prototype.lShiftTo=function(e,t){for(var n=e%this.DB,r=this.DB-n,o=(1<<r)-1,i=Math.floor(e/this.DB),s=this.s<<n&this.DM,a=this.t-1;0<=a;--a)t[a+i+1]=this[a]>>r|s,s=(this[a]&o)<<n;for(a=i-1;0<=a;--a)t[a]=0;t[i]=s,t.t=this.t+i+1,t.s=this.s,t.clamp()},Zp.prototype.rShiftTo=function(e,t){t.s=this.s;var n=Math.floor(e/this.DB);if(n>=this.t)t.t=0;else{var r=e%this.DB,o=this.DB-r,i=(1<<r)-1;t[0]=this[n]>>r;for(var s=n+1;s<this.t;++s)t[s-n-1]|=(this[s]&i)<<o,t[s-n]=this[s]>>r;0<r&&(t[this.t-n-1]|=(this.s&i)<<o),t.t=this.t-n,t.clamp()}},Zp.prototype.subTo=function(e,t){for(var n=0,r=0,o=Math.min(e.t,this.t);n<o;)r+=this[n]-e[n],t[n++]=r&this.DM,r>>=this.DB;if(e.t<this.t){for(r-=e.s;n<this.t;)r+=this[n],t[n++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;n<e.t;)r-=e[n],t[n++]=r&this.DM,r>>=this.DB;r-=e.s}t.s=r<0?-1:0,r<-1?t[n++]=this.DV+r:0<r&&(t[n++]=r),t.t=n,t.clamp()},Zp.prototype.multiplyTo=function(e,t){var n=this.abs(),r=e.abs(),o=n.t;for(t.t=o+r.t;0<=--o;)t[o]=0;for(o=0;o<r.t;++o)t[o+n.t]=n.am(0,r[o],t,o,0,n.t);t.s=0,t.clamp(),this.s!=e.s&&Zp.ZERO.subTo(t,t)},Zp.prototype.squareTo=function(e){for(var t=this.abs(),n=e.t=2*t.t;0<=--n;)e[n]=0;for(n=0;n<t.t-1;++n){var r=t.am(n,t[n],e,2*n,0,1);(e[n+t.t]+=t.am(n+1,2*t[n],e,2*n+1,r,t.t-n-1))>=t.DV&&(e[n+t.t]-=t.DV,e[n+t.t+1]=1)}0<e.t&&(e[e.t-1]+=t.am(n,t[n],e,2*n,0,1)),e.s=0,e.clamp()},Zp.prototype.divRemTo=function(e,t,n){var r=e.abs();if(!(r.t<=0)){if((c=this.abs()).t<r.t)return null!=t&&t.fromInt(0),void(null!=n&&this.copyTo(n));null==n&&(n=Qp());var o=Qp(),i=this.s,s=e.s;0<(e=this.DB-od(r[r.t-1]))?(r.lShiftTo(e,o),c.lShiftTo(e,n)):(r.copyTo(o),c.copyTo(n));var a=o.t,u=o[a-1];if(0!=u){var c=u*(1<<this.F1)+(1<a?o[a-2]>>this.F2:0),l=this.FV/c,p=(1<<this.F1)/c,d=1<<this.F2,f=n.t,h=f-a,m=null==t?Qp():t;for(o.dlShiftTo(h,m),0<=n.compareTo(m)&&(n[n.t++]=1,n.subTo(m,n)),Zp.ONE.dlShiftTo(a,m),m.subTo(o,o);o.t<a;)o[o.t++]=0;for(;0<=--h;){var g=n[--f]==u?this.DM:Math.floor(n[f]*l+(n[f-1]+d)*p);if((n[f]+=o.am(0,g,n,h,0,a))<g)for(o.dlShiftTo(h,m),n.subTo(m,n);n[f]<--g;)n.subTo(m,n)}null!=t&&(n.drShiftTo(a,t),i!=s&&Zp.ZERO.subTo(t,t)),n.t=a,n.clamp(),0<e&&n.rShiftTo(e,n),i<0&&Zp.ZERO.subTo(n,n)}}},Zp.prototype.invDigit=function(){if(this.t<1)return 0;var e=this[0];if(0==(1&e))return 0;var t=3&e;return 0<(t=(t=(t=(t=t*(2-(15&e)*t)&15)*(2-(255&e)*t)&255)*(2-((65535&e)*t&65535))&65535)*(2-e*t%this.DV)%this.DV)?this.DV-t:-t},Zp.prototype.addTo=function(e,t){for(var n=0,r=0,o=Math.min(e.t,this.t);n<o;)r+=this[n]+e[n],t[n++]=r&this.DM,r>>=this.DB;if(e.t<this.t){for(r+=e.s;n<this.t;)r+=this[n],t[n++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;n<e.t;)r+=e[n],t[n++]=r&this.DM,r>>=this.DB;r+=e.s}t.s=r<0?-1:0,0<r?t[n++]=r:r<-1&&(t[n++]=this.DV+r),t.t=n,t.clamp()},Zp.prototype.toString=function(e){if(this.s<0)return"-"+this.negate().toString(e);var t;if(16==e)t=4;else if(8==e)t=3;else if(2==e)t=1;else if(32==e)t=5;else{if(4!=e)throw new Error("Only radix 2, 4, 8, 16, 32 are supported");t=2}var n,r=(1<<t)-1,o=!1,i="",s=this.t,a=this.DB-s*this.DB%t;if(0<s--)for(a<this.DB&&0<(n=this[s]>>a)&&(o=!0,i=nd(n));0<=s;)a<t?(n=(this[s]&(1<<a)-1)<<t-a,n|=this[--s]>>(a+=this.DB-t)):(n=this[s]>>(a-=t)&r,a<=0&&(a+=this.DB,--s)),(o=0<n||o)&&(i+=nd(n));return o?i:"0"},Zp.prototype.negate=function(){var e=Qp();return Zp.ZERO.subTo(this,e),e},Zp.prototype.abs=function(){return this.s<0?this.negate():this},Zp.prototype.compareTo=function(e){var t=this.s-e.s;if(0!=t)return t;var n=this.t;if(0!=(t=n-e.t))return this.s<0?-t:t;for(;0<=--n;)if(0!=(t=this[n]-e[n]))return t;return 0},Zp.prototype.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+od(this[this.t-1]^this.s&this.DM)},Zp.prototype.mod=function(e){var t=Qp();return this.abs().divRemTo(e,null,t),this.s<0&&0<t.compareTo(Zp.ZERO)&&e.subTo(t,t),t},Zp.prototype.equals=function(e){return 0==this.compareTo(e)},Zp.prototype.add=function(e){var t=Qp();return this.addTo(e,t),t},Zp.prototype.subtract=function(e){var t=Qp();return this.subTo(e,t),t},Zp.prototype.multiply=function(e){var t=Qp();return this.multiplyTo(e,t),t},Zp.prototype.divide=function(e){var t=Qp();return this.divRemTo(e,t,null),t},Zp.prototype.modPow=function(e,t,n){var r,o=e.bitLength(),i=rd(1),s=new id(t);if(o<=0)return i;r=o<18?1:o<48?3:o<144?4:o<768?5:6;var a=new Array,u=3,c=r-1,l=(1<<r)-1;if(a[1]=s.convert(this),1<r){var p=Qp();for(s.sqrTo(a[1],p);u<=l;)a[u]=Qp(),s.mulTo(p,a[u-2],a[u]),u+=2}for(var d,f,h=e.t-1,m=!0,g=Qp(),o=od(e[h])-1;0<=h;){for(c<=o?d=e[h]>>o-c&l:(d=(e[h]&(1<<o+1)-1)<<c-o,0<h&&(d|=e[h-1]>>this.DB+o-c)),u=r;0==(1&d);)d>>=1,--u;if((o-=u)<0&&(o+=this.DB,--h),m)a[d].copyTo(i),m=!1;else{for(;1<u;)s.sqrTo(i,g),s.sqrTo(g,i),u-=2;0<u?s.sqrTo(i,g):(f=i,i=g,g=f),s.mulTo(g,a[d],i)}for(;0<=h&&0==(e[h]&1<<o);)s.sqrTo(i,g),f=i,i=g,g=f,--o<0&&(o=this.DB-1,--h)}return n(null,t=s.revert(i)),t},Zp.ZERO=rd(0),Zp.ONE=rd(1);var ad,ud,cd=((ud=pd.prototype).getSmallAValue=function(){return this.smallAValue},ud.getLargeAValue=function(n){var r=this;this.largeAValue?n(null,this.largeAValue):this.calculateA(this.smallAValue,function(e,t){e&&n(e,null),r.largeAValue=t,n(null,r.largeAValue)})},ud.generateRandomSmallA=function(){return new Zp(sd(128).toString("hex"),16).mod(this.N)},ud.generateRandomString=function(){return sd(40).toString("base64")},ud.getRandomPassword=function(){return this.randomPassword},ud.getSaltDevices=function(){return this.SaltToHashDevices},ud.getVerifierDevices=function(){return this.verifierDevices},ud.generateHashDevice=function(e,t,n){var r=this;this.randomPassword=this.generateRandomString(),e=""+e+t+":"+this.randomPassword,t=this.hash(e),e=sd(16).toString("hex"),this.SaltToHashDevices=this.padHex(new Zp(e,16)),this.g.modPow(new Zp(this.hexHash(this.SaltToHashDevices+t),16),this.N,function(e,t){e&&n(e,null),r.verifierDevices=r.padHex(t),n(null,null)})},ud.calculateA=function(e,n){var r=this;this.g.modPow(e,this.N,function(e,t){e&&n(e,null),t.mod(r.N).equals(Zp.ZERO)&&n(new Error("Illegal paramater. A mod N cannot be 0."),null),n(null,t)})},ud.calculateU=function(e,t){return this.UHexHash=this.hexHash(this.padHex(e)+this.padHex(t)),new Zp(this.UHexHash,16)},ud.hash=function(e){return e=e instanceof d.Buffer?w.lib.WordArray.create(e):e,e=_(e).toString(),new Array(64-e.length).join("0")+e},ud.hexHash=function(e){return this.hash(d.Buffer.from(e,"hex"))},ud.computehkdf=function(e,t){var n=w.lib.WordArray.create(d.Buffer.concat([this.infoBits,d.Buffer.from(String.fromCharCode(1),"utf8")])),e=e instanceof d.Buffer?w.lib.WordArray.create(e):e,t=t instanceof d.Buffer?w.lib.WordArray.create(t):t,t=I(e,t),t=I(n,t);return d.Buffer.from(t.toString(),"hex").slice(0,16)},ud.getPasswordAuthenticationKey=function(e,t,n,r,o){var i=this;if(n.mod(this.N).equals(Zp.ZERO))throw new Error("B cannot be zero.");if(this.UValue=this.calculateU(this.largeAValue,n),this.UValue.equals(Zp.ZERO))throw new Error("U cannot be zero.");t=""+this.poolName+e+":"+t,t=this.hash(t),t=new Zp(this.hexHash(this.padHex(r)+t),16),this.calculateS(t,n,function(e,t){e&&o(e,null),t=i.computehkdf(d.Buffer.from(i.padHex(t),"hex"),d.Buffer.from(i.padHex(i.UValue.toString(16)),"hex")),o(null,t)})},ud.calculateS=function(n,r,o){var i=this;this.g.modPow(n,this.N,function(e,t){e&&o(e,null),r.subtract(i.k.multiply(t)).modPow(i.smallAValue.add(i.UValue.multiply(n)),i.N,function(e,t){e&&o(e,null),o(null,t.mod(i.N))})})},ud.getNewPasswordRequiredChallengeUserAttributePrefix=function(){return"userAttributes."},ud.padHex=function(e){return(e=e.toString(16)).length%2==1?e="0"+e:-1!=="89ABCDEFabcdef".indexOf(e[0])&&(e="00"+e),e},pd),al=((ad=ld.prototype).getJwtToken=function(){return this.jwtToken},ad.getExpiration=function(){return this.payload.exp},ad.getIssuedAt=function(){return this.payload.iat},ad.decodePayload=function(){var e=this.jwtToken.split(".")[1];try{return JSON.parse(d.Buffer.from(e,"base64").toString("utf8"))}catch(e){return{}}},ld);function ld(e){this.jwtToken=e||"",this.payload=this.decodePayload()}function pd(e){this.N=new Zp("FFFFFFFFFFFFFFFFC90FDAA22168C234C4C6628B80DC1CD129024E088A67CC74020BBEA63B139B22514A08798E3404DDEF9519B3CD3A431B302B0A6DF25F14374FE1356D6D51C245E485B576625E7EC6F44C42E9A637ED6B0BFF5CB6F406B7EDEE386BFB5A899FA5AE9F24117C4B1FE649286651ECE45B3DC2007CB8A163BF0598DA48361C55D39A69163FA8FD24CF5F83655D23DCA3AD961C62F356208552BB9ED529077096966D670C354E4ABC9804F1746C08CA18217C32905E462E36CE3BE39E772C180E86039B2783A2EC07A28FB5C55DF06F4C52C9DE2BCBF6955817183995497CEA956AE515D2261898FA051015728E5A8AAAC42DAD33170D04507A33A85521ABDF1CBA64ECFB850458DBEF0A8AEA71575D060C7DB3970F85A6E1E4C7ABF5AE8CDB0933D71E8C94E04A25619DCEE3D2261AD2EE6BF12FFA06D98A0864D87602733EC86A64521F2B18177B200CBBE117577A615D6C770988C0BAD946E208E24FA074E5AB3143DB5BFCE0FD108E4B82D120A93AD2CAFFFFFFFFFFFFFFFF",16),this.g=new Zp("2",16),this.k=new Zp(this.hexHash("00"+this.N.toString(16)+"0"+this.g.toString(16)),16),this.smallAValue=this.generateRandomSmallA(),this.getLargeAValue(function(){}),this.infoBits=d.Buffer.from("Caldera Derived Key","utf8"),this.poolName=e}function dd(e,t){return(dd=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var fd,hd,md,gd=(md=fd=al,(hd=yd).prototype=Object.create(md.prototype),dd(hd.prototype.constructor=hd,md),yd);function yd(e){return e=(void 0===e?{}:e).AccessToken,fd.call(this,e||"")||this}function vd(e,t){return(vd=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var bd,wd,Sd,Cd,_d,Ed,Id=(Ed=Cd=al,(_d=Kd).prototype=Object.create(Ed.prototype),vd(_d.prototype.constructor=_d,Ed),Kd),Ad=(qd.prototype.getToken=function(){return this.token},qd),Pd=((Sd=zd.prototype).getIdToken=function(){return this.idToken},Sd.getRefreshToken=function(){return this.refreshToken},Sd.getAccessToken=function(){return this.accessToken},Sd.getClockDrift=function(){return this.clockDrift},Sd.calculateClockDrift=function(){return Math.floor(new Date/1e3)-Math.min(this.accessToken.getIssuedAt(),this.idToken.getIssuedAt())},Sd.isValid=function(){var e=Math.floor(new Date/1e3)-this.clockDrift;return e<this.accessToken.getExpiration()&&e<this.idToken.getExpiration()},zd),Od=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],kd=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],Td=(Vd.prototype.getNowString=function(){var e=new Date,t=kd[e.getUTCDay()],n=Od[e.getUTCMonth()],r=e.getUTCDate(),o=e.getUTCHours();o<10&&(o="0"+o);var i=e.getUTCMinutes();i<10&&(i="0"+i);var s=e.getUTCSeconds();return t+" "+n+" "+r+" "+o+":"+i+":"+(s=s<10?"0"+s:s)+" UTC "+e.getUTCFullYear()},Vd),xd=((wd=Bd.prototype).getValue=function(){return this.Value},wd.setValue=function(e){return this.Value=e,this},wd.getName=function(){return this.Name},wd.setName=function(e){return this.Name=e,this},wd.toString=function(){return JSON.stringify(this)},wd.toJSON=function(){return{Name:this.Name,Value:this.Value}},Bd),Nd={},Md=(jd.setItem=function(e,t){return Nd[e]=t,Nd[e]},jd.getItem=function(e){return Object.prototype.hasOwnProperty.call(Nd,e)?Nd[e]:void 0},jd.removeItem=function(e){return delete Nd[e]},jd.clear=function(){return Nd={}},jd),Rd=(Fd.prototype.getStorage=function(){return this.storageWindow},Fd),Ud="undefined"!=typeof navigator?navigator.userAgent:"nodejs",Dd=((bd=Ld.prototype).setSignInUserSession=function(e){this.clearCachedUserData(),this.signInUserSession=e,this.cacheTokens()},bd.getSignInUserSession=function(){return this.signInUserSession},bd.getUsername=function(){return this.username},bd.getAuthenticationFlowType=function(){return this.authenticationFlowType},bd.setAuthenticationFlowType=function(e){this.authenticationFlowType=e},bd.initiateAuth=function(e,r){var o=this,t=e.getAuthParameters();t.USERNAME=this.username,e=0!==Object.keys(e.getValidationData()).length?e.getValidationData():e.getClientMetadata(),e={AuthFlow:"CUSTOM_AUTH",ClientId:this.pool.getClientId(),AuthParameters:t,ClientMetadata:e},this.getUserContextData()&&(e.UserContextData=this.getUserContextData()),this.client.request("InitiateAuth",e,function(e,t){if(e)return r.onFailure(e);var n=t.ChallengeName,e=t.ChallengeParameters;return"CUSTOM_CHALLENGE"===n?(o.Session=t.Session,r.customChallenge(e)):(o.signInUserSession=o.getCognitoUserSession(t.AuthenticationResult),o.cacheTokens(),r.onSuccess(o.signInUserSession))})},bd.authenticateUser=function(e,t){return"USER_PASSWORD_AUTH"===this.authenticationFlowType?this.authenticateUserPlainUsernamePassword(e,t):"USER_SRP_AUTH"===this.authenticationFlowType||"CUSTOM_AUTH"===this.authenticationFlowType?this.authenticateUserDefaultAuth(e,t):t.onFailure(new Error("Authentication flow type is invalid."))},bd.authenticateUserDefaultAuth=function(n,a){var i,u,c=this,l=new cd(this.pool.getUserPoolId().split("_")[1]),p=new Td,r={};null!=this.deviceKey&&(r.DEVICE_KEY=this.deviceKey),r.USERNAME=this.username,l.getLargeAValue(function(e,t){e&&a.onFailure(e),r.SRP_A=t.toString(16),"CUSTOM_AUTH"===c.authenticationFlowType&&(r.CHALLENGE_NAME="SRP_A");var s=0!==Object.keys(n.getValidationData()).length?n.getValidationData():n.getClientMetadata(),t={AuthFlow:c.authenticationFlowType,ClientId:c.pool.getClientId(),AuthParameters:r,ClientMetadata:s};c.getUserContextData(c.username)&&(t.UserContextData=c.getUserContextData(c.username)),c.client.request("InitiateAuth",t,function(e,r){if(e)return a.onFailure(e);var o=r.ChallengeParameters;c.username=o.USER_ID_FOR_SRP,i=new Zp(o.SRP_B,16),u=new Zp(o.SALT,16),c.getCachedDeviceKeyAndPassword(),l.getPasswordAuthenticationKey(c.username,n.getPassword(),i,u,function(e,t){e&&a.onFailure(e);var n=p.getNowString(),e=w.lib.WordArray.create(d.Buffer.concat([d.Buffer.from(c.pool.getUserPoolId().split("_")[1],"utf8"),d.Buffer.from(c.username,"utf8"),d.Buffer.from(o.SECRET_BLOCK,"base64"),d.Buffer.from(n,"utf8")])),t=w.lib.WordArray.create(t),t=A.stringify(I(e,t)),i={};i.USERNAME=c.username,i.PASSWORD_CLAIM_SECRET_BLOCK=o.SECRET_BLOCK,i.TIMESTAMP=n,i.PASSWORD_CLAIM_SIGNATURE=t,null!=c.deviceKey&&(i.DEVICE_KEY=c.deviceKey),n=function n(r,o){return c.client.request("RespondToAuthChallenge",r,function(e,t){return e&&"ResourceNotFoundException"===e.code&&-1!==e.message.toLowerCase().indexOf("device")?(i.DEVICE_KEY=null,c.deviceKey=null,c.randomPassword=null,c.deviceGroupKey=null,c.clearCachedDeviceKeyAndPassword(),n(r,o)):o(e,t)})},t={ChallengeName:"PASSWORD_VERIFIER",ClientId:c.pool.getClientId(),ChallengeResponses:i,Session:r.Session,ClientMetadata:s},c.getUserContextData()&&(t.UserContextData=c.getUserContextData()),n(t,function(e,t){return e?a.onFailure(e):c.authenticateUserInternal(t,l,a)})})})})},bd.authenticateUserPlainUsernamePassword=function(e,n){var r,o=this,t={};t.USERNAME=this.username,t.PASSWORD=e.getPassword(),t.PASSWORD?(r=new cd(this.pool.getUserPoolId().split("_")[1]),this.getCachedDeviceKeyAndPassword(),null!=this.deviceKey&&(t.DEVICE_KEY=this.deviceKey),e=0!==Object.keys(e.getValidationData()).length?e.getValidationData():e.getClientMetadata(),e={AuthFlow:"USER_PASSWORD_AUTH",ClientId:this.pool.getClientId(),AuthParameters:t,ClientMetadata:e},this.getUserContextData(this.username)&&(e.UserContextData=this.getUserContextData(this.username)),this.client.request("InitiateAuth",e,function(e,t){return e?n.onFailure(e):o.authenticateUserInternal(t,r,n)})):n.onFailure(new Error("PASSWORD parameter is required"))},bd.authenticateUserInternal=function(n,t,r){var o=this,e=n.ChallengeName,i=n.ChallengeParameters;if("SMS_MFA"===e)return this.Session=n.Session,r.mfaRequired(e,i);if("SELECT_MFA_TYPE"===e)return this.Session=n.Session,r.selectMFAType(e,i);if("MFA_SETUP"===e)return this.Session=n.Session,r.mfaSetup(e,i);if("SOFTWARE_TOKEN_MFA"===e)return this.Session=n.Session,r.totpRequired(e,i);if("CUSTOM_CHALLENGE"===e)return this.Session=n.Session,r.customChallenge(i);if("NEW_PASSWORD_REQUIRED"===e){this.Session=n.Session;var s=null,a=null,u=[],c=t.getNewPasswordRequiredChallengeUserAttributePrefix();if(i&&(s=JSON.parse(n.ChallengeParameters.userAttributes),a=JSON.parse(n.ChallengeParameters.requiredAttributes)),a)for(var l=0;l<a.length;l++)u[l]=a[l].substr(c.length);return r.newPasswordRequired(s,u)}if("DEVICE_SRP_AUTH"!==e){this.signInUserSession=this.getCognitoUserSession(n.AuthenticationResult),this.challengeName=e,this.cacheTokens();var p=n.AuthenticationResult.NewDeviceMetadata;if(null==p)return r.onSuccess(this.signInUserSession);t.generateHashDevice(n.AuthenticationResult.NewDeviceMetadata.DeviceGroupKey,n.AuthenticationResult.NewDeviceMetadata.DeviceKey,function(e){return e?r.onFailure(e):(e={Salt:d.Buffer.from(t.getSaltDevices(),"hex").toString("base64"),PasswordVerifier:d.Buffer.from(t.getVerifierDevices(),"hex").toString("base64")},o.verifierDevices=e.PasswordVerifier,o.deviceGroupKey=p.DeviceGroupKey,o.randomPassword=t.getRandomPassword(),void o.client.request("ConfirmDevice",{DeviceKey:p.DeviceKey,AccessToken:o.signInUserSession.getAccessToken().getJwtToken(),DeviceSecretVerifierConfig:e,DeviceName:Ud},function(e,t){return e?r.onFailure(e):(o.deviceKey=n.AuthenticationResult.NewDeviceMetadata.DeviceKey,o.cacheDeviceKeyAndPassword(),!0===t.UserConfirmationNecessary?r.onSuccess(o.signInUserSession,t.UserConfirmationNecessary):r.onSuccess(o.signInUserSession))}))})}else this.getDeviceResponse(r)},bd.completeNewPasswordChallenge=function(e,t,n,r){var o=this;if(!e)return n.onFailure(new Error("New password is required."));var i=new cd(this.pool.getUserPoolId().split("_")[1]),s=i.getNewPasswordRequiredChallengeUserAttributePrefix(),a={};t&&Object.keys(t).forEach(function(e){a[s+e]=t[e]}),a.NEW_PASSWORD=e,a.USERNAME=this.username,r={ChallengeName:"NEW_PASSWORD_REQUIRED",ClientId:this.pool.getClientId(),ChallengeResponses:a,Session:this.Session,ClientMetadata:r},this.getUserContextData()&&(r.UserContextData=this.getUserContextData()),this.client.request("RespondToAuthChallenge",r,function(e,t){return e?n.onFailure(e):o.authenticateUserInternal(t,i,n)})},bd.getDeviceResponse=function(i,n){var s=this,a=new cd(this.deviceGroupKey),u=new Td,r={};r.USERNAME=this.username,r.DEVICE_KEY=this.deviceKey,a.getLargeAValue(function(e,t){e&&i.onFailure(e),r.SRP_A=t.toString(16),t={ChallengeName:"DEVICE_SRP_AUTH",ClientId:s.pool.getClientId(),ChallengeResponses:r,ClientMetadata:n},s.getUserContextData()&&(t.UserContextData=s.getUserContextData()),s.client.request("RespondToAuthChallenge",t,function(e,r){if(e)return i.onFailure(e);var o=r.ChallengeParameters,t=new Zp(o.SRP_B,16),e=new Zp(o.SALT,16);a.getPasswordAuthenticationKey(s.deviceKey,s.randomPassword,t,e,function(e,t){if(e)return i.onFailure(e);var n=u.getNowString(),e=w.lib.WordArray.create(d.Buffer.concat([d.Buffer.from(s.deviceGroupKey,"utf8"),d.Buffer.from(s.deviceKey,"utf8"),d.Buffer.from(o.SECRET_BLOCK,"base64"),d.Buffer.from(n,"utf8")])),t=w.lib.WordArray.create(t),e=A.stringify(I(e,t));(t={}).USERNAME=s.username,t.PASSWORD_CLAIM_SECRET_BLOCK=o.SECRET_BLOCK,t.TIMESTAMP=n,t.PASSWORD_CLAIM_SIGNATURE=e,t.DEVICE_KEY=s.deviceKey,t={ChallengeName:"DEVICE_PASSWORD_VERIFIER",ClientId:s.pool.getClientId(),ChallengeResponses:t,Session:r.Session},s.getUserContextData()&&(t.UserContextData=s.getUserContextData()),s.client.request("RespondToAuthChallenge",t,function(e,t){return e?i.onFailure(e):(s.signInUserSession=s.getCognitoUserSession(t.AuthenticationResult),s.cacheTokens(),i.onSuccess(s.signInUserSession))})})})})},bd.confirmRegistration=function(e,t,n,r){r={ClientId:this.pool.getClientId(),ConfirmationCode:e,Username:this.username,ForceAliasCreation:t,ClientMetadata:r},this.getUserContextData()&&(r.UserContextData=this.getUserContextData()),this.client.request("ConfirmSignUp",r,function(e){return e?n(e,null):n(null,"SUCCESS")})},bd.sendCustomChallengeAnswer=function(e,n,t){var r=this,o={};o.USERNAME=this.username,o.ANSWER=e;var i=new cd(this.pool.getUserPoolId().split("_")[1]);this.getCachedDeviceKeyAndPassword(),null!=this.deviceKey&&(o.DEVICE_KEY=this.deviceKey),t={ChallengeName:"CUSTOM_CHALLENGE",ChallengeResponses:o,ClientId:this.pool.getClientId(),Session:this.Session,ClientMetadata:t},this.getUserContextData()&&(t.UserContextData=this.getUserContextData()),this.client.request("RespondToAuthChallenge",t,function(e,t){return e?n.onFailure(e):r.authenticateUserInternal(t,i,n)})},bd.sendMFACode=function(e,r,t,n){var o=this,i={};i.USERNAME=this.username,i.SMS_MFA_CODE=e,"SOFTWARE_TOKEN_MFA"===(t=t||"SMS_MFA")&&(i.SOFTWARE_TOKEN_MFA_CODE=e),null!=this.deviceKey&&(i.DEVICE_KEY=this.deviceKey),n={ChallengeName:t,ChallengeResponses:i,ClientId:this.pool.getClientId(),Session:this.Session,ClientMetadata:n},this.getUserContextData()&&(n.UserContextData=this.getUserContextData()),this.client.request("RespondToAuthChallenge",n,function(e,n){if(e)return r.onFailure(e);if("DEVICE_SRP_AUTH"!==n.ChallengeName){if(o.signInUserSession=o.getCognitoUserSession(n.AuthenticationResult),o.cacheTokens(),null==n.AuthenticationResult.NewDeviceMetadata)return r.onSuccess(o.signInUserSession);var t=new cd(o.pool.getUserPoolId().split("_")[1]);t.generateHashDevice(n.AuthenticationResult.NewDeviceMetadata.DeviceGroupKey,n.AuthenticationResult.NewDeviceMetadata.DeviceKey,function(e){return e?r.onFailure(e):(e={Salt:d.Buffer.from(t.getSaltDevices(),"hex").toString("base64"),PasswordVerifier:d.Buffer.from(t.getVerifierDevices(),"hex").toString("base64")},o.verifierDevices=e.PasswordVerifier,o.deviceGroupKey=n.AuthenticationResult.NewDeviceMetadata.DeviceGroupKey,o.randomPassword=t.getRandomPassword(),void o.client.request("ConfirmDevice",{DeviceKey:n.AuthenticationResult.NewDeviceMetadata.DeviceKey,AccessToken:o.signInUserSession.getAccessToken().getJwtToken(),DeviceSecretVerifierConfig:e,DeviceName:Ud},function(e,t){return e?r.onFailure(e):(o.deviceKey=n.AuthenticationResult.NewDeviceMetadata.DeviceKey,o.cacheDeviceKeyAndPassword(),!0===t.UserConfirmationNecessary?r.onSuccess(o.signInUserSession,t.UserConfirmationNecessary):r.onSuccess(o.signInUserSession))}))})}else o.getDeviceResponse(r)})},bd.changePassword=function(e,t,n,r){if(null==this.signInUserSession||!this.signInUserSession.isValid())return n(new Error("User is not authenticated"),null);this.client.request("ChangePassword",{PreviousPassword:e,ProposedPassword:t,AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),ClientMetadata:r},function(e){return e?n(e,null):n(null,"SUCCESS")})},bd.enableMFA=function(t){if(null==this.signInUserSession||!this.signInUserSession.isValid())return t(new Error("User is not authenticated"),null);var e=[];e.push({DeliveryMedium:"SMS",AttributeName:"phone_number"}),this.client.request("SetUserSettings",{MFAOptions:e,AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(e){return e?t(e,null):t(null,"SUCCESS")})},bd.setUserMfaPreference=function(e,t,n){if(null==this.signInUserSession||!this.signInUserSession.isValid())return n(new Error("User is not authenticated"),null);this.client.request("SetUserMFAPreference",{SMSMfaSettings:e,SoftwareTokenMfaSettings:t,AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(e){return e?n(e,null):n(null,"SUCCESS")})},bd.disableMFA=function(t){if(null==this.signInUserSession||!this.signInUserSession.isValid())return t(new Error("User is not authenticated"),null);this.client.request("SetUserSettings",{MFAOptions:[],AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(e){return e?t(e,null):t(null,"SUCCESS")})},bd.deleteUser=function(t,e){var n=this;if(null==this.signInUserSession||!this.signInUserSession.isValid())return t(new Error("User is not authenticated"),null);this.client.request("DeleteUser",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),ClientMetadata:e},function(e){return e?t(e,null):(n.clearCachedUser(),t(null,"SUCCESS"))})},bd.updateAttributes=function(e,t,n){var r=this;if(null==this.signInUserSession||!this.signInUserSession.isValid())return t(new Error("User is not authenticated"),null);this.client.request("UpdateUserAttributes",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),UserAttributes:e,ClientMetadata:n},function(e){return e?t(e,null):r.getUserData(function(){return t(null,"SUCCESS")},{bypassCache:!0})})},bd.getUserAttributes=function(i){if(null==this.signInUserSession||!this.signInUserSession.isValid())return i(new Error("User is not authenticated"),null);this.client.request("GetUser",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(e,t){if(e)return i(e,null);for(var n=[],r=0;r<t.UserAttributes.length;r++){var o={Name:t.UserAttributes[r].Name,Value:t.UserAttributes[r].Value},o=new xd(o);n.push(o)}return i(null,n)})},bd.getMFAOptions=function(n){if(null==this.signInUserSession||!this.signInUserSession.isValid())return n(new Error("User is not authenticated"),null);this.client.request("GetUser",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(e,t){return e?n(e,null):n(null,t.MFAOptions)})},bd.createGetUserRequest=function(){return this.client.promisifyRequest("GetUser",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken()})},bd.refreshSessionIfPossible=function(n){var r=this;return void 0===n&&(n={}),new Promise(function(e){var t=r.signInUserSession.getRefreshToken();t&&t.getToken()?r.refreshSession(t,e,n.clientMetadata):e()})},bd.getUserData=function(t,n){var r=this;if(null==this.signInUserSession||!this.signInUserSession.isValid())return this.clearCachedUserData(),t(new Error("User is not authenticated"),null);var e=this.getUserDataFromCache();if(e)if(this.isFetchUserDataAndTokenRequired(n))this.fetchUserData().then(function(e){return r.refreshSessionIfPossible(n).then(function(){return e})}).then(function(e){return t(null,e)}).catch(t);else try{return void t(null,JSON.parse(e))}catch(e){return this.clearCachedUserData(),void t(e,null)}else this.fetchUserData().then(function(e){t(null,e)}).catch(t)},bd.getUserDataFromCache=function(){return this.storage.getItem(this.userDataKey)},bd.isFetchUserDataAndTokenRequired=function(e){return void 0!==(e=(e||{}).bypassCache)&&e},bd.fetchUserData=function(){var t=this;return this.createGetUserRequest().then(function(e){return t.cacheUserData(e),e})},bd.deleteAttributes=function(e,t){if(null==this.signInUserSession||!this.signInUserSession.isValid())return t(new Error("User is not authenticated"),null);this.client.request("DeleteUserAttributes",{UserAttributeNames:e,AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(e){return e?t(e,null):t(null,"SUCCESS")})},bd.resendConfirmationCode=function(n,e){e={ClientId:this.pool.getClientId(),Username:this.username,ClientMetadata:e},this.client.request("ResendConfirmationCode",e,function(e,t){return e?n(e,null):n(null,t)})},bd.getSession=function(e,t){if(void 0===t&&(t={}),null==this.username)return e(new Error("Username is null. Cannot retrieve a new session"),null);if(null!=this.signInUserSession&&this.signInUserSession.isValid())return e(null,this.signInUserSession);var n=(i="CognitoIdentityServiceProvider."+this.pool.getClientId()+"."+this.username)+".idToken",r=i+".accessToken",o=i+".refreshToken",i=i+".clockDrift";if(this.storage.getItem(n)){if(n=new Id({IdToken:this.storage.getItem(n)}),r=new gd({AccessToken:this.storage.getItem(r)}),o=new Ad({RefreshToken:this.storage.getItem(o)}),i=parseInt(this.storage.getItem(i),0)||0,(i=new Pd({IdToken:n,AccessToken:r,RefreshToken:o,ClockDrift:i})).isValid())return this.signInUserSession=i,e(null,this.signInUserSession);if(!o.getToken())return e(new Error("Cannot retrieve a new session. Please authenticate."),null);this.refreshSession(o,e,t.clientMetadata)}else e(new Error("Local storage is missing an ID Token, Please authenticate"),null)},bd.refreshSession=function(n,e,t){var r=this,o=this.pool.wrapRefreshSessionCallback?this.pool.wrapRefreshSessionCallback(e):e,i={};i.REFRESH_TOKEN=n.getToken();var s="CognitoIdentityServiceProvider."+this.pool.getClientId(),e=s+".LastAuthUser";this.storage.getItem(e)&&(this.username=this.storage.getItem(e),s=s+"."+this.username+".deviceKey",this.deviceKey=this.storage.getItem(s),i.DEVICE_KEY=this.deviceKey),t={ClientId:this.pool.getClientId(),AuthFlow:"REFRESH_TOKEN_AUTH",AuthParameters:i,ClientMetadata:t},this.getUserContextData()&&(t.UserContextData=this.getUserContextData()),this.client.request("InitiateAuth",t,function(e,t){return e?("NotAuthorizedException"===e.code&&r.clearCachedUser(),o(e,null)):t?(t=t.AuthenticationResult,Object.prototype.hasOwnProperty.call(t,"RefreshToken")||(t.RefreshToken=n.getToken()),r.signInUserSession=r.getCognitoUserSession(t),r.cacheTokens(),o(null,r.signInUserSession)):void 0})},bd.cacheTokens=function(){var e=(o="CognitoIdentityServiceProvider."+this.pool.getClientId())+"."+this.username+".idToken",t=o+"."+this.username+".accessToken",n=o+"."+this.username+".refreshToken",r=o+"."+this.username+".clockDrift",o=o+".LastAuthUser";this.storage.setItem(e,this.signInUserSession.getIdToken().getJwtToken()),this.storage.setItem(t,this.signInUserSession.getAccessToken().getJwtToken()),this.storage.setItem(n,this.signInUserSession.getRefreshToken().getToken()),this.storage.setItem(r,""+this.signInUserSession.getClockDrift()),this.storage.setItem(o,this.username)},bd.cacheUserData=function(e){this.storage.setItem(this.userDataKey,JSON.stringify(e))},bd.clearCachedUserData=function(){this.storage.removeItem(this.userDataKey)},bd.clearCachedUser=function(){this.clearCachedTokens(),this.clearCachedUserData()},bd.cacheDeviceKeyAndPassword=function(){var e=(n="CognitoIdentityServiceProvider."+this.pool.getClientId()+"."+this.username)+".deviceKey",t=n+".randomPasswordKey",n=n+".deviceGroupKey";this.storage.setItem(e,this.deviceKey),this.storage.setItem(t,this.randomPassword),this.storage.setItem(n,this.deviceGroupKey)},bd.getCachedDeviceKeyAndPassword=function(){var e=(n="CognitoIdentityServiceProvider."+this.pool.getClientId()+"."+this.username)+".deviceKey",t=n+".randomPasswordKey",n=n+".deviceGroupKey";this.storage.getItem(e)&&(this.deviceKey=this.storage.getItem(e),this.randomPassword=this.storage.getItem(t),this.deviceGroupKey=this.storage.getItem(n))},bd.clearCachedDeviceKeyAndPassword=function(){var e=(n="CognitoIdentityServiceProvider."+this.pool.getClientId()+"."+this.username)+".deviceKey",t=n+".randomPasswordKey",n=n+".deviceGroupKey";this.storage.removeItem(e),this.storage.removeItem(t),this.storage.removeItem(n)},bd.clearCachedTokens=function(){var e=(o="CognitoIdentityServiceProvider."+this.pool.getClientId())+"."+this.username+".idToken",t=o+"."+this.username+".accessToken",n=o+"."+this.username+".refreshToken",r=o+".LastAuthUser",o=o+"."+this.username+".clockDrift";this.storage.removeItem(e),this.storage.removeItem(t),this.storage.removeItem(n),this.storage.removeItem(r),this.storage.removeItem(o)},bd.getCognitoUserSession=function(e){var t=new Id(e),n=new gd(e),e=new Ad(e);return new Pd({IdToken:t,AccessToken:n,RefreshToken:e})},bd.forgotPassword=function(n,e){e={ClientId:this.pool.getClientId(),Username:this.username,ClientMetadata:e},this.getUserContextData()&&(e.UserContextData=this.getUserContextData()),this.client.request("ForgotPassword",e,function(e,t){return e?n.onFailure(e):"function"==typeof n.inputVerificationCode?n.inputVerificationCode(t):n.onSuccess(t)})},bd.confirmPassword=function(e,t,n,r){r={ClientId:this.pool.getClientId(),Username:this.username,ConfirmationCode:e,Password:t,ClientMetadata:r},this.getUserContextData()&&(r.UserContextData=this.getUserContextData()),this.client.request("ConfirmForgotPassword",r,function(e){return e?n.onFailure(e):n.onSuccess()})},bd.getAttributeVerificationCode=function(e,n,t){if(null==this.signInUserSession||!this.signInUserSession.isValid())return n.onFailure(new Error("User is not authenticated"));this.client.request("GetUserAttributeVerificationCode",{AttributeName:e,AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),ClientMetadata:t},function(e,t){return e?n.onFailure(e):"function"==typeof n.inputVerificationCode?n.inputVerificationCode(t):n.onSuccess()})},bd.verifyAttribute=function(e,t,n){if(null==this.signInUserSession||!this.signInUserSession.isValid())return n.onFailure(new Error("User is not authenticated"));this.client.request("VerifyUserAttribute",{AttributeName:e,Code:t,AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(e){return e?n.onFailure(e):n.onSuccess("SUCCESS")})},bd.getDevice=function(n){if(null==this.signInUserSession||!this.signInUserSession.isValid())return n.onFailure(new Error("User is not authenticated"));this.client.request("GetDevice",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),DeviceKey:this.deviceKey},function(e,t){return e?n.onFailure(e):n.onSuccess(t)})},bd.forgetSpecificDevice=function(e,t){if(null==this.signInUserSession||!this.signInUserSession.isValid())return t.onFailure(new Error("User is not authenticated"));this.client.request("ForgetDevice",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),DeviceKey:e},function(e){return e?t.onFailure(e):t.onSuccess("SUCCESS")})},bd.forgetDevice=function(t){var n=this;this.forgetSpecificDevice(this.deviceKey,{onFailure:t.onFailure,onSuccess:function(e){return n.deviceKey=null,n.deviceGroupKey=null,n.randomPassword=null,n.clearCachedDeviceKeyAndPassword(),t.onSuccess(e)}})},bd.setDeviceStatusRemembered=function(t){if(null==this.signInUserSession||!this.signInUserSession.isValid())return t.onFailure(new Error("User is not authenticated"));this.client.request("UpdateDeviceStatus",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),DeviceKey:this.deviceKey,DeviceRememberedStatus:"remembered"},function(e){return e?t.onFailure(e):t.onSuccess("SUCCESS")})},bd.setDeviceStatusNotRemembered=function(t){if(null==this.signInUserSession||!this.signInUserSession.isValid())return t.onFailure(new Error("User is not authenticated"));this.client.request("UpdateDeviceStatus",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),DeviceKey:this.deviceKey,DeviceRememberedStatus:"not_remembered"},function(e){return e?t.onFailure(e):t.onSuccess("SUCCESS")})},bd.listDevices=function(e,t,n){if(null==this.signInUserSession||!this.signInUserSession.isValid())return n.onFailure(new Error("User is not authenticated"));e={AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),Limit:e},t&&(e.PaginationToken=t),this.client.request("ListDevices",e,function(e,t){return e?n.onFailure(e):n.onSuccess(t)})},bd.globalSignOut=function(t){var n=this;if(null==this.signInUserSession||!this.signInUserSession.isValid())return t.onFailure(new Error("User is not authenticated"));this.client.request("GlobalSignOut",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(e){return e?t.onFailure(e):(n.clearCachedUser(),t.onSuccess("SUCCESS"))})},bd.signOut=function(){this.signInUserSession=null,this.clearCachedUser()},bd.sendMFASelectionAnswer=function(n,r){var o=this,e={};e.USERNAME=this.username,e.ANSWER=n,e={ChallengeName:"SELECT_MFA_TYPE",ChallengeResponses:e,ClientId:this.pool.getClientId(),Session:this.Session},this.getUserContextData()&&(e.UserContextData=this.getUserContextData()),this.client.request("RespondToAuthChallenge",e,function(e,t){return e?r.onFailure(e):(o.Session=t.Session,"SMS_MFA"===n?r.mfaRequired(t.ChallengeName,t.ChallengeParameters):"SOFTWARE_TOKEN_MFA"===n?r.totpRequired(t.ChallengeName,t.ChallengeParameters):void 0)})},bd.getUserContextData=function(){return this.pool.getUserContextData(this.username)},bd.associateSoftwareToken=function(n){var r=this;null!=this.signInUserSession&&this.signInUserSession.isValid()?this.client.request("AssociateSoftwareToken",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(e,t){return e?n.onFailure(e):n.associateSecretCode(t.SecretCode)}):this.client.request("AssociateSoftwareToken",{Session:this.Session},function(e,t){return e?n.onFailure(e):(r.Session=t.Session,n.associateSecretCode(t.SecretCode))})},bd.verifySoftwareToken=function(e,t,n){var r=this;null!=this.signInUserSession&&this.signInUserSession.isValid()?this.client.request("VerifySoftwareToken",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),UserCode:e,FriendlyDeviceName:t},function(e,t){return e?n.onFailure(e):n.onSuccess(t)}):this.client.request("VerifySoftwareToken",{Session:this.Session,UserCode:e,FriendlyDeviceName:t},function(e,t){return e?n.onFailure(e):(r.Session=t.Session,(t={}).USERNAME=r.username,t={ChallengeName:"MFA_SETUP",ClientId:r.pool.getClientId(),ChallengeResponses:t,Session:r.Session},r.getUserContextData()&&(t.UserContextData=r.getUserContextData()),void r.client.request("RespondToAuthChallenge",t,function(e,t){return e?n.onFailure(e):(r.signInUserSession=r.getCognitoUserSession(t.AuthenticationResult),r.cacheTokens(),n.onSuccess(r.signInUserSession))}))})},Ld);function Ld(e){if(null==e||null==e.Username||null==e.Pool)throw new Error("Username and Pool information are required.");this.username=e.Username||"",this.pool=e.Pool,this.Session=null,this.client=e.Pool.client,this.signInUserSession=null,this.authenticationFlowType="USER_SRP_AUTH",this.storage=e.Storage||(new Rd).getStorage(),this.keyPrefix="CognitoIdentityServiceProvider."+this.pool.getClientId(),this.userDataKey=this.keyPrefix+"."+this.username+".userData"}function Fd(){try{this.storageWindow=window.localStorage,this.storageWindow.setItem("aws.cognito.test-ls",1),this.storageWindow.removeItem("aws.cognito.test-ls")}catch(e){this.storageWindow=Md}}function jd(){}function Bd(e){var e=(t=void 0===e?{}:e).Name,t=t.Value;this.Name=e||"",this.Value=t||""}function Vd(){}function zd(e){var t=(r=void 0===e?{}:e).IdToken,n=r.RefreshToken,e=r.AccessToken,r=r.ClockDrift;if(null==e||null==t)throw new Error("Id token and Access Token must be present.");this.idToken=t,this.refreshToken=n,this.accessToken=e,this.clockDrift=void 0===r?this.calculateClockDrift():r}function qd(e){e=(void 0===e?{}:e).RefreshToken,this.token=e||""}function Kd(e){return e=(void 0===e?{}:e).IdToken,Cd.call(this,e||"")||this}function Hd(){}function Gd(e){var n="function"==typeof Map?new Map:void 0;return(Gd=function(e){if(null===e||-1===Function.toString.call(e).indexOf("[native code]"))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==n){if(n.has(e))return n.get(e);n.set(e,t)}function t(){return Wd(e,arguments,Yd(this).constructor)}return t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),$d(t,e)})(e)}function Wd(e,t,n){return(Wd=function(){if("undefined"!=typeof Reflect&&Reflect.construct&&!Reflect.construct.sham){if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch(e){return}}}()?Reflect.construct:function(e,t,n){var r=[null];return r.push.apply(r,t),r=new(Function.bind.apply(e,r)),n&&$d(r,n.prototype),r}).apply(null,arguments)}function $d(e,t){return($d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Yd(e){return(Yd=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Jd(e){return(e=window.open(e,"_self"))?Promise.resolve(e):Promise.reject()}function Zd(e,t,n){E.Hub.dispatch("auth",{event:e,data:t,message:n},"Auth",ff)}Hd.prototype.userAgent="aws-amplify/0.1.x js";function Qd(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,o)}i((u=u.apply(e,s||[])).next())})}function Xd(n,r){var o,i,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&t[0]?i.return:t[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,t[1])).done)return s;switch(i=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,i=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],i=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}}function ef(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(r=i.next()).done;)s.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s}var tf,nf,rf,of,sf,af,uf=(of=Gd(Error),af=of,(sf=bf).prototype=Object.create(af.prototype),$d(sf.prototype.constructor=sf,af),bf),cf=((rf=vf.prototype).promisifyRequest=function(e,t){var o=this;return new Promise(function(n,r){o.request(e,t,function(e,t){e?r(new uf(e.message,e.code,e.name,e.statusCode)):n(t)})})},rf.request=function(e,t,r){var o,e={"Content-Type":"application/x-amz-json-1.1","X-Amz-Target":"AWSCognitoIdentityProviderService."+e,"X-Amz-User-Agent":Hd.prototype.userAgent},t=Object.assign({},this.fetchOptions,{headers:e,method:"POST",mode:"cors",cache:"no-cache",body:JSON.stringify(t)});fetch(this.endpoint,t).then(function(e){return o=e},function(e){if(e instanceof TypeError)throw new Error("Network error");throw e}).then(function(e){return e.json().catch(function(){return{}})}).then(function(e){if(o.ok)return r(null,e);var t=(e.__type||e.code).split("#").pop(),e={code:t,name:t,message:e.message||e.Message||null};return r(e)}).catch(function(e){if(!(o&&o.headers&&o.headers.get("x-amzn-errortype"))){if(e instanceof Error&&"Network error"===e.message){var t={code:"NetworkError",name:e.name,message:e.message};return r(t)}return r(e)}try{var n={code:n=o.headers.get("x-amzn-errortype").split(":")[0],name:n,statusCode:o.status,message:o.status?o.status.toString():null};return r(n)}catch(t){return r(e)}})},vf),lf=((nf=yf.prototype).getUserPoolId=function(){return this.userPoolId},nf.getClientId=function(){return this.clientId},nf.signUp=function(n,e,t,r,o,i){var s=this,i={ClientId:this.clientId,Username:n,Password:e,UserAttributes:t,ValidationData:r,ClientMetadata:i};this.getUserContextData(n)&&(i.UserContextData=this.getUserContextData(n)),this.client.request("SignUp",i,function(e,t){return e?o(e,null):(e={Username:n,Pool:s,Storage:s.storage},t={user:new Dd(e),userConfirmed:t.UserConfirmed,userSub:t.UserSub,codeDeliveryDetails:t.CodeDeliveryDetails},o(null,t))})},nf.getCurrentUser=function(){var e="CognitoIdentityServiceProvider."+this.clientId+".LastAuthUser";return(e=this.storage.getItem(e))?(e={Username:e,Pool:this,Storage:this.storage},new Dd(e)):null},nf.getUserContextData=function(e){if("undefined"!=typeof AmazonCognitoAdvancedSecurityData){var t=AmazonCognitoAdvancedSecurityData;return this.advancedSecurityDataCollectionFlag&&(e=t.getData(e,this.userPoolId,this.clientId))?{EncodedData:e}:{}}},yf),pf=((tf=gf.prototype).setItem=function(e,t){var n={path:this.path,expires:this.expires,domain:this.domain,secure:this.secure};return this.sameSite&&(n.sameSite=this.sameSite),O.set(e,t,n),O.get(e)},tf.getItem=function(e){return O.get(e)},tf.removeItem=function(e){var t={path:this.path,expires:this.expires,domain:this.domain,secure:this.secure};return this.sameSite&&(t.sameSite=this.sameSite),O.remove(e,t)},tf.clear=function(){for(var e=O.get(),t=0;t<e.length;++t)O.remove(e[t]);return{}},gf),df=function(){return(df=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},ff="undefined"!=typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("amplify_default"):"@@amplify_default",hf=new E.ConsoleLogger("OAuth"),mf=(wf.prototype.isValidScopes=function(e){return Array.isArray(e)&&e.every(function(e){return"string"==typeof e})},wf.prototype.oauthSignIn=function(e,t,n,r,o,i){void 0===e&&(e="code"),void 0===o&&(o=Fp.Cognito);var s=this._generateState(32),a=i?s+"-"+E.urlSafeEncode(i):s;i=a,window.sessionStorage.setItem("oauth_state",i),i=s=this._generateRandom(128),window.sessionStorage.setItem("ouath_pkce_key",i),i=this._generateChallenge(s),s=this._scopes.join(" "),e="https://"+t+"/oauth2/authorize?"+Object.entries(df(df({redirect_uri:n,response_type:e,client_id:r,identity_provider:o,scope:s,state:a},"code"===e?{code_challenge:i}:{}),"code"===e?{code_challenge_method:"S256"}:{})).map(function(e){var e=(t=ef(e,2))[0],t=t[1];return encodeURIComponent(e)+"="+encodeURIComponent(t)}).join("&"),hf.debug("Redirecting to "+e),this._urlOpener(e,n)},wf.prototype._handleCodeFlow=function(a){return Qd(this,void 0,void 0,function(){var n,r,o,i,s;return Xd(this,function(e){switch(e.label){case 0:return(n=(S.parse(a).query||"").split("&").map(function(e){return e.split("=")}).reduce(function(e,t){var t=(n=ef(t,2))[0],n=n[1];return df(df({},e),((e={})[t]=n,e))},{code:void 0}).code)&&S.parse(a).pathname===S.parse(this._config.redirectSignIn).pathname?(Zd("codeFlow",{},"Retrieving tokens from "+(o="https://"+this._config.domain+"/oauth2/token")),r=qp(this._config)?this._cognitoClientId:this._config.clientID,i=qp(this._config)?this._config.redirectSignIn:this._config.redirectUri,t=window.sessionStorage.getItem("ouath_pkce_key"),window.sessionStorage.removeItem("ouath_pkce_key"),r=df({grant_type:"authorization_code",code:n,client_id:r,redirect_uri:i},(s=t)?{code_verifier:s}:{}),hf.debug("Calling token endpoint: "+o+" with",r),i=Object.entries(r).map(function(e){var e=(t=ef(e,2))[0],t=t[1];return encodeURIComponent(e)+"="+encodeURIComponent(t)}).join("&"),[4,fetch(o,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:i})]):[2];case 1:return[4,e.sent().json()];case 2:if(s=e.sent(),r=s.access_token,o=s.refresh_token,i=s.id_token,s=s.error)throw new Error(s);return[2,{accessToken:r,refreshToken:o,idToken:i}]}var t})})},wf.prototype._handleImplicitFlow=function(r){return Qd(this,void 0,void 0,function(){var t,n;return Xd(this,function(e){return n=(S.parse(r).hash||"#").substr(1).split("&").map(function(e){return e.split("=")}).reduce(function(e,t){var t=(n=ef(t,2))[0],n=n[1];return df(df({},e),((e={})[t]=n,e))},{id_token:void 0,access_token:void 0}),t=n.id_token,n=n.access_token,Zd("implicitFlow",{},"Got tokens from "+r),hf.debug("Retrieving implicit tokens from "+r+" with"),[2,{accessToken:n,idToken:t,refreshToken:null}]})})},wf.prototype.handleAuthResponse=function(s){return Qd(this,void 0,void 0,function(){var t,n,r,o,i;return Xd(this,function(e){switch(e.label){case 0:if(e.trys.push([0,5,,6]),i=s?df(df({},(S.parse(s).hash||"#").substr(1).split("&").map(function(e){return e.split("=")}).reduce(function(e,t){var t=(n=ef(t,2))[0],n=n[1];return e[t]=n,e},{})),(S.parse(s).query||"").split("&").map(function(e){return e.split("=")}).reduce(function(e,t){var t=(n=ef(t,2))[0],n=n[1];return e[t]=n,e},{})):{},t=i.error,n=i.error_description,t)throw new Error(n);return i=this._validateState(i),hf.debug("Starting "+this._config.responseType+" flow with "+s),"code"!==this._config.responseType?[3,2]:(r=[{}],[4,this._handleCodeFlow(s)]);case 1:return[2,df.apply(void 0,[df.apply(void 0,r.concat([e.sent()])),{state:i}])];case 2:return o=[{}],[4,this._handleImplicitFlow(s)];case 3:return[2,df.apply(void 0,[df.apply(void 0,o.concat([e.sent()])),{state:i}])];case 4:return[3,6];case 5:throw i=e.sent(),hf.error("Error handling auth response.",i),i;case 6:return[2]}})})},wf.prototype._validateState=function(e){if(e){var t=(t=window.sessionStorage.getItem("oauth_state"),window.sessionStorage.removeItem("oauth_state"),t),e=e.state;if(t&&t!==e)throw new Error("Invalid state in OAuth flow");return e}},wf.prototype.signOut=function(){return Qd(this,void 0,void 0,function(){var t,n,r;return Xd(this,function(e){return t="https://"+this._config.domain+"/logout?",n=qp(this._config)?this._cognitoClientId:this._config.oauth.clientID,r=qp(this._config)?this._config.redirectSignOut:this._config.returnTo,Zd("oAuthSignOut",{oAuth:"signOut"},"Signing out from "+(t+=Object.entries({client_id:n,logout_uri:encodeURIComponent(r)}).map(function(e){return(e=ef(e,2))[0]+"="+e[1]}).join("&"))),hf.debug("Signing out from "+t),[2,this._urlOpener(t)]})})},wf.prototype._generateState=function(e){for(var t="",n=e,r="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";0<n;--n)t+=r[Math.round(Math.random()*(r.length-1))];return t},wf.prototype._generateChallenge=function(e){return this._base64URL(_(e))},wf.prototype._base64URL=function(e){return e.toString(A).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")},wf.prototype._generateRandom=function(e){var t=new Uint8Array(e);if("undefined"!=typeof window&&window.crypto)window.crypto.getRandomValues(t);else for(var n=0;n<e;n+=1)t[n]=Math.random()*"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~".length|0;return this._bufferToString(t)},wf.prototype._bufferToString=function(e){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=[],r=0;r<e.byteLength;r+=1){var o=e[r]%t.length;n.push(t[o])}return n.join("")},wf);function gf(e){if(!e.domain)throw new Error("The domain of cookieStorage can not be undefined.");if(this.domain=e.domain,e.path?this.path=e.path:this.path="/",Object.prototype.hasOwnProperty.call(e,"expires")?this.expires=e.expires:this.expires=365,Object.prototype.hasOwnProperty.call(e,"secure")?this.secure=e.secure:this.secure=!0,Object.prototype.hasOwnProperty.call(e,"sameSite")){if(!["strict","lax","none"].includes(e.sameSite))throw new Error('The sameSite value of cookieStorage must be "lax", "strict" or "none".');if("none"===e.sameSite&&!this.secure)throw new Error("sameSite = None requires the Secure attribute in latest browser versions.");this.sameSite=e.sameSite}else this.sameSite=null}function yf(e,t){var n=e||{},r=n.UserPoolId,o=n.ClientId,i=n.endpoint,s=n.fetchOptions,a=n.AdvancedSecurityDataCollectionFlag;if(!r||!o)throw new Error("Both UserPoolId and ClientId are required.");if(!/^[\w-]+_.+$/.test(r))throw new Error("Invalid UserPoolId format.");n=r.split("_")[0],this.userPoolId=r,this.clientId=o,this.client=new cf(n,i,s),this.advancedSecurityDataCollectionFlag=!1!==a,this.storage=e.Storage||(new Rd).getStorage(),t&&(this.wrapRefreshSessionCallback=t)}function vf(e,t,n){this.endpoint=t||"https://cognito-idp."+e+".amazonaws.com/",n=(n||{}).credentials,this.fetchOptions=n?{credentials:n}:{}}function bf(e,t,n,r){return(e=of.call(this,e)||this).code=t,e.name=n,e.statusCode=r,e}function wf(e){var t=e.config,n=e.cognitoClientId,e=void 0===(e=e.scopes)?[]:e;if(this._urlOpener=t.urlOpener||Jd,this._config=t,this._cognitoClientId=n,!this.isValidScopes(e))throw Error("scopes must be a String Array");this._scopes=e}(or=hh=hh||{}).DEFAULT_MSG="Authentication Error",or.EMPTY_USERNAME="Username cannot be empty",or.INVALID_USERNAME="The username should either be a string or one of the sign in types",or.EMPTY_PASSWORD="Password cannot be empty",or.EMPTY_CODE="Confirmation code cannot be empty",or.SIGN_UP_ERROR="Error creating account",or.NO_MFA="No valid MFA method provided",or.INVALID_MFA="Invalid MFA type",or.EMPTY_CHALLENGE="Challenge response cannot be empty",or.NO_USER_SESSION="Failed to get the session because the user is empty";var Sf,Cf,al=(Sf=function(e,t){return(Sf=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}Sf(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),_f=new E.ConsoleLogger("AuthError"),Ef=(al(If,Cf=Error),If);function If(e){var t=this,e=(n=Mf[e]).message,n=n.log;return(t=Cf.call(this,e)||this).constructor=If,Object.setPrototypeOf(t,If.prototype),t.name="AuthError",t.log=n||e,_f.error(t.log),t}var Af,Pf=(al(Of,Af=Ef),Of);function Of(e){return(e=Af.call(this,e)||this).constructor=Of,Object.setPrototypeOf(e,Of.prototype),e.name="NoUserPoolError",e}function kf(e,t,n){E.Hub.dispatch("auth",{event:e,data:t,message:n},"Auth",Lf)}function Tf(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,o)}i((u=u.apply(e,s||[])).next())})}function xf(n,r){var o,i,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&t[0]?i.return:t[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,t[1])).done)return s;switch(i=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,i=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],i=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}}function Nf(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(r=i.next()).done;)s.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s}var Mf={noConfig:{message:hh.DEFAULT_MSG,log:"\n            Error: Amplify has not been configured correctly.\n            This error is typically caused by one of the following scenarios:\n\n            1. Make sure you're passing the awsconfig object to Amplify.configure() in your app's entry point\n                See https://aws-amplify.github.io/docs/js/authentication#configure-your-app for more information\n            \n            2. There might be multiple conflicting versions of aws-amplify or amplify packages in your node_modules.\n                Try deleting your node_modules folder and reinstalling the dependencies with `yarn install`\n        "},missingAuthConfig:{message:hh.DEFAULT_MSG,log:"\n            Error: Amplify has not been configured correctly. \n            The configuration object is missing required auth properties. \n            Did you run `amplify push` after adding auth via `amplify add auth`?\n            See https://aws-amplify.github.io/docs/js/authentication#amplify-project-setup for more information\n        "},emptyUsername:{message:hh.EMPTY_USERNAME},invalidUsername:{message:hh.INVALID_USERNAME},emptyPassword:{message:hh.EMPTY_PASSWORD},emptyCode:{message:hh.EMPTY_CODE},signUpError:{message:hh.SIGN_UP_ERROR,log:"The first parameter should either be non-null string or object"},noMFA:{message:hh.NO_MFA},invalidMFA:{message:hh.INVALID_MFA},emptyChallengeResponse:{message:hh.EMPTY_CHALLENGE},noUserSession:{message:hh.NO_USER_SESSION},default:{message:hh.DEFAULT_MSG}},Rf=function(){return(Rf=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},Uf=new E.ConsoleLogger("AuthClass"),Df="aws.cognito.signin.user.admin",Lf="undefined"!=typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("amplify_default"):"@@amplify_default";function Ff(e){var t=this;this.userPool=null,this.user=null,this.oAuthFlowInProgress=!1,this.Credentials=E.Credentials,this.wrapRefreshSessionCallback=function(n){return function(e,t){return t?kf("tokenRefresh",void 0,"New token retrieved"):kf("tokenRefresh_failure",e,"Failed to retrieve new token"),n(e,t)}},this.configure(e),this.currentCredentials=this.currentCredentials.bind(this),this.currentUserCredentials=this.currentUserCredentials.bind(this),E.Hub.listen("auth",function(e){switch(e.payload.event){case"signIn":t._storage.setItem("amplify-signin-with-hostedUI","false");break;case"signOut":t._storage.removeItem("amplify-signin-with-hostedUI");break;case"cognitoHostedUI":t._storage.setItem("amplify-signin-with-hostedUI","true")}})}var jf=(Ff.prototype.getModuleName=function(){return"Auth"},Ff.prototype.configure=function(e){var t=this;if(!e)return this._config||{};Uf.debug("configure Auth");var n=Object.assign({},this._config,E.Parser.parseMobilehubConfig(e).Auth,e);this._config=n;var r,o=(f=this._config).userPoolId,i=f.userPoolWebClientId,s=f.cookieStorage,a=f.oauth,u=f.region,c=f.identityPoolId,l=f.mandatorySignIn,p=f.refreshHandlers,d=f.identityPoolRegion,n=f.clientMetadata,f=f.endpoint;if(this._config.storage){if(!this._isValidAuthStorage(this._config.storage))throw Uf.error("The storage in the Auth config is not valid!"),new Error("Empty storage object");this._storage=this._config.storage}else this._storage=s?new pf(s):e.ssr?new E.UniversalStorage:(new E.StorageHelper).getStorage();return this._storageSync=Promise.resolve(),"function"==typeof this._storage.sync&&(this._storageSync=this._storage.sync()),o&&((f={UserPoolId:o,ClientId:i,endpoint:f}).Storage=this._storage,this.userPool=new lf(f,this.wrapRefreshSessionCallback)),this.Credentials.configure({mandatorySignIn:l,region:d||u,userPoolId:o,identityPoolId:c,refreshHandlers:p,storage:this._storage}),(a=a?qp(this._config.oauth)?a:a.awsCognito:void 0)&&(a=Object.assign({cognitoClientId:i,UserPoolId:o,domain:a.domain,scopes:a.scope,redirectSignIn:a.redirectSignIn,redirectSignOut:a.redirectSignOut,responseType:a.responseType,Storage:this._storage,urlOpener:a.urlOpener,clientMetadata:n},a.options),this._oAuthHandler=new mf({scopes:a.scopes,config:a,cognitoClientId:a.cognitoClientId}),r={},function(){if(E.JS.browserOrNode().isBrowser&&window.location)e=(e={url:window.location.href}).url,r[e]||(r[e]=!0,t._handleAuthResponse(e));else if(!E.JS.browserOrNode().isNode)throw new Error("Not supported");var e}()),kf("configured",null,"The Auth category has been configured successfully"),this._config},Ff.prototype.signUp=function(e){for(var t=this,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];if(!this.userPool)return this.rejectNoUserPool();var o,i=null,s=null,a=[],u=null;if(e&&"string"==typeof e){i=e,s=n?n[0]:null;var c=n?n[1]:null,l=n?n[2]:null;c&&a.push(new xd({Name:"email",Value:c})),l&&a.push(new xd({Name:"phone_number",Value:l}))}else{if(!e||"object"!=typeof e)return this.rejectAuthError(jp.SignUpError);i=e.username,s=e.password,e&&e.clientMetadata?o=e.clientMetadata:this._config.clientMetadata&&(o=this._config.clientMetadata);var p=e.attributes;p&&Object.keys(p).map(function(e){a.push(new xd({Name:e,Value:p[e]}))}),(e=e.validationData)&&(u=[],Object.keys(e).map(function(e){u.push(new xd({Name:e,Value:p[e]}))}))}return i?s?(Uf.debug("signUp attrs:",a),Uf.debug("signUp validation data:",u),new Promise(function(n,r){t.userPool.signUp(i,s,a,u,function(e,t){e?(kf("signUp_failure",e,i+" failed to signup"),r(e)):(kf("signUp",t,i+" has signed up successfully"),n(t))},o)})):this.rejectAuthError(jp.EmptyPassword):this.rejectAuthError(jp.EmptyUsername)},Ff.prototype.confirmSignUp=function(e,t,n){if(!this.userPool)return this.rejectNoUserPool();if(!e)return this.rejectAuthError(jp.EmptyUsername);if(!t)return this.rejectAuthError(jp.EmptyCode);var o,i=this.createCognitoUser(e),s=!n||"boolean"!=typeof n.forceAliasCreation||n.forceAliasCreation;return n&&n.clientMetadata?o=n.clientMetadata:this._config.clientMetadata&&(o=this._config.clientMetadata),new Promise(function(n,r){i.confirmRegistration(t,s,function(e,t){e?r(e):n(t)},o)})},Ff.prototype.resendSignUp=function(e,t){if(void 0===t&&(t=this._config.clientMetadata),!this.userPool)return this.rejectNoUserPool();if(!e)return this.rejectAuthError(jp.EmptyUsername);var o=this.createCognitoUser(e);return new Promise(function(n,r){o.resendConfirmationCode(function(e,t){e?r(e):n(t)},t)})},Ff.prototype.signIn=function(e,t,n){if(void 0===n&&(n=this._config.clientMetadata),!this.userPool)return this.rejectNoUserPool();var r=null,o=null,i={};if("string"==typeof e)r=e,o=t;else{if(!e.username)return this.rejectAuthError(jp.InvalidUsername);void 0!==t&&Uf.warn("The password should be defined under the first parameter object!"),r=e.username,o=e.password,i=e.validationData}return r?(n=new Gp({Username:r,Password:o,ValidationData:i,ClientMetadata:n}),o?this.signInWithPassword(n):this.signInWithoutPassword(n)):this.rejectAuthError(jp.EmptyUsername)},Ff.prototype.authCallbacks=function(o,i,s){var e=this,a=this;return{onSuccess:function(r){return Tf(e,void 0,void 0,function(){var t,n;return xf(this,function(e){switch(e.label){case 0:Uf.debug(r),delete o.challengeName,delete o.challengeParam,e.label=1;case 1:return e.trys.push([1,4,5,9]),[4,this.Credentials.clear()];case 2:return e.sent(),[4,this.Credentials.set(r,"session")];case 3:return t=e.sent(),Uf.debug("succeed to get cognito credentials",t),[3,9];case 4:return t=e.sent(),Uf.debug("cannot get cognito credentials",t),[3,9];case 5:return e.trys.push([5,7,,8]),[4,this.currentUserPoolUser()];case 6:return n=e.sent(),kf("signIn",a.user=n,"A user "+o.getUsername()+" has been signed in"),i(n),[3,8];case 7:return n=e.sent(),Uf.error("Failed to get the signed in user",n),s(n),[3,8];case 8:return[7];case 9:return[2]}})})},onFailure:function(e){Uf.debug("signIn failure",e),kf("signIn_failure",e,o.getUsername()+" failed to signin"),s(e)},customChallenge:function(e){Uf.debug("signIn custom challenge answer required"),o.challengeName="CUSTOM_CHALLENGE",o.challengeParam=e,i(o)},mfaRequired:function(e,t){Uf.debug("signIn MFA required"),o.challengeName=e,o.challengeParam=t,i(o)},mfaSetup:function(e,t){Uf.debug("signIn mfa setup",e),o.challengeName=e,o.challengeParam=t,i(o)},newPasswordRequired:function(e,t){Uf.debug("signIn new password"),o.challengeName="NEW_PASSWORD_REQUIRED",o.challengeParam={userAttributes:e,requiredAttributes:t},i(o)},totpRequired:function(e,t){Uf.debug("signIn totpRequired"),o.challengeName=e,o.challengeParam=t,i(o)},selectMFAType:function(e,t){Uf.debug("signIn selectMFAType",e),o.challengeName=e,o.challengeParam=t,i(o)}}},Ff.prototype.signInWithPassword=function(e){var r=this;if(this.pendingSignIn)throw new Error("Pending sign-in attempt already in progress");var o=this.createCognitoUser(e.getUsername());return this.pendingSignIn=new Promise(function(t,n){o.authenticateUser(e,r.authCallbacks(o,function(e){r.pendingSignIn=null,t(e)},function(e){r.pendingSignIn=null,n(e)}))}),this.pendingSignIn},Ff.prototype.signInWithoutPassword=function(n){var r=this,o=this.createCognitoUser(n.getUsername());return o.setAuthenticationFlowType("CUSTOM_AUTH"),new Promise(function(e,t){o.initiateAuth(n,r.authCallbacks(o,e,t))})},Ff.prototype.getMFAOptions=function(e){return new Promise(function(n,r){e.getMFAOptions(function(e,t){return e?(Uf.debug("get MFA Options failed",e),void r(e)):(Uf.debug("get MFA options success",t),void n(t))})})},Ff.prototype.getPreferredMFA=function(o,i){var s=this,a=this;return new Promise(function(n,r){var e=s._config.clientMetadata,t=!!i&&i.bypassCache;o.getUserData(function(e,t){return e?(Uf.debug("getting preferred mfa failed",e),void r(e)):void((t=a._getMfaTypeFromUserData(t))?n(t):r("invalid MFA Type"))},{bypassCache:t,clientMetadata:e})})},Ff.prototype._getMfaTypeFromUserData=function(e){var t=null,n=e.PreferredMfaSetting;return n?t=n:(n=e.UserMFASettingList)?0===n.length?t="NOMFA":Uf.debug("invalid case for getPreferredMFA",e):t=e.MFAOptions?"SMS_MFA":"NOMFA",t},Ff.prototype._getUserData=function(e,t){return new Promise(function(n,r){e.getUserData(function(e,t){e?(Uf.debug("getting user data failed",e),r(e)):n(t)},t)})},Ff.prototype.setPreferredMFA=function(s,a){return Tf(this,void 0,void 0,function(){var t,n,i,r,o;return xf(this,function(e){switch(e.label){case 0:return t=this._config.clientMetadata,[4,this._getUserData(s,{bypassCache:!0,clientMetadata:t})];case 1:switch(o=e.sent(),i=n=null,a){case"TOTP":return[3,2];case"SMS":return[3,3];case"NOMFA":return[3,4]}return[3,6];case 2:return i={PreferredMfa:!0,Enabled:!0},[3,7];case 3:return n={PreferredMfa:!0,Enabled:!0},[3,7];case 4:return r=o.UserMFASettingList,[4,this._getMfaTypeFromUserData(o)];case 5:if("NOMFA"===(o=e.sent()))return[2,Promise.resolve("No change for mfa type")];if("SMS_MFA"===o)n={PreferredMfa:!1,Enabled:!1};else{if("SOFTWARE_TOKEN_MFA"!==o)return[2,this.rejectAuthError(jp.InvalidMFA)];i={PreferredMfa:!1,Enabled:!1}}return r&&0!==r.length&&r.forEach(function(e){"SMS_MFA"===e?n={PreferredMfa:!1,Enabled:!1}:"SOFTWARE_TOKEN_MFA"===e&&(i={PreferredMfa:!1,Enabled:!1})}),[3,7];case 6:return Uf.debug("no validmfa method provided"),[2,this.rejectAuthError(jp.NoMFA)];case 7:return[2,new Promise(function(r,o){s.setUserMfaPreference(n,i,function(e,n){return e?(Uf.debug("Set user mfa preference error",e),o(e)):(Uf.debug("Set user mfa success",n),Uf.debug("Caching the latest user data into local"),void s.getUserData(function(e,t){return e?(Uf.debug("getting user data failed",e),o(e)):r(n)},{bypassCache:!0,clientMetadata:t}))})})]}})})},Ff.prototype.disableSMS=function(e){return new Promise(function(n,r){e.disableMFA(function(e,t){return e?(Uf.debug("disable mfa failed",e),void r(e)):(Uf.debug("disable mfa succeed",t),void n(t))})})},Ff.prototype.enableSMS=function(e){return new Promise(function(n,r){e.enableMFA(function(e,t){return e?(Uf.debug("enable mfa failed",e),void r(e)):(Uf.debug("enable mfa succeed",t),void n(t))})})},Ff.prototype.setupTOTP=function(e){return new Promise(function(t,n){e.associateSoftwareToken({onFailure:function(e){Uf.debug("associateSoftwareToken failed",e),n(e)},associateSecretCode:function(e){Uf.debug("associateSoftwareToken sucess",e),t(e)}})})},Ff.prototype.verifyTotpToken=function(r,e){return Uf.debug("verification totp token",r,e),new Promise(function(t,n){r.verifySoftwareToken(e,"My TOTP device",{onFailure:function(e){Uf.debug("verifyTotpToken failed",e),n(e)},onSuccess:function(e){kf("signIn",r,"A user "+r.getUsername()+" has been signed in"),Uf.debug("verifyTotpToken success",e),t(e)}})})},Ff.prototype.confirmSignIn=function(o,e,n,i){var s=this;if(void 0===i&&(i=this._config.clientMetadata),!e)return this.rejectAuthError(jp.EmptyCode);var a=this;return new Promise(function(r,t){o.sendMFACode(e,{onSuccess:function(n){return Tf(s,void 0,void 0,function(){var t;return xf(this,function(e){switch(e.label){case 0:Uf.debug(n),e.label=1;case 1:return e.trys.push([1,4,5,6]),[4,this.Credentials.clear()];case 2:return e.sent(),[4,this.Credentials.set(n,"session")];case 3:return t=e.sent(),Uf.debug("succeed to get cognito credentials",t),[3,6];case 4:return t=e.sent(),Uf.debug("cannot get cognito credentials",t),[3,6];case 5:return kf("signIn",a.user=o,"A user "+o.getUsername()+" has been signed in"),r(o),[7];case 6:return[2]}})})},onFailure:function(e){Uf.debug("confirm signIn failure",e),t(e)}},n,i)})},Ff.prototype.completeNewPassword=function(o,e,n,i){var s=this;if(void 0===n&&(n={}),void 0===i&&(i=this._config.clientMetadata),!e)return this.rejectAuthError(jp.EmptyPassword);var a=this;return new Promise(function(r,t){o.completeNewPasswordChallenge(e,n,{onSuccess:function(n){return Tf(s,void 0,void 0,function(){var t;return xf(this,function(e){switch(e.label){case 0:Uf.debug(n),e.label=1;case 1:return e.trys.push([1,4,5,6]),[4,this.Credentials.clear()];case 2:return e.sent(),[4,this.Credentials.set(n,"session")];case 3:return t=e.sent(),Uf.debug("succeed to get cognito credentials",t),[3,6];case 4:return t=e.sent(),Uf.debug("cannot get cognito credentials",t),[3,6];case 5:return kf("signIn",a.user=o,"A user "+o.getUsername()+" has been signed in"),r(o),[7];case 6:return[2]}})})},onFailure:function(e){Uf.debug("completeNewPassword failure",e),kf("completeNewPassword_failure",e,s.user+" failed to complete the new password flow"),t(e)},mfaRequired:function(e,t){Uf.debug("signIn MFA required"),o.challengeName=e,o.challengeParam=t,r(o)},mfaSetup:function(e,t){Uf.debug("signIn mfa setup",e),o.challengeName=e,o.challengeParam=t,r(o)},totpRequired:function(e,t){Uf.debug("signIn mfa setup",e),o.challengeName=e,o.challengeParam=t,r(o)}},i)})},Ff.prototype.sendCustomChallengeAnswer=function(n,r,o){var i=this;return void 0===o&&(o=this._config.clientMetadata),this.userPool?r?new Promise(function(e,t){n.sendCustomChallengeAnswer(r,i.authCallbacks(n,e,t),o)}):this.rejectAuthError(jp.EmptyChallengeResponse):this.rejectNoUserPool()},Ff.prototype.updateUserAttributes=function(i,s,a){void 0===a&&(a=this._config.clientMetadata);var u=[],e=this;return new Promise(function(r,o){e.userSession(i).then(function(e){for(var t in s){var n;"sub"!==t&&t.indexOf("_verified")<0&&(n={Name:t,Value:s[t]},u.push(n))}i.updateAttributes(u,function(e,t){return e?o(e):r(t)},a)})})},Ff.prototype.userAttributes=function(t){var e=this;return new Promise(function(n,r){e.userSession(t).then(function(e){t.getUserAttributes(function(e,t){e?r(e):n(t)})})})},Ff.prototype.verifiedContact=function(e){var r=this;return this.userAttributes(e).then(function(e){var t=r.attributesToObject(e),n={},e={};return t.email&&(t.email_verified?e.email=t.email:n.email=t.email),t.phone_number&&(t.phone_number_verified?e.phone_number=t.phone_number:n.phone_number=t.phone_number),{verified:e,unverified:n}})},Ff.prototype.currentUserPoolUser=function(l){var e=this;return this.userPool?new Promise(function(u,c){e._storageSync.then(function(){return Tf(e,void 0,void 0,function(){var a,t,n=this;return xf(this,function(e){switch(e.label){case 0:return this.isOAuthInProgress()?(Uf.debug("OAuth signIn in progress, waiting for resolution..."),[4,new Promise(function(t){var n=setTimeout(function(){Uf.debug("OAuth signIn in progress timeout"),E.Hub.remove("auth",r),t()},1e4);function r(e){"cognitoHostedUI"!==(e=e.payload.event)&&"cognitoHostedUI_failure"!==e||(Uf.debug("OAuth signIn resolved: "+e),clearTimeout(n),E.Hub.remove("auth",r),t())}E.Hub.listen("auth",r)})]):[3,2];case 1:e.sent(),e.label=2;case 2:return(a=this.userPool.getCurrentUser())?(t=this._config.clientMetadata,a.getSession(function(o,i){return Tf(n,void 0,void 0,function(){var t,n,r,s=this;return xf(this,function(e){switch(e.label){case 0:return o?(Uf.debug("Failed to get the user session",o),c(o),[2]):(t=!!l&&l.bypassCache)?[4,this.Credentials.clear()]:[3,2];case 1:e.sent(),e.label=2;case 2:return n=this._config.clientMetadata,(void 0===(r=i.getAccessToken().decodePayload().scope)?"":r).split(" ").includes(Df)?(a.getUserData(function(e,t){if(e)return Uf.debug("getting user data failed",e),void("User is disabled."===e.message||"User does not exist."===e.message||"Access Token has been revoked"===e.message?c(e):u(a));for(var n=t.PreferredMfaSetting||"NOMFA",r=[],o=0;o<t.UserAttributes.length;o++){var i={Name:t.UserAttributes[o].Name,Value:t.UserAttributes[o].Value},i=new xd(i);r.push(i)}return e=s.attributesToObject(r),Object.assign(a,{attributes:e,preferredMFA:n}),u(a)},{bypassCache:t,clientMetadata:n}),[2]):(Uf.debug("Unable to get the user data because the "+Df+" is not in the scopes of the access token"),[2,u(a)])}})})},{clientMetadata:t})):(Uf.debug("Failed to get user from user pool"),c("No current user")),[2]}})})}).catch(function(e){return Uf.debug("Failed to sync cache info into memory",e),c(e)})}):this.rejectNoUserPool()},Ff.prototype.isOAuthInProgress=function(){return this.oAuthFlowInProgress},Ff.prototype.currentAuthenticatedUser=function(i){return Tf(this,void 0,void 0,function(){var t,n,r,o;return xf(this,function(e){switch(e.label){case 0:Uf.debug("getting current authenticated user"),t=null,e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this._storageSync];case 2:return e.sent(),[3,4];case 3:throw o=e.sent(),Uf.debug("Failed to sync cache info into memory",o),o;case 4:try{(n=JSON.parse(this._storage.getItem("aws-amplify-federatedInfo")))&&(t=Rf(Rf({},n.user),{token:n.token}))}catch(e){Uf.debug("cannot load federated user from auth storage")}return t?(this.user=t,Uf.debug("get current authenticated federated user",this.user),[2,this.user]):[3,5];case 5:Uf.debug("get current authenticated userpool user"),r=null,e.label=6;case 6:return e.trys.push([6,8,,9]),[4,this.currentUserPoolUser(i)];case 7:return r=e.sent(),[3,9];case 8:return"No userPool"===(o=e.sent())&&Uf.error("Cannot get the current user because the user pool is missing. Please make sure the Auth module is configured with a valid Cognito User Pool ID"),Uf.debug("The user is not authenticated by the error",o),[2,Promise.reject("The user is not authenticated")];case 9:return this.user=r,[2,this.user]}})})},Ff.prototype.currentSession=function(){var r=this;return Uf.debug("Getting current session"),this.userPool?new Promise(function(t,n){r.currentUserPoolUser().then(function(e){r.userSession(e).then(function(e){t(e)}).catch(function(e){Uf.debug("Failed to get the current session",e),n(e)})}).catch(function(e){Uf.debug("Failed to get the current user",e),n(e)})}):Promise.reject()},Ff.prototype.userSession=function(o){if(!o)return Uf.debug("the user is null"),this.rejectAuthError(jp.NoUserSession);var e=this._config.clientMetadata;return new Promise(function(n,r){Uf.debug("Getting the session from this user:",o),o.getSession(function(e,t){e?(Uf.debug("Failed to get the session from user",o),r(e)):(Uf.debug("Succeed to get the user session",t),n(t))},{clientMetadata:e})})},Ff.prototype.currentUserCredentials=function(){return Tf(this,void 0,void 0,function(){var t,n,r=this;return xf(this,function(e){switch(e.label){case 0:Uf.debug("Getting current user credentials"),e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this._storageSync];case 2:return e.sent(),[3,4];case 3:throw t=e.sent(),Uf.debug("Failed to sync cache info into memory",t),t;case 4:n=null;try{n=JSON.parse(this._storage.getItem("aws-amplify-federatedInfo"))}catch(e){Uf.debug("failed to get or parse item aws-amplify-federatedInfo",e)}return n?[2,this.Credentials.refreshFederatedToken(n)]:[2,this.currentSession().then(function(e){return Uf.debug("getting session success",e),r.Credentials.set(e,"session")}).catch(function(e){return Uf.debug("getting session failed",e),r.Credentials.set(null,"guest")})]}})})},Ff.prototype.currentCredentials=function(){return Uf.debug("getting current credentials"),this.Credentials.get()},Ff.prototype.verifyUserAttribute=function(n,r,o){return void 0===o&&(o=this._config.clientMetadata),new Promise(function(e,t){n.getAttributeVerificationCode(r,{onSuccess:function(){return e()},onFailure:function(e){return t(e)}},o)})},Ff.prototype.verifyUserAttributeSubmit=function(e,r,o){return o?new Promise(function(t,n){e.verifyAttribute(r,o,{onSuccess:function(e){t(e)},onFailure:function(e){n(e)}})}):this.rejectAuthError(jp.EmptyCode)},Ff.prototype.verifyCurrentUserAttribute=function(t){var n=this;return n.currentUserPoolUser().then(function(e){return n.verifyUserAttribute(e,t)})},Ff.prototype.verifyCurrentUserAttributeSubmit=function(t,n){var r=this;return r.currentUserPoolUser().then(function(e){return r.verifyUserAttributeSubmit(e,t,n)})},Ff.prototype.cognitoIdentitySignOut=function(s,a){return Tf(this,void 0,void 0,function(){var t,o,i=this;return xf(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,this._storageSync];case 1:return e.sent(),[3,3];case 2:throw t=e.sent(),Uf.debug("Failed to sync cache info into memory",t),t;case 3:return o=this._oAuthHandler&&"true"===this._storage.getItem("amplify-signin-with-hostedUI"),[2,new Promise(function(n,r){if(s&&s.global){Uf.debug("user global sign out",a);var e=i._config.clientMetadata;a.getSession(function(e,t){return e?(Uf.debug("failed to get the user session",e),r(e)):void a.globalSignOut({onSuccess:function(e){if(Uf.debug("global sign out success"),!o)return n();i.oAuthSignOutRedirect(n,r)},onFailure:function(e){return Uf.debug("global sign out failed",e),r(e)}})},{clientMetadata:e})}else{if(Uf.debug("user sign out",a),a.signOut(),!o)return n();i.oAuthSignOutRedirect(n,r)}})]}})})},Ff.prototype.oAuthSignOutRedirect=function(e,t){E.JS.browserOrNode().isBrowser?this.oAuthSignOutRedirectOrReject(t):this.oAuthSignOutAndResolve(e)},Ff.prototype.oAuthSignOutAndResolve=function(e){this._oAuthHandler.signOut(),e()},Ff.prototype.oAuthSignOutRedirectOrReject=function(e){this._oAuthHandler.signOut(),setTimeout(function(){return e("Signout timeout fail")},3e3)},Ff.prototype.signOut=function(n){return Tf(this,void 0,void 0,function(){var t;return xf(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,this.cleanCachedItems()];case 1:return e.sent(),[3,3];case 2:return e.sent(),Uf.debug("failed to clear cached items"),[3,3];case 3:return this.userPool?(t=this.userPool.getCurrentUser())?[4,this.cognitoIdentitySignOut(n,t)]:[3,5]:[3,7];case 4:return e.sent(),[3,6];case 5:Uf.debug("no current Cognito user"),e.label=6;case 6:return[3,8];case 7:Uf.debug("no Congito User pool"),e.label=8;case 8:return kf("signOut",this.user,"A user has been signed out"),this.user=null,[2]}})})},Ff.prototype.cleanCachedItems=function(){return Tf(this,void 0,void 0,function(){return xf(this,function(e){switch(e.label){case 0:return[4,this.Credentials.clear()];case 1:return e.sent(),[2]}})})},Ff.prototype.changePassword=function(t,o,i,s){var e=this;return void 0===s&&(s=this._config.clientMetadata),new Promise(function(n,r){e.userSession(t).then(function(e){t.changePassword(o,i,function(e,t){return e?(Uf.debug("change password failure",e),r(e)):n(t)},s)})})},Ff.prototype.forgotPassword=function(r,e){if(void 0===e&&(e=this._config.clientMetadata),!this.userPool)return this.rejectNoUserPool();if(!r)return this.rejectAuthError(jp.EmptyUsername);var o=this.createCognitoUser(r);return new Promise(function(t,n){o.forgotPassword({onSuccess:function(){t()},onFailure:function(e){Uf.debug("forgot password failure",e),kf("forgotPassword_failure",e,r+" forgotPassword failed"),n(e)},inputVerificationCode:function(e){kf("forgotPassword",o,r+" has initiated forgot password flow"),t(e)}},e)})},Ff.prototype.forgotPasswordSubmit=function(n,r,o,i){if(void 0===i&&(i=this._config.clientMetadata),!this.userPool)return this.rejectNoUserPool();if(!n)return this.rejectAuthError(jp.EmptyUsername);if(!r)return this.rejectAuthError(jp.EmptyCode);if(!o)return this.rejectAuthError(jp.EmptyPassword);var s=this.createCognitoUser(n);return new Promise(function(e,t){s.confirmPassword(r,o,{onSuccess:function(){kf("forgotPasswordSubmit",s,n+" forgotPasswordSubmit successful"),e()},onFailure:function(e){kf("forgotPasswordSubmit_failure",e,n+" forgotPasswordSubmit failed"),t(e)}},i)})},Ff.prototype.currentUserInfo=function(){return Tf(this,void 0,void 0,function(){var t,n,r,o,i;return xf(this,function(e){switch(e.label){case 0:return(t=this.Credentials.getCredSource())&&"aws"!==t&&"userPool"!==t?[3,9]:[4,this.currentUserPoolUser().catch(function(e){return Uf.debug(e)})];case 1:if(!(i=e.sent()))return[2,null];e.label=2;case 2:return e.trys.push([2,8,,9]),[4,this.userAttributes(i)];case 3:r=e.sent(),o=this.attributesToObject(r),n=null,e.label=4;case 4:return e.trys.push([4,6,,7]),[4,this.currentCredentials()];case 5:return n=e.sent(),[3,7];case 6:return r=e.sent(),Uf.debug("Failed to retrieve credentials while getting current user info",r),[3,7];case 7:return[2,{id:n?n.identityId:void 0,username:i.getUsername(),attributes:o}];case 8:return o=e.sent(),Uf.debug("currentUserInfo error",o),[2,{}];case 9:return"federated"===t?[2,(i=this.user)||{}]:[2]}})})},Ff.prototype.federatedSignIn=function(l,p,d){return Tf(this,void 0,void 0,function(){var r,o,i,s,a,u,c;return xf(this,function(e){switch(e.label){case 0:if(!this._config.identityPoolId&&!this._config.userPoolId)throw new Error("Federation requires either a User Pool or Identity Pool in config");if(void 0===l&&this._config.identityPoolId&&!this._config.userPoolId)throw new Error("Federation with Identity Pools requires tokens passed as arguments");return zp(l)||(n=l)&&["customProvider"].find(function(e){return n.hasOwnProperty(e)})||(t=l)&&["customState"].find(function(e){return t.hasOwnProperty(e)})||void 0===l?(r=l||{provider:Fp.Cognito},o=zp(r)?r.provider:r.customProvider,zp(r),a=r.customState,this._config.userPoolId&&(s=qp(this._config.oauth)?this._config.userPoolWebClientId:this._config.oauth.clientID,r=qp(this._config.oauth)?this._config.oauth.redirectSignIn:this._config.oauth.redirectUri,this._oAuthHandler.oauthSignIn(this._config.oauth.responseType,this._config.oauth.domain,r,s,o,a)),[3,4]):[3,1];case 1:o=l;try{(i=JSON.stringify(JSON.parse(this._storage.getItem("aws-amplify-federatedInfo")).user))&&Uf.warn("There is already a signed in user: "+i+" in your app.\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tYou should not call Auth.federatedSignIn method again as it may cause unexpected behavior.")}catch(e){}return s=p.token,a=p.identity_id,c=p.expires_at,[4,this.Credentials.set({provider:o,token:s,identity_id:a,user:d,expires_at:c},"federation")];case 2:return u=e.sent(),[4,this.currentAuthenticatedUser()];case 3:return kf("signIn",c=e.sent(),"A user "+c.username+" has been signed in"),Uf.debug("federated sign in credentials",u),[2,u];case 4:return[2]}var t,n})})},Ff.prototype._handleAuthResponse=function(c){return Tf(this,void 0,void 0,function(){var t,n,r,o,i,s,a,u;return xf(this,function(e){switch(e.label){case 0:if(this.oAuthFlowInProgress)return Uf.debug("Skipping URL "+c+" current flow in progress"),[2];e.label=1;case 1:if(e.trys.push([1,,8,9]),this.oAuthFlowInProgress=!0,!this._config.userPoolId)throw new Error("OAuth responses require a User Pool defined in config");if(kf("parsingCallbackUrl",{url:c},"The callback url is being parsed"),t=c||(E.JS.browserOrNode().isBrowser?window.location.href:""),n=!!(S.parse(t).query||"").split("&").map(function(e){return e.split("=")}).find(function(e){return"code"===(e=Nf(e,1)[0])||"error"===e}),r=!!(S.parse(t).hash||"#").substr(1).split("&").map(function(e){return e.split("=")}).find(function(e){return"access_token"===(e=Nf(e,1)[0])||"error"===e}),!n&&!r)return[3,7];this._storage.setItem("amplify-redirected-from-hosted-ui","true"),e.label=2;case 2:return e.trys.push([2,6,,7]),[4,this._oAuthHandler.handleAuthResponse(t)];case 3:return o=e.sent(),s=o.accessToken,u=o.idToken,i=o.refreshToken,a=o.state,o=new Pd({IdToken:new Id({IdToken:u}),RefreshToken:new Ad({RefreshToken:i}),AccessToken:new gd({AccessToken:s})}),u=void 0,this._config.identityPoolId?[4,this.Credentials.set(o,"session")]:[3,5];case 4:u=e.sent(),Uf.debug("AWS credentials",u),e.label=5;case 5:return i=/-/.test(a),(s=this.createCognitoUser(o.getIdToken().decodePayload()["cognito:username"])).setSignInUserSession(o),window&&void 0!==window.history&&window.history.replaceState({},null,this._config.oauth.redirectSignIn),kf("signIn",s,"A user "+s.getUsername()+" has been signed in"),kf("cognitoHostedUI",s,"A user "+s.getUsername()+" has been signed in via Cognito Hosted UI"),i&&(a=a.split("-").splice(1).join("-"),kf("customOAuthState",E.urlSafeDecode(a),"State for user "+s.getUsername())),[2,u];case 6:return u=e.sent(),Uf.debug("Error in cognito hosted auth response",u),kf("signIn_failure",u,"The OAuth response flow failed"),kf("cognitoHostedUI_failure",u,"A failure occurred when returning to the Cognito Hosted UI"),kf("customState_failure",u,"A failure occurred when returning state"),[3,7];case 7:return[3,9];case 8:return this.oAuthFlowInProgress=!1,[7];case 9:return[2]}})})},Ff.prototype.essentialCredentials=function(e){return{accessKeyId:e.accessKeyId,sessionToken:e.sessionToken,secretAccessKey:e.secretAccessKey,identityId:e.identityId,authenticated:e.authenticated}},Ff.prototype.attributesToObject=function(e){var t={};return e&&e.map(function(e){"email_verified"===e.Name||"phone_number_verified"===e.Name?t[e.Name]="true"===e.Value||!0===e.Value:t[e.Name]=e.Value}),t},Ff.prototype.createCognitoUser=function(e){var t={Username:e,Pool:this.userPool};return t.Storage=this._storage,e=this._config.authenticationFlowType,t=new Dd(t),e&&t.setAuthenticationFlowType(e),t},Ff.prototype._isValidAuthStorage=function(e){return!!e&&"function"==typeof e.getItem&&"function"==typeof e.setItem&&"function"==typeof e.removeItem&&"function"==typeof e.clear},Ff.prototype.noUserPoolErrorHandler=function(e){return!e||e.userPoolId&&e.identityPoolId?jp.NoConfig:jp.MissingAuthConfig},Ff.prototype.rejectAuthError=function(e){return Promise.reject(new Ef(e))},Ff.prototype.rejectNoUserPool=function(){var e=this.noUserPoolErrorHandler(this._config);return Promise.reject(new Pf(e))},new Ff(null));E.Amplify.register(jf);var Bf=function(e,t){return(Bf=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function Vf(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}Bf(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var zf=function(){return(zf=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function qf(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,o)}i((u=u.apply(e,s||[])).next())})}function Kf(n,r){var o,i,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&t[0]?i.return:t[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,t[1])).done)return s;switch(i=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,i=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],i=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}}var Hf,or="@aws-sdk/client-s3",al="1.0.0-rc.4",Gf=(F(Wf,Hf=s.Writable),Wf.prototype._write=function(e,t,n){try{this.hash.update(e)}catch(e){return n(e)}n()},Wf);function Wf(e,t){return(t=Hf.call(this,t)||this).hash=e,t}function $f(e){return"string"==typeof e&&0===e.indexOf("arn:")&&6<=e.split(":").length}function Yf(e){return uh(e)?e.replace(/fips-|-fips/,""):e}function Jf(e){var t=e.match(ih);return[t[2],e.replace(new RegExp("^"+t[0]),"")]}function Zf(e,t){if(void 0===t&&(t={tlsCompatible:!0}),64<=e.length||!/^[a-z0-9][a-z0-9.-]+[a-z0-9]$/.test(e)||/(\d+\.){3}\d+/.test(e)||/[.-]{2}/.test(e)||null!=t&&t.tlsCompatible&&oh.test(e))throw new Error("Invalid DNS label "+e)}function Qf(e){var t=e.baseHostname;return ih.test(t)?("string"==typeof e.bucketName?lh:ch)(e):{bucketEndpoint:!1,hostname:t}}function Xf(t){return{applyToStack:function(e){var h;e.addRelativeTo((h=t,function(d,f){return function(p){return K(void 0,void 0,void 0,function(){var t,n,r,o,i,s,a,u,c,l;return H(this,function(e){switch(e.label){case 0:return u=p.input.Bucket,t=h.bucketEndpoint,n=p.request,zs.isInstance(n)?h.bucketEndpoint?(n.hostname=u,[3,6]):[3,1]:[3,7];case 1:return $f(u)?(a=function(e){if((e=e.split(":")).length<6||"arn"!==e[0])throw new Error("Malformed ARN");return{partition:(e=W(e))[1],service:e[2],region:e[3],accountId:e[4],resource:e.slice(5).join(":")}}(u),o=Yf,[4,h.region()]):[3,5];case 2:return r=o.apply(void 0,[e.sent()]),[4,h.regionInfoProvider(r)];case 3:return i=e.sent()||{},s=i.partition,i=void 0===(i=i.signingRegion)?r:i,[4,h.useArnRegion()];case 4:return l=e.sent(),a=Qf({bucketName:a,baseHostname:n.hostname,accelerateEndpoint:h.useAccelerateEndpoint,dualstackEndpoint:h.useDualstackEndpoint,pathStyleEndpoint:h.forcePathStyle,tlsCompatible:"https:"===n.protocol,useArnRegion:l,clientPartition:s,clientSigningRegion:i}),c=a.hostname,l=a.bucketEndpoint,s=a.signingRegion,a=a.signingService,s&&s!==i&&(f.signing_region=s),a&&"s3"!==a&&(f.signing_service=a),n.hostname=c,t=l,[3,6];case 5:u=Qf({bucketName:u,baseHostname:n.hostname,accelerateEndpoint:h.useAccelerateEndpoint,dualstackEndpoint:h.useDualstackEndpoint,pathStyleEndpoint:h.forcePathStyle,tlsCompatible:"https:"===n.protocol}),c=u.hostname,l=u.bucketEndpoint,n.hostname=c,t=l,e.label=6;case 6:t&&(n.path=n.path.replace(/^(\/)?[^\/]+/,""),""===n.path&&(n.path="/")),e.label=7;case 7:return[2,d(j(j({},p),{request:n}))]}})})}}),ph)}}}function eh(e,t){return e===t||Yf(e)===t||e===Yf(t)}var th=/^[a-z0-9][a-z0-9\.\-]{1,61}[a-z0-9]$/,nh=/(\d+\.){3}\d+/,rh=/\.\./,oh=/\./,ih=/^(.+\.)?s3[.-]([a-z0-9-]+)\./,sh=/^s3(-external-1)?\.amazonaws\.com$/,ah="amazonaws.com",uh=function(e){return e.startsWith("fips-")||e.endsWith("-fips")},ch=function(e){var t=(s=W((c=e.baseHostname,sh.test(c)?[c.replace("."+ah,""),ah]:Jf(c)),2))[0],n=s[1],r=e.pathStyleEndpoint,o=void 0!==(a=e.dualstackEndpoint)&&a,i=void 0!==(u=e.accelerateEndpoint)&&u,s=void 0===(c=e.tlsCompatible)||c,a=e.useArnRegion,u=e.bucketName,c=void 0===(c=e.clientPartition)?"aws":c,e=void 0===(e=e.clientSigningRegion)?t:e;!function(e){if(e.pathStyleEndpoint)throw new Error("Path-style S3 endpoint is not supported when bucket is an ARN");if(e.accelerateEndpoint)throw new Error("Accelerate endpoint is not supported when bucket is an ARN");if(!e.tlsCompatible)throw new Error("HTTPS is required when bucket is an ARN")}({pathStyleEndpoint:r,accelerateEndpoint:i,tlsCompatible:s});var l=u.service,r=u.partition,p=u.accountId,i=u.region,u=u.resource;return function(){if("s3"!==l&&"s3-outposts"!==l)throw new Error("Expect 's3' or 's3-outposts' in ARN service component")}(),function(e){if(r!==e.clientPartition)throw new Error('Partition in ARN is incompatible, got "'+r+'" but expected "'+e.clientPartition+'"')}({clientPartition:c}),function(){if(!/[0-9]{12}/.exec(p))throw new Error("Access point ARN accountID does not match regex '[0-9]{12}'")}(),function(e,t){if(""===e)throw new Error("ARN region is empty");if(!t.useArnRegion&&!eh(e,t.clientRegion)&&!eh(e,t.clientSigningRegion))throw new Error("Region in ARN is incompatible, got "+e+" but expected "+t.clientRegion);if(t.useArnRegion&&uh(e))throw new Error("Endpoint does not support FIPS region")}(i,{useArnRegion:a,clientRegion:t,clientSigningRegion:e}),u=(c=function(e){var t=e.includes(":")?":":"/",e=(n=W(e.split(t)))[0],n=n.slice(1);if("accesspoint"===e){if(1!==n.length||""===n[0])throw new Error("Access Point ARN should have one resource accesspoint"+t+"{accesspointname}");return{accesspointName:n[0]}}if("outpost"!==e)throw new Error("ARN resource should begin with 'accesspoint"+t+"' or 'outpost"+t+"'");if(!n[0]||"accesspoint"!==n[1]||!n[2]||3!==n.length)throw new Error("Outpost ARN should have resource outpost"+t+"{outpostId}"+t+"accesspoint"+t+"{accesspointName}");return n=(t=W(n,3))[0],t[1],{outpostId:n,accesspointName:t[2]}}(u)).accesspointName,c=c.outpostId,Zf(u+"-"+p,{tlsCompatible:s}),t=a?i:t,e=a?i:e,c?(function(){if("s3-outposts"!==l)throw new Error("Expect 's3-posts' in Outpost ARN service component")}(),Zf(c,{tlsCompatible:s}),function(){if(o)throw new Error("Dualstack endpoint is not supported with Outpost")}(),function(e){if(uh(null!=e?e:""))throw new Error("FIPS region is not supported with Outpost, got "+e)}(t),{bucketEndpoint:!0,hostname:u+"-"+p+"."+c+".s3-outposts."+t+"."+n,signingRegion:e,signingService:"s3-outposts"}):(function(){if("s3"!==l)throw new Error("Expect 's3' in Accesspoint ARN service component")}(),{bucketEndpoint:!0,hostname:u+"-"+p+".s3-accesspoint"+(o?".dualstack":"")+"."+t+"."+n,signingRegion:e})},lh=function(e){var t=void 0!==(i=e.accelerateEndpoint)&&i,n=e.baseHostname,r=e.bucketName,o=void 0!==(a=e.dualstackEndpoint)&&a,i=void 0!==(s=e.pathStyleEndpoint)&&s,s=void 0===(a=e.tlsCompatible)||a,e=(a=W((e=n,sh.test(e)?["us-east-1",ah]:Jf(e)),2))[0],a=a[1];return i||(i=r,!th.test(i)||nh.test(i)||rh.test(i))||s&&oh.test(r)?{bucketEndpoint:!1,hostname:o?"s3.dualstack."+e+"."+a:n}:(t?n="s3-accelerate"+(o?".dualstack":"")+"."+a:o&&(n="s3.dualstack."+e+"."+a),{bucketEndpoint:!0,hostname:r+"."+n})},ph={tags:["BUCKET_ENDPOINT"],name:"bucketEndpointMiddleware",relation:"before",toMiddleware:"hostHeaderMiddleware"},dh="AWS_S3_USE_ARN_REGION",fh="s3_use_arn_region",hh={environmentVariableSelector:function(e){if(Object.prototype.hasOwnProperty.call(e,dh)){if("true"===e[dh])return!0;if("false"===e[dh])return!1;throw new Error("Cannot load env "+dh+'. Expected "true" or "false", got '+e[dh]+".")}},configFileSelector:function(e){if(Object.prototype.hasOwnProperty.call(e,fh)){if("true"===e[fh])return!0;if("false"===e[fh])return!1;throw new Error("Cannot load shared config entry "+fh+'. Expected "true" or "false", got '+e[fh]+".")}},default:!1},mh="s3.{region}.amazonaws.com",gh=new Set(["ap-east-1","ap-northeast-1","ap-northeast-2","ap-south-1","ap-southeast-1","ap-southeast-2","ca-central-1","eu-central-1","eu-north-1","eu-west-1","eu-west-2","eu-west-3","me-south-1","sa-east-1","us-east-1","us-east-2","us-west-1","us-west-2"]),yh=new Set(["cn-north-1","cn-northwest-1"]),vh=new Set(["us-iso-east-1"]),bh=new Set(["us-isob-east-1"]),wh=new Set(["us-gov-east-1","us-gov-west-1"]),Sh=zf(zf({},{apiVersion:"2006-03-01",disableHostPrefix:!1,logger:{},regionInfoProvider:function(e,t){var n=void 0;switch(e){case"ap-east-1":n={hostname:"s3.ap-east-1.amazonaws.com",partition:"aws"};break;case"ap-northeast-1":n={hostname:"s3.ap-northeast-1.amazonaws.com",partition:"aws"};break;case"ap-northeast-2":n={hostname:"s3.ap-northeast-2.amazonaws.com",partition:"aws"};break;case"ap-south-1":n={hostname:"s3.ap-south-1.amazonaws.com",partition:"aws"};break;case"ap-southeast-1":n={hostname:"s3.ap-southeast-1.amazonaws.com",partition:"aws"};break;case"ap-southeast-2":n={hostname:"s3.ap-southeast-2.amazonaws.com",partition:"aws"};break;case"ca-central-1":n={hostname:"s3.ca-central-1.amazonaws.com",partition:"aws"};break;case"cn-north-1":n={hostname:"s3.cn-north-1.amazonaws.com.cn",partition:"aws-cn"};break;case"cn-northwest-1":n={hostname:"s3.cn-northwest-1.amazonaws.com.cn",partition:"aws-cn"};break;case"eu-central-1":n={hostname:"s3.eu-central-1.amazonaws.com",partition:"aws"};break;case"eu-north-1":n={hostname:"s3.eu-north-1.amazonaws.com",partition:"aws"};break;case"eu-west-1":n={hostname:"s3.eu-west-1.amazonaws.com",partition:"aws"};break;case"eu-west-2":n={hostname:"s3.eu-west-2.amazonaws.com",partition:"aws"};break;case"eu-west-3":n={hostname:"s3.eu-west-3.amazonaws.com",partition:"aws"};break;case"fips-us-gov-west-1":n={hostname:"s3-fips-us-gov-west-1.amazonaws.com",partition:"aws-us-gov",signingRegion:"us-gov-west-1"};break;case"me-south-1":n={hostname:"s3.me-south-1.amazonaws.com",partition:"aws"};break;case"s3-external-1":n={hostname:"s3-external-1.amazonaws.com",partition:"aws",signingRegion:"us-east-1"};break;case"sa-east-1":n={hostname:"s3.sa-east-1.amazonaws.com",partition:"aws"};break;case"us-east-1":n={hostname:"s3.amazonaws.com",partition:"aws"};break;case"us-east-2":n={hostname:"s3.us-east-2.amazonaws.com",partition:"aws"};break;case"us-gov-east-1":n={hostname:"s3.us-gov-east-1.amazonaws.com",partition:"aws-us-gov"};break;case"us-gov-west-1":n={hostname:"s3.us-gov-west-1.amazonaws.com",partition:"aws-us-gov"};break;case"us-iso-east-1":n={hostname:"s3.us-iso-east-1.c2s.ic.gov",partition:"aws-iso"};break;case"us-isob-east-1":n={hostname:"s3.us-isob-east-1.sc2s.sgov.gov",partition:"aws-iso-b"};break;case"us-west-1":n={hostname:"s3.us-west-1.amazonaws.com",partition:"aws"};break;case"us-west-2":n={hostname:"s3.us-west-2.amazonaws.com",partition:"aws"};break;default:gh.has(e)&&(n={hostname:mh.replace("{region}",e),partition:"aws"}),yh.has(e)&&(n={hostname:"s3.{region}.amazonaws.com.cn".replace("{region}",e),partition:"aws-cn"}),vh.has(e)&&(n={hostname:"s3.{region}.c2s.ic.gov".replace("{region}",e),partition:"aws-iso"}),bh.has(e)&&(n={hostname:"s3.{region}.sc2s.sgov.gov".replace("{region}",e),partition:"aws-iso-b"}),void 0===(n=wh.has(e)?{hostname:"s3.{region}.amazonaws.com".replace("{region}",e),partition:"aws-us-gov"}:n)&&(n={hostname:mh.replace("{region}",e),partition:"aws"})}return Promise.resolve(n)},signingEscapePath:!1,signingName:"s3",useArnRegion:!1}),{runtime:"node",base64Decoder:Za,base64Encoder:Qa,bodyLengthChecker:Xa,credentialDefaultProvider:Ns,defaultUserAgent:eu(or,al),eventStreamSerdeProvider:function(e){return new Bp(e)},maxAttempts:b(pr),md5:y.bind(null,"md5"),region:b(p,dt),requestHandler:new wt,sha256:y.bind(null,"sha256"),streamCollector:C,streamHasher:function(i,s){return new Promise(function(e,t){var n,r,o;"string"==typeof s.path?(n=a.createReadStream(s.path,{start:s.start,end:s.end}),r=new i,o=new Gf(r),n.pipe(o),n.on("error",function(e){o.end(),t(e)}),o.on("error",t),o.on("finish",function(){r.digest().then(e).catch(t)})):t(new Error("Unable to calculate hash for non-file streams."))})},urlParser:Ja,useArnRegion:b(hh),utf8Decoder:Qe,utf8Encoder:gn});var Ch={step:"build",tags:["SET_EXPECT_HEADER","EXPECT_HEADER"],name:"addExpectContinueMiddleware"};var _h,Eh,Ih,Ah,Ph,Oh,kh,Th,xh,Nh,Mh,Rh,Uh,Dh,Lh,Fh,jh,Bh,Vh,zh,qh,Kh,Hh,Gh,Wh,$h,Yh,Jh,Zh,Qh={step:"initialize",tags:["VALIDATE_BUCKET_NAME"],name:"validateBucketNameMiddleware"},Xh={step:"build",tags:["USE_REGIONAL_ENDPOINT","S3"],name:"useRegionalEndpointMiddleware"},em=(Vf(tm,_h=vt),tm.prototype.destroy=function(){_h.prototype.destroy.call(this)},tm);function tm(e){var t,n,r,o,i=this,s=zf(zf({},Sh),e),a=Pi(s),u=Yu(Ai(a)),c=(s=void 0!==(e=(t=c=Xs(u)).bucketEndpoint)&&e,u=void 0!==(a=t.forcePathStyle)&&a,e=void 0!==(c=t.useAccelerateEndpoint)&&c,c=void 0!==(a=t.useDualstackEndpoint)&&a,n=void 0!==(a=t.useArnRegion)&&a,j(j({},t),{bucketEndpoint:s,forcePathStyle:u,useAccelerateEndpoint:e,useDualstackEndpoint:c,useArnRegion:"function"==typeof n?n:function(){return Promise.resolve(n)}})),c=j(j({},c),{eventStreamMarshaller:c.eventStreamSerdeProvider(c)});return(i=_h.call(this,c)||this).config=c,i.middlewareStack.use(Qu(i.config)),i.middlewareStack.use(Fs(i.config)),i.middlewareStack.use(ec(i.config)),i.middlewareStack.use(cu(i.config)),i.middlewareStack.use((i.config,{applyToStack:function(e){e.add(function(){var e=this;return function(r){return function(n){return K(e,void 0,void 0,function(){var t;return H(this,function(e){if("string"==typeof(t=n.input.Bucket)&&!$f(t)&&0<=t.indexOf("/"))throw(t=new Error("Bucket name shouldn't contain '/', received '"+t+"'")).name="InvalidBucketName",t;return[2,r(j({},n))]})})}}}(),Qh)}})),i.middlewareStack.use((o=i.config,{applyToStack:function(e){var i;e.add((i=o,function(o){return function(r){return K(void 0,void 0,void 0,function(){var t,n;return H(this,function(e){switch(e.label){case 0:return t=r.request,!zs.isInstance(t)||i.isCustomEndpoint?[2,o(j({},r))]:"s3.amazonaws.com"!==t.hostname?[3,1]:(t.hostname="s3.us-east-1.amazonaws.com",[3,3]);case 1:return n="aws-global",[4,i.region()];case 2:n===e.sent()&&(t.hostname="s3.amazonaws.com"),e.label=3;case 3:return[2,o(j({},r))]}})})}}),Xh)}})),i.middlewareStack.use((r=i.config,{applyToStack:function(e){e.add(function(o){var e=this;return function(r){return function(n){return K(e,void 0,void 0,function(){var t;return H(this,function(e){return t=n.request,zs.isInstance(t)&&t.body&&"node"===o.runtime&&(t.headers=j(j({},t.headers),{Expect:"100-continue"})),[2,r(j(j({},n),{request:t}))]})})}}}(r),Ch)}})),i.middlewareStack.use(pu(i.config)),i.middlewareStack.use(du(i.config)),i}(Eh=Eh||{}).filterSensitiveLog=function(e){return zf({},e)},(Ih=Ih||{}).filterSensitiveLog=function(e){return zf({},e)},(Ah=Ah||{}).filterSensitiveLog=function(e){return zf(zf({},e),e.SSEKMSKeyId&&{SSEKMSKeyId:gc})},(Ph=Ph||{}).filterSensitiveLog=function(e){return zf({},e)},(Oh=Oh||{}).filterSensitiveLog=function(e){return zf(zf(zf({},e),e.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:gc}),e.SSEKMSKeyId&&{SSEKMSKeyId:gc})},(kh=kh||{}).filterSensitiveLog=function(e){return zf(zf(zf(zf({},e),e.SSEKMSKeyId&&{SSEKMSKeyId:gc}),e.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:gc}),e.SSECustomerKey&&{SSECustomerKey:gc})},(Th=Th||{}).filterSensitiveLog=function(e){return zf({},e)},(xh=xh||{}).filterSensitiveLog=function(e){return zf({},e)},(Nh=Nh||{}).filterSensitiveLog=function(e){return zf(zf({},e),e.KMSMasterKeyID&&{KMSMasterKeyID:gc})},(Mh=Mh||{}).filterSensitiveLog=function(e){return zf(zf({},e),e.ApplyServerSideEncryptionByDefault&&{ApplyServerSideEncryptionByDefault:Nh.filterSensitiveLog(e.ApplyServerSideEncryptionByDefault)})},(Rh=Rh||{}).filterSensitiveLog=function(e){return zf(zf({},e),e.KeyId&&{KeyId:gc})},(Uh=Uh||{}).filterSensitiveLog=function(e){return zf(zf({},e),e.SSEKMS&&{SSEKMS:Rh.filterSensitiveLog(e.SSEKMS)})},(Dh=Dh||{}).filterSensitiveLog=function(e){return zf(zf({},e),e.Encryption&&{Encryption:Uh.filterSensitiveLog(e.Encryption)})},(Lh=Lh||{}).filterSensitiveLog=function(e){return zf(zf({},e),e.S3BucketDestination&&{S3BucketDestination:Dh.filterSensitiveLog(e.S3BucketDestination)})},(Fh=Fh||{}).filterSensitiveLog=function(e){return zf(zf({},e),e.SSEKMSKeyId&&{SSEKMSKeyId:gc})},(jh=jh||{}).filterSensitiveLog=function(e){return zf(zf({},e),e.SSECustomerKey&&{SSECustomerKey:gc})},(Bh=Bh||{}).filterSensitiveLog=function(e){return zf({},e)},(Vh=Vh||{}).filterSensitiveLog=function(e){return zf({},e)},(zh=zh||{}).filterSensitiveLog=function(e){return zf({},e)},(qh=qh||{}).filterSensitiveLog=function(e){return zf({},e)},(Kh=Kh||{}).filterSensitiveLog=function(e){return zf(zf(zf({},e),e.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:gc}),e.SSEKMSKeyId&&{SSEKMSKeyId:gc})},(Hh=Hh||{}).filterSensitiveLog=function(e){return zf(zf(zf(zf({},e),e.SSECustomerKey&&{SSECustomerKey:gc}),e.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:gc}),e.SSEKMSKeyId&&{SSEKMSKeyId:gc})},(Gh=Gh||{}).filterSensitiveLog=function(e){return zf(zf({},e),e.KMSKeyId&&{KMSKeyId:gc})},(Yh=Yh||{}).filterSensitiveLog=function(e){return zf({},e)},(Wh=Wh||{}).filterSensitiveLog=function(e){return zf(zf({},e),e.Encryption&&{Encryption:Gh.filterSensitiveLog(e.Encryption)})},($h=$h||{}).filterSensitiveLog=function(e){return zf(zf({},e),e.S3&&{S3:Wh.filterSensitiveLog(e.S3)})},(Yh={}).IGNORE="IGNORE",Yh.NONE="NONE",Yh.USE="USE",(Jh=Jh||{}).filterSensitiveLog=function(e){return zf({},e)},(Jh={}).DOCUMENT="DOCUMENT",Jh.LINES="LINES",(Zh=Zh||{}).filterSensitiveLog=function(e){return zf({},e)},(Zh={}).ALWAYS="ALWAYS",Zh.ASNEEDED="ASNEEDED";var nm=(rm.prototype.withName=function(e){return this.name=e,this},rm.prototype.addAttribute=function(e,t){return this.attributes[e]=t,this},rm.prototype.addChildNode=function(e){return this.children.push(e),this},rm.prototype.removeAttribute=function(e){return delete this.attributes[e],this},rm.prototype.toString=function(){var e,t,n=Boolean(this.children.length),r="<"+this.name,o=this.attributes;try{for(var i=G(Object.keys(o)),s=i.next();!s.done;s=i.next()){var a=s.value,u=o[a];null!=u&&(r+=" "+a+'="'+(""+u).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")+'"')}}catch(t){e={error:t}}finally{try{s&&!s.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}return r+(n?">"+this.children.map(function(e){return e.toString()}).join("")+"</"+this.name+">":"/>")},rm);function rm(e,t){void 0===t&&(t=[]),this.name=e,this.children=t,this.attributes={}}var om=(im.prototype.toString=function(){return(""+this.value).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},im);function im(e){this.value=e}function sm(e,t){return(e=void 0===e?new Uint8Array:e)instanceof Uint8Array?Promise.resolve(e):t.streamCollector(e)||Promise.resolve(new Uint8Array)}function am(e){return!(void 0===e||""===e||Object.getOwnPropertyNames(e).includes("length")&&0==e.length||Object.getOwnPropertyNames(e).includes("size")&&0==e.size)}var um,cm=function(n,e){return qf(void 0,void 0,void 0,function(){var t;return Kf(this,function(e){return t={name:"NoSuchBucket",$fault:"client",$metadata:hm(n)},n.body,[2,t]})})},lm=function(n,e){return qf(void 0,void 0,void 0,function(){var t;return Kf(this,function(e){return t={name:"NoSuchKey",$fault:"client",$metadata:hm(n)},n.body,[2,t]})})},pm=function(n,e){return qf(void 0,void 0,void 0,function(){var t;return Kf(this,function(e){return t={name:"NoSuchUpload",$fault:"client",$metadata:hm(n)},n.body,[2,t]})})},dm=function(e,t){return e.map(function(e){var t,n=e;return e=new nm("CompletedPart"),void 0!==n.ETag&&(t=new nm("ETag").addChildNode(new om(n.ETag)).withName("ETag"),e.addChildNode(t)),void 0!==n.PartNumber&&(t=new nm("PartNumber").addChildNode(new om(String(n.PartNumber))).withName("PartNumber"),e.addChildNode(t)),e.withName("member")})},fm=function(e,t){var n={DisplayName:void 0,ID:void 0};return void 0!==e.DisplayName&&(n.DisplayName=e.DisplayName),void 0!==e.ID&&(n.ID=e.ID),n},hm=function(e){return{httpStatusCode:e.statusCode,httpHeaders:e.headers,requestId:e.headers["x-amzn-requestid"]}},mm=function(e,t){return sm(e,n=t).then(function(e){return n.utf8Encoder(e)}).then(function(e){if(e.length){var t=k.parse(e,{attributeNamePrefix:"",ignoreAttributes:!1,parseNodeValue:!1,tagValueProcessor:function(e,t){return e.replace(/&amp;/g,"&").replace(/&apos;/g,"'").replace(/&quot;/g,'"').replace(/&gt;/g,">").replace(/&lt;/g,"<")}});return(t=t[e=Object.keys(t)[0]])["#text"]&&(t[e]=t["#text"],delete t["#text"]),uc(t)}return{}});var n},gm=function(e,t){return void 0!==t.Code?t.Code:404==e.statusCode?"NotFound":""},ym=(Vf(vm,um=hn),vm.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Hc(t,this.serialize,this.deserialize)),this.middlewareStack.use(Xf(t));var r=e.concat(this.middlewareStack),o=t.logger,i="AbortMultipartUploadCommand",e={logger:o,clientName:"S3Client",commandName:i,inputFilterSensitiveLog:Ih.filterSensitiveLog,outputFilterSensitiveLog:Eh.filterSensitiveLog};"function"==typeof o.info&&o.info({clientName:"S3Client",commandName:i});var s=t.requestHandler;return r.resolve(function(e){return s.handle(e.request,n||{})},e)},vm.prototype.serialize=function(e,t){return a=e,u=t,qf(void 0,void 0,void 0,function(){var t,n,r,o,i,s;return Kf(this,function(e){switch(e.label){case 0:if(t=zf(zf({"Content-Type":""},am(a.RequestPayer)&&{"x-amz-request-payer":a.RequestPayer}),am(a.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":a.ExpectedBucketOwner}),n="/{Bucket}/{Key+}",void 0===a.Key)throw new Error("No value provided for input HTTP label: Key.");if((i=a.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");if(n=n.replace("{Key+}",i.split("/").map(sc).join("/")),void 0===a.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((i=a.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return n=n.replace("{Bucket}",sc(i)),r=zf({"x-id":"AbortMultipartUpload"},void 0!==a.UploadId&&{uploadId:a.UploadId}),[4,u.endpoint()];case 1:return s=e.sent(),o=s.hostname,i=void 0===(i=s.protocol)?"https":i,s=s.port,[2,new zs({protocol:i,hostname:o,port:s,method:"DELETE",headers:t,path:n,query:r,body:void 0})]}})});var a,u},vm.prototype.deserialize=function(e,t){return n=e,r=t,qf(void 0,void 0,void 0,function(){var t;return Kf(this,function(e){switch(e.label){case 0:return 204!==n.statusCode&&300<=n.statusCode?[2,(a=n,u=r,qf(void 0,void 0,void 0,function(){var t,n,r,o,i,s;return Kf(this,function(e){switch(e.label){case 0:return t=[zf({},a)],s={},[4,mm(a.body,u)];case 1:switch(o=zf.apply(void 0,t.concat([(s.body=e.sent(),s)])),i="UnknownError",i=gm(a,o.body)){case"NoSuchUpload":case"com.amazonaws.s3#NoSuchUpload":return[3,2]}return[3,4];case 2:return r=[{}],[4,pm(o)];case 3:return n=zf.apply(void 0,[zf.apply(void 0,r.concat([e.sent()])),{name:i,$metadata:hm(a)}]),[3,5];case 4:o=o.body,i=o.code||o.Code||i,n=zf(zf({},o),{name:""+i,message:o.message||o.Message||i,$fault:"client",$metadata:hm(a)}),e.label=5;case 5:return i=n.message||n.Message||i,n.message=i,delete n.Message,[2,Promise.reject(Object.assign(new Error(i),n))]}})}))]:(t={$metadata:hm(n),RequestCharged:void 0},void 0!==n.headers["x-amz-request-charged"]&&(t.RequestCharged=n.headers["x-amz-request-charged"]),[4,sm(n.body,r)]);case 1:return e.sent(),[2,Promise.resolve(t)]}var a,u})});var n,r},vm);function vm(e){var t=um.call(this)||this;return t.input=e,t}var bm,wm=(Vf(Sm,bm=hn),Sm.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Hc(t,this.serialize,this.deserialize)),this.middlewareStack.use(Xf(t));var r=e.concat(this.middlewareStack),o=t.logger,i="CompleteMultipartUploadCommand",e={logger:o,clientName:"S3Client",commandName:i,inputFilterSensitiveLog:Ph.filterSensitiveLog,outputFilterSensitiveLog:Ah.filterSensitiveLog};"function"==typeof o.info&&o.info({clientName:"S3Client",commandName:i});var s=t.requestHandler;return r.resolve(function(e){return s.handle(e.request,n||{})},e)},Sm.prototype.serialize=function(e,t){return l=e,p=t,qf(void 0,void 0,void 0,function(){var r,o,i,s,a,u,c;return Kf(this,function(e){switch(e.label){case 0:if(r=zf(zf({"Content-Type":"application/xml"},am(l.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":l.ExpectedBucketOwner}),am(l.RequestPayer)&&{"x-amz-request-payer":l.RequestPayer}),o="/{Bucket}/{Key+}",void 0===l.Key)throw new Error("No value provided for input HTTP label: Key.");if((a=l.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");if(o=o.replace("{Key+}",a.split("/").map(sc).join("/")),void 0===l.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((a=l.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return o=o.replace("{Bucket}",sc(a)),i=zf({},void 0!==l.UploadId&&{uploadId:l.UploadId}),void 0!==l.MultipartUpload&&(t=l.MultipartUpload,n=new nm("CompletedMultipartUpload"),void 0!==t.Parts&&dm(t.Parts).map(function(e){e=e.withName("Part"),n.addChildNode(e)}),s='<?xml version="1.0" encoding="UTF-8"?>',(u=n).addAttribute("xmlns","http://s3.amazonaws.com/doc/2006-03-01/"),s+=u.toString()),[4,p.endpoint()];case 1:return c=e.sent(),a=c.hostname,u=void 0===(u=c.protocol)?"https":u,c=c.port,[2,new zs({protocol:u,hostname:a,port:c,method:"POST",headers:r,path:o,query:i,body:s})]}var t,n})});var l,p},Sm.prototype.deserialize=function(e,t){return i=e,s=t,qf(void 0,void 0,void 0,function(){var t,n;return Kf(this,function(e){switch(e.label){case 0:return 200!==i.statusCode&&300<=i.statusCode?[2,(r=i,o=s,qf(void 0,void 0,void 0,function(){var t,n;return Kf(this,function(e){switch(e.label){case 0:return t=[zf({},r)],n={},[4,mm(r.body,o)];case 1:return t=zf.apply(void 0,t.concat([(n.body=e.sent(),n)])),n="UnknownError",n=gm(r,t.body),t=t.body,n=t.code||t.Code||n,t=zf(zf({},t),{name:""+n,message:t.message||t.Message||n,$fault:"client",$metadata:hm(r)}),n=t.message||t.Message||n,t.message=n,delete t.Message,[2,Promise.reject(Object.assign(new Error(n),t))]}})}))]:(t={$metadata:hm(i),Bucket:void 0,ETag:void 0,Expiration:void 0,Key:void 0,Location:void 0,RequestCharged:void 0,SSEKMSKeyId:void 0,ServerSideEncryption:void 0,VersionId:void 0},void 0!==i.headers["x-amz-expiration"]&&(t.Expiration=i.headers["x-amz-expiration"]),void 0!==i.headers["x-amz-server-side-encryption"]&&(t.ServerSideEncryption=i.headers["x-amz-server-side-encryption"]),void 0!==i.headers["x-amz-server-side-encryption-aws-kms-key-id"]&&(t.SSEKMSKeyId=i.headers["x-amz-server-side-encryption-aws-kms-key-id"]),void 0!==i.headers["x-amz-version-id"]&&(t.VersionId=i.headers["x-amz-version-id"]),void 0!==i.headers["x-amz-request-charged"]&&(t.RequestCharged=i.headers["x-amz-request-charged"]),[4,mm(i.body,s)]);case 1:return void 0!==(n=e.sent()).Bucket&&(t.Bucket=n.Bucket),void 0!==n.ETag&&(t.ETag=n.ETag),void 0!==n.Key&&(t.Key=n.Key),void 0!==n.Location&&(t.Location=n.Location),[2,Promise.resolve(t)]}var r,o})});var i,s},Sm);function Sm(e){var t=bm.call(this)||this;return t.input=e,t}function Cm(t){return{applyToStack:function(e){e.add(function(m){var e=this;return function(h){return function(f){return K(e,void 0,void 0,function(){var t,n,r,o,i,s,a,u,c,l,p,d;return H(this,function(e){switch(e.label){case 0:t=j({},f.input),i=[{target:"SSECustomerKey",hash:"SSECustomerKeyMD5"},{target:"CopySourceSSECustomerKey",hash:"CopySourceSSECustomerKeyMD5"}],e.label=1;case 1:e.trys.push([1,6,7,8]),n=G(i),r=n.next(),e.label=2;case 2:return r.done?[3,5]:(o=r.value,(i=t[o.target])?(u=ArrayBuffer.isView(i)?new Uint8Array(i.buffer,i.byteOffset,i.byteLength):"string"==typeof i?m.utf8Decoder(i):new Uint8Array(i),c=m.base64Encoder(u),(i=new m.md5).update(u),s=[j({},t)],(d={})[o.target]=c,a=o.hash,c=(u=m).base64Encoder,[4,i.digest()]):[3,4]);case 3:t=j.apply(void 0,s.concat([(d[a]=c.apply(u,[e.sent()]),d)])),e.label=4;case 4:return r=n.next(),[3,2];case 5:return[3,8];case 6:return l={error:l=e.sent()},[3,8];case 7:try{r&&!r.done&&(p=n.return)&&p.call(n)}finally{if(l)throw l.error}return[7];case 8:return[2,h(j(j({},f),{input:t}))]}})})}}}(t),Em)}}}var _m,Em={name:"ssecMiddleware",step:"initialize",tags:["SSE"]},Im=(Vf(Am,_m=hn),Am.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Hc(t,this.serialize,this.deserialize)),this.middlewareStack.use(Cm(t)),this.middlewareStack.use(Xf(t));var r=e.concat(this.middlewareStack),o=t.logger,i="CreateMultipartUploadCommand",e={logger:o,clientName:"S3Client",commandName:i,inputFilterSensitiveLog:kh.filterSensitiveLog,outputFilterSensitiveLog:Oh.filterSensitiveLog};"function"==typeof o.info&&o.info({clientName:"S3Client",commandName:i});var s=t.requestHandler;return r.resolve(function(e){return s.handle(e.request,n||{})},e)},Am.prototype.serialize=function(e,t){return a=e,u=t,qf(void 0,void 0,void 0,function(){var t,n,r,o,i,s;return Kf(this,function(e){switch(e.label){case 0:if(t=zf(zf(zf(zf(zf(zf(zf(zf(zf(zf(zf(zf(zf(zf(zf(zf(zf(zf(zf(zf(zf(zf(zf(zf(zf(zf({"Content-Type":""},am(a.GrantFullControl)&&{"x-amz-grant-full-control":a.GrantFullControl}),am(a.SSECustomerKeyMD5)&&{"x-amz-server-side-encryption-customer-key-MD5":a.SSECustomerKeyMD5}),am(a.SSECustomerAlgorithm)&&{"x-amz-server-side-encryption-customer-algorithm":a.SSECustomerAlgorithm}),am(a.SSEKMSKeyId)&&{"x-amz-server-side-encryption-aws-kms-key-id":a.SSEKMSKeyId}),am(a.ObjectLockLegalHoldStatus)&&{"x-amz-object-lock-legal-hold":a.ObjectLockLegalHoldStatus}),am(a.RequestPayer)&&{"x-amz-request-payer":a.RequestPayer}),am(a.GrantRead)&&{"x-amz-grant-read":a.GrantRead}),am(a.GrantWriteACP)&&{"x-amz-grant-write-acp":a.GrantWriteACP}),am(a.WebsiteRedirectLocation)&&{"x-amz-website-redirect-location":a.WebsiteRedirectLocation}),am(a.ContentType)&&{"Content-Type":a.ContentType}),am(a.ContentLanguage)&&{"Content-Language":a.ContentLanguage}),am(a.CacheControl)&&{"Cache-Control":a.CacheControl}),am(a.GrantReadACP)&&{"x-amz-grant-read-acp":a.GrantReadACP}),am(a.Tagging)&&{"x-amz-tagging":a.Tagging}),am(a.SSEKMSEncryptionContext)&&{"x-amz-server-side-encryption-context":a.SSEKMSEncryptionContext}),am(a.ACL)&&{"x-amz-acl":a.ACL}),am(a.SSECustomerKey)&&{"x-amz-server-side-encryption-customer-key":a.SSECustomerKey}),am(a.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":a.ExpectedBucketOwner}),am(a.Expires)&&{Expires:hc(a.Expires).toString()}),am(a.ObjectLockRetainUntilDate)&&{"x-amz-object-lock-retain-until-date":(a.ObjectLockRetainUntilDate.toISOString().split(".")[0]+"Z").toString()}),am(a.ServerSideEncryption)&&{"x-amz-server-side-encryption":a.ServerSideEncryption}),am(a.ContentDisposition)&&{"Content-Disposition":a.ContentDisposition}),am(a.ObjectLockMode)&&{"x-amz-object-lock-mode":a.ObjectLockMode}),am(a.StorageClass)&&{"x-amz-storage-class":a.StorageClass}),am(a.ContentEncoding)&&{"Content-Encoding":a.ContentEncoding}),void 0!==a.Metadata&&Object.keys(a.Metadata).reduce(function(e,t){return e["x-amz-meta-"+t]=a.Metadata[t],e},{})),n="/{Bucket}/{Key+}",void 0===a.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((i=a.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(n=n.replace("{Bucket}",sc(i)),void 0===a.Key)throw new Error("No value provided for input HTTP label: Key.");if((i=a.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return n=n.replace("{Key+}",i.split("/").map(sc).join("/")),r={uploads:""},[4,u.endpoint()];case 1:return s=e.sent(),o=s.hostname,i=void 0===(i=s.protocol)?"https":i,s=s.port,[2,new zs({protocol:i,hostname:o,port:s,method:"POST",headers:t,path:n,query:r,body:void 0})]}})});var a,u},Am.prototype.deserialize=function(e,t){return i=e,s=t,qf(void 0,void 0,void 0,function(){var t,n;return Kf(this,function(e){switch(e.label){case 0:return 200!==i.statusCode&&300<=i.statusCode?[2,(r=i,o=s,qf(void 0,void 0,void 0,function(){var t,n;return Kf(this,function(e){switch(e.label){case 0:return t=[zf({},r)],n={},[4,mm(r.body,o)];case 1:return t=zf.apply(void 0,t.concat([(n.body=e.sent(),n)])),n="UnknownError",n=gm(r,t.body),t=t.body,n=t.code||t.Code||n,t=zf(zf({},t),{name:""+n,message:t.message||t.Message||n,$fault:"client",$metadata:hm(r)}),n=t.message||t.Message||n,t.message=n,delete t.Message,[2,Promise.reject(Object.assign(new Error(n),t))]}})}))]:(t={$metadata:hm(i),AbortDate:void 0,AbortRuleId:void 0,Bucket:void 0,Key:void 0,RequestCharged:void 0,SSECustomerAlgorithm:void 0,SSECustomerKeyMD5:void 0,SSEKMSEncryptionContext:void 0,SSEKMSKeyId:void 0,ServerSideEncryption:void 0,UploadId:void 0},void 0!==i.headers["x-amz-server-side-encryption-context"]&&(t.SSEKMSEncryptionContext=i.headers["x-amz-server-side-encryption-context"]),void 0!==i.headers["x-amz-server-side-encryption"]&&(t.ServerSideEncryption=i.headers["x-amz-server-side-encryption"]),void 0!==i.headers["x-amz-request-charged"]&&(t.RequestCharged=i.headers["x-amz-request-charged"]),void 0!==i.headers["x-amz-abort-date"]&&(t.AbortDate=new Date(i.headers["x-amz-abort-date"])),void 0!==i.headers["x-amz-server-side-encryption-customer-algorithm"]&&(t.SSECustomerAlgorithm=i.headers["x-amz-server-side-encryption-customer-algorithm"]),void 0!==i.headers["x-amz-server-side-encryption-aws-kms-key-id"]&&(t.SSEKMSKeyId=i.headers["x-amz-server-side-encryption-aws-kms-key-id"]),void 0!==i.headers["x-amz-abort-rule-id"]&&(t.AbortRuleId=i.headers["x-amz-abort-rule-id"]),void 0!==i.headers["x-amz-server-side-encryption-customer-key-md5"]&&(t.SSECustomerKeyMD5=i.headers["x-amz-server-side-encryption-customer-key-md5"]),[4,mm(i.body,s)]);case 1:return void 0!==(n=e.sent()).Bucket&&(t.Bucket=n.Bucket),void 0!==n.Key&&(t.Key=n.Key),void 0!==n.UploadId&&(t.UploadId=n.UploadId),[2,Promise.resolve(t)]}var r,o})});var i,s},Am);function Am(e){var t=_m.call(this)||this;return t.input=e,t}var Pm,Om=(Vf(km,Pm=hn),km.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Hc(t,this.serialize,this.deserialize)),this.middlewareStack.use(Xf(t));var r=e.concat(this.middlewareStack),o=t.logger,i="DeleteObjectCommand",e={logger:o,clientName:"S3Client",commandName:i,inputFilterSensitiveLog:xh.filterSensitiveLog,outputFilterSensitiveLog:Th.filterSensitiveLog};"function"==typeof o.info&&o.info({clientName:"S3Client",commandName:i});var s=t.requestHandler;return r.resolve(function(e){return s.handle(e.request,n||{})},e)},km.prototype.serialize=function(e,t){return a=e,u=t,qf(void 0,void 0,void 0,function(){var t,n,r,o,i,s;return Kf(this,function(e){switch(e.label){case 0:if(t=zf(zf(zf(zf({"Content-Type":""},am(a.MFA)&&{"x-amz-mfa":a.MFA}),am(a.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":a.ExpectedBucketOwner}),am(a.BypassGovernanceRetention)&&{"x-amz-bypass-governance-retention":a.BypassGovernanceRetention.toString()}),am(a.RequestPayer)&&{"x-amz-request-payer":a.RequestPayer}),n="/{Bucket}/{Key+}",void 0===a.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((i=a.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(n=n.replace("{Bucket}",sc(i)),void 0===a.Key)throw new Error("No value provided for input HTTP label: Key.");if((i=a.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return n=n.replace("{Key+}",i.split("/").map(sc).join("/")),r=zf({"x-id":"DeleteObject"},void 0!==a.VersionId&&{versionId:a.VersionId}),[4,u.endpoint()];case 1:return s=e.sent(),o=s.hostname,i=void 0===(i=s.protocol)?"https":i,s=s.port,[2,new zs({protocol:i,hostname:o,port:s,method:"DELETE",headers:t,path:n,query:r,body:void 0})]}})});var a,u},km.prototype.deserialize=function(e,t){return n=e,i=t,qf(void 0,void 0,void 0,function(){var t;return Kf(this,function(e){switch(e.label){case 0:return 204!==n.statusCode&&300<=n.statusCode?[2,(r=n,o=i,qf(void 0,void 0,void 0,function(){var t,n;return Kf(this,function(e){switch(e.label){case 0:return t=[zf({},r)],n={},[4,mm(r.body,o)];case 1:return t=zf.apply(void 0,t.concat([(n.body=e.sent(),n)])),n="UnknownError",n=gm(r,t.body),t=t.body,n=t.code||t.Code||n,t=zf(zf({},t),{name:""+n,message:t.message||t.Message||n,$fault:"client",$metadata:hm(r)}),n=t.message||t.Message||n,t.message=n,delete t.Message,[2,Promise.reject(Object.assign(new Error(n),t))]}})}))]:(t={$metadata:hm(n),DeleteMarker:void 0,RequestCharged:void 0,VersionId:void 0},void 0!==n.headers["x-amz-delete-marker"]&&(t.DeleteMarker="true"===n.headers["x-amz-delete-marker"]),void 0!==n.headers["x-amz-request-charged"]&&(t.RequestCharged=n.headers["x-amz-request-charged"]),void 0!==n.headers["x-amz-version-id"]&&(t.VersionId=n.headers["x-amz-version-id"]),[4,sm(n.body,i)]);case 1:return e.sent(),[2,Promise.resolve(t)]}var r,o})});var n,i},km);function km(e){var t=Pm.call(this)||this;return t.input=e,t}var Tm,xm=(Vf(Nm,Tm=hn),Nm.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Hc(t,this.serialize,this.deserialize)),this.middlewareStack.use(Cm(t)),this.middlewareStack.use(Xf(t));var r=e.concat(this.middlewareStack),o=t.logger,i="GetObjectCommand",e={logger:o,clientName:"S3Client",commandName:i,inputFilterSensitiveLog:jh.filterSensitiveLog,outputFilterSensitiveLog:Fh.filterSensitiveLog};"function"==typeof o.info&&o.info({clientName:"S3Client",commandName:i});var s=t.requestHandler;return r.resolve(function(e){return s.handle(e.request,n||{})},e)},Nm.prototype.serialize=function(e,t){return a=e,u=t,qf(void 0,void 0,void 0,function(){var t,n,r,o,i,s;return Kf(this,function(e){switch(e.label){case 0:if(t=zf(zf(zf(zf(zf(zf(zf(zf(zf(zf({"Content-Type":""},am(a.SSECustomerKey)&&{"x-amz-server-side-encryption-customer-key":a.SSECustomerKey}),am(a.SSECustomerAlgorithm)&&{"x-amz-server-side-encryption-customer-algorithm":a.SSECustomerAlgorithm}),am(a.SSECustomerKeyMD5)&&{"x-amz-server-side-encryption-customer-key-MD5":a.SSECustomerKeyMD5}),am(a.RequestPayer)&&{"x-amz-request-payer":a.RequestPayer}),am(a.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":a.ExpectedBucketOwner}),am(a.IfUnmodifiedSince)&&{"If-Unmodified-Since":hc(a.IfUnmodifiedSince).toString()}),am(a.IfModifiedSince)&&{"If-Modified-Since":hc(a.IfModifiedSince).toString()}),am(a.IfNoneMatch)&&{"If-None-Match":a.IfNoneMatch}),am(a.IfMatch)&&{"If-Match":a.IfMatch}),am(a.Range)&&{Range:a.Range}),n="/{Bucket}/{Key+}",void 0===a.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((i=a.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(n=n.replace("{Bucket}",sc(i)),void 0===a.Key)throw new Error("No value provided for input HTTP label: Key.");if((i=a.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return n=n.replace("{Key+}",i.split("/").map(sc).join("/")),r=zf(zf(zf(zf(zf(zf(zf(zf({"x-id":"GetObject"},void 0!==a.ResponseContentEncoding&&{"response-content-encoding":a.ResponseContentEncoding}),void 0!==a.ResponseCacheControl&&{"response-cache-control":a.ResponseCacheControl}),void 0!==a.ResponseContentLanguage&&{"response-content-language":a.ResponseContentLanguage}),void 0!==a.ResponseContentDisposition&&{"response-content-disposition":a.ResponseContentDisposition}),void 0!==a.PartNumber&&{partNumber:a.PartNumber.toString()}),void 0!==a.VersionId&&{versionId:a.VersionId}),void 0!==a.ResponseExpires&&{"response-expires":(a.ResponseExpires.toISOString().split(".")[0]+"Z").toString()}),void 0!==a.ResponseContentType&&{"response-content-type":a.ResponseContentType}),[4,u.endpoint()];case 1:return s=e.sent(),o=s.hostname,i=void 0===(i=s.protocol)?"https":i,s=s.port,[2,new zs({protocol:i,hostname:o,port:s,method:"GET",headers:t,path:n,query:r,body:void 0})]}})});var a,u},Nm.prototype.deserialize=function(e,t){return r=e,o=t,qf(void 0,void 0,void 0,function(){var t,n;return Kf(this,function(e){return 200!==r.statusCode&&300<=r.statusCode?[2,(a=r,u=o,qf(void 0,void 0,void 0,function(){var t,n,r,o,i,s;return Kf(this,function(e){switch(e.label){case 0:return t=[zf({},a)],s={},[4,mm(a.body,u)];case 1:switch(o=zf.apply(void 0,t.concat([(s.body=e.sent(),s)])),i="UnknownError",i=gm(a,o.body)){case"NoSuchKey":case"com.amazonaws.s3#NoSuchKey":return[3,2]}return[3,4];case 2:return r=[{}],[4,lm(o)];case 3:return n=zf.apply(void 0,[zf.apply(void 0,r.concat([e.sent()])),{name:i,$metadata:hm(a)}]),[3,5];case 4:o=o.body,i=o.code||o.Code||i,n=zf(zf({},o),{name:""+i,message:o.message||o.Message||i,$fault:"client",$metadata:hm(a)}),e.label=5;case 5:return i=n.message||n.Message||i,n.message=i,delete n.Message,[2,Promise.reject(Object.assign(new Error(i),n))]}})}))]:(t={$metadata:hm(r),AcceptRanges:void 0,Body:void 0,CacheControl:void 0,ContentDisposition:void 0,ContentEncoding:void 0,ContentLanguage:void 0,ContentLength:void 0,ContentRange:void 0,ContentType:void 0,DeleteMarker:void 0,ETag:void 0,Expiration:void 0,Expires:void 0,LastModified:void 0,Metadata:void 0,MissingMeta:void 0,ObjectLockLegalHoldStatus:void 0,ObjectLockMode:void 0,ObjectLockRetainUntilDate:void 0,PartsCount:void 0,ReplicationStatus:void 0,RequestCharged:void 0,Restore:void 0,SSECustomerAlgorithm:void 0,SSECustomerKeyMD5:void 0,SSEKMSKeyId:void 0,ServerSideEncryption:void 0,StorageClass:void 0,TagCount:void 0,VersionId:void 0,WebsiteRedirectLocation:void 0},void 0!==r.headers["x-amz-object-lock-mode"]&&(t.ObjectLockMode=r.headers["x-amz-object-lock-mode"]),void 0!==r.headers["content-language"]&&(t.ContentLanguage=r.headers["content-language"]),void 0!==r.headers["content-disposition"]&&(t.ContentDisposition=r.headers["content-disposition"]),void 0!==r.headers["cache-control"]&&(t.CacheControl=r.headers["cache-control"]),void 0!==r.headers["content-type"]&&(t.ContentType=r.headers["content-type"]),void 0!==r.headers["content-range"]&&(t.ContentRange=r.headers["content-range"]),void 0!==r.headers["x-amz-server-side-encryption-aws-kms-key-id"]&&(t.SSEKMSKeyId=r.headers["x-amz-server-side-encryption-aws-kms-key-id"]),void 0!==r.headers["content-length"]&&(t.ContentLength=parseInt(r.headers["content-length"],10)),void 0!==r.headers["x-amz-object-lock-retain-until-date"]&&(t.ObjectLockRetainUntilDate=new Date(r.headers["x-amz-object-lock-retain-until-date"])),void 0!==r.headers["x-amz-object-lock-legal-hold"]&&(t.ObjectLockLegalHoldStatus=r.headers["x-amz-object-lock-legal-hold"]),void 0!==r.headers["x-amz-delete-marker"]&&(t.DeleteMarker="true"===r.headers["x-amz-delete-marker"]),void 0!==r.headers["x-amz-storage-class"]&&(t.StorageClass=r.headers["x-amz-storage-class"]),void 0!==r.headers["content-encoding"]&&(t.ContentEncoding=r.headers["content-encoding"]),void 0!==r.headers["x-amz-restore"]&&(t.Restore=r.headers["x-amz-restore"]),void 0!==r.headers["x-amz-website-redirect-location"]&&(t.WebsiteRedirectLocation=r.headers["x-amz-website-redirect-location"]),void 0!==r.headers["x-amz-server-side-encryption"]&&(t.ServerSideEncryption=r.headers["x-amz-server-side-encryption"]),void 0!==r.headers["x-amz-mp-parts-count"]&&(t.PartsCount=parseInt(r.headers["x-amz-mp-parts-count"],10)),void 0!==r.headers["x-amz-server-side-encryption-customer-algorithm"]&&(t.SSECustomerAlgorithm=r.headers["x-amz-server-side-encryption-customer-algorithm"]),void 0!==r.headers["accept-ranges"]&&(t.AcceptRanges=r.headers["accept-ranges"]),void 0!==r.headers["x-amz-version-id"]&&(t.VersionId=r.headers["x-amz-version-id"]),void 0!==r.headers.expires&&(t.Expires=new Date(r.headers.expires)),void 0!==r.headers["x-amz-expiration"]&&(t.Expiration=r.headers["x-amz-expiration"]),void 0!==r.headers["x-amz-missing-meta"]&&(t.MissingMeta=parseInt(r.headers["x-amz-missing-meta"],10)),void 0!==r.headers["x-amz-replication-status"]&&(t.ReplicationStatus=r.headers["x-amz-replication-status"]),void 0!==r.headers["x-amz-tagging-count"]&&(t.TagCount=parseInt(r.headers["x-amz-tagging-count"],10)),void 0!==r.headers["x-amz-server-side-encryption-customer-key-md5"]&&(t.SSECustomerKeyMD5=r.headers["x-amz-server-side-encryption-customer-key-md5"]),void 0!==r.headers["last-modified"]&&(t.LastModified=new Date(r.headers["last-modified"])),void 0!==r.headers.etag&&(t.ETag=r.headers.etag),void 0!==r.headers["x-amz-request-charged"]&&(t.RequestCharged=r.headers["x-amz-request-charged"]),Object.keys(r.headers).forEach(function(e){void 0===t.Metadata&&(t.Metadata={}),e.startsWith("x-amz-meta-")&&(t.Metadata[e.substring(11)]=r.headers[e])}),n=r.body,t.Body=n,[2,Promise.resolve(t)]);var a,u})});var r,o},Nm);function Nm(e){var t=Tm.call(this)||this;return t.input=e,t}var Mm,Rm=(Vf(Um,Mm=hn),Um.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Hc(t,this.serialize,this.deserialize)),this.middlewareStack.use(Xf(t));var r=e.concat(this.middlewareStack),o=t.logger,i="ListObjectsCommand",e={logger:o,clientName:"S3Client",commandName:i,inputFilterSensitiveLog:Vh.filterSensitiveLog,outputFilterSensitiveLog:Bh.filterSensitiveLog};"function"==typeof o.info&&o.info({clientName:"S3Client",commandName:i});var s=t.requestHandler;return r.resolve(function(e){return s.handle(e.request,n||{})},e)},Um.prototype.serialize=function(e,t){return a=e,u=t,qf(void 0,void 0,void 0,function(){var t,n,r,o,i,s;return Kf(this,function(e){switch(e.label){case 0:if(t=zf(zf({"Content-Type":""},am(a.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":a.ExpectedBucketOwner}),am(a.RequestPayer)&&{"x-amz-request-payer":a.RequestPayer}),n="/{Bucket}",void 0===a.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((i=a.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return n=n.replace("{Bucket}",sc(i)),r=zf(zf(zf(zf(zf({},void 0!==a.MaxKeys&&{"max-keys":a.MaxKeys.toString()}),void 0!==a.Marker&&{marker:a.Marker}),void 0!==a.Prefix&&{prefix:a.Prefix}),void 0!==a.Delimiter&&{delimiter:a.Delimiter}),void 0!==a.EncodingType&&{"encoding-type":a.EncodingType}),[4,u.endpoint()];case 1:return s=e.sent(),o=s.hostname,i=void 0===(i=s.protocol)?"https":i,s=s.port,[2,new zs({protocol:i,hostname:o,port:s,method:"GET",headers:t,path:n,query:r,body:void 0})]}})});var a,u},Um.prototype.deserialize=function(e,t){return r=e,o=t,qf(void 0,void 0,void 0,function(){var t,n;return Kf(this,function(e){switch(e.label){case 0:return 200!==r.statusCode&&300<=r.statusCode?[2,(a=r,u=o,qf(void 0,void 0,void 0,function(){var t,n,r,o,i,s;return Kf(this,function(e){switch(e.label){case 0:return t=[zf({},a)],s={},[4,mm(a.body,u)];case 1:switch(o=zf.apply(void 0,t.concat([(s.body=e.sent(),s)])),i="UnknownError",i=gm(a,o.body)){case"NoSuchBucket":case"com.amazonaws.s3#NoSuchBucket":return[3,2]}return[3,4];case 2:return r=[{}],[4,cm(o)];case 3:return n=zf.apply(void 0,[zf.apply(void 0,r.concat([e.sent()])),{name:i,$metadata:hm(a)}]),[3,5];case 4:o=o.body,i=o.code||o.Code||i,n=zf(zf({},o),{name:""+i,message:o.message||o.Message||i,$fault:"client",$metadata:hm(a)}),e.label=5;case 5:return i=n.message||n.Message||i,n.message=i,delete n.Message,[2,Promise.reject(Object.assign(new Error(i),n))]}})}))]:(t={$metadata:hm(r),CommonPrefixes:void 0,Contents:void 0,Delimiter:void 0,EncodingType:void 0,IsTruncated:void 0,Marker:void 0,MaxKeys:void 0,Name:void 0,NextMarker:void 0,Prefix:void 0},[4,mm(r.body,o)]);case 1:return""===(n=e.sent()).CommonPrefixes&&(t.CommonPrefixes=[]),void 0!==n.CommonPrefixes&&(t.CommonPrefixes=(ac(n.CommonPrefixes)||[]).map(function(e){return t={Prefix:void 0},void 0!==e.Prefix&&(t.Prefix=e.Prefix),t;var t})),""===n.Contents&&(t.Contents=[]),void 0!==n.Contents&&(t.Contents=(ac(n.Contents)||[]).map(function(e){return t={Size:void 0,ETag:void 0,Owner:void 0,StorageClass:void 0,Key:void 0,LastModified:void 0},void 0!==e.Size&&(t.Size=parseInt(e.Size)),void 0!==e.ETag&&(t.ETag=e.ETag),void 0!==e.Owner&&(t.Owner=fm(e.Owner)),void 0!==e.StorageClass&&(t.StorageClass=e.StorageClass),void 0!==e.Key&&(t.Key=e.Key),void 0!==e.LastModified&&(t.LastModified=new Date(e.LastModified)),t;var t})),void 0!==n.Delimiter&&(t.Delimiter=n.Delimiter),void 0!==n.EncodingType&&(t.EncodingType=n.EncodingType),void 0!==n.IsTruncated&&(t.IsTruncated="true"==n.IsTruncated),void 0!==n.Marker&&(t.Marker=n.Marker),void 0!==n.MaxKeys&&(t.MaxKeys=parseInt(n.MaxKeys)),void 0!==n.Name&&(t.Name=n.Name),void 0!==n.NextMarker&&(t.NextMarker=n.NextMarker),void 0!==n.Prefix&&(t.Prefix=n.Prefix),[2,Promise.resolve(t)]}var a,u})});var r,o},Um);function Um(e){var t=Mm.call(this)||this;return t.input=e,t}var Dm,Lm=(Vf(Fm,Dm=hn),Fm.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Hc(t,this.serialize,this.deserialize)),this.middlewareStack.use(Xf(t));var r=e.concat(this.middlewareStack),o=t.logger,i="ListPartsCommand",e={logger:o,clientName:"S3Client",commandName:i,inputFilterSensitiveLog:qh.filterSensitiveLog,outputFilterSensitiveLog:zh.filterSensitiveLog};"function"==typeof o.info&&o.info({clientName:"S3Client",commandName:i});var s=t.requestHandler;return r.resolve(function(e){return s.handle(e.request,n||{})},e)},Fm.prototype.serialize=function(e,t){return a=e,u=t,qf(void 0,void 0,void 0,function(){var t,n,r,o,i,s;return Kf(this,function(e){switch(e.label){case 0:if(t=zf(zf({"Content-Type":""},am(a.RequestPayer)&&{"x-amz-request-payer":a.RequestPayer}),am(a.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":a.ExpectedBucketOwner}),n="/{Bucket}/{Key+}",void 0===a.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((i=a.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(n=n.replace("{Bucket}",sc(i)),void 0===a.Key)throw new Error("No value provided for input HTTP label: Key.");if((i=a.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return n=n.replace("{Key+}",i.split("/").map(sc).join("/")),r=zf(zf(zf({"x-id":"ListParts"},void 0!==a.UploadId&&{uploadId:a.UploadId}),void 0!==a.MaxParts&&{"max-parts":a.MaxParts.toString()}),void 0!==a.PartNumberMarker&&{"part-number-marker":a.PartNumberMarker.toString()}),[4,u.endpoint()];case 1:return s=e.sent(),o=s.hostname,i=void 0===(i=s.protocol)?"https":i,s=s.port,[2,new zs({protocol:i,hostname:o,port:s,method:"GET",headers:t,path:n,query:r,body:void 0})]}})});var a,u},Fm.prototype.deserialize=function(e,t){return a=e,u=t,qf(void 0,void 0,void 0,function(){var i,s;return Kf(this,function(e){switch(e.label){case 0:return 200!==a.statusCode&&300<=a.statusCode?[2,(r=a,o=u,qf(void 0,void 0,void 0,function(){var t,n;return Kf(this,function(e){switch(e.label){case 0:return t=[zf({},r)],n={},[4,mm(r.body,o)];case 1:return t=zf.apply(void 0,t.concat([(n.body=e.sent(),n)])),n="UnknownError",n=gm(r,t.body),t=t.body,n=t.code||t.Code||n,t=zf(zf({},t),{name:""+n,message:t.message||t.Message||n,$fault:"client",$metadata:hm(r)}),n=t.message||t.Message||n,t.message=n,delete t.Message,[2,Promise.reject(Object.assign(new Error(n),t))]}})}))]:(i={$metadata:hm(a),AbortDate:void 0,AbortRuleId:void 0,Bucket:void 0,Initiator:void 0,IsTruncated:void 0,Key:void 0,MaxParts:void 0,NextPartNumberMarker:void 0,Owner:void 0,PartNumberMarker:void 0,Parts:void 0,RequestCharged:void 0,StorageClass:void 0,UploadId:void 0},void 0!==a.headers["x-amz-abort-rule-id"]&&(i.AbortRuleId=a.headers["x-amz-abort-rule-id"]),void 0!==a.headers["x-amz-request-charged"]&&(i.RequestCharged=a.headers["x-amz-request-charged"]),void 0!==a.headers["x-amz-abort-date"]&&(i.AbortDate=new Date(a.headers["x-amz-abort-date"])),[4,mm(a.body,u)]);case 1:return void 0!==(s=e.sent()).Bucket&&(i.Bucket=s.Bucket),void 0!==s.Initiator&&(i.Initiator=(t=s.Initiator,n={ID:void 0,DisplayName:void 0},void 0!==t.ID&&(n.ID=t.ID),void 0!==t.DisplayName&&(n.DisplayName=t.DisplayName),n)),void 0!==s.IsTruncated&&(i.IsTruncated="true"==s.IsTruncated),void 0!==s.Key&&(i.Key=s.Key),void 0!==s.MaxParts&&(i.MaxParts=parseInt(s.MaxParts)),void 0!==s.NextPartNumberMarker&&(i.NextPartNumberMarker=parseInt(s.NextPartNumberMarker)),void 0!==s.Owner&&(i.Owner=fm(s.Owner)),void 0!==s.PartNumberMarker&&(i.PartNumberMarker=parseInt(s.PartNumberMarker)),""===s.Part&&(i.Parts=[]),void 0!==s.Part&&(i.Parts=(ac(s.Part)||[]).map(function(e){return t={Size:void 0,LastModified:void 0,PartNumber:void 0,ETag:void 0},void 0!==e.Size&&(t.Size=parseInt(e.Size)),void 0!==e.LastModified&&(t.LastModified=new Date(e.LastModified)),void 0!==e.PartNumber&&(t.PartNumber=parseInt(e.PartNumber)),void 0!==e.ETag&&(t.ETag=e.ETag),t;var t})),void 0!==s.StorageClass&&(i.StorageClass=s.StorageClass),void 0!==s.UploadId&&(i.UploadId=s.UploadId),[2,Promise.resolve(i)]}var t,n,r,o})});var a,u},Fm);function Fm(e){var t=Dm.call(this)||this;return t.input=e,t}var jm,Bm,Vm,zm,qm,Km,Hm,Gm,Wm,$m=(Vf(Ym,jm=hn),Ym.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Hc(t,this.serialize,this.deserialize)),this.middlewareStack.use(Cm(t)),this.middlewareStack.use(Xf(t));var r=e.concat(this.middlewareStack),o=t.logger,i="PutObjectCommand",e={logger:o,clientName:"S3Client",commandName:i,inputFilterSensitiveLog:Hh.filterSensitiveLog,outputFilterSensitiveLog:Kh.filterSensitiveLog};"function"==typeof o.info&&o.info({clientName:"S3Client",commandName:i});var s=t.requestHandler;return r.resolve(function(e){return s.handle(e.request,n||{})},e)},Ym.prototype.serialize=function(e,t){return u=e,c=t,qf(void 0,void 0,void 0,function(){var t,n,r,o,i,s,a;return Kf(this,function(e){switch(e.label){case 0:if(t=zf(zf(zf(zf(zf(zf(zf(zf(zf(zf(zf(zf(zf(zf(zf(zf(zf(zf(zf(zf(zf(zf(zf(zf(zf(zf(zf(zf({"Content-Type":"application/octet-stream"},am(u.GrantFullControl)&&{"x-amz-grant-full-control":u.GrantFullControl}),am(u.ContentEncoding)&&{"Content-Encoding":u.ContentEncoding}),am(u.RequestPayer)&&{"x-amz-request-payer":u.RequestPayer}),am(u.GrantReadACP)&&{"x-amz-grant-read-acp":u.GrantReadACP}),am(u.SSECustomerKeyMD5)&&{"x-amz-server-side-encryption-customer-key-MD5":u.SSECustomerKeyMD5}),am(u.CacheControl)&&{"Cache-Control":u.CacheControl}),am(u.WebsiteRedirectLocation)&&{"x-amz-website-redirect-location":u.WebsiteRedirectLocation}),am(u.ObjectLockLegalHoldStatus)&&{"x-amz-object-lock-legal-hold":u.ObjectLockLegalHoldStatus}),am(u.GrantWriteACP)&&{"x-amz-grant-write-acp":u.GrantWriteACP}),am(u.ContentLength)&&{"Content-Length":u.ContentLength.toString()}),am(u.ObjectLockRetainUntilDate)&&{"x-amz-object-lock-retain-until-date":(u.ObjectLockRetainUntilDate.toISOString().split(".")[0]+"Z").toString()}),am(u.SSECustomerAlgorithm)&&{"x-amz-server-side-encryption-customer-algorithm":u.SSECustomerAlgorithm}),am(u.ContentDisposition)&&{"Content-Disposition":u.ContentDisposition}),am(u.SSECustomerKey)&&{"x-amz-server-side-encryption-customer-key":u.SSECustomerKey}),am(u.SSEKMSEncryptionContext)&&{"x-amz-server-side-encryption-context":u.SSEKMSEncryptionContext}),am(u.Tagging)&&{"x-amz-tagging":u.Tagging}),am(u.Expires)&&{Expires:hc(u.Expires).toString()}),am(u.StorageClass)&&{"x-amz-storage-class":u.StorageClass}),am(u.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":u.ExpectedBucketOwner}),am(u.ContentMD5)&&{"Content-MD5":u.ContentMD5}),am(u.ServerSideEncryption)&&{"x-amz-server-side-encryption":u.ServerSideEncryption}),am(u.ObjectLockMode)&&{"x-amz-object-lock-mode":u.ObjectLockMode}),am(u.SSEKMSKeyId)&&{"x-amz-server-side-encryption-aws-kms-key-id":u.SSEKMSKeyId}),am(u.ContentLanguage)&&{"Content-Language":u.ContentLanguage}),am(u.GrantRead)&&{"x-amz-grant-read":u.GrantRead}),am(u.ACL)&&{"x-amz-acl":u.ACL}),am(u.ContentType)&&{"Content-Type":u.ContentType}),void 0!==u.Metadata&&Object.keys(u.Metadata).reduce(function(e,t){return e["x-amz-meta-"+t]=u.Metadata[t],e},{})),n="/{Bucket}/{Key+}",void 0===u.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((i=u.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(n=n.replace("{Bucket}",sc(i)),void 0===u.Key)throw new Error("No value provided for input HTTP label: Key.");if((i=u.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return n=n.replace("{Key+}",i.split("/").map(sc).join("/")),r={"x-id":"PutObject"},void 0!==u.Body&&(s=u.Body,o=s),[4,c.endpoint()];case 1:return a=e.sent(),i=a.hostname,s=void 0===(s=a.protocol)?"https":s,a=a.port,[2,new zs({protocol:s,hostname:i,port:a,method:"PUT",headers:t,path:n,query:r,body:o})]}})});var u,c},Ym.prototype.deserialize=function(e,t){return n=e,i=t,qf(void 0,void 0,void 0,function(){var t;return Kf(this,function(e){switch(e.label){case 0:return 200!==n.statusCode&&300<=n.statusCode?[2,(r=n,o=i,qf(void 0,void 0,void 0,function(){var t,n;return Kf(this,function(e){switch(e.label){case 0:return t=[zf({},r)],n={},[4,mm(r.body,o)];case 1:return t=zf.apply(void 0,t.concat([(n.body=e.sent(),n)])),n="UnknownError",n=gm(r,t.body),t=t.body,n=t.code||t.Code||n,t=zf(zf({},t),{name:""+n,message:t.message||t.Message||n,$fault:"client",$metadata:hm(r)}),n=t.message||t.Message||n,t.message=n,delete t.Message,[2,Promise.reject(Object.assign(new Error(n),t))]}})}))]:(t={$metadata:hm(n),ETag:void 0,Expiration:void 0,RequestCharged:void 0,SSECustomerAlgorithm:void 0,SSECustomerKeyMD5:void 0,SSEKMSEncryptionContext:void 0,SSEKMSKeyId:void 0,ServerSideEncryption:void 0,VersionId:void 0},void 0!==n.headers["x-amz-server-side-encryption-context"]&&(t.SSEKMSEncryptionContext=n.headers["x-amz-server-side-encryption-context"]),void 0!==n.headers["x-amz-expiration"]&&(t.Expiration=n.headers["x-amz-expiration"]),void 0!==n.headers["x-amz-server-side-encryption-customer-key-md5"]&&(t.SSECustomerKeyMD5=n.headers["x-amz-server-side-encryption-customer-key-md5"]),void 0!==n.headers.etag&&(t.ETag=n.headers.etag),void 0!==n.headers["x-amz-server-side-encryption-customer-algorithm"]&&(t.SSECustomerAlgorithm=n.headers["x-amz-server-side-encryption-customer-algorithm"]),void 0!==n.headers["x-amz-version-id"]&&(t.VersionId=n.headers["x-amz-version-id"]),void 0!==n.headers["x-amz-request-charged"]&&(t.RequestCharged=n.headers["x-amz-request-charged"]),void 0!==n.headers["x-amz-server-side-encryption-aws-kms-key-id"]&&(t.SSEKMSKeyId=n.headers["x-amz-server-side-encryption-aws-kms-key-id"]),void 0!==n.headers["x-amz-server-side-encryption"]&&(t.ServerSideEncryption=n.headers["x-amz-server-side-encryption"]),[4,sm(n.body,i)]);case 1:return e.sent(),[2,Promise.resolve(t)]}var r,o})});var n,i},Ym);function Ym(e){var t=jm.call(this)||this;return t.input=e,t}(Bm=Bm||{}).filterSensitiveLog=function(e){return zf({},e)},(Vm=Vm||{}).filterSensitiveLog=function(e){return zf({},e)},(zm=zm||{}).filterSensitiveLog=function(e){return zf({},e)},(qm=qm||{}).filterSensitiveLog=function(e){return zf({},e)},(Hm=Hm||{}).filterSensitiveLog=function(e){return zf({},e)},(Km=Km||{}).filterSensitiveLog=function(e){return zf({},e)},(Hm={}).visit=function(e,t){return void 0!==e.Cont?t.Cont(e.Cont):void 0!==e.Progress?t.Progress(e.Progress):void 0!==e.Stats?t.Stats(e.Stats):void 0!==e.End?t.End(e.End):void 0!==e.Records?t.Records(e.Records):t._(e.$unknown[0],e.$unknown[1])},Hm.filterSensitiveLog=function(e){var t;return void 0!==e.Cont?{Cont:Bm.filterSensitiveLog(e.Cont)}:void 0!==e.Progress?{Progress:zm.filterSensitiveLog(e.Progress)}:void 0!==e.Stats?{Stats:Km.filterSensitiveLog(e.Stats)}:void 0!==e.End?{End:Vm.filterSensitiveLog(e.End)}:void 0!==e.Records?{Records:qm.filterSensitiveLog(e.Records)}:void 0!==e.$unknown?((t={})[e.$unknown[0]]="UNKNOWN",t):void 0},(Gm=Gm||{}).filterSensitiveLog=function(e){return zf(zf({},e),e.SSEKMSKeyId&&{SSEKMSKeyId:gc})},(Wm=Wm||{}).filterSensitiveLog=function(e){return zf(zf({},e),e.SSECustomerKey&&{SSECustomerKey:gc})},(Wg=Wg||{}).filterSensitiveLog=function(e){return zf(zf({},e),e.SSEKMSKeyId&&{SSEKMSKeyId:gc})},(wv||{}).filterSensitiveLog=function(e){return zf(zf(zf({},e),e.SSECustomerKey&&{SSECustomerKey:gc}),e.CopySourceSSECustomerKey&&{CopySourceSSECustomerKey:gc})};var Jm,Zm=(Vf(Qm,Jm=hn),Qm.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Hc(t,this.serialize,this.deserialize)),this.middlewareStack.use(Cm(t)),this.middlewareStack.use(Xf(t));var r=e.concat(this.middlewareStack),o=t.logger,i="UploadPartCommand",e={logger:o,clientName:"S3Client",commandName:i,inputFilterSensitiveLog:Wm.filterSensitiveLog,outputFilterSensitiveLog:Gm.filterSensitiveLog};"function"==typeof o.info&&o.info({clientName:"S3Client",commandName:i});var s=t.requestHandler;return r.resolve(function(e){return s.handle(e.request,n||{})},e)},Qm.prototype.serialize=function(e,t){return u=e,c=t,qf(void 0,void 0,void 0,function(){var t,n,r,o,i,s,a;return Kf(this,function(e){switch(e.label){case 0:if(t=zf(zf(zf(zf(zf(zf(zf({"Content-Type":"application/octet-stream"},am(u.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":u.ExpectedBucketOwner}),am(u.RequestPayer)&&{"x-amz-request-payer":u.RequestPayer}),am(u.ContentLength)&&{"Content-Length":u.ContentLength.toString()}),am(u.SSECustomerKey)&&{"x-amz-server-side-encryption-customer-key":u.SSECustomerKey}),am(u.SSECustomerAlgorithm)&&{"x-amz-server-side-encryption-customer-algorithm":u.SSECustomerAlgorithm}),am(u.SSECustomerKeyMD5)&&{"x-amz-server-side-encryption-customer-key-MD5":u.SSECustomerKeyMD5}),am(u.ContentMD5)&&{"Content-MD5":u.ContentMD5}),n="/{Bucket}/{Key+}",void 0===u.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((i=u.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(n=n.replace("{Bucket}",sc(i)),void 0===u.Key)throw new Error("No value provided for input HTTP label: Key.");if((i=u.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return n=n.replace("{Key+}",i.split("/").map(sc).join("/")),r=zf(zf({"x-id":"UploadPart"},void 0!==u.PartNumber&&{partNumber:u.PartNumber.toString()}),void 0!==u.UploadId&&{uploadId:u.UploadId}),void 0!==u.Body&&(s=u.Body,o=s),[4,c.endpoint()];case 1:return a=e.sent(),i=a.hostname,s=void 0===(s=a.protocol)?"https":s,a=a.port,[2,new zs({protocol:s,hostname:i,port:a,method:"PUT",headers:t,path:n,query:r,body:o})]}})});var u,c},Qm.prototype.deserialize=function(e,t){return n=e,i=t,qf(void 0,void 0,void 0,function(){var t;return Kf(this,function(e){switch(e.label){case 0:return 200!==n.statusCode&&300<=n.statusCode?[2,(r=n,o=i,qf(void 0,void 0,void 0,function(){var t,n;return Kf(this,function(e){switch(e.label){case 0:return t=[zf({},r)],n={},[4,mm(r.body,o)];case 1:return t=zf.apply(void 0,t.concat([(n.body=e.sent(),n)])),n="UnknownError",n=gm(r,t.body),t=t.body,n=t.code||t.Code||n,t=zf(zf({},t),{name:""+n,message:t.message||t.Message||n,$fault:"client",$metadata:hm(r)}),n=t.message||t.Message||n,t.message=n,delete t.Message,[2,Promise.reject(Object.assign(new Error(n),t))]}})}))]:(t={$metadata:hm(n),ETag:void 0,RequestCharged:void 0,SSECustomerAlgorithm:void 0,SSECustomerKeyMD5:void 0,SSEKMSKeyId:void 0,ServerSideEncryption:void 0},void 0!==n.headers["x-amz-server-side-encryption-customer-key-md5"]&&(t.SSECustomerKeyMD5=n.headers["x-amz-server-side-encryption-customer-key-md5"]),void 0!==n.headers["x-amz-server-side-encryption"]&&(t.ServerSideEncryption=n.headers["x-amz-server-side-encryption"]),void 0!==n.headers["x-amz-server-side-encryption-aws-kms-key-id"]&&(t.SSEKMSKeyId=n.headers["x-amz-server-side-encryption-aws-kms-key-id"]),void 0!==n.headers["x-amz-server-side-encryption-customer-algorithm"]&&(t.SSECustomerAlgorithm=n.headers["x-amz-server-side-encryption-customer-algorithm"]),void 0!==n.headers["x-amz-request-charged"]&&(t.RequestCharged=n.headers["x-amz-request-charged"]),void 0!==n.headers.etag&&(t.ETag=n.headers.etag),[4,sm(n.body,i)]);case 1:return e.sent(),[2,Promise.resolve(t)]}var r,o})});var n,i},Qm);function Qm(e){var t=Jm.call(this)||this;return t.input=e,t}function Xm(e){var t=e.port,n=e.query,r=e.protocol,o=e.path,e=e.hostname;return r&&":"!==r.substr(-1)&&(r+=":"),t&&(e+=":"+t),o&&"/"!==o.charAt(0)&&(o="/"+o),r+"//"+e+o+((n=n?ia(n):"")&&"?"!==n[0]?"?"+n:n)}var eg=(tg.prototype.presign=function(t,e){var n=(e=void 0===e?{}:e).unsignableHeaders,r=void 0===n?new Set:n,o=B(e,["unsignableHeaders"]);return K(this,void 0,void 0,function(){return H(this,function(e){return r.add("content-type"),t.headers["X-Amz-Content-Sha256"]="UNSIGNED-PAYLOAD",[2,this.signer.presign(t,j({expiresIn:900,unsignableHeaders:r},o))]})})},tg);function tg(e){e=j({service:e.signingName||e.service||"s3",uriEscapePath:e.uriEscapePath||!1},e),this.signer=new qu(e)}var ng=new E.ConsoleLogger("axios-http-handler"),rg="sendProgress",og=(ig.prototype.destroy=function(){},ig.prototype.handle=function(e,t){var n=this.httpOptions.requestTimeout,r=this.emitter,o=e.path;!e.query||(s=ia(e.query))&&(o+="?"+s);var i,s=e.port,s=e.protocol+"//"+e.hostname+(s?":"+s:"")+o;return(o={}).url=s,o.method=e.method,o.headers=e.headers,delete o.headers.host,e.body?o.data=e.body:o.headers["Content-Type"]&&(o.data=null),r&&(o.onUploadProgress=function(e){r.emit(rg,e),ng.debug(e)}),o.responseType="blob",n=[T.request(o).then(function(e){return{response:new Bs({headers:e.headers,statusCode:e.status,body:e.data})}}).catch(function(e){throw ng.error(e),e}),(void 0===(i=n)&&(i=0),new Promise(function(e,t){i&&setTimeout(function(){var e=new Error("Request did not complete within "+i+" ms");e.name="TimeoutError",t(e)},i)}))],Promise.race(n)},ig);function ig(e,t){void 0===e&&(e={}),this.httpOptions=e,this.emitter=t}for(var sg={},ag=new Array(64),ug=0,cg="A".charCodeAt(0),lg="Z".charCodeAt(0);ug+cg<=lg;ug++){var pg=String.fromCharCode(ug+cg);ag[sg[pg]=ug]=pg}for(cg="a".charCodeAt(ug=0),lg="z".charCodeAt(0);ug+cg<=lg;ug++){var pg=String.fromCharCode(ug+cg),dg=ug+26;ag[sg[pg]=dg]=pg}for(ug=0;ug<10;ug++)sg[ug.toString(10)]=ug+52,pg=ug.toString(10),dg=ug+52,ag[sg[pg]=dg]=pg;ag[sg["+"]=62]="+",ag[sg["/"]=63]="/";function fg(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,o)}i((u=u.apply(e,s||[])).next())})}function hg(n,r){var o,i,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&t[0]?i.return:t[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,t[1])).done)return s;switch(i=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,i=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],i=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}}var mg=function(){return(mg=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},gg=new E.ConsoleLogger("AWSS3ProviderManagedUpload"),yg=(vg.prototype.upload=function(){return fg(this,void 0,void 0,function(){var t,n,r,o,i;return hg(this,function(e){switch(e.label){case 0:return[4,(t=this).validateAndSanitizeBody(this.params.Body)];case 1:return t.body=e.sent(),this.totalBytesToUpload=this.byteLength(this.body),this.totalBytesToUpload<=this.minPartSize?(this.params.Body=this.body,n=new $m(this.params),[4,this._createNewS3Client(this.opts,this.emitter)]):[3,3];case 2:return[2,e.sent().send(n)];case 3:return[4,this.createMultiPartUpload()];case 4:r=e.sent(),i=Math.ceil(this.totalBytesToUpload/this.minPartSize),o=0,e.label=5;case 5:return o<i?[4,this.checkIfUploadCancelled(r)]:[3,10];case 6:return e.sent(),i=this.createParts(o),[4,this.uploadParts(r,i)];case 7:return e.sent(),[4,this.checkIfUploadCancelled(r)];case 8:e.sent(),e.label=9;case 9:return o+=this.queueSize,[3,5];case 10:return[4,this.finishMultiPartUpload(r)];case 11:return[2,e.sent()]}})})},vg.prototype.createParts=function(e){for(var t=[],n=e,r=e*this.minPartSize;r<this.totalBytesToUpload&&t.length<this.queueSize;){var o=Math.min(r+this.minPartSize,this.totalBytesToUpload);t.push({bodyPart:this.body.slice(r,o),partNumber:++n,emitter:new x.EventEmitter,_lastUploadedBytes:0}),r+=this.minPartSize}return t},vg.prototype.createMultiPartUpload=function(){return fg(this,void 0,void 0,function(){var t;return hg(this,function(e){switch(e.label){case 0:return t=new Im(this.params),[4,this._createNewS3Client(this.opts)];case 1:return[4,e.sent().send(t)];case 2:return t=e.sent(),gg.debug(t.UploadId),[2,t.UploadId]}})})},vg.prototype.uploadParts=function(l,p){return fg(this,void 0,void 0,function(){var t,n,r,o,i,s,a,u,c;return hg(this,function(e){switch(e.label){case 0:a=[],e.label=1;case 1:e.trys.push([1,6,7,8]),t=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return{value:(e=e&&r>=e.length?void 0:e)&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(p),n=t.next(),e.label=2;case 2:return n.done?[3,5]:(o=n.value,this.setupEventListener(o),r={PartNumber:o.partNumber,Body:o.bodyPart,UploadId:l,Key:this.params.Key,Bucket:this.params.Bucket},r=new Zm(r),[4,this._createNewS3Client(this.opts,o.emitter)]);case 3:o=e.sent(),a.push(o.send(r)),e.label=4;case 4:return n=t.next(),[3,2];case 5:return[3,8];case 6:return u={error:u=e.sent()},[3,8];case 7:try{n&&!n.done&&(c=t.return)&&c.call(t)}finally{if(u)throw u.error}return[7];case 8:return e.trys.push([8,10,,11]),[4,Promise.all(a)];case 9:for(i=e.sent(),s=0;s<i.length;s++)this.multiPartMap.push({PartNumber:p[s].partNumber,ETag:i[s].ETag});return[3,11];case 10:return a=e.sent(),gg.error("error happened while uploading a part. Cancelling the multipart upload",a),this.cancelUpload(),[2];case 11:return[2]}})})},vg.prototype.finishMultiPartUpload=function(r){return fg(this,void 0,void 0,function(){var t,n;return hg(this,function(e){switch(e.label){case 0:return n={Bucket:this.params.Bucket,Key:this.params.Key,UploadId:r,MultipartUpload:{Parts:this.multiPartMap}},n=new wm(n),[4,this._createNewS3Client(this.opts)];case 1:t=e.sent(),e.label=2;case 2:return e.trys.push([2,4,,5]),[4,t.send(n)];case 3:return[2,e.sent().Key];case 4:return n=e.sent(),gg.error("error happened while finishing the upload. Cancelling the multipart upload",n),this.cancelUpload(),[2];case 5:return[2]}})})},vg.prototype.checkIfUploadCancelled=function(r){return fg(this,void 0,void 0,function(){var t,n;return hg(this,function(e){switch(e.label){case 0:if(!this.cancel)return[3,5];t="Upload was cancelled.",e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this.cleanup(r)];case 2:return e.sent(),[3,4];case 3:return n=e.sent(),t+=n.errorMessage,[3,4];case 4:throw new Error(t);case 5:return[2]}})})},vg.prototype.cancelUpload=function(){this.cancel=!0},vg.prototype.cleanup=function(r){return fg(this,void 0,void 0,function(){var t,n;return hg(this,function(e){switch(e.label){case 0:return this.body=null,this.multiPartMap=[],this.bytesUploaded=0,this.totalBytesToUpload=0,n={Bucket:this.params.Bucket,Key:this.params.Key,UploadId:r},[4,this._createNewS3Client(this.opts)];case 1:return[4,(t=e.sent()).send(new ym(n))];case 2:return e.sent(),[4,t.send(new Lm(n))];case 3:if((n=e.sent())&&n.Parts&&0<n.Parts.length)throw new Error("Multi Part upload clean up failed");return[2]}})})},vg.prototype.setupEventListener=function(t){var n=this;t.emitter.on(rg,function(e){n.progressChanged(t.partNumber,e.loaded-t._lastUploadedBytes),t._lastUploadedBytes=e.loaded})},vg.prototype.progressChanged=function(e,t){this.bytesUploaded+=t,this.emitter.emit(rg,{loaded:this.bytesUploaded,total:this.totalBytesToUpload,part:e,key:this.params.Key})},vg.prototype.byteLength=function(e){if(null==e)return 0;if("number"==typeof e.byteLength)return e.byteLength;if("number"==typeof e.length)return e.length;if("number"==typeof e.size)return e.size;if("string"!=typeof e.path)throw new Error("Cannot determine length of "+e)},vg.prototype.validateAndSanitizeBody=function(n){return fg(this,void 0,void 0,function(){return hg(this,function(e){switch(e.label){case 0:return this.isGenericObject(n)?[2,JSON.stringify(n)]:[3,1];case 1:return this.isBlob(n)?E.Platform.isReactNative?[4,(t=n,("function"==typeof Blob&&t instanceof Blob?function(r){return K(this,void 0,void 0,function(){var n;return H(this,function(e){switch(e.label){case 0:return[4,(t=r,new Promise(function(n,r){var o=new FileReader;o.onloadend=function(){if(2!==o.readyState)return r(new Error("Reader aborted too early"));var e=null!==(t=o.result)&&void 0!==t?t:"",t=-1<(t=e.indexOf(","))?t+1:e.length;n(e.substring(t))},o.onabort=function(){return r(new Error("Read aborted"))},o.onerror=function(){return r(o.error)},o.readAsDataURL(t)}))];case 1:return n=function(e){var t=e.length/4*3;"=="===e.substr(-2)?t-=2:"="===e.substr(-1)&&t--;for(var t=new ArrayBuffer(t),n=new DataView(t),r=0;r<e.length;r+=4){for(var o=0,i=0,s=r,a=r+3;s<=a;s++)"="!==e[s]?(o|=sg[e[s]]<<6*(a-s),i+=6):o>>=6;var u=r/4*3;o>>=i%8;for(var c=Math.floor(i/8),l=0;l<c;l++){var p=8*(c-l-1);n.setUint8(u+l,(o&255<<p)>>p)}}return new Uint8Array(t)}(n=e.sent()),[2,new Uint8Array(n)]}var t})})}:function(s){return K(this,void 0,void 0,function(){var t,n,r,o,i;return H(this,function(e){switch(e.label){case 0:t=new Uint8Array(0),o=s.getReader(),n=!1,e.label=1;case 1:return n?[3,3]:[4,o.read()];case 2:return i=e.sent(),r=i.done,(o=i.value)&&(i=t,(t=new Uint8Array(i.length+o.length)).set(i),t.set(o,i.length)),n=r,[3,1];case 3:return[2,t]}})})})(t))]:[3,3]:[3,4];case 2:return[2,e.sent()];case 3:case 4:return[2,n]}var t})})},vg.prototype.isBlob=function(e){return"undefined"!=typeof Blob&&e instanceof Blob},vg.prototype.isGenericObject=function(e){if(null!==e&&"object"==typeof e)try{return!(0<=this.byteLength(e))}catch(e){return!0}return!1},vg.prototype._createNewS3Client=function(o,i){return fg(this,void 0,void 0,function(){var t,n,r;return hg(this,function(e){switch(e.label){case 0:return[4,this._getCredentials()];case 1:return t=e.sent(),n=o.region,r=o.dangerouslyConnectToHttpEndpointForTesting,(r=new em(mg(mg({region:n,credentials:t},r?{endpoint:"http://localhost:20005",tls:!1,bucketEndpoint:!1,forcePathStyle:!0}:{}),{requestHandler:new og({},i),customUserAgent:E.getAmplifyUserAgent(),urlParser:Ja}))).middlewareStack.remove("contentLengthMiddleware"),[2,r]}})})},vg.prototype._getCredentials=function(){return E.Credentials.get().then(function(e){return!!e&&(e=E.Credentials.shear(e),gg.debug("set credentials for storage",e),e)}).catch(function(e){return gg.warn("ensure credentials error",e),!1})},vg);function vg(e,t,n){this.minPartSize=5242880,this.queueSize=4,this.body=null,this.params=null,this.opts=null,this.multiPartMap=[],this.cancel=!1,this.bytesUploaded=0,this.totalBytesToUpload=0,this.emitter=null,this.params=e,this.opts=t,this.emitter=n}function bg(e,t,n,r,o){e&&(n={attrs:n},r&&(n.metrics=r),E.Hub.dispatch("storage",{event:t,data:n,message:o},"Storage",Eg))}function wg(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,o)}i((u=u.apply(e,s||[])).next())})}function Sg(n,r){var o,i,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&t[0]?i.return:t[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,t[1])).done)return s;switch(i=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,i=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],i=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}}var Cg=function(){return(Cg=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},_g=new E.ConsoleLogger("AWSS3Provider"),Eg="undefined"!=typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("amplify_default"):"@@amplify_default",Ig=(Ag.prototype.getCategory=function(){return Ag.CATEGORY},Ag.prototype.getProviderName=function(){return Ag.PROVIDER_NAME},Ag.prototype.configure=function(e){return _g.debug("configure Storage",e),e&&(e=E.Parser.parseMobilehubConfig(e),this._config=Object.assign({},this._config,e.Storage),this._config.bucket||_g.debug("Do not have bucket yet")),this._config},Ag.prototype.get=function(g,y){return wg(this,void 0,void 0,function(){var t,n,r,o,i,s,a,u,c,l,p,d,f,h,m;return Sg(this,function(e){switch(e.label){case 0:return[4,this._ensureCredentials()];case 1:if(!e.sent())return[2,Promise.reject("No credentials")];if(f=Object.assign({},this._config,y),t=f.bucket,l=f.download,n=f.cacheControl,r=f.contentDisposition,o=f.contentEncoding,i=f.contentLanguage,s=f.contentType,a=f.expires,u=f.track,c=this._prefix(f),c+=g,f=this._createNewS3Client(f),_g.debug("get "+g+" from "+c),c={Bucket:t,Key:c},n&&(c.ResponseCacheControl=n),r&&(c.ResponseContentDisposition=r),o&&(c.ResponseContentEncoding=o),i&&(c.ResponseContentLanguage=i),s&&(c.ResponseContentType=s),!0!==l)return[3,5];l=new xm(c),e.label=2;case 2:return e.trys.push([2,4,,5]),[4,f.send(l)];case 3:return p=e.sent(),bg(u,"download",{method:"get",result:"success"},{fileSize:Number(p.Body.size||p.Body.length)},"Download success for "+g),[2,p];case 4:throw p=e.sent(),bg(u,"download",{method:"get",result:"failed"},null,"Download failed with "+p.message),p;case 5:c.Expires=a||900,e.label=6;case 6:return e.trys.push([6,9,,10]),d=new eg(Cg({},f.config)),[4,function(o,i){return K(this,void 0,void 0,function(){var t,n,r=this;return H(this,function(e){switch(e.label){case 0:return t=function(e){return function(t){return K(r,void 0,void 0,function(){return H(this,function(e){return[2,{output:{request:t.request},response:void 0}]})})}},(n=o.middlewareStack.clone()).add(t,{step:"build",priority:"low"}),[4,i.resolveMiddleware(n,o.config,void 0)(i).then(function(e){return e.output.request})];case 1:return[2,e.sent()]}})})}(f,new xm(c))];case 7:return f=e.sent(),h=Xm,[4,d.presign(f,{expiresIn:c.Expires})];case 8:return m=h.apply(void 0,[e.sent()]),bg(u,"getSignedUrl",{method:"get",result:"success"},null,"Signed URL: "+m),[2,m];case 9:throw m=e.sent(),_g.warn("get signed url error",m),bg(u,"getSignedUrl",{method:"get",result:"failed"},null,"Could not get a signed URL for "+g),m;case 10:return[2]}})})},Ag.prototype.put=function(b,w,S){return wg(this,void 0,void 0,function(){var t,n,r,o,i,s,a,u,c,l,p,d,f,h,m,g,y,v;return Sg(this,function(e){switch(e.label){case 0:return[4,this._ensureCredentials()];case 1:if(!e.sent())return[2,Promise.reject("No credentials")];y=Object.assign({},this._config,S),t=y.bucket,n=y.track,r=y.progressCallback,h=y.contentType,o=y.contentDisposition,i=y.cacheControl,s=y.expires,a=y.metadata,u=y.tagging,c=y.acl,l=y.serverSideEncryption,p=y.SSECustomerAlgorithm,d=y.SSECustomerKey,f=y.SSECustomerKeyMD5,g=y.SSEKMSKeyId,m=h||"binary/octet-stream",h=this._prefix(y),h+=b,_g.debug("put "+b+" to "+h),m={Bucket:t,Key:h,Body:w,ContentType:m},i&&(m.CacheControl=i),o&&(m.ContentDisposition=o),s&&(m.Expires=s),a&&(m.Metadata=a),u&&(m.Tagging=u),l&&(m.ServerSideEncryption=l,p&&(m.SSECustomerAlgorithm=p),d&&(m.SSECustomerKey=d),f&&(m.SSECustomerKeyMD5=f),g&&(m.SSEKMSKeyId=g)),g=new x.EventEmitter,y=new yg(m,y,g),c&&(m.ACL=c),e.label=2;case 2:return e.trys.push([2,4,,5]),g.on("sendProgress",function(e){r&&("function"==typeof r?r(e):_g.warn("progressCallback should be a function, not a "+typeof r))}),[4,y.upload()];case 3:return v=e.sent(),_g.debug("upload result",v),bg(n,"upload",{method:"put",result:"success"},null,"Upload success for "+b),[2,{key:b}];case 4:throw v=e.sent(),_g.warn("error uploading",v),bg(n,"upload",{method:"put",result:"failed"},null,"Error uploading "+b),v;case 5:return[2]}})})},Ag.prototype.remove=function(s,a){return wg(this,void 0,void 0,function(){var t,n,r,o,i;return Sg(this,function(e){switch(e.label){case 0:return[4,this._ensureCredentials()];case 1:if(!e.sent())return[2,Promise.reject("No credentials")];r=Object.assign({},this._config,a),t=r.bucket,n=r.track,o=this._prefix(r),o+=s,r=this._createNewS3Client(r),_g.debug("remove "+s+" from "+o),o=new Om({Bucket:t,Key:o}),e.label=2;case 2:return e.trys.push([2,4,,5]),[4,r.send(o)];case 3:return i=e.sent(),bg(n,"delete",{method:"remove",result:"success"},null,"Deleted "+s+" successfully"),[2,i];case 4:throw i=e.sent(),bg(n,"delete",{method:"remove",result:"failed"},null,"Deletion of "+s+" failed with "+i),i;case 5:return[2]}})})},Ag.prototype.list=function(u,c){return wg(this,void 0,void 0,function(){var t,n,r,o,i,s,a;return Sg(this,function(e){switch(e.label){case 0:return[4,this._ensureCredentials()];case 1:if(!e.sent())return[2,Promise.reject("No credentials")];i=Object.assign({},this._config,c),t=i.bucket,n=i.track,s=i.maxKeys,r=this._prefix(i),o=r+u,i=this._createNewS3Client(i),_g.debug("list "+u+" from "+o),s=new Rm({Bucket:t,Prefix:o,MaxKeys:s}),e.label=2;case 2:return e.trys.push([2,4,,5]),[4,i.send(s)];case 3:return s=e.sent(),a=[],s&&s.Contents&&(a=s.Contents.map(function(e){return{key:e.Key.substr(r.length),eTag:e.ETag,lastModified:e.LastModified,size:e.Size}})),bg(n,"list",{method:"list",result:"success"},null,a.length+" items returned from list operation"),_g.debug("list",a),[2,a];case 4:throw a=e.sent(),_g.warn("list error",a),bg(n,"list",{method:"list",result:"failed"},null,"Listing items failed: "+a.message),a;case 5:return[2]}})})},Ag.prototype._ensureCredentials=function(){var t=this;return E.Credentials.get().then(function(e){return!!e&&(e=E.Credentials.shear(e),_g.debug("set credentials for storage",e),t._config.credentials=e,!0)}).catch(function(e){return _g.warn("ensure credentials error",e),!1})},Ag.prototype._prefix=function(e){var t=e.credentials,n=e.level,r=e.customPrefix||{},t=e.identityId||t.identityId,o=(void 0!==r.private?r.private:"private/")+t+"/",i=(void 0!==r.protected?r.protected:"protected/")+t+"/",s=void 0!==r.public?r.public:"public/";switch(n){case"private":return o;case"protected":return i;default:return s}},Ag.prototype._createNewS3Client=function(e,t){var n=e.region,r=e.credentials,o={};return e.dangerouslyConnectToHttpEndpointForTesting&&(o={endpoint:"http://localhost:20005",tls:!1,bucketEndpoint:!1,forcePathStyle:!0}),new em(Cg(Cg({region:n,credentials:r,customUserAgent:E.getAmplifyUserAgent()},o),{requestHandler:new og({},t)}))},Ag.CATEGORY="Storage",Ag.PROVIDER_NAME="AWSS3",Ag);function Ag(e){this._config=e||{},_g.debug("Storage Options",this._config)}function Pg(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,o)}i((u=u.apply(e,s||[])).next())})}function Og(n,r){var o,i,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&t[0]?i.return:t[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,t[1])).done)return s;switch(i=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,i=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],i=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}}var kg=function(){return(kg=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},Tg=new E.ConsoleLogger("StorageClass"),xg="AWSS3",Ng=(Mg.prototype.getModuleName=function(){return"Storage"},Mg.prototype.addPluggable=function(e){if(e&&"Storage"===e.getCategory())return this._pluggables.push(e),e.configure(this._config[e.getProviderName()])},Mg.prototype.getPluggable=function(t){var e=this._pluggables.find(function(e){return e.getProviderName()===t});return void 0===e?(Tg.debug("No plugin found with providerName",t),null):e},Mg.prototype.removePluggable=function(t){this._pluggables=this._pluggables.filter(function(e){return e.getProviderName()!==t})},Mg.prototype.configure=function(e){var t=this;if(Tg.debug("configure Storage"),!e)return this._config;function n(t){return i.some(function(e){return e===t})}var r=E.Parser.parseMobilehubConfig(e),o=Object.keys(r.Storage),i=["bucket","region","level","track","customPrefix","serverSideEncryption","SSECustomerAlgorithm","SSECustomerKey","SSECustomerKeyMD5","SSEKMSKeyId"];return o&&o.find(n)&&!r.Storage[xg]&&(r.Storage[xg]={}),Object.entries(r.Storage).map(function(e){var e=(t=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(r=i.next()).done;)s.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s}(e,2))[0],t=t[1];e&&n(e)&&void 0!==t&&(r.Storage[xg][e]=t,delete r.Storage[e])}),Object.keys(r.Storage).forEach(function(e){"string"!=typeof r.Storage[e]&&(t._config[e]=kg(kg({},t._config[e]),r.Storage[e]))}),this._pluggables.forEach(function(e){e.configure(t._config[e.getProviderName()])}),0===this._pluggables.length&&this.addPluggable(new Ig),this._config},Mg.prototype.get=function(r,o){return Pg(this,void 0,void 0,function(){var t,n;return Og(this,function(e){return t=void 0===(n=(o||{}).provider)?xg:n,void 0===(n=this._pluggables.find(function(e){return e.getProviderName()===t}))&&(Tg.debug("No plugin found with providerName",t),Promise.reject("No plugin found in Storage for the provider")),[2,n.get(r,o)]})})},Mg.prototype.put=function(r,o,i){return Pg(this,void 0,void 0,function(){var t,n;return Og(this,function(e){return t=void 0===(n=(i||{}).provider)?xg:n,void 0===(n=this._pluggables.find(function(e){return e.getProviderName()===t}))&&(Tg.debug("No plugin found with providerName",t),Promise.reject("No plugin found in Storage for the provider")),[2,n.put(r,o,i)]})})},Mg.prototype.remove=function(r,o){return Pg(this,void 0,void 0,function(){var t,n;return Og(this,function(e){return t=void 0===(n=(o||{}).provider)?xg:n,void 0===(n=this._pluggables.find(function(e){return e.getProviderName()===t}))&&(Tg.debug("No plugin found with providerName",t),Promise.reject("No plugin found in Storage for the provider")),[2,n.remove(r,o)]})})},Mg.prototype.list=function(r,o){return Pg(this,void 0,void 0,function(){var t,n;return Og(this,function(e){return t=void 0===(n=(o||{}).provider)?xg:n,void 0===(n=this._pluggables.find(function(e){return e.getProviderName()===t}))&&(Tg.debug("No plugin found with providerName",t),Promise.reject("No plugin found in Storage for the provider")),[2,n.list(r,o)]})})},Mg);function Mg(){this._config={},this._pluggables=[],Tg.debug("Storage Options",this._config),this.get=this.get.bind(this),this.put=this.put.bind(this),this.remove=this.remove.bind(this),this.list=this.list.bind(this)}var Rg=function(){return(Rg=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},Ug=new E.ConsoleLogger("Storage"),Dg=null,Lg=function(){if(Dg)return Dg;Ug.debug("Create Storage Instance, debug"),(Dg=new Ng).vault=new Ng;var n=Dg.configure;return Dg.configure=function(e){Ug.debug("storage configure called");var t=Rg({},n.call(Dg,e));Object.keys(t).forEach(function(e){"string"!=typeof t[e]&&(t[e]=Rg(Rg({},t[e]),{level:"private"}))}),Ug.debug("storage vault configure called"),Dg.vault.configure(t)},Dg}();E.Amplify.register(Lg);function Fg(e,t){var n={};for(o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,o=Object.getOwnPropertySymbols(e);r<o.length;r++)t.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(n[o[r]]=e[o[r]]);return n}var jg=function(){return(jg=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},Bg=new E.ConsoleLogger("RestClient"),Vg=(zg.prototype.ajax=function(v,b,w){return e=this,u=function(){var t,n,r,o,i,s,a,u,c,l,p,d,f,h,m,e,g=this;return l=this,p=function(e){switch(e.label){case 0:return Bg.debug(b,v),t="us-east-1",n="execute-api",r=void 0,"string"==typeof v?(i=this._parseUrl(v),c=v):(c=v.endpoint,r=v.custom_header,t=v.region,n=v.service,i=this._parseUrl(v.endpoint)),o={method:b,url:c,host:i.host,path:i.path,headers:{},data:null,responseType:"json",timeout:0,cancelToken:null},i={},E.Platform.isReactNative&&(s=E.Platform.userAgent||"aws-amplify/0.1.x",i={"User-Agent":s}),s=Object.assign({},w),a=s.response,s.body&&("function"==typeof FormData&&s.body instanceof FormData?(i["Content-Type"]="multipart/form-data",o.data=s.body):(i["Content-Type"]="application/json; charset=UTF-8",o.data=JSON.stringify(s.body))),s.responseType&&(o.responseType=s.responseType),s.withCredentials&&(o.withCredentials=s.withCredentials),s.timeout&&(o.timeout=s.timeout),s.cancellableToken&&(o.cancelToken=s.cancellableToken.token),o.signerServiceInfo=s.signerServiceInfo,"function"!=typeof r?[3,2]:[4,r()];case 1:return u=e.sent(),[3,3];case 2:u=void 0,e.label=3;case 3:return o.headers=jg(jg(jg({},i),u),s.headers),(c=S.parse(c,!0,!0)).search,c=Fg(c,["search"]),o.url=S.format(jg(jg({},c),{query:jg(jg({},c.query),s.queryStringParameters||{})})),void 0!==o.headers.Authorization?(o.headers=Object.keys(o.headers).reduce(function(e,t){return o.headers[t]&&(e[t]=o.headers[t]),e},{}),[2,this._request(o,a)]):[2,this.Credentials.get().then(function(e){return g._signed(jg({},o),e,a,{region:t,service:n}).catch(function(e){if(E.DateUtils.isClockSkewError(e)){var t=(n=e.response.headers)&&(n.date||n.Date),n=new Date(t),t=E.DateUtils.getDateFromHeaderString(o.headers["x-amz-date"]);if(E.DateUtils.isClockSkewed(t,n))return E.DateUtils.setClockOffset(n.getTime()-t.getTime()),g.ajax(v,b,w)}throw e})},function(e){return Bg.debug("No credentials available, the request will be unsigned"),g._request(o,a)})]}},m={label:0,sent:function(){if(1&h[0])throw h[1];return h[1]},trys:[],ops:[]},e={next:y(0),throw:y(1),return:y(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function y(t){return function(e){return function(t){if(d)throw new TypeError("Generator is already executing.");for(;m;)try{if(d=1,f&&(h=2&t[0]?f.return:t[0]?f.throw||((h=f.return)&&h.call(f),0):f.next)&&!(h=h.call(f,t[1])).done)return h;switch(f=0,(t=h?[2&t[0],h.value]:t)[0]){case 0:case 1:h=t;break;case 4:return m.label++,{value:t[1],done:!1};case 5:m.label++,f=t[1],t=[0];continue;case 7:t=m.ops.pop(),m.trys.pop();continue;default:if(!(h=0<(h=m.trys).length&&h[h.length-1])&&(6===t[0]||2===t[0])){m=0;continue}if(3===t[0]&&(!h||t[1]>h[0]&&t[1]<h[3])){m.label=t[1];break}if(6===t[0]&&m.label<h[1]){m.label=h[1],h=t;break}if(h&&m.label<h[2]){m.label=h[2],m.ops.push(t);break}h[2]&&m.ops.pop(),m.trys.pop();continue}t=p.call(l,m)}catch(e){t=[6,e],f=0}finally{d=h=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},new(a=(a=s=void 0)||Promise)(function(n,t){function r(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,o)}i((u=u.apply(e,s||[])).next())});var e,s,a,u},zg.prototype.get=function(e,t){return this.ajax(e,"GET",t)},zg.prototype.put=function(e,t){return this.ajax(e,"PUT",t)},zg.prototype.patch=function(e,t){return this.ajax(e,"PATCH",t)},zg.prototype.post=function(e,t){return this.ajax(e,"POST",t)},zg.prototype.del=function(e,t){return this.ajax(e,"DELETE",t)},zg.prototype.head=function(e,t){return this.ajax(e,"HEAD",t)},zg.prototype.cancel=function(e,t){return(e=this._cancelTokenMap.get(e))&&e.cancel(t),!0},zg.prototype.isCancel=function(e){return T.isCancel(e)},zg.prototype.getCancellableToken=function(){return T.CancelToken.source()},zg.prototype.updateRequestToBeCancellable=function(e,t){this._cancelTokenMap.set(e,t)},zg.prototype.endpoint=function(t){var n=this,e=this._options.endpoints,r="";return Array.isArray(e)&&e.forEach(function(e){e.name===t&&(r=e.endpoint,"string"==typeof e.region?n._region=e.region:"string"==typeof n._options.region&&(n._region=n._options.region),"string"==typeof e.service?n._service=e.service||"execute-api":n._service="execute-api","function"==typeof e.custom_header?n._custom_header=e.custom_header:n._custom_header=void 0)}),r},zg.prototype._signed=function(e,t,n,r){var o=r.service,i=r.region,r=e.signerServiceInfo,e=Fg(e,["signerServiceInfo"]),i=i||this._region||this._options.region,o=o||this._service||this._options.service,t={secret_key:t.secretAccessKey,access_key:t.accessKeyId,session_token:t.sessionToken},o={region:i,service:o},r=Object.assign(o,r);return(r=E.Signer.sign(e,t,r)).data&&(r.body=r.data),Bg.debug("Signed Request: ",r),delete r.headers.host,T(r).then(function(e){return n?e:e.data}).catch(function(e){throw Bg.debug(e),e})},zg.prototype._request=function(e,t){return void 0===t&&(t=!1),T(e).then(function(e){return t?e:e.data}).catch(function(e){throw Bg.debug(e),e})},zg.prototype._parseUrl=function(e){return{host:(e=e.split("/"))[2],path:"/"+e.slice(3).join("/")}},zg);function zg(e){this._region="us-east-1",this._service="execute-api",this._custom_header=void 0,this._cancelTokenMap=null,this.Credentials=E.Credentials,this._options=e,Bg.debug("API Options",this._options),null==this._cancelTokenMap&&(this._cancelTokenMap=new WeakMap)}var qg=function(){return(qg=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},Kg=new E.ConsoleLogger("RestAPI"),Hg=(Gg.prototype.getModuleName=function(){return"RestAPI"},Gg.prototype.configure=function(e){var e=void 0===(e=(t=e||{}).API)?{}:e,t=function(e,t){var n={};for(o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,o=Object.getOwnPropertySymbols(e);r<o.length;r++)t.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(n[o[r]]=e[o[r]]);return n}(t,["API"]),t=qg(qg({},t),e);return Kg.debug("configure Rest API",{opt:t}),t.aws_project_region&&(t.aws_cloud_logic_custom&&(e=t.aws_cloud_logic_custom,t.endpoints="string"==typeof e?JSON.parse(e):e),t=Object.assign({},t,{region:t.aws_project_region,header:{}})),Array.isArray(t.endpoints)?t.endpoints.forEach(function(e){void 0!==e.custom_header&&"function"!=typeof e.custom_header&&(Kg.warn("Rest API "+e.name+", custom_header should be a function"),e.custom_header=void 0)}):this._options&&Array.isArray(this._options.endpoints)?t.endpoints=this._options.endpoints:t.endpoints=[],this._options=Object.assign({},this._options,t),this.createInstance(),this._options},Gg.prototype.createInstance=function(){return Kg.debug("create Rest API instance"),this._api=new Vg(this._options),this._api.Credentials=this.Credentials,!0},Gg.prototype.get=function(e,t,n){try{var r=this.getEndpointInfo(e,t),o=this._api.getCancellableToken(),i=Object.assign({},n);return i.cancellableToken=o,i=this._api.get(r,i),this._api.updateRequestToBeCancellable(i,o),i}catch(e){return Promise.reject(e.message)}},Gg.prototype.post=function(e,t,n){try{var r=this.getEndpointInfo(e,t),o=this._api.getCancellableToken(),i=Object.assign({},n);return i.cancellableToken=o,i=this._api.post(r,i),this._api.updateRequestToBeCancellable(i,o),i}catch(e){return Promise.reject(e.message)}},Gg.prototype.put=function(e,t,n){try{var r=this.getEndpointInfo(e,t),o=this._api.getCancellableToken(),i=Object.assign({},n);return i.cancellableToken=o,i=this._api.put(r,i),this._api.updateRequestToBeCancellable(i,o),i}catch(e){return Promise.reject(e.message)}},Gg.prototype.patch=function(e,t,n){try{var r=this.getEndpointInfo(e,t),o=this._api.getCancellableToken(),i=Object.assign({},n);return i.cancellableToken=o,i=this._api.patch(r,i),this._api.updateRequestToBeCancellable(i,o),i}catch(e){return Promise.reject(e.message)}},Gg.prototype.del=function(e,t,n){try{var r=this.getEndpointInfo(e,t),o=this._api.getCancellableToken(),i=Object.assign({},n);return i.cancellableToken=o,i=this._api.del(r,i),this._api.updateRequestToBeCancellable(i,o),i}catch(e){return Promise.reject(e.message)}},Gg.prototype.head=function(e,t,n){try{var r=this.getEndpointInfo(e,t),o=this._api.getCancellableToken(),i=Object.assign({},n);return i.cancellableToken=o,i=this._api.head(r,i),this._api.updateRequestToBeCancellable(i,o),i}catch(e){return Promise.reject(e.message)}},Gg.prototype.isCancel=function(e){return this._api.isCancel(e)},Gg.prototype.cancel=function(e,t){return this._api.cancel(e,t)},Gg.prototype.endpoint=function(u){return e=this,c=function(){return n=this,r=function(e){return[2,this._api.endpoint(u)]},a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&t[0]?i.return:t[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,t[1])).done)return s;switch(i=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,i=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],i=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}var n,r,o,i,s,a,t},new(a=(a=s=void 0)||Promise)(function(n,t){function r(e){try{i(c.next(e))}catch(e){t(e)}}function o(e){try{i(c.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,o)}i((c=c.apply(e,s||[])).next())});var e,s,a,c},Gg.prototype.getEndpointInfo=function(t,e){var n=this._options.endpoints;if(!Array.isArray(n))throw new Error("API category not configured");if(!(n=n.find(function(e){return e.name===t})))throw new Error("API "+t+" does not exist");return e={endpoint:n.endpoint+e},"string"==typeof n.region?e.region=n.region:"string"==typeof this._options.region&&(e.region=this._options.region),"string"==typeof n.service?e.service=n.service||"execute-api":e.service="execute-api","function"==typeof n.custom_header?e.custom_header=n.custom_header:e.custom_header=void 0,e},Gg);function Gg(e){this._api=null,this.Credentials=E.Credentials,this._options=e,Kg.debug("API Options",this._options)}var Wg=new Hg(null);function $g(e,t){for(var n,r=/\r\n|[\n\r]/g,o=1,i=t+1;(n=r.exec(e.body))&&n.index<t;)o+=1,i=t+1-(n.index+n[0].length);return{line:o,column:i}}function Yg(e,t){var a=Jg(l=e.locationOffset.column-1)+e.body,u=t.line-1,c=e.locationOffset.line-1,c=t.line+c,l=1===t.line?l:0,l=t.column+l,a=a.split(/\r\n|[\n\r]/g);return"".concat(e.name," (").concat(c,":").concat(l,")\n")+function(){var e=[["".concat(c-1,": "),a[u-1]],["".concat(c,": "),a[u]],["",Jg(l-1)+"^"],["".concat(c+1,": "),a[1+u]]].filter(function(e){return e[0],void 0!==e[1]}),n=0,t=!0,r=!1,o=void 0;try{for(var i=e[Symbol.iterator]();!(t=(s=i.next()).done);t=!0)var s=s.value[0],n=Math.max(n,s.length)}catch(e){r=!0,o=e}finally{try{t||null==i.return||i.return()}finally{if(r)throw o}}return e.map(function(e){var t=e[0],e=e[1];return Jg(n-t.length)+t+e}).join("\n")}()}function Jg(e){return Array(e+1).join(" ")}function Zg(e,t,n,r,o,i,s){var a=Array.isArray(t)?0!==t.length?t:void 0:t?[t]:void 0;!(t=n)&&a&&(t=(c=a[0])&&c.loc&&c.loc.source);var u,c=r;(c=!c&&a?a.reduce(function(e,t){return t.loc&&e.push(t.loc.start),e},[]):c)&&0===c.length&&(c=void 0),r&&n?u=r.map(function(e){return $g(n,e)}):a&&(u=a.reduce(function(e,t){return t.loc&&e.push($g(t.loc.source,t.loc.start)),e},[])),s=s||i&&i.extensions,Object.defineProperties(this,{message:{value:e,enumerable:!0,writable:!0},locations:{value:u||void 0,enumerable:Boolean(u)},path:{value:o||void 0,enumerable:Boolean(o)},nodes:{value:a||void 0},source:{value:t||void 0},positions:{value:c||void 0},originalError:{value:i},extensions:{value:s||void 0,enumerable:Boolean(s)}}),i&&i.stack?Object.defineProperty(this,"stack",{value:i.stack,writable:!0,configurable:!0}):Error.captureStackTrace?Error.captureStackTrace(this,Zg):Object.defineProperty(this,"stack",{value:Error().stack,writable:!0,configurable:!0})}E.Amplify.register(Wg),Zg.prototype=Object.create(Error.prototype,{constructor:{value:Zg},name:{value:"GraphQLError"},toString:{value:function(){return function(e){var t=[];if(e.nodes){var n=!0,r=!1,o=void 0;try{for(var i=e.nodes[Symbol.iterator]();!(n=(s=i.next()).done);n=!0){var s=s.value;s.loc&&t.push(Yg(s.loc.source,$g(s.loc.source,s.loc.start)))}}catch(e){r=!0,o=e}finally{try{n||null==i.return||i.return()}finally{if(r)throw o}}}else if(e.source&&e.locations){var a=e.source,u=!0,c=!1,l=void 0;try{for(var p=e.locations[Symbol.iterator]();!(u=(d=p.next()).done);u=!0){var d=d.value;t.push(Yg(a,d))}}catch(e){c=!0,l=e}finally{try{u||null==p.return||p.return()}finally{if(c)throw l}}}return 0===t.length?e.message:[e.message].concat(t).join("\n\n")+"\n"}(this)}}});var Qg={Name:[],Document:["definitions"],OperationDefinition:["name","variableDefinitions","directives","selectionSet"],VariableDefinition:["variable","type","defaultValue","directives"],Variable:["name"],SelectionSet:["selections"],Field:["alias","name","arguments","directives","selectionSet"],Argument:["name","value"],FragmentSpread:["name","directives"],InlineFragment:["typeCondition","directives","selectionSet"],FragmentDefinition:["name","variableDefinitions","typeCondition","directives","selectionSet"],IntValue:[],FloatValue:[],StringValue:[],BooleanValue:[],NullValue:[],EnumValue:[],ListValue:["values"],ObjectValue:["fields"],ObjectField:["name","value"],Directive:["name","arguments"],NamedType:["name"],ListType:["type"],NonNullType:["type"],SchemaDefinition:["directives","operationTypes"],OperationTypeDefinition:["type"],ScalarTypeDefinition:["description","name","directives"],ObjectTypeDefinition:["description","name","interfaces","directives","fields"],FieldDefinition:["description","name","arguments","type","directives"],InputValueDefinition:["description","name","type","defaultValue","directives"],InterfaceTypeDefinition:["description","name","directives","fields"],UnionTypeDefinition:["description","name","directives","types"],EnumTypeDefinition:["description","name","directives","values"],EnumValueDefinition:["description","name","directives"],InputObjectTypeDefinition:["description","name","directives","fields"],DirectiveDefinition:["description","name","arguments","locations"],SchemaExtension:["directives","operationTypes"],ScalarTypeExtension:["name","directives"],ObjectTypeExtension:["name","interfaces","directives","fields"],InterfaceTypeExtension:["name","directives","fields"],UnionTypeExtension:["name","directives","types"],EnumTypeExtension:["name","directives","values"],InputObjectTypeExtension:["name","directives","fields"]},Xg={};function ey(e){return Boolean(e&&"string"==typeof e.kind)}function ty(e){return function(e,t,n){var r,o,i,s=2<arguments.length&&void 0!==n?n:Qg,a=void 0,u=Array.isArray(e),c=[e],l=-1,p=[],d=void 0,f=void 0,h=void 0,m=[],g=[],y=e;do{var v=++l===c.length,b=v&&0!==p.length;if(v){if(f=0===g.length?void 0:m[m.length-1],d=h,h=g.pop(),b){if(u)d=d.slice();else{var w,S={};for(w in d)d.hasOwnProperty(w)&&(S[w]=d[w]);d=S}for(var C=0,_=0;_<p.length;_++){var E=p[_][0],I=p[_][1];u&&(E-=C),u&&null===I?(d.splice(E,1),C++):d[E]=I}}l=a.index,c=a.keys,p=a.edits,u=a.inArray,a=a.prev}else{if(f=h?u?l:c[l]:void 0,null==(d=h?h[f]:y))continue;h&&m.push(f)}var A=void 0;if(!Array.isArray(d)){if(!ey(d))throw new Error("Invalid AST Node: "+JSON.stringify(d));var P=(r=t,o=d.kind,i=void 0,(i=r[o])?!v&&"function"==typeof i||"function"==typeof(i=v?i.leave:i.enter)?i:void 0:(r=v?r.leave:r.enter)?"function"==typeof r?r:"function"==typeof(o=r[o])?o:void 0:void 0);if(P){if((A=P.call(t,d,f,h,m,g))===Xg)break;if(!1===A){if(!v){m.pop();continue}}else if(void 0!==A&&(p.push([f,A]),!v)){if(!ey(A)){m.pop();continue}d=A}}}void 0===A&&b&&p.push([f,d]),v?m.pop():(a={inArray:u,index:l,keys:c,edits:p,prev:a},c=(u=Array.isArray(d))?d:s[d.kind]||[],l=-1,p=[],h&&g.push(h),h=d)}while(void 0!==a);return 0!==p.length?p[p.length-1][1]:y}(e,{leave:ny})}var ny={Name:function(e){return e.value},Variable:function(e){return"$"+e.name},Document:function(e){return oy(e.definitions,"\n\n")+"\n"},OperationDefinition:function(e){var t=e.operation,n=e.name,r=sy("(",oy(e.variableDefinitions,", "),")"),o=oy(e.directives," "),e=e.selectionSet;return n||o||r||"query"!==t?oy([t,oy([n,r]),o,e]," "):e},VariableDefinition:function(e){var t=e.variable,n=e.type,r=e.defaultValue,e=e.directives;return t+": "+n+sy(" = ",r)+sy(" ",oy(e," "))},SelectionSet:function(e){return iy(e.selections)},Field:function(e){var t=e.alias,n=e.name,r=e.arguments,o=e.directives,e=e.selectionSet;return oy([sy("",t,": ")+n+sy("(",oy(r,", "),")"),oy(o," "),e]," ")},Argument:function(e){return e.name+": "+e.value},FragmentSpread:function(e){return"..."+e.name+sy(" ",oy(e.directives," "))},InlineFragment:function(e){var t=e.typeCondition,n=e.directives,e=e.selectionSet;return oy(["...",sy("on ",t),oy(n," "),e]," ")},FragmentDefinition:function(e){var t=e.name,n=e.typeCondition,r=e.variableDefinitions,o=e.directives,e=e.selectionSet;return"fragment ".concat(t).concat(sy("(",oy(r,", "),")")," ")+"on ".concat(n," ").concat(sy("",oy(o," ")," "))+e},IntValue:function(e){return e.value},FloatValue:function(e){return e.value},StringValue:function(e,t){var n,r=e.value;return e.block?(n="description"===t,t=(e=r).replace(/"""/g,'\\"""')," "!==e[0]&&"\t"!==e[0]||-1!==e.indexOf("\n")?'"""\n'.concat(n?t:ay(t),'\n"""'):'"""'.concat(t.replace(/"$/,'"\n'),'"""')):JSON.stringify(r)},BooleanValue:function(e){return e.value?"true":"false"},NullValue:function(){return"null"},EnumValue:function(e){return e.value},ListValue:function(e){return"["+oy(e.values,", ")+"]"},ObjectValue:function(e){return"{"+oy(e.fields,", ")+"}"},ObjectField:function(e){return e.name+": "+e.value},Directive:function(e){return"@"+e.name+sy("(",oy(e.arguments,", "),")")},NamedType:function(e){return e.name},ListType:function(e){return"["+e.type+"]"},NonNullType:function(e){return e.type+"!"},SchemaDefinition:function(e){var t=e.directives,e=e.operationTypes;return oy(["schema",oy(t," "),iy(e)]," ")},OperationTypeDefinition:function(e){return e.operation+": "+e.type},ScalarTypeDefinition:ry(function(e){return oy(["scalar",e.name,oy(e.directives," ")]," ")}),ObjectTypeDefinition:ry(function(e){var t=e.name,n=e.interfaces,r=e.directives,e=e.fields;return oy(["type",t,sy("implements ",oy(n," & ")),oy(r," "),iy(e)]," ")}),FieldDefinition:ry(function(e){var t=e.name,n=e.arguments,r=e.type,e=e.directives;return t+(n.every(function(e){return-1===e.indexOf("\n")})?sy("(",oy(n,", "),")"):sy("(\n",ay(oy(n,"\n")),"\n)"))+": "+r+sy(" ",oy(e," "))}),InputValueDefinition:ry(function(e){var t=e.name,n=e.type,r=e.defaultValue,e=e.directives;return oy([t+": "+n,sy("= ",r),oy(e," ")]," ")}),InterfaceTypeDefinition:ry(function(e){var t=e.name,n=e.directives,e=e.fields;return oy(["interface",t,oy(n," "),iy(e)]," ")}),UnionTypeDefinition:ry(function(e){var t=e.name,n=e.directives,e=e.types;return oy(["union",t,oy(n," "),e&&0!==e.length?"= "+oy(e," | "):""]," ")}),EnumTypeDefinition:ry(function(e){var t=e.name,n=e.directives,e=e.values;return oy(["enum",t,oy(n," "),iy(e)]," ")}),EnumValueDefinition:ry(function(e){return oy([e.name,oy(e.directives," ")]," ")}),InputObjectTypeDefinition:ry(function(e){var t=e.name,n=e.directives,e=e.fields;return oy(["input",t,oy(n," "),iy(e)]," ")}),DirectiveDefinition:ry(function(e){var t=e.name,n=e.arguments,e=e.locations;return"directive @"+t+(n.every(function(e){return-1===e.indexOf("\n")})?sy("(",oy(n,", "),")"):sy("(\n",ay(oy(n,"\n")),"\n)"))+" on "+oy(e," | ")}),SchemaExtension:function(e){var t=e.directives,e=e.operationTypes;return oy(["extend schema",oy(t," "),iy(e)]," ")},ScalarTypeExtension:function(e){return oy(["extend scalar",e.name,oy(e.directives," ")]," ")},ObjectTypeExtension:function(e){var t=e.name,n=e.interfaces,r=e.directives,e=e.fields;return oy(["extend type",t,sy("implements ",oy(n," & ")),oy(r," "),iy(e)]," ")},InterfaceTypeExtension:function(e){var t=e.name,n=e.directives,e=e.fields;return oy(["extend interface",t,oy(n," "),iy(e)]," ")},UnionTypeExtension:function(e){var t=e.name,n=e.directives,e=e.types;return oy(["extend union",t,oy(n," "),e&&0!==e.length?"= "+oy(e," | "):""]," ")},EnumTypeExtension:function(e){var t=e.name,n=e.directives,e=e.values;return oy(["extend enum",t,oy(n," "),iy(e)]," ")},InputObjectTypeExtension:function(e){var t=e.name,n=e.directives,e=e.fields;return oy(["extend input",t,oy(n," "),iy(e)]," ")}};function ry(t){return function(e){return oy([e.description,t(e)],"\n")}}function oy(e,t){return e?e.filter(function(e){return e}).join(t||""):""}function iy(e){return e&&0!==e.length?"{\n"+ay(oy(e,"\n"))+"\n}":""}function sy(e,t,n){return t?e+t+(n||""):""}function ay(e){return e&&"  "+e.replace(/\n/g,"\n  ")}function uy(e){return(uy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function cy(t){return t&&"object"===uy(t)?"function"==typeof t.inspect?t.inspect():Array.isArray(t)?"["+t.map(cy).join(", ")+"]":"{"+Object.keys(t).map(function(e){return"".concat(e,": ").concat(cy(t[e]))}).join(", ")+"}":"string"==typeof t?'"'+t+'"':"function"==typeof t?"[function ".concat(t.name,"]"):String(t)}function ly(e,t){if(!e)throw new Error(t)}function py(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function dy(e,t,n){py(this,"body",void 0),py(this,"name",void 0),py(this,"locationOffset",void 0),this.body=e,this.name=t||"GraphQL request",this.locationOffset=n||{line:1,column:1},0<this.locationOffset.line||ly(0,"line in locationOffset is 1-indexed and must be positive"),0<this.locationOffset.column||ly(0,"column in locationOffset is 1-indexed and must be positive")}function fy(e,t,n){return new Zg("Syntax Error: ".concat(n),void 0,e,[t])}function hy(e){for(var t=0;t<e.length&&(" "===e[t]||"\t"===e[t]);)t++;return t}function my(e){return hy(e)===e.length}function gy(){return this.lastToken=this.token,this.token=this.lookahead()}function yy(){var e=this.token;if(e.kind!==vy.EOF)for(;(e=e.next||(e.next=function(e,t){var u=e.source,n=u.body,r=n.length,o=function(e,t,n){for(var r=e.length,o=t;o<r;){var i=wy.call(e,o);if(9===i||32===i||44===i||65279===i)++o;else if(10===i)++o,++n.line,n.lineStart=o;else{if(13!==i)break;10===wy.call(e,o+1)?o+=2:++o,++n.line,n.lineStart=o}}return o}(n,t.end,e),i=e.line,s=1+o-e.lineStart;if(r<=o)return new Cy(vy.EOF,r,r,i,s,t);var a,c=wy.call(n,o);switch(c){case 33:return new Cy(vy.BANG,o,o+1,i,s,t);case 35:return function(e,t,n,r){for(var o,i=u.body,s=e;null!==(o=wy.call(i,++s))&&(31<o||9===o););return new Cy(vy.COMMENT,e,s,t,n,r,Sy.call(i,e+1,s))}(o,i,s,t);case 36:return new Cy(vy.DOLLAR,o,o+1,i,s,t);case 38:return new Cy(vy.AMP,o,o+1,i,s,t);case 40:return new Cy(vy.PAREN_L,o,o+1,i,s,t);case 41:return new Cy(vy.PAREN_R,o,o+1,i,s,t);case 46:if(46===wy.call(n,o+1)&&46===wy.call(n,o+2))return new Cy(vy.SPREAD,o,o+3,i,s,t);break;case 58:return new Cy(vy.COLON,o,o+1,i,s,t);case 61:return new Cy(vy.EQUALS,o,o+1,i,s,t);case 64:return new Cy(vy.AT,o,o+1,i,s,t);case 91:return new Cy(vy.BRACKET_L,o,o+1,i,s,t);case 93:return new Cy(vy.BRACKET_R,o,o+1,i,s,t);case 123:return new Cy(vy.BRACE_L,o,o+1,i,s,t);case 124:return new Cy(vy.PIPE,o,o+1,i,s,t);case 125:return new Cy(vy.BRACE_R,o,o+1,i,s,t);case 65:case 66:case 67:case 68:case 69:case 70:case 71:case 72:case 73:case 74:case 75:case 76:case 77:case 78:case 79:case 80:case 81:case 82:case 83:case 84:case 85:case 86:case 87:case 88:case 89:case 90:case 95:case 97:case 98:case 99:case 100:case 101:case 102:case 103:case 104:case 105:case 106:case 107:case 108:case 109:case 110:case 111:case 112:case 113:case 114:case 115:case 116:case 117:case 118:case 119:case 120:case 121:case 122:return function(e,t,n,r){for(var o=u.body,i=o.length,s=e+1,a=0;s!==i&&null!==(a=wy.call(o,s))&&(95===a||48<=a&&a<=57||65<=a&&a<=90||97<=a&&a<=122);)++s;return new Cy(vy.NAME,e,s,t,n,r,Sy.call(o,e,s))}(o,i,s,t);case 45:case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return function(e,t,n,r,o,i){var s=e.body,a=n,u=t,n=!1;if(45===a&&(a=wy.call(s,++u)),48===a){if(48<=(a=wy.call(s,++u))&&a<=57)throw fy(e,u,"Invalid number, unexpected digit after 0: ".concat(_y(a),"."))}else u=Ey(e,u,a),a=wy.call(s,u);return 46===a&&(n=!0,a=wy.call(s,++u),u=Ey(e,u,a),a=wy.call(s,u)),69!==a&&101!==a||(n=!0,43!==(a=wy.call(s,++u))&&45!==a||(a=wy.call(s,++u)),u=Ey(e,u,a)),new Cy(n?vy.FLOAT:vy.INT,t,u,r,o,i,Sy.call(s,t,u))}(u,o,c,i,s,t);case 34:return(34===wy.call(n,o+1)&&34===wy.call(n,o+2)?function(e,t,n,r,o){for(var i=e.body,s=t+3,a=s,u=0,c="";s<i.length&&null!==(u=wy.call(i,s));){if(34===u&&34===wy.call(i,s+1)&&34===wy.call(i,s+2))return c+=Sy.call(i,a,s),new Cy(vy.BLOCK_STRING,t,s+3,n,r,o,function(){for(var e=c.split(/\r\n|[\n\r]/g),t=null,n=1;n<e.length;n++){var r=e[n],o=hy(r);if(o<r.length&&(null===t||o<t)&&0===(t=o))break}if(t)for(var i=1;i<e.length;i++)e[i]=e[i].slice(t);for(;0<e.length&&my(e[0]);)e.shift();for(;0<e.length&&my(e[e.length-1]);)e.pop();return e.join("\n")}());if(u<32&&9!==u&&10!==u&&13!==u)throw fy(e,s,"Invalid character within String: ".concat(_y(u),"."));92===u&&34===wy.call(i,s+1)&&34===wy.call(i,s+2)&&34===wy.call(i,s+3)?(c+=Sy.call(i,a,s)+'"""',a=s+=4):++s}throw fy(e,s,"Unterminated string.")}:function(e,t,n,r,o){for(var i,s,a,u,c=e.body,l=t+1,p=l,d=0,f="";l<c.length&&null!==(d=wy.call(c,l))&&10!==d&&13!==d;){if(34===d)return f+=Sy.call(c,p,l),new Cy(vy.STRING,t,l+1,n,r,o,f);if(d<32&&9!==d)throw fy(e,l,"Invalid character within String: ".concat(_y(d),"."));if(++l,92===d){switch(f+=Sy.call(c,p,l-1),d=wy.call(c,l)){case 34:f+='"';break;case 47:f+="/";break;case 92:f+="\\";break;case 98:f+="\b";break;case 102:f+="\f";break;case 110:f+="\n";break;case 114:f+="\r";break;case 116:f+="\t";break;case 117:var h=(i=wy.call(c,l+1),s=wy.call(c,l+2),a=wy.call(c,l+3),u=wy.call(c,l+4),Iy(i)<<12|Iy(s)<<8|Iy(a)<<4|Iy(u));if(h<0)throw fy(e,l,"Invalid character escape sequence: "+"\\u".concat(c.slice(l+1,l+5),"."));f+=String.fromCharCode(h),l+=4;break;default:throw fy(e,l,"Invalid character escape sequence: \\".concat(String.fromCharCode(d),"."))}p=++l}}throw fy(e,l,"Unterminated string.")})(u,o,i,s,t)}throw fy(u,o,(a=c)<32&&9!==a&&10!==a&&13!==a?"Cannot contain the invalid character ".concat(_y(a),"."):39!==a?"Cannot parse the unexpected character ".concat(_y(a),"."):"Unexpected single quote character ('), did you mean to use a double quote (\")?")}(this,e))).kind===vy.COMMENT;);return e}"function"==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(dy.prototype,Symbol.toStringTag,{get:function(){return this.constructor.name}});var vy=Object.freeze({SOF:"<SOF>",EOF:"<EOF>",BANG:"!",DOLLAR:"$",AMP:"&",PAREN_L:"(",PAREN_R:")",SPREAD:"...",COLON:":",EQUALS:"=",AT:"@",BRACKET_L:"[",BRACKET_R:"]",BRACE_L:"{",PIPE:"|",BRACE_R:"}",NAME:"Name",INT:"Int",FLOAT:"Float",STRING:"String",BLOCK_STRING:"BlockString",COMMENT:"Comment"});function by(e){var t=e.value;return t?"".concat(e.kind,' "').concat(t,'"'):e.kind}var wy=String.prototype.charCodeAt,Sy=String.prototype.slice;function Cy(e,t,n,r,o,i,s){this.kind=e,this.start=t,this.end=n,this.line=r,this.column=o,this.value=s,this.prev=i,this.next=null}function _y(e){return isNaN(e)?vy.EOF:e<127?JSON.stringify(String.fromCharCode(e)):'"\\u'.concat(("00"+e.toString(16).toUpperCase()).slice(-4),'"')}function Ey(e,t,n){var r=e.body,o=t,i=n;if(48<=i&&i<=57){for(;48<=(i=wy.call(r,++o))&&i<=57;);return o}throw fy(e,o,"Invalid number, expected digit but got: ".concat(_y(i),"."))}function Iy(e){return 48<=e&&e<=57?e-48:65<=e&&e<=70?e-55:97<=e&&e<=102?e-87:-1}Cy.prototype.toJSON=Cy.prototype.inspect=function(){return{kind:this.kind,value:this.value,line:this.line,column:this.column}};var Ay=Object.freeze({NAME:"Name",DOCUMENT:"Document",OPERATION_DEFINITION:"OperationDefinition",VARIABLE_DEFINITION:"VariableDefinition",SELECTION_SET:"SelectionSet",FIELD:"Field",ARGUMENT:"Argument",FRAGMENT_SPREAD:"FragmentSpread",INLINE_FRAGMENT:"InlineFragment",FRAGMENT_DEFINITION:"FragmentDefinition",VARIABLE:"Variable",INT:"IntValue",FLOAT:"FloatValue",STRING:"StringValue",BOOLEAN:"BooleanValue",NULL:"NullValue",ENUM:"EnumValue",LIST:"ListValue",OBJECT:"ObjectValue",OBJECT_FIELD:"ObjectField",DIRECTIVE:"Directive",NAMED_TYPE:"NamedType",LIST_TYPE:"ListType",NON_NULL_TYPE:"NonNullType",SCHEMA_DEFINITION:"SchemaDefinition",OPERATION_TYPE_DEFINITION:"OperationTypeDefinition",SCALAR_TYPE_DEFINITION:"ScalarTypeDefinition",OBJECT_TYPE_DEFINITION:"ObjectTypeDefinition",FIELD_DEFINITION:"FieldDefinition",INPUT_VALUE_DEFINITION:"InputValueDefinition",INTERFACE_TYPE_DEFINITION:"InterfaceTypeDefinition",UNION_TYPE_DEFINITION:"UnionTypeDefinition",ENUM_TYPE_DEFINITION:"EnumTypeDefinition",ENUM_VALUE_DEFINITION:"EnumValueDefinition",INPUT_OBJECT_TYPE_DEFINITION:"InputObjectTypeDefinition",DIRECTIVE_DEFINITION:"DirectiveDefinition",SCHEMA_EXTENSION:"SchemaExtension",SCALAR_TYPE_EXTENSION:"ScalarTypeExtension",OBJECT_TYPE_EXTENSION:"ObjectTypeExtension",INTERFACE_TYPE_EXTENSION:"InterfaceTypeExtension",UNION_TYPE_EXTENSION:"UnionTypeExtension",ENUM_TYPE_EXTENSION:"EnumTypeExtension",INPUT_OBJECT_TYPE_EXTENSION:"InputObjectTypeExtension"}),Py=Object.freeze({QUERY:"QUERY",MUTATION:"MUTATION",SUBSCRIPTION:"SUBSCRIPTION",FIELD:"FIELD",FRAGMENT_DEFINITION:"FRAGMENT_DEFINITION",FRAGMENT_SPREAD:"FRAGMENT_SPREAD",INLINE_FRAGMENT:"INLINE_FRAGMENT",VARIABLE_DEFINITION:"VARIABLE_DEFINITION",SCHEMA:"SCHEMA",SCALAR:"SCALAR",OBJECT:"OBJECT",FIELD_DEFINITION:"FIELD_DEFINITION",ARGUMENT_DEFINITION:"ARGUMENT_DEFINITION",INTERFACE:"INTERFACE",UNION:"UNION",ENUM:"ENUM",ENUM_VALUE:"ENUM_VALUE",INPUT_OBJECT:"INPUT_OBJECT",INPUT_FIELD_DEFINITION:"INPUT_FIELD_DEFINITION"});function Oy(e,t){var n="string"==typeof e?new dy(e):e;if(!(n instanceof dy))throw new TypeError("Must provide Source. Received: ".concat(cy(n)));return n=(t=n={source:e=n,options:n=t||{},lastToken:t=new Cy(vy.SOF,0,0,0,0,null),token:t,line:1,lineStart:0,advance:gy,lookahead:yy}).token,{kind:Ay.DOCUMENT,definitions:gv(t,vy.SOF,Ty,vy.EOF),loc:cv(t,n)}}function ky(e){var t=fv(e,vy.NAME);return{kind:Ay.NAME,value:t.value,loc:cv(e,t)}}function Ty(e){if(pv(e,vy.NAME))switch(e.token.value){case"query":case"mutation":case"subscription":case"fragment":return xy(e);case"schema":case"scalar":case"type":case"interface":case"union":case"enum":case"input":case"directive":return Jy(e);case"extend":return function(e){var t=e.lookahead();if(t.kind===vy.NAME)switch(t.value){case"schema":return function(e){var t=e.token;hv(e,"extend"),hv(e,"schema");var n=Wy(e,!0),r=pv(e,vy.BRACE_L)?gv(e,vy.BRACE_L,Xy,vy.BRACE_R):[];if(0!==n.length||0!==r.length)return{kind:Ay.SCHEMA_EXTENSION,directives:n,operationTypes:r,loc:cv(e,t)};throw mv(e)}(e);case"scalar":return function(e){var t=e.token;hv(e,"extend"),hv(e,"scalar");var n=ky(e),r=Wy(e,!0);if(0!==r.length)return{kind:Ay.SCALAR_TYPE_EXTENSION,name:n,directives:r,loc:cv(e,t)};throw mv(e)}(e);case"type":return function(e){var t=e.token;hv(e,"extend"),hv(e,"type");var n=ky(e),r=ev(e),o=Wy(e,!0),i=tv(e);if(0!==r.length||0!==o.length||0!==i.length)return{kind:Ay.OBJECT_TYPE_EXTENSION,name:n,interfaces:r,directives:o,fields:i,loc:cv(e,t)};throw mv(e)}(e);case"interface":return function(e){var t=e.token;hv(e,"extend"),hv(e,"interface");var n=ky(e),r=Wy(e,!0),o=tv(e);if(0!==r.length||0!==o.length)return{kind:Ay.INTERFACE_TYPE_EXTENSION,name:n,directives:r,fields:o,loc:cv(e,t)};throw mv(e)}(e);case"union":return function(e){var t=e.token;hv(e,"extend"),hv(e,"union");var n=ky(e),r=Wy(e,!0),o=iv(e);if(0!==r.length||0!==o.length)return{kind:Ay.UNION_TYPE_EXTENSION,name:n,directives:r,types:o,loc:cv(e,t)};throw mv(e)}(e);case"enum":return function(e){var t=e.token;hv(e,"extend"),hv(e,"enum");var n=ky(e),r=Wy(e,!0),o=sv(e);if(0!==r.length||0!==o.length)return{kind:Ay.ENUM_TYPE_EXTENSION,name:n,directives:r,values:o,loc:cv(e,t)};throw mv(e)}(e);case"input":return function(e){var t=e.token;hv(e,"extend"),hv(e,"input");var n=ky(e),r=Wy(e,!0),o=uv(e);if(0!==r.length||0!==o.length)return{kind:Ay.INPUT_OBJECT_TYPE_EXTENSION,name:n,directives:r,fields:o,loc:cv(e,t)};throw mv(e)}(e)}throw mv(e,t)}(e)}else{if(pv(e,vy.BRACE_L))return xy(e);if(Zy(e))return Jy(e)}throw mv(e)}function xy(e){if(pv(e,vy.NAME))switch(e.token.value){case"query":case"mutation":case"subscription":return Ny(e);case"fragment":return n=(t=e).token,hv(t,"fragment"),t.options.experimentalFragmentVariables?{kind:Ay.FRAGMENT_DEFINITION,name:zy(t),variableDefinitions:Ry(t),typeCondition:(hv(t,"on"),Yy(t)),directives:Wy(t,!1),selectionSet:Ly(t),loc:cv(t,n)}:{kind:Ay.FRAGMENT_DEFINITION,name:zy(t),typeCondition:(hv(t,"on"),Yy(t)),directives:Wy(t,!1),selectionSet:Ly(t),loc:cv(t,n)}}else if(pv(e,vy.BRACE_L))return Ny(e);var t,n;throw mv(e)}function Ny(e){var t=e.token;if(pv(e,vy.BRACE_L))return{kind:Ay.OPERATION_DEFINITION,operation:"query",name:void 0,variableDefinitions:[],directives:[],selectionSet:Ly(e),loc:cv(e,t)};var n,r=My(e);return pv(e,vy.NAME)&&(n=ky(e)),{kind:Ay.OPERATION_DEFINITION,operation:r,name:n,variableDefinitions:Ry(e),directives:Wy(e,!1),selectionSet:Ly(e),loc:cv(e,t)}}function My(e){var t=fv(e,vy.NAME);switch(t.value){case"query":return"query";case"mutation":return"mutation";case"subscription":return"subscription"}throw mv(e,t)}function Ry(e){return pv(e,vy.PAREN_L)?gv(e,vy.PAREN_L,Uy,vy.PAREN_R):[]}function Uy(e){var t=e.token;return e.options.experimentalVariableDefinitionDirectives?{kind:Ay.VARIABLE_DEFINITION,variable:Dy(e),type:(fv(e,vy.COLON),$y(e)),defaultValue:dv(e,vy.EQUALS)?qy(e,!0):void 0,directives:Wy(e,!0),loc:cv(e,t)}:{kind:Ay.VARIABLE_DEFINITION,variable:Dy(e),type:(fv(e,vy.COLON),$y(e)),defaultValue:dv(e,vy.EQUALS)?qy(e,!0):void 0,loc:cv(e,t)}}function Dy(e){var t=e.token;return fv(e,vy.DOLLAR),{kind:Ay.VARIABLE,name:ky(e),loc:cv(e,t)}}function Ly(e){var t=e.token;return{kind:Ay.SELECTION_SET,selections:gv(e,vy.BRACE_L,Fy,vy.BRACE_R),loc:cv(e,t)}}function Fy(e){return(pv(e,vy.SPREAD)?function(e){var t,n=e.token;return fv(e,vy.SPREAD),pv(e,vy.NAME)&&"on"!==e.token.value?{kind:Ay.FRAGMENT_SPREAD,name:zy(e),directives:Wy(e,!1),loc:cv(e,n)}:("on"===e.token.value&&(e.advance(),t=Yy(e)),{kind:Ay.INLINE_FRAGMENT,typeCondition:t,directives:Wy(e,!1),selectionSet:Ly(e),loc:cv(e,n)})}:function(e){var t,n=e.token,r=ky(e),r=dv(e,vy.COLON)?(t=r,ky(e)):r;return{kind:Ay.FIELD,alias:t,name:r,arguments:jy(e,!1),directives:Wy(e,!1),selectionSet:pv(e,vy.BRACE_L)?Ly(e):void 0,loc:cv(e,n)}})(e)}function jy(e,t){return t=t?Vy:By,pv(e,vy.PAREN_L)?gv(e,vy.PAREN_L,t,vy.PAREN_R):[]}function By(e){var t=e.token;return{kind:Ay.ARGUMENT,name:ky(e),value:(fv(e,vy.COLON),qy(e,!1)),loc:cv(e,t)}}function Vy(e){var t=e.token;return{kind:Ay.ARGUMENT,name:ky(e),value:(fv(e,vy.COLON),Hy(e)),loc:cv(e,t)}}function zy(e){if("on"===e.token.value)throw mv(e);return ky(e)}function qy(e,t){var n,r,o,i=e.token;switch(i.kind){case vy.BRACKET_L:return r=t,o=(n=e).token,r=r?Hy:Gy,{kind:Ay.LIST,values:function(e,t,n,r){fv(e,t);for(var o=[];!dv(e,r);)o.push(n(e));return o}(n,vy.BRACKET_L,r,vy.BRACKET_R),loc:cv(n,o)};case vy.BRACE_L:return function(e,t){var n=e.token;fv(e,vy.BRACE_L);for(var r,o,i,s=[];!dv(e,vy.BRACE_R);)s.push((o=t,i=(r=e).token,{kind:Ay.OBJECT_FIELD,name:ky(r),value:(fv(r,vy.COLON),qy(r,o)),loc:cv(r,i)}));return{kind:Ay.OBJECT,fields:s,loc:cv(e,n)}}(e,t);case vy.INT:return e.advance(),{kind:Ay.INT,value:i.value,loc:cv(e,i)};case vy.FLOAT:return e.advance(),{kind:Ay.FLOAT,value:i.value,loc:cv(e,i)};case vy.STRING:case vy.BLOCK_STRING:return Ky(e);case vy.NAME:return"true"===i.value||"false"===i.value?(e.advance(),{kind:Ay.BOOLEAN,value:"true"===i.value,loc:cv(e,i)}):"null"===i.value?(e.advance(),{kind:Ay.NULL,loc:cv(e,i)}):(e.advance(),{kind:Ay.ENUM,value:i.value,loc:cv(e,i)});case vy.DOLLAR:if(!t)return Dy(e)}throw mv(e)}function Ky(e){var t=e.token;return e.advance(),{kind:Ay.STRING,value:t.value,block:t.kind===vy.BLOCK_STRING,loc:cv(e,t)}}function Hy(e){return qy(e,!0)}function Gy(e){return qy(e,!1)}function Wy(e,t){for(var n,r,o,i=[];pv(e,vy.AT);)i.push((r=t,o=(n=e).token,fv(n,vy.AT),{kind:Ay.DIRECTIVE,name:ky(n),arguments:jy(n,r),loc:cv(n,o)}));return i}function $y(e){var t=e.token,n=dv(e,vy.BRACKET_L)?(n=$y(e),fv(e,vy.BRACKET_R),{kind:Ay.LIST_TYPE,type:n,loc:cv(e,t)}):Yy(e);return dv(e,vy.BANG)?{kind:Ay.NON_NULL_TYPE,type:n,loc:cv(e,t)}:n}function Yy(e){var t=e.token;return{kind:Ay.NAMED_TYPE,name:ky(e),loc:cv(e,t)}}function Jy(e){var t=Zy(e)?e.lookahead():e.token;if(t.kind===vy.NAME)switch(t.value){case"schema":return function(e){var t=e.token;hv(e,"schema");var n=Wy(e,!0),r=gv(e,vy.BRACE_L,Xy,vy.BRACE_R);return{kind:Ay.SCHEMA_DEFINITION,directives:n,operationTypes:r,loc:cv(e,t)}}(e);case"scalar":return function(e){var t=e.token,n=Qy(e);hv(e,"scalar");var r=ky(e),o=Wy(e,!0);return{kind:Ay.SCALAR_TYPE_DEFINITION,description:n,name:r,directives:o,loc:cv(e,t)}}(e);case"type":return function(e){var t=e.token,n=Qy(e);hv(e,"type");var r=ky(e),o=ev(e),i=Wy(e,!0),s=tv(e);return{kind:Ay.OBJECT_TYPE_DEFINITION,description:n,name:r,interfaces:o,directives:i,fields:s,loc:cv(e,t)}}(e);case"interface":return function(e){var t=e.token,n=Qy(e);hv(e,"interface");var r=ky(e),o=Wy(e,!0),i=tv(e);return{kind:Ay.INTERFACE_TYPE_DEFINITION,description:n,name:r,directives:o,fields:i,loc:cv(e,t)}}(e);case"union":return function(e){var t=e.token,n=Qy(e);hv(e,"union");var r=ky(e),o=Wy(e,!0),i=iv(e);return{kind:Ay.UNION_TYPE_DEFINITION,description:n,name:r,directives:o,types:i,loc:cv(e,t)}}(e);case"enum":return function(e){var t=e.token,n=Qy(e);hv(e,"enum");var r=ky(e),o=Wy(e,!0),i=sv(e);return{kind:Ay.ENUM_TYPE_DEFINITION,description:n,name:r,directives:o,values:i,loc:cv(e,t)}}(e);case"input":return function(e){var t=e.token,n=Qy(e);hv(e,"input");var r=ky(e),o=Wy(e,!0),i=uv(e);return{kind:Ay.INPUT_OBJECT_TYPE_DEFINITION,description:n,name:r,directives:o,fields:i,loc:cv(e,t)}}(e);case"directive":return function(e){var t=e.token,n=Qy(e);hv(e,"directive"),fv(e,vy.AT);var r=ky(e),o=rv(e);hv(e,"on");var i=function(e){dv(e,vy.PIPE);for(var t=[];t.push(function(e){var t=e.token,n=ky(e);if(Py.hasOwnProperty(n.value))return n;throw mv(e,t)}(e)),dv(e,vy.PIPE););return t}(e);return{kind:Ay.DIRECTIVE_DEFINITION,description:n,name:r,arguments:o,locations:i,loc:cv(e,t)}}(e)}throw mv(e,t)}function Zy(e){return pv(e,vy.STRING)||pv(e,vy.BLOCK_STRING)}function Qy(e){if(Zy(e))return Ky(e)}function Xy(e){var t=e.token,n=My(e);fv(e,vy.COLON);var r=Yy(e);return{kind:Ay.OPERATION_TYPE_DEFINITION,operation:n,type:r,loc:cv(e,t)}}function ev(e){var t=[];if("implements"===e.token.value)for(e.advance(),dv(e,vy.AMP);t.push(Yy(e)),dv(e,vy.AMP)||e.options.allowLegacySDLImplementsInterfaces&&pv(e,vy.NAME););return t}function tv(e){return e.options.allowLegacySDLEmptyFields&&pv(e,vy.BRACE_L)&&e.lookahead().kind===vy.BRACE_R?(e.advance(),e.advance(),[]):pv(e,vy.BRACE_L)?gv(e,vy.BRACE_L,nv,vy.BRACE_R):[]}function nv(e){var t=e.token,n=Qy(e),r=ky(e),o=rv(e);fv(e,vy.COLON);var i=$y(e),s=Wy(e,!0);return{kind:Ay.FIELD_DEFINITION,description:n,name:r,arguments:o,type:i,directives:s,loc:cv(e,t)}}function rv(e){return pv(e,vy.PAREN_L)?gv(e,vy.PAREN_L,ov,vy.PAREN_R):[]}function ov(e){var t=e.token,n=Qy(e),r=ky(e);fv(e,vy.COLON);var o,i=$y(e);dv(e,vy.EQUALS)&&(o=Hy(e));var s=Wy(e,!0);return{kind:Ay.INPUT_VALUE_DEFINITION,description:n,name:r,type:i,defaultValue:o,directives:s,loc:cv(e,t)}}function iv(e){var t=[];if(dv(e,vy.EQUALS))for(dv(e,vy.PIPE);t.push(Yy(e)),dv(e,vy.PIPE););return t}function sv(e){return pv(e,vy.BRACE_L)?gv(e,vy.BRACE_L,av,vy.BRACE_R):[]}function av(e){var t=e.token,n=Qy(e),r=ky(e),o=Wy(e,!0);return{kind:Ay.ENUM_VALUE_DEFINITION,description:n,name:r,directives:o,loc:cv(e,t)}}function uv(e){return pv(e,vy.BRACE_L)?gv(e,vy.BRACE_L,ov,vy.BRACE_R):[]}function cv(e,t){if(!e.options.noLocation)return new lv(t,e.lastToken,e.source)}function lv(e,t,n){this.start=e.start,this.end=t.end,this.startToken=e,this.endToken=t,this.source=n}function pv(e,t){return e.token.kind===t}function dv(e,t){return(t=e.token.kind===t)&&e.advance(),t}function fv(e,t){var n=e.token;if(n.kind===t)return e.advance(),n;throw fy(e.source,n.start,"Expected ".concat(t,", found ").concat(by(n)))}function hv(e,t){var n=e.token;if(n.kind===vy.NAME&&n.value===t)return e.advance(),n;throw fy(e.source,n.start,'Expected "'.concat(t,'", found ').concat(by(n)))}function mv(e,t){return t=t||e.token,fy(e.source,t.start,"Unexpected ".concat(by(t)))}function gv(e,t,n,r){fv(e,t);for(var o=[n(e)];!dv(e,r);)o.push(n(e));return o}lv.prototype.toJSON=lv.prototype.inspect=function(){return{start:this.start,end:this.end}};var yv=N,vv=function(){return(vv=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},bv=new E.ConsoleLogger("AbstractPubSubProvider"),wv=(Sv.prototype.configure=function(e){return void 0===e&&(e={}),this._config=vv(vv({},e),this._config),bv.debug("configure "+this.getProviderName(),this._config),this.options},Sv.prototype.getCategory=function(){return"PubSub"},Object.defineProperty(Sv.prototype,"options",{get:function(){return vv({},this._config)},enumerable:!0,configurable:!0}),Sv);function Sv(e){void 0===e&&(e={}),this._config=e}function Cv(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,o)}i((u=u.apply(e,s||[])).next())})}function _v(n,r){var o,i,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&t[0]?i.return:t[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,t[1])).done)return s;switch(i=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,i=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],i=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}}function Ev(e,t){var n={};for(o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,o=Object.getOwnPropertySymbols(e);r<o.length;r++)t.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(n[o[r]]=e[o[r]]);return n}var Iv,Wg=(Iv=function(e,t){return(Iv=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}Iv(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),Av=function(){return(Av=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},Pv=new E.ConsoleLogger("MqttOverWSProvider"),Ov=(kv.prototype.get=function(n,r){return Cv(this,void 0,void 0,function(){var t;return _v(this,function(e){return(t=this.promises.get(n))||(t=r(n),this.promises.set(n,t)),[2,t]})})},Object.defineProperty(kv.prototype,"allClients",{get:function(){return Array.from(this.promises.keys())},enumerable:!0,configurable:!0}),kv.prototype.remove=function(e){this.promises.delete(e)},kv);function kv(){this.promises=new Map}var Tv,xv="undefined"!=typeof Symbol?Symbol("topic"):"@@topic",N=(Wg(Nv,Tv=wv),Object.defineProperty(Nv.prototype,"clientId",{get:function(){return this.options.clientId},enumerable:!0,configurable:!0}),Object.defineProperty(Nv.prototype,"endpoint",{get:function(){return this.options.aws_pubsub_endpoint},enumerable:!0,configurable:!0}),Object.defineProperty(Nv.prototype,"clientsQueue",{get:function(){return this._clientsQueue},enumerable:!0,configurable:!0}),Object.defineProperty(Nv.prototype,"isSSLEnabled",{get:function(){return!this.options.aws_appsync_dangerously_connect_to_http_endpoint_for_testing},enumerable:!0,configurable:!0}),Nv.prototype.getTopicForValue=function(e){return"object"==typeof e&&e[xv]},Nv.prototype.getProviderName=function(){return"MqttOverWSProvider"},Nv.prototype.onDisconnect=function(e){var r,t=this,n=e.clientId,o=e.errorCode,e=Ev(e,["clientId","errorCode"]);0!==o&&(Pv.warn(n,JSON.stringify(Av({errorCode:o},e),null,2)),r=[],(e=this._clientIdObservers.get(n))&&(e.forEach(function(n){n.error("Disconnected, error code: "+o),t._topicObservers.forEach(function(e,t){e.delete(n),0===e.size&&r.push(t)})}),this._clientIdObservers.delete(n),r.forEach(function(e){t._topicObservers.delete(e)})))},Nv.prototype.newClient=function(e){var t=e.url,o=e.clientId;return Cv(this,void 0,void 0,function(){var n,r=this;return _v(this,function(e){switch(e.label){case 0:return Pv.debug("Creating new MQTT client",o),(n=new M.Client(t,o)).onMessageArrived=function(e){var t=e.destinationName,e=e.payloadString;r._onMessage(t,e)},n.onConnectionLost=function(e){var t=e.errorCode,e=Ev(e,["errorCode"]);r.onDisconnect(Av({clientId:o,errorCode:t},e))},[4,new Promise(function(e,t){n.connect({useSSL:r.isSSLEnabled,mqttVersion:3,onSuccess:function(){return e(n)},onFailure:t})})];case 1:return e.sent(),[2,n]}})})},Nv.prototype.connect=function(n,r){return void 0===r&&(r={}),Cv(this,void 0,void 0,function(){var t=this;return _v(this,function(e){switch(e.label){case 0:return[4,this.clientsQueue.get(n,function(e){return t.newClient(Av(Av({},r),{clientId:e}))})];case 1:return[2,e.sent()]}})})},Nv.prototype.disconnect=function(n){return Cv(this,void 0,void 0,function(){var t;return _v(this,function(e){switch(e.label){case 0:return[4,this.clientsQueue.get(n,function(){return null})];case 1:return(t=e.sent())&&t.isConnected()&&t.disconnect(),this.clientsQueue.remove(n),[2]}})})},Nv.prototype.publish=function(i,s){return Cv(this,void 0,void 0,function(){var t,n,r,o;return _v(this,function(e){switch(e.label){case 0:return t=[].concat(i),n=JSON.stringify(s),[4,this.endpoint];case 1:return r=e.sent(),[4,this.connect(this.clientId,{url:r})];case 2:return o=e.sent(),Pv.debug("Publishing to topic(s)",t.join(","),n),t.forEach(function(e){return o.send(e,n)}),[2]}})})},Nv.prototype._onMessage=function(t,n){try{var r=[];this._topicObservers.forEach(function(e,a){!function(e){for(var t=a.split("/"),n=t.length,r=e.split("/"),o=0;o<n;++o){var i=t[o],s=r[o];if("#"===i)return r.length>=n;if("+"!==i&&i!==s)return}return n===r.length}(t)||r.push(e)});var o=JSON.parse(n);"object"==typeof o&&(o[xv]=t),r.forEach(function(e){e.forEach(function(e){return e.next(o)})})}catch(e){Pv.warn("Error handling message",e,n)}},Nv.prototype.subscribe=function(e,a){var n=this;void 0===a&&(a={});var u=[].concat(e);return Pv.debug("Subscribing to topic(s)",u.join(",")),new yv(function(o){var i;u.forEach(function(e){var t=n._topicObservers.get(e);t||(t=new Set,n._topicObservers.set(e,t)),t.add(o)});var e=a.clientId,s=void 0===e?n.clientId:e;return(e=(e=n._clientIdObservers.get(s))||new Set).add(o),n._clientIdObservers.set(s,e),Cv(n,void 0,void 0,function(){var t,n,r;return _v(this,function(e){switch(e.label){case 0:return void 0!==(t=a.url)?[3,2]:[4,this.endpoint];case 1:return n=e.sent(),[3,3];case 2:n=t,e.label=3;case 3:r=n,e.label=4;case 4:return e.trys.push([4,6,,7]),[4,this.connect(s,{url:r})];case 5:return i=e.sent(),u.forEach(function(e){i.subscribe(e)}),[3,7];case 6:return r=e.sent(),o.error(r),[3,7];case 7:return[2]}})}),function(){return Pv.debug("Unsubscribing from topic(s)",u.join(",")),i&&(n._clientIdObservers.get(s).delete(o),0===n._clientIdObservers.get(s).size&&(n.disconnect(s),n._clientIdObservers.delete(s)),u.forEach(function(e){var t=n._topicObservers.get(e)||new Set;t.delete(o),0===t.size&&(n._topicObservers.delete(e),i.isConnected()&&i.unsubscribe(e))})),null}})},Nv);function Nv(e){return void 0===e&&(e={}),(e=Tv.call(this,Av(Av({},e),{clientId:e.clientId||m.v4()}))||this)._clientsQueue=new Ov,e._topicObservers=new Map,e._clientIdObservers=new Map,e}function Mv(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,o)}i((u=u.apply(e,s||[])).next())})}function Rv(n,r){var o,i,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&t[0]?i.return:t[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,t[1])).done)return s;switch(i=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,i=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],i=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}}function Uv(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(r=i.next()).done;)s.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s}var Dv,Lv,Wg=(Dv=function(e,t){return(Dv=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}Dv(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),Fv=new E.ConsoleLogger("AWSAppSyncProvider"),jv=(Wg(Bv,Lv=N),Object.defineProperty(Bv.prototype,"endpoint",{get:function(){throw new Error("Not supported")},enumerable:!0,configurable:!0}),Bv.prototype.getProviderName=function(){return"AWSAppSyncProvider"},Bv.prototype.publish=function(e,t,n){return Mv(this,void 0,void 0,function(){return Rv(this,function(e){throw new Error("Operation not supported")})})},Bv.prototype._cleanUp=function(t){var n=this;Array.from(this._topicClient.entries()).filter(function(e){return Uv(e,2)[1].clientId===t}).map(function(e){return Uv(e,1)[0]}).forEach(function(e){return n._cleanUpForTopic(e)})},Bv.prototype._cleanUpForTopic=function(e){this._topicClient.delete(e),this._topicAlias.delete(e)},Bv.prototype.onDisconnect=function(e){var t=this,n=e.clientId,r=e.errorCode,o=function(e,t){var n={};for(o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,o=Object.getOwnPropertySymbols(e);r<o.length;r++)t.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(n[o[r]]=e[o[r]]);return n}(e,["clientId","errorCode"]);0!==r&&(Array.from(this._topicClient.entries()).filter(function(e){return Uv(e,2)[1].clientId===n}).map(function(e){return Uv(e,1)[0]}).forEach(function(e){t._topicObservers.has(e)&&(t._topicObservers.get(e).forEach(function(e){e.closed||e.error(o)}),t._topicObservers.delete(e))}),this._cleanUp(n))},Bv.prototype.disconnect=function(t){return Mv(this,void 0,void 0,function(){return Rv(this,function(e){switch(e.label){case 0:return[4,this.clientsQueue.get(t,function(){return null})];case 1:return e.sent(),[4,Lv.prototype.disconnect.call(this,t)];case 2:return e.sent(),this._cleanUp(t),[2]}})})},Bv.prototype.subscribe=function(e,i){var n=this;void 0===i&&(i={});var t=new yv(function(a){var r=[].concat(e);return Fv.debug("Subscribing to topic(s)",r.join(",")),Mv(n,void 0,void 0,function(){var o,t,n=this;return Rv(this,function(e){switch(e.label){case 0:return r.forEach(function(e){n._topicObservers.has(e)||n._topicObservers.set(e,new Set),n._topicObservers.get(e).add(a)}),t=i.mqttConnections,o=void 0===t?[]:t,t=i.newSubscriptions,t=Object.entries(t).map(function(e){var t=Uv(e,2),e=t[0];return[t[1].topic,e]}),this._topicAlias=new Map(function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(Uv(arguments[t]));return e}(Array.from(this._topicAlias.entries()),t)),t=Object.entries(r.reduce(function(e,t){var n,r=o.find(function(e){return-1<e.topics.indexOf(t)});return r&&(n=r.client,r=r.url,e[n]||(e[n]={url:r,topics:new Set}),e[n].topics.add(t)),e},{})),[4,Promise.all(t.map(function(e){var o=(e=Uv(e,2))[0],i=(e=e[1]).url,s=e.topics;return Mv(n,void 0,void 0,function(){var t,n,r=this;return Rv(this,function(e){switch(e.label){case 0:t=null,e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this.connect(o,{clientId:o,url:i})];case 2:return t=e.sent(),[3,4];case 3:return n=e.sent(),a.error({message:"Failed to connect",error:n}),a.complete(),[2,void 0];case 4:return s.forEach(function(e){t.isConnected()&&(t.subscribe(e),r._topicClient.set(e,t))}),[2,t]}})})}))];case 1:return e.sent(),[2]}})}),function(){Fv.debug("Unsubscribing from topic(s)",r.join(",")),r.forEach(function(e){var t=n._topicClient.get(e);t&&t.isConnected()&&(t.unsubscribe(e),n._topicClient.delete(e),Array.from(n._topicClient.values()).some(function(e){return e===t})||n.disconnect(t.clientId)),n._topicObservers.delete(e)})}});return yv.from(t).map(function(e){var t=n.getTopicForValue(e),r=n._topicAlias.get(t);return e.data=Object.entries(e.data).reduce(function(e,t){var t=(n=Uv(t,2))[0],n=n[1];return e[r||t]=n,e},{}),e})},Bv);function Bv(){var e=null!==Lv&&Lv.apply(this,arguments)||this;return e._topicClient=new Map,e._topicAlias=new Map,e}function Vv(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,o)}i((u=u.apply(e,s||[])).next())})}function zv(n,r){var o,i,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&t[0]?i.return:t[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,t[1])).done)return s;switch(i=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,i=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],i=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}}var qv,Kv,Hv,Gv,Wg=(qv=function(e,t){return(qv=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}qv(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),Wv=function(){return(Wv=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},$v=new E.Logger("AWSAppSyncRealTimeProvider"),Yv="undefined"!=typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("amplify_default"):"@@amplify_default",Jv=[400,401,403];(N=Kv=Kv||{}).GQL_CONNECTION_INIT="connection_init",N.GQL_CONNECTION_ERROR="connection_error",N.GQL_CONNECTION_ACK="connection_ack",N.GQL_START="start",N.GQL_START_ACK="start_ack",N.GQL_DATA="data",N.GQL_CONNECTION_KEEP_ALIVE="ka",N.GQL_STOP="stop",N.GQL_COMPLETE="complete",N.GQL_ERROR="error",(N=Hv=Hv||{})[N.PENDING=0]="PENDING",N[N.CONNECTED=1]="CONNECTED",N[N.FAILED=2]="FAILED",(N=Gv=Gv||{})[N.CLOSED=0]="CLOSED",N[N.READY=1]="READY",N[N.CONNECTING=2]="CONNECTING";var Zv,Qv={accept:"application/json, text/javascript","content-encoding":"amz-1.0","content-type":"application/json; charset=UTF-8"},Xv=(Wg(eb,Zv=wv),eb.prototype.getProviderName=function(){return"AWSAppSyncRealTimeProvider"},eb.prototype.newClient=function(){throw new Error("Not used here")},eb.prototype.publish=function(e,t,n){return Vv(this,void 0,void 0,function(){return zv(this,function(e){throw new Error("Operation not supported")})})},eb.prototype.subscribe=function(e,t){var r=this,o=t.appSyncGraphqlEndpoint;return new yv(function(e){if(o){var n=m.v4();return r._startSubscriptionWithAWSAppSyncRealTime({options:t,observer:e,subscriptionId:n}),function(){return Vv(r,void 0,void 0,function(){var t;return zv(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,3,4]),[4,this._waitForSubscriptionToBeConnected(n)];case 1:if(e.sent(),!(t=(this.subscriptionObserverMap.get(n)||{}).subscriptionState))return[2];if(t!==Hv.CONNECTED)throw new Error("Subscription never connected");return this._sendUnsubscriptionMessage(n),[3,4];case 2:return t=e.sent(),$v.debug("Error while unsubscribing "+t),[3,4];case 3:return this._removeSubscriptionObserver(n),[7];case 4:return[2]}})})}}e.error({errors:[Wv({},new Zg("Subscribe only available for AWS AppSync endpoint"))]}),e.complete()})},Object.defineProperty(eb.prototype,"isSSLEnabled",{get:function(){return!this.options.aws_appsync_dangerously_connect_to_http_endpoint_for_testing},enumerable:!0,configurable:!0}),eb.prototype._startSubscriptionWithAWSAppSyncRealTime=function(e){var y=e.options,v=e.observer,b=e.subscriptionId;return Vv(this,void 0,void 0,function(){var t,n,r,o,i,s,a,u,c,l,p,d,f,h,m,g=this;return zv(this,function(e){switch(e.label){case 0:return t=y.appSyncGraphqlEndpoint,n=y.authenticationType,r=y.query,o=y.variables,i=y.apiKey,s=y.region,p=y.graphql_headers,a=void 0===p?function(){return{}}:p,l=y.additionalHeaders,u=void 0===l?{}:l,c=Hv.PENDING,p={query:r,variables:o},this.subscriptionObserverMap.set(b,{observer:v,query:r,variables:o,subscriptionState:c,startAckTimeoutId:null}),l=JSON.stringify(p),p=[{}],[4,this._awsRealTimeHeaderBasedAuth({apiKey:i,appSyncGraphqlEndpoint:t,authenticationType:n,payload:l,canonicalUri:"",region:s})];case 1:return d=[Wv.apply(void 0,p.concat([e.sent()]))],[4,a()];case 2:m=Wv.apply(void 0,[Wv.apply(void 0,[Wv.apply(void 0,d.concat([e.sent()])),u]),((m={})[E.USER_AGENT_HEADER]=E.Constants.userAgent,m)]),m={id:b,payload:{data:l,extensions:{authorization:Wv({},m)}},type:Kv.GQL_START},m=JSON.stringify(m),e.label=3;case 3:return e.trys.push([3,5,,6]),[4,this._initializeWebSocketConnection({apiKey:i,appSyncGraphqlEndpoint:t,authenticationType:n,region:s})];case 4:return e.sent(),[3,6];case 5:return h=e.sent(),$v.debug({err:h}),f=h.message,h=void 0===f?"":f,v.error({errors:[Wv({},new Zg("Connection failed: "+h))]}),v.complete(),"function"==typeof(f=(this.subscriptionObserverMap.get(b)||{}).subscriptionFailedCallback)&&f(),[2];case 6:return h=this.subscriptionObserverMap.get(b),f=h.subscriptionFailedCallback,h=h.subscriptionReadyCallback,this.subscriptionObserverMap.set(b,{observer:v,subscriptionState:c,variables:o,query:r,subscriptionReadyCallback:h,subscriptionFailedCallback:f,startAckTimeoutId:setTimeout(function(){g._timeoutStartSubscriptionAck.call(g,b)},15e3)}),this.awsRealTimeSocket&&this.awsRealTimeSocket.send(m),[2]}})})},eb.prototype._waitForSubscriptionToBeConnected=function(a){return Vv(this,void 0,void 0,function(){var s=this;return zv(this,function(e){return this.subscriptionObserverMap.get(a).subscriptionState===Hv.PENDING?[2,new Promise(function(e,t){var n=(i=s.subscriptionObserverMap.get(a)).observer,r=i.subscriptionState,o=i.variables,i=i.query;s.subscriptionObserverMap.set(a,{observer:n,subscriptionState:r,variables:o,query:i,subscriptionReadyCallback:e,subscriptionFailedCallback:t})})]:[2]})})},eb.prototype._sendUnsubscriptionMessage=function(e){try{var t;this.awsRealTimeSocket&&this.awsRealTimeSocket.readyState===WebSocket.OPEN&&this.socketStatus===Gv.READY&&(t={id:e,type:Kv.GQL_STOP},t=JSON.stringify(t),this.awsRealTimeSocket.send(t))}catch(e){$v.debug({err:e})}},eb.prototype._removeSubscriptionObserver=function(e){this.subscriptionObserverMap.delete(e),setTimeout(this._closeSocketIfRequired.bind(this),1e3)},eb.prototype._closeSocketIfRequired=function(){var e;0<this.subscriptionObserverMap.size||(this.awsRealTimeSocket?0<this.awsRealTimeSocket.bufferedAmount?setTimeout(this._closeSocketIfRequired.bind(this),1e3):($v.debug("closing WebSocket..."),clearTimeout(this.keepAliveTimeoutId),(e=this.awsRealTimeSocket).onclose=void 0,e.onerror=void 0,e.close(1e3),this.awsRealTimeSocket=null,this.socketStatus=Gv.CLOSED):this.socketStatus=Gv.CLOSED)},eb.prototype._handleIncomingSubscriptionMessage=function(e){$v.debug("subscription message from AWS AppSync RealTime: "+e.data);var t=void 0===(i=(a=JSON.parse(e.data)).id)?"":i,n=a.payload,r=a.type,o=void 0===(s=(u=this.subscriptionObserverMap.get(t)||{}).observer)?null:s,i=void 0===(e=u.query)?"":e,s=void 0===(a=u.variables)?{}:a,e=u.startAckTimeoutId,a=u.subscriptionReadyCallback,u=u.subscriptionFailedCallback;if($v.debug({id:t,observer:o,query:i,variables:s}),r===Kv.GQL_DATA&&n&&n.data)o?o.next(n):$v.debug("observer not found for id: "+t);else if(r!==Kv.GQL_START_ACK){if(r===Kv.GQL_CONNECTION_KEEP_ALIVE)return clearTimeout(this.keepAliveTimeoutId),void(this.keepAliveTimeoutId=setTimeout(this._errorDisconnect.bind(this,sb.TIMEOUT_DISCONNECT),this.keepAliveTimeout));r===Kv.GQL_ERROR&&(c=Hv.FAILED,this.subscriptionObserverMap.set(t,{observer:o,query:i,variables:s,startAckTimeoutId:e,subscriptionReadyCallback:a,subscriptionFailedCallback:u,subscriptionState:c}),o.error({errors:[Wv({},new Zg("Connection failed: "+JSON.stringify(n)))]}),clearTimeout(e),o.complete(),"function"==typeof u&&u())}else{$v.debug("subscription ready for "+JSON.stringify({query:i,variables:s})),"function"==typeof a&&a(),clearTimeout(e),r=sb.SUBSCRIPTION_ACK,n={query:i,variables:s},e="Connection established for subscription",E.Hub.dispatch("api",{event:r,data:n,message:e},"PubSub",Yv);var c=Hv.CONNECTED;this.subscriptionObserverMap.set(t,{observer:o,query:i,variables:s,startAckTimeoutId:null,subscriptionState:c,subscriptionReadyCallback:a,subscriptionFailedCallback:u})}},eb.prototype._errorDisconnect=function(t){$v.debug("Disconnect error: "+t),this.subscriptionObserverMap.forEach(function(e){(e=e.observer)&&!e.closed&&e.error({errors:[Wv({},new Zg(t))]})}),this.subscriptionObserverMap.clear(),this.awsRealTimeSocket&&this.awsRealTimeSocket.close(),this.socketStatus=Gv.CLOSED},eb.prototype._timeoutStartSubscriptionAck=function(e){var t=(r=this.subscriptionObserverMap.get(e)||{}).observer,n=r.query,r=r.variables;t&&(this.subscriptionObserverMap.set(e,{observer:t,query:n,variables:r,subscriptionState:Hv.FAILED}),t&&!t.closed&&(t.error({errors:[Wv({},new Zg("Subscription timeout "+JSON.stringify({query:n,variables:r})))]}),t.complete()),$v.debug("timeoutStartSubscription",JSON.stringify({query:n,variables:r})))},eb.prototype._initializeWebSocketConnection=function(e){var t=this,u=e.appSyncGraphqlEndpoint,c=e.authenticationType,l=e.apiKey,p=e.region;if(this.socketStatus!==Gv.READY)return new Promise(function(s,a){return Vv(t,void 0,void 0,function(){var t,n,r,o,i;return zv(this,function(e){switch(e.label){case 0:if(this.promiseArray.push({res:s,rej:a}),this.socketStatus!==Gv.CLOSED)return[3,5];e.label=1;case 1:return e.trys.push([1,4,,5]),this.socketStatus=Gv.CONNECTING,n=this.isSSLEnabled?"wss://":"ws://",t=u.replace("https://",n).replace("http://",n).replace("appsync-api","appsync-realtime-api").replace("gogi-beta","grt-beta"),o="{}",n=(r=JSON).stringify,[4,this._awsRealTimeHeaderBasedAuth({authenticationType:c,payload:o,canonicalUri:"/connect",apiKey:l,appSyncGraphqlEndpoint:u,region:p})];case 2:return r=n.apply(r,[e.sent()]),r=d.Buffer.from(r).toString("base64"),o=d.Buffer.from(o).toString("base64"),o=t+"?header="+r+"&payload="+o,[4,this._initializeRetryableHandshake({awsRealTimeUrl:o})];case 3:return e.sent(),this.promiseArray.forEach(function(e){e=e.res,$v.debug("Notifying connection successful"),e()}),this.socketStatus=Gv.READY,this.promiseArray=[],[3,5];case 4:return i=e.sent(),this.promiseArray.forEach(function(e){return(0,e.rej)(i)}),this.promiseArray=[],this.awsRealTimeSocket&&this.awsRealTimeSocket.readyState===WebSocket.OPEN&&this.awsRealTimeSocket.close(3001),this.awsRealTimeSocket=null,this.socketStatus=Gv.CLOSED,[3,5];case 5:return[2]}})})})},eb.prototype._initializeRetryableHandshake=function(e){var t=e.awsRealTimeUrl;return Vv(this,void 0,void 0,function(){return zv(this,function(e){switch(e.label){case 0:return $v.debug("Initializaling retryable Handshake"),[4,E.jitteredExponentialRetry(this._initializeHandshake.bind(this),[{awsRealTimeUrl:t}],5e3)];case 1:return e.sent(),[2]}})})},eb.prototype._initializeHandshake=function(e){var o=e.awsRealTimeUrl;return Vv(this,void 0,void 0,function(){var t,n,r,s=this;return zv(this,function(e){switch(e.label){case 0:$v.debug("Initializing handshake "+o),e.label=1;case 1:return e.trys.push([1,4,,5]),[4,new Promise(function(e,t){var n=new WebSocket(o,"graphql-ws");n.onerror=function(){$v.debug("WebSocket connection error")},n.onclose=function(){t(new Error("Connection handshake error"))},n.onopen=function(){return s.awsRealTimeSocket=n,e()}})];case 2:return e.sent(),[4,new Promise(function(r,o){var i=!1;s.awsRealTimeSocket.onerror=function(e){$v.debug("WebSocket error "+JSON.stringify(e))},s.awsRealTimeSocket.onclose=function(e){$v.debug("WebSocket closed "+e.reason),o(new Error(JSON.stringify(e)))},s.awsRealTimeSocket.onmessage=function(e){$v.debug("subscription message from AWS AppSyncRealTime: "+e.data+" ");var t=JSON.parse(e.data),n=t.type,e=void 0===(e=(void 0===(e=t.payload)?{}:e).connectionTimeoutMs)?3e5:e;if(n===Kv.GQL_CONNECTION_ACK)return i=!0,s.keepAliveTimeout=e,s.awsRealTimeSocket.onmessage=s._handleIncomingSubscriptionMessage.bind(s),s.awsRealTimeSocket.onerror=function(e){$v.debug(e),s._errorDisconnect(sb.CONNECTION_CLOSED)},s.awsRealTimeSocket.onclose=function(e){$v.debug("WebSocket closed "+e.reason),s._errorDisconnect(sb.CONNECTION_CLOSED)},void r("Cool, connected to AWS AppSyncRealTime");n===Kv.GQL_CONNECTION_ERROR&&(n=void 0===(n=(t=void 0===(n=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(r=i.next()).done;)s.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s}(void 0===(t=(void 0===(n=t.payload)?{}:n).errors)?[]:t,1)[0])?{}:n).errorType)?"":n,t=t.errorCode,o({errorType:n,errorCode:void 0===t?0:t}))};var e={type:Kv.GQL_CONNECTION_INIT};s.awsRealTimeSocket.send(JSON.stringify(e)),setTimeout(function(){i||o(new Error("Connection timeout: ack from AWSRealTime was not received on 15000 ms"))}.bind(s),15e3)})];case 3:return e.sent(),[3,5];case 4:throw t=e.sent(),n=t.errorType,r=t.errorCode,Jv.includes(r)?new E.NonRetryableError(n):n?new Error(n):t;case 5:return[2]}})})},eb.prototype._awsRealTimeHeaderBasedAuth=function(e){var r=e.authenticationType,o=e.payload,i=e.canonicalUri,s=e.appSyncGraphqlEndpoint,a=e.apiKey,u=e.region;return Vv(this,void 0,void 0,function(){var t,n;return zv(this,function(e){switch(e.label){case 0:return n={API_KEY:this._awsRealTimeApiKeyHeader.bind(this),AWS_IAM:this._awsRealTimeIAMHeader.bind(this),OPENID_CONNECT:this._awsRealTimeOPENIDHeader.bind(this),AMAZON_COGNITO_USER_POOLS:this._awsRealTimeCUPHeader.bind(this)},"function"!=typeof(t=n[r])?($v.debug("Authentication type "+r+" not supported"),[2,""]):(n=S.parse(s).host,[4,t({payload:o,canonicalUri:i,appSyncGraphqlEndpoint:s,apiKey:a,region:u,host:n})]);case 1:return[2,e.sent()]}})})},eb.prototype._awsRealTimeCUPHeader=function(e){var t=e.host;return Vv(this,void 0,void 0,function(){return zv(this,function(e){switch(e.label){case 0:return[4,jf.currentSession()];case 1:return[2,{Authorization:e.sent().getAccessToken().getJwtToken(),host:t}]}})})},eb.prototype._awsRealTimeOPENIDHeader=function(e){var r=e.host;return Vv(this,void 0,void 0,function(){var t,n;return zv(this,function(e){switch(e.label){case 0:return[4,ll.getItem("federatedInfo")];case 1:return(n=e.sent())?(t=n.token,[3,4]):[3,2];case 2:return[4,jf.currentAuthenticatedUser()];case 3:(n=e.sent())&&(t=n.token),e.label=4;case 4:if(!t)throw new Error("No federated jwt");return[2,{Authorization:t,host:r}]}})})},eb.prototype._awsRealTimeApiKeyHeader=function(e){var n=e.apiKey,r=e.host;return Vv(this,void 0,void 0,function(){var t;return zv(this,function(e){return t=(t=new Date).toISOString().replace(/[:\-]|\.\d{3}/g,""),[2,{host:r,"x-amz-date":t,"x-api-key":n}]})})},eb.prototype._awsRealTimeIAMHeader=function(e){var o=e.payload,i=e.canonicalUri,s=e.appSyncGraphqlEndpoint,a=e.region;return Vv(this,void 0,void 0,function(){var t,n,r;return zv(this,function(e){switch(e.label){case 0:return t={region:a,service:"appsync"},[4,this._ensureCredentials()];case 1:if(!e.sent())throw new Error("No credentials");return[4,E.Credentials.get().then(function(e){return{secret_key:e.secretAccessKey,access_key:e.accessKeyId,session_token:e.sessionToken}})];case 2:return n=e.sent(),r={url:""+s+i,data:o,method:"POST",headers:Wv({},Qv)},[2,E.Signer.sign(r,n,t).headers]}})})},eb.prototype._ensureCredentials=function(){return E.Credentials.get().then(function(e){return!!e&&(e=E.Credentials.shear(e),$v.debug("set credentials for AWSAppSyncRealTimeProvider",e),!0)}).catch(function(e){return $v.warn("ensure credentials error",e),!1})},eb);function eb(){var e=null!==Zv&&Zv.apply(this,arguments)||this;return e.socketStatus=Gv.CLOSED,e.keepAliveTimeout=3e5,e.subscriptionObserverMap=new Map,e.promiseArray=[],e}function tb(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,o)}i((u=u.apply(e,s||[])).next())})}function nb(n,r){var o,i,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&t[0]?i.return:t[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,t[1])).done)return s;switch(i=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,i=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],i=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}}var rb=E.browserOrNode().isNode,ob=new E.ConsoleLogger("PubSub");function ib(e){this._options=e,ob.debug("PubSub Options",this._options),this._pluggables=[],this.subscribe=this.subscribe.bind(this)}var sb,ab=(Object.defineProperty(ib.prototype,"awsAppSyncProvider",{get:function(){return this._awsAppSyncProvider||(this._awsAppSyncProvider=new jv(this._options)),this._awsAppSyncProvider},enumerable:!0,configurable:!0}),Object.defineProperty(ib.prototype,"awsAppSyncRealTimeProvider",{get:function(){return this._awsAppSyncRealTimeProvider||(this._awsAppSyncRealTimeProvider=new Xv(this._options)),this._awsAppSyncRealTimeProvider},enumerable:!0,configurable:!0}),ib.prototype.getModuleName=function(){return"PubSub"},ib.prototype.configure=function(e){var t=this,e=e?e.PubSub||e:{};return ob.debug("configure PubSub",{opt:e}),this._options=Object.assign({},this._options,e),this._pluggables.map(function(e){return e.configure(t._options)}),this._options},ib.prototype.addPluggable=function(t){return tb(this,void 0,void 0,function(){return nb(this,function(e){return t&&"PubSub"===t.getCategory()?(this._pluggables.push(t),[2,t.configure(this._options)]):[2]})})},ib.prototype.getProviderByName=function(t){return t===E.INTERNAL_AWS_APPSYNC_PUBSUB_PROVIDER?this.awsAppSyncProvider:t===E.INTERNAL_AWS_APPSYNC_REALTIME_PUBSUB_PROVIDER?this.awsAppSyncRealTimeProvider:this._pluggables.find(function(e){return e.getProviderName()===t})},ib.prototype.getProviders=function(e){var t=(e=void 0===e?{}:e).provider;if(!t)return this._pluggables;if(!(e=this.getProviderByName(t)))throw new Error("Could not find provider named "+t);return[e]},ib.prototype.publish=function(t,n,r){return tb(this,void 0,void 0,function(){return nb(this,function(e){return[2,Promise.all(this.getProviders(r).map(function(e){return e.publish(t,n,r)}))]})})},ib.prototype.subscribe=function(t,r){if(rb&&this._options&&this._options.ssr)throw new Error("Subscriptions are not supported for Server-Side Rendering (SSR)");ob.debug("subscribe options",r);var o=this.getProviders(r);return new yv(function(n){var e=o.map(function(e){return{provider:e,observable:e.subscribe(t,r)}}).map(function(e){var t=e.provider;return e.observable.subscribe({start:console.error,next:function(e){return n.next({provider:t,value:e})},error:function(e){return n.error({provider:t,error:e})}})});return function(){return e.forEach(function(e){return e.unsubscribe()})}})},new ib(null));E.Amplify.register(ab),(N=sb=sb||{}).CONNECTION_CLOSED="Connection closed",N.TIMEOUT_DISCONNECT="Timeout disconnect",N.SUBSCRIPTION_ACK="Subscription ack";function ub(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,o)}i((u=u.apply(e,s||[])).next())})}function cb(n,r){var o,i,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&t[0]?i.return:t[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,t[1])).done)return s;switch(i=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,i=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],i=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}}function lb(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(r=i.next()).done;)s.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s}var pb=function(){return(pb=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},db=new E.ConsoleLogger("GraphQLAPI"),fb=(hb.prototype.getModuleName=function(){return"GraphQLAPI"},hb.prototype.configure=function(e){var e=void 0===(e=(t=e||{}).API)?{}:e,t=function(e,t){var n={};for(o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,o=Object.getOwnPropertySymbols(e);r<o.length;r++)t.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(n[o[r]]=e[o[r]]);return n}(t,["API"]),e=pb(pb({},t),e);return db.debug("configure GraphQL API",{opt:e}),void 0!==(e=e.aws_project_region?Object.assign({},e,{region:e.aws_project_region,header:{}}):e).graphql_headers&&"function"!=typeof e.graphql_headers&&(db.warn("graphql_headers should be a function"),e.graphql_headers=void 0),this._options=Object.assign({},this._options,e),this.createInstance(),this._options},hb.prototype.createInstance=function(){return db.debug("create Rest instance"),this._options?(this._api=new Vg(this._options),this._api.Credentials=this.Credentials,!0):Promise.reject("API not configured")},hb.prototype._headerBasedAuth=function(s){return ub(this,void 0,void 0,function(){var t,n,r,o,i;return cb(this,function(e){switch(e.label){case 0:switch(r=this._options,t=r.aws_appsync_authenticationType,n=r.aws_appsync_apiKey,r={},s||t||"AWS_IAM"){case"API_KEY":return[3,1];case"AWS_IAM":return[3,2];case"OPENID_CONNECT":return[3,4];case"AMAZON_COGNITO_USER_POOLS":return[3,9]}return[3,11];case 1:if(!n)throw new Error("No api-key configured");return r={Authorization:null,"X-Api-Key":n},[3,12];case 2:return[4,this._ensureCredentials()];case 3:if(!e.sent())throw new Error("No credentials");return[3,12];case 4:return i=void 0,[4,ll.getItem("federatedInfo")];case 5:return(o=e.sent())?(i=o.token,[3,8]):[3,6];case 6:return[4,jf.currentAuthenticatedUser()];case 7:(o=e.sent())&&(i=o.token),e.label=8;case 8:if(!i)throw new Error("No federated jwt");return r={Authorization:i},[3,12];case 9:return[4,this.Auth.currentSession()];case 10:return i=e.sent(),r={Authorization:i.getAccessToken().getJwtToken()},[3,12];case 11:return r={Authorization:null},[3,12];case 12:return[2,r]}})})},hb.prototype.getGraphqlOperationType=function(e){return e=Oy(e),lb(e.definitions,1)[0].operation},hb.prototype.graphql=function(e,t){var n=e.query,r=e.variables,o=void 0===r?{}:r,i=e.authMode,s=Oy("string"==typeof n?n:ty(n));switch(n=(void 0===(n=lb(s.definitions.filter(function(e){return"OperationDefinition"===e.kind}),1)[0])?{}:n).operation){case"query":case"mutation":var a=this._api.getCancellableToken(),u={cancellableToken:a},u=this._graphql({query:s,variables:o,authMode:i},t,u);return this._api.updateRequestToBeCancellable(u,a),u;case"subscription":return this._graphqlSubscribe({query:s,variables:o,authMode:i},t)}throw new Error("invalid operation type: "+n)},hb.prototype._graphql=function(e,g,y){var v=e.query,b=e.variables,w=e.authMode;return void 0===g&&(g={}),void 0===y&&(y={}),ub(this,void 0,void 0,function(){var t,n,r,o,i,s,a,u,c,l,p,d,f,h,m;return cb(this,function(e){switch(e.label){case 0:return this._api?[3,2]:[4,this.createInstance()];case 1:e.sent(),e.label=2;case 2:return a=this._options,t=a.aws_appsync_region,n=a.aws_appsync_graphqlEndpoint,s=a.graphql_headers,r=void 0===s?function(){return{}}:s,o=a.graphql_endpoint,i=a.graphql_endpoint_iam_region,s=[{}],(a=!o)?[4,this._headerBasedAuth(w)]:[3,4];case 3:a=e.sent(),e.label=4;case 4:return u=[pb.apply(void 0,s.concat([a]))],(c=o)?i?[4,this._headerBasedAuth(w)]:[3,6]:[3,8];case 5:return l=e.sent(),[3,7];case 6:l={Authorization:null},e.label=7;case 7:c=l,e.label=8;case 8:return p=[pb.apply(void 0,u.concat([c]))],[4,r({query:v,variables:b})];case 9:if(d=pb.apply(void 0,[pb.apply(void 0,[pb.apply(void 0,p.concat([e.sent()])),g]),!o&&((m={})["x-amz-user-agent"]=E.Constants.userAgent,m)]),m={query:ty(v),variables:b},d=Object.assign({headers:d,body:m,signerServiceInfo:{service:o?"execute-api":"appsync",region:o?i:t}},y),!(m=o||n))throw{data:{},errors:[new Zg("No graphql endpoint provided.")]};e.label=10;case 10:return e.trys.push([10,12,,13]),[4,this._api.post(m,d)];case 11:return f=e.sent(),[3,13];case 12:if(h=e.sent(),this._api.isCancel(h))throw h;return f={data:{},errors:[new Zg(h.message)]},[3,13];case 13:if((h=f.errors)&&h.length)throw f;return[2,f]}})})},hb.prototype.isCancel=function(e){return this._api.isCancel(e)},hb.prototype.cancel=function(e,t){return this._api.cancel(e,t)},hb.prototype._graphqlSubscribe=function(e,t){var n=e.query,r=e.variables,o=e.authMode;void 0===t&&(t={});var i=(u=this._options).aws_appsync_region,s=u.aws_appsync_graphqlEndpoint,a=u.aws_appsync_authenticationType,e=u.aws_appsync_apiKey,u=void 0===(u=u.graphql_headers)?function(){return{}}:u,a=o||a||"AWS_IAM";if(ab&&"function"==typeof ab.subscribe)return ab.subscribe("",{provider:E.INTERNAL_AWS_APPSYNC_REALTIME_PUBSUB_PROVIDER,appSyncGraphqlEndpoint:s,authenticationType:a,apiKey:e,query:ty(n),region:i,variables:r,graphql_headers:u,additionalHeaders:t});throw db.debug("No pubsub module applied for subscription"),new Error("No pubsub module applied for subscription")},hb.prototype._ensureCredentials=function(){var t=this;return this.Credentials.get().then(function(e){return!!e&&(e=t.Credentials.shear(e),db.debug("set credentials for api",e),!0)}).catch(function(e){return db.warn("ensure credentials error",e),!1})},hb);function hb(e){this._api=null,this.Auth=jf,this.Cache=ll,this.Credentials=E.Credentials,this._options=e,db.debug("API Options",this._options)}Wg=new fb(null),E.Amplify.register(Wg);var mb=function(){return(mb=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},gb=new E.ConsoleLogger("API");function yb(e){this.Auth=jf,this.Cache=ll,this.Credentials=E.Credentials,this._options=e,this._restApi=new Hg(e),this._graphqlApi=new fb(e),gb.debug("API Options",this._options)}var vb=(yb.prototype.getModuleName=function(){return"API"},yb.prototype.configure=function(e){this._options=Object.assign({},this._options,e),this._restApi.Credentials=this.Credentials,this._graphqlApi.Auth=this.Auth,this._graphqlApi.Cache=this.Cache,this._graphqlApi.Credentials=this.Credentials;var t=this._restApi.configure(this._options),e=this._graphqlApi.configure(this._options);return mb(mb({},t),e)},yb.prototype.get=function(e,t,n){return this._restApi.get(e,t,n)},yb.prototype.post=function(e,t,n){return this._restApi.post(e,t,n)},yb.prototype.put=function(e,t,n){return this._restApi.put(e,t,n)},yb.prototype.patch=function(e,t,n){return this._restApi.patch(e,t,n)},yb.prototype.del=function(e,t,n){return this._restApi.del(e,t,n)},yb.prototype.head=function(e,t,n){return this._restApi.head(e,t,n)},yb.prototype.isCancel=function(e){return this._restApi.isCancel(e)},yb.prototype.cancel=function(e,t){return this._restApi.cancel(e,t)},yb.prototype.endpoint=function(u){return e=this,c=function(){return n=this,r=function(e){return[2,this._restApi.endpoint(u)]},a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&t[0]?i.return:t[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,t[1])).done)return s;switch(i=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,i=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],i=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}var n,r,o,i,s,a,t},new(a=(a=s=void 0)||Promise)(function(n,t){function r(e){try{i(c.next(e))}catch(e){t(e)}}function o(e){try{i(c.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,o)}i((c=c.apply(e,s||[])).next())});var e,s,a,c},yb.prototype.getGraphqlOperationType=function(e){return this._graphqlApi.getGraphqlOperationType(e)},yb.prototype.graphql=function(e,t){return this._graphqlApi.graphql(e,t)},new yb(null));E.Amplify.register(vb);var bb=function(){return(bb=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},wb=new E.ConsoleLogger("AbstractInteractionsProvider"),wv=(Sb.prototype.configure=function(e){return void 0===e&&(e={}),this._config=bb(bb({},this._config),e),wb.debug("configure "+this.getProviderName(),this._config),this.options},Sb.prototype.getCategory=function(){return"Interactions"},Object.defineProperty(Sb.prototype,"options",{get:function(){return bb({},this._config)},enumerable:!0,configurable:!0}),Sb);function Sb(e){void 0===e&&(e={}),this._config=e}var Cb=function(e,t){return(Cb=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function _b(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}Cb(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var Eb=function(){return(Eb=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function Ib(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,o)}i((u=u.apply(e,s||[])).next())})}function Ab(n,r){var o,i,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&t[0]?i.return:t[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,t[1])).done)return s;switch(i=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,i=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],i=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}}function Pb(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(r=i.next()).done;)s.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s}var Ob,kb,Tb,xb,Nb,Mb,Rb,Ub,N="@aws-sdk/client-lex-runtime-service",Wg="1.0.0-rc.4",Db="runtime.lex.{region}.amazonaws.com",Lb=new Set(["ap-east-1","ap-northeast-1","ap-northeast-2","ap-south-1","ap-southeast-1","ap-southeast-2","ca-central-1","eu-central-1","eu-north-1","eu-west-1","eu-west-2","eu-west-3","me-south-1","sa-east-1","us-east-1","us-east-2","us-west-1","us-west-2"]),Fb=new Set(["cn-north-1","cn-northwest-1"]),jb=new Set(["us-iso-east-1"]),Bb=new Set(["us-isob-east-1"]),Vb=new Set(["us-gov-east-1","us-gov-west-1"]),zb=Eb(Eb({},{apiVersion:"2016-11-28",disableHostPrefix:!1,logger:{},regionInfoProvider:function(e,t){var n=void 0;switch(e){case"eu-west-1":n={hostname:"runtime.lex.eu-west-1.amazonaws.com",partition:"aws",signingService:"lex"};break;case"us-east-1":n={hostname:"runtime.lex.us-east-1.amazonaws.com",partition:"aws",signingService:"lex"};break;case"us-west-2":n={hostname:"runtime.lex.us-west-2.amazonaws.com",partition:"aws",signingService:"lex"};break;default:Lb.has(e)&&(n={hostname:Db.replace("{region}",e),partition:"aws",signingService:"lex"}),Fb.has(e)&&(n={hostname:"runtime.lex.{region}.amazonaws.com.cn".replace("{region}",e),partition:"aws-cn"}),jb.has(e)&&(n={hostname:"runtime.lex.{region}.c2s.ic.gov".replace("{region}",e),partition:"aws-iso"}),Bb.has(e)&&(n={hostname:"runtime.lex.{region}.sc2s.sgov.gov".replace("{region}",e),partition:"aws-iso-b"}),void 0===(n=Vb.has(e)?{hostname:"runtime.lex.{region}.amazonaws.com".replace("{region}",e),partition:"aws-us-gov"}:n)&&(n={hostname:Db.replace("{region}",e),partition:"aws",signingService:"lex"})}return Promise.resolve(n)},signingName:"lex"}),{runtime:"node",base64Decoder:Za,base64Encoder:Qa,bodyLengthChecker:Xa,credentialDefaultProvider:Ns,defaultUserAgent:eu(N,Wg),maxAttempts:b(pr),region:b(p,dt),requestHandler:new wt,sha256:y.bind(null,"sha256"),streamCollector:C,urlParser:Ja,utf8Decoder:Qe,utf8Encoder:gn}),qb=(_b(Kb,Ob=vt),Kb.prototype.destroy=function(){Ob.prototype.destroy.call(this)},Kb);function Kb(e){var t=this,e=Xs(e=Yu(Ai(e=Pi(e=Eb(Eb({},zb),e)))));return(t=Ob.call(this,e)||this).config=e,t.middlewareStack.use(Qu(t.config)),t.middlewareStack.use(Fs(t.config)),t.middlewareStack.use(ec(t.config)),t.middlewareStack.use(cu(t.config)),t.middlewareStack.use(pu(t.config)),t.middlewareStack.use(du(t.config)),t}function Hb(e){return(e||[]).map(function(e){return{attachmentLinkUrl:void 0!==e.attachmentLinkUrl&&null!==e.attachmentLinkUrl?e.attachmentLinkUrl:void 0,buttons:void 0!==e.buttons&&null!==e.buttons?(e.buttons||[]).map(function(e){return{text:void 0!==e.text&&null!==e.text?e.text:void 0,value:void 0!==e.value&&null!==e.value?e.value:void 0}}):void 0,imageUrl:void 0!==e.imageUrl&&null!==e.imageUrl?e.imageUrl:void 0,subTitle:void 0!==e.subTitle&&null!==e.subTitle?e.subTitle:void 0,title:void 0!==e.title&&null!==e.title?e.title:void 0}})}(ES=ES||{}).filterSensitiveLog=function(e){return Eb({},e)},(IS=IS||{}).filterSensitiveLog=function(e){return Eb({},e)},(xS=xS||{}).filterSensitiveLog=function(e){return Eb({},e)},(bw=bw||{}).filterSensitiveLog=function(e){return Eb({},e)},(Tw||{}).filterSensitiveLog=function(e){return Eb({},e)},(Rw=Rw||{}).filterSensitiveLog=function(e){return Eb({},e)},(Uw||{}).filterSensitiveLog=function(e){return Eb({},e)},(iS=iS||{}).filterSensitiveLog=function(e){return Eb({},e)},(gn={}).FAILED="Failed",gn.FULFILLED="Fulfilled",gn.READY_FOR_FULFILLMENT="ReadyForFulfillment",(vt={}).COMPOSITE="Composite",vt.CUSTOM_PAYLOAD="CustomPayload",vt.PLAIN_TEXT="PlainText",vt.SSML="SSML",(ES={}).CLOSE="Close",ES.CONFIRM_INTENT="ConfirmIntent",ES.DELEGATE="Delegate",ES.ELICIT_INTENT="ElicitIntent",ES.ELICIT_SLOT="ElicitSlot",(kb=kb||{}).filterSensitiveLog=function(e){return Eb(Eb(Eb({},e),e.slots&&{slots:gc}),e.message&&{message:gc})},(IS={}).CONFIRMED="Confirmed",IS.DENIED="Denied",IS.NONE="None",(Tb=Tb||{}).filterSensitiveLog=function(e){return Eb(Eb({},e),e.slots&&{slots:gc})},(AS=AS||{}).filterSensitiveLog=function(e){return Eb(Eb(Eb(Eb({},e),e.dialogAction&&{dialogAction:kb.filterSensitiveLog(e.dialogAction)}),e.recentIntentSummaryView&&{recentIntentSummaryView:e.recentIntentSummaryView.map(function(e){return Tb.filterSensitiveLog(e)})}),e.sessionAttributes&&{sessionAttributes:gc})},(PS=PS||{}).filterSensitiveLog=function(e){return Eb({},e)},(OS=OS||{}).filterSensitiveLog=function(e){return Eb({},e)},(kS=kS||{}).filterSensitiveLog=function(e){return Eb({},e)},(TS=TS||{}).filterSensitiveLog=function(e){return Eb({},e)},(xb=xb||{}).filterSensitiveLog=function(e){return Eb(Eb(Eb({},e),e.requestAttributes&&{requestAttributes:gc}),e.sessionAttributes&&{sessionAttributes:gc})},(xS={}).CONFIRM_INTENT="ConfirmIntent",xS.ELICIT_INTENT="ElicitIntent",xS.ELICIT_SLOT="ElicitSlot",xS.FAILED="Failed",xS.FULFILLED="Fulfilled",xS.READY_FOR_FULFILLMENT="ReadyForFulfillment",(Nb=Nb||{}).filterSensitiveLog=function(e){return Eb(Eb({},e),e.message&&{message:gc})},(NS=NS||{}).filterSensitiveLog=function(e){return Eb({},e)},(MS=MS||{}).filterSensitiveLog=function(e){return Eb({},e)},(Mb=Mb||{}).filterSensitiveLog=function(e){return Eb(Eb(Eb(Eb({},e),e.requestAttributes&&{requestAttributes:gc}),e.inputText&&{inputText:gc}),e.sessionAttributes&&{sessionAttributes:gc})},(RS=RS||{}).filterSensitiveLog=function(e){return Eb({},e)},(Rb=Rb||{}).filterSensitiveLog=function(e){return Eb(Eb({},e),e.slots&&{slots:gc})},(US=US||{}).filterSensitiveLog=function(e){return Eb({},e)},(DS=DS||{}).filterSensitiveLog=function(e){return Eb({},e)},(LS=LS||{}).filterSensitiveLog=function(e){return Eb({},e)},(FS=FS||{}).filterSensitiveLog=function(e){return Eb({},e)},(Ub=Ub||{}).filterSensitiveLog=function(e){return Eb(Eb(Eb(Eb(Eb({},e),e.alternativeIntents&&{alternativeIntents:e.alternativeIntents.map(function(e){return Rb.filterSensitiveLog(e)})}),e.message&&{message:gc}),e.sessionAttributes&&{sessionAttributes:gc}),e.slots&&{slots:gc})},(oC=oC||{}).filterSensitiveLog=function(e){return Eb(Eb(Eb(Eb({},e),e.dialogAction&&{dialogAction:kb.filterSensitiveLog(e.dialogAction)}),e.recentIntentSummaryView&&{recentIntentSummaryView:e.recentIntentSummaryView.map(function(e){return Tb.filterSensitiveLog(e)})}),e.sessionAttributes&&{sessionAttributes:gc})},(jS=jS||{}).filterSensitiveLog=function(e){return Eb(Eb({},e),e.message&&{message:gc})};function Gb(e,t){return Object.entries(e).reduce(function(e,t){var t=(n=Pb(t,2))[0],n=n[1];return Eb(Eb({},e),((e={})[t]=n,e))},{})}function Wb(e,t){return{score:void 0!==e.score&&null!==e.score?e.score:void 0}}function $b(e){return!(void 0===e||""===e||Object.getOwnPropertyNames(e).includes("length")&&0==e.length||Object.getOwnPropertyNames(e).includes("size")&&0==e.size)}var Yb,Jb=function(r,e){return Ib(void 0,void 0,void 0,function(){var t,n;return Ab(this,function(e){return t={name:"BadGatewayException",$fault:"server",$metadata:cw(r),Message:void 0},void 0!==(n=r.body).Message&&null!==n.Message&&(t.Message=n.Message),[2,t]})})},Zb=function(r,e){return Ib(void 0,void 0,void 0,function(){var t,n;return Ab(this,function(e){return t={name:"BadRequestException",$fault:"client",$metadata:cw(r),message:void 0},void 0!==(n=r.body).message&&null!==n.message&&(t.message=n.message),[2,t]})})},Qb=function(r,e){return Ib(void 0,void 0,void 0,function(){var t,n;return Ab(this,function(e){return t={name:"ConflictException",$fault:"client",$metadata:cw(r),message:void 0},void 0!==(n=r.body).message&&null!==n.message&&(t.message=n.message),[2,t]})})},Xb=function(r,e){return Ib(void 0,void 0,void 0,function(){var t,n;return Ab(this,function(e){return t={name:"DependencyFailedException",$fault:"client",$metadata:cw(r),Message:void 0},void 0!==(n=r.body).Message&&null!==n.Message&&(t.Message=n.Message),[2,t]})})},ew=function(r,e){return Ib(void 0,void 0,void 0,function(){var t,n;return Ab(this,function(e){return t={name:"InternalFailureException",$fault:"server",$metadata:cw(r),message:void 0},void 0!==(n=r.body).message&&null!==n.message&&(t.message=n.message),[2,t]})})},tw=function(r,e){return Ib(void 0,void 0,void 0,function(){var t,n;return Ab(this,function(e){return t={name:"LimitExceededException",$fault:"client",$metadata:cw(r),message:void 0,retryAfterSeconds:void 0},void 0!==r.headers["retry-after"]&&(t.retryAfterSeconds=r.headers["retry-after"]),void 0!==(n=r.body).message&&null!==n.message&&(t.message=n.message),[2,t]})})},nw=function(r,e){return Ib(void 0,void 0,void 0,function(){var t,n;return Ab(this,function(e){return t={name:"LoopDetectedException",$fault:"server",$metadata:cw(r),Message:void 0},void 0!==(n=r.body).Message&&null!==n.Message&&(t.Message=n.Message),[2,t]})})},rw=function(r,e){return Ib(void 0,void 0,void 0,function(){var t,n;return Ab(this,function(e){return t={name:"NotAcceptableException",$fault:"client",$metadata:cw(r),message:void 0},void 0!==(n=r.body).message&&null!==n.message&&(t.message=n.message),[2,t]})})},ow=function(r,e){return Ib(void 0,void 0,void 0,function(){var t,n;return Ab(this,function(e){return t={name:"NotFoundException",$fault:"client",$metadata:cw(r),message:void 0},void 0!==(n=r.body).message&&null!==n.message&&(t.message=n.message),[2,t]})})},iw=function(r,e){return Ib(void 0,void 0,void 0,function(){var t,n;return Ab(this,function(e){return t={name:"RequestTimeoutException",$fault:"client",$metadata:cw(r),message:void 0},void 0!==(n=r.body).message&&null!==n.message&&(t.message=n.message),[2,t]})})},sw=function(r,e){return Ib(void 0,void 0,void 0,function(){var t,n;return Ab(this,function(e){return t={name:"UnsupportedMediaTypeException",$fault:"client",$metadata:cw(r),message:void 0},void 0!==(n=r.body).message&&null!==n.message&&(t.message=n.message),[2,t]})})},aw=function(e,t){return{intentName:void 0!==e.intentName&&null!==e.intentName?e.intentName:void 0,nluIntentConfidence:void 0!==e.nluIntentConfidence&&null!==e.nluIntentConfidence?Wb(e.nluIntentConfidence):void 0,slots:void 0!==e.slots&&null!==e.slots?uw(e.slots):void 0}},uw=function(e,t){return Object.entries(e).reduce(function(e,t){var t=(n=Pb(t,2))[0],n=n[1];return Eb(Eb({},e),((e={})[t]=n,e))},{})},cw=function(e){return{httpStatusCode:e.statusCode,httpHeaders:e.headers,requestId:e.headers["x-amzn-requestid"]}},lw=function(e,t){return o=r=t,((n=void 0===(n=e)?new Uint8Array:n)instanceof Uint8Array?Promise.resolve(n):o.streamCollector(n)||Promise.resolve(new Uint8Array)).then(function(e){return r.utf8Encoder(e)}).then(function(e){return e.length?JSON.parse(e):{}});var n,r,o},pw=function(e,t){function n(e){return 0<=(e=0<=e.indexOf(":")?e.split(":")[0]:e).indexOf("#")?e.split("#")[1]:e}var r,o=(r=e.headers,Object.keys(r).find(function(e){return e.toLowerCase()==="x-amzn-errortype".toLowerCase()}));return void 0!==o?n(e.headers[o]):void 0!==t.code?n(t.code):void 0!==t.__type?n(t.__type):""},dw=(_b(fw,Yb=hn),fw.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Hc(t,this.serialize,this.deserialize));var r=e.concat(this.middlewareStack),o=t.logger,i="LexRuntimeServiceClient",s="PostContentCommand",e={logger:o,clientName:i,commandName:s,inputFilterSensitiveLog:xb.filterSensitiveLog,outputFilterSensitiveLog:Nb.filterSensitiveLog};"function"==typeof o.info&&o.info({clientName:i,commandName:s});var a=t.requestHandler;return r.resolve(function(e){return a.handle(e.request,n||{})},e)},fw.prototype.serialize=function(e,t){return a=e,u=t,Ib(void 0,void 0,void 0,function(){var t,n,r,o,i,s;return Ab(this,function(e){switch(e.label){case 0:if(t=Eb(Eb(Eb(Eb({"Content-Type":"application/octet-stream","x-amz-content-sha256":"UNSIGNED-PAYLOAD"},$b(a.requestAttributes)&&{"x-amz-lex-request-attributes":lc.fromObject(a.requestAttributes)}),$b(a.sessionAttributes)&&{"x-amz-lex-session-attributes":lc.fromObject(a.sessionAttributes)}),$b(a.contentType)&&{"Content-Type":a.contentType}),$b(a.accept)&&{Accept:a.accept}),n="/bot/{botName}/alias/{botAlias}/user/{userId}/content",void 0===a.botAlias)throw new Error("No value provided for input HTTP label: botAlias.");if((i=a.botAlias).length<=0)throw new Error("Empty value provided for input HTTP label: botAlias.");if(n=n.replace("{botAlias}",sc(i)),void 0===a.botName)throw new Error("No value provided for input HTTP label: botName.");if((i=a.botName).length<=0)throw new Error("Empty value provided for input HTTP label: botName.");if(n=n.replace("{botName}",sc(i)),void 0===a.userId)throw new Error("No value provided for input HTTP label: userId.");if((i=a.userId).length<=0)throw new Error("Empty value provided for input HTTP label: userId.");return n=n.replace("{userId}",sc(i)),void 0!==a.inputStream&&(r=a.inputStream),[4,u.endpoint()];case 1:return s=e.sent(),o=s.hostname,i=void 0===(i=s.protocol)?"https":i,s=s.port,[2,new zs({protocol:i,hostname:o,port:s,method:"POST",headers:t,path:n,body:r})]}})});var a,u},fw.prototype.deserialize=function(e,t){return r=e,o=t,Ib(void 0,void 0,void 0,function(){var t,n;return Ab(this,function(e){return 200!==r.statusCode&&300<=r.statusCode?[2,(y=r,v=o,Ib(void 0,void 0,void 0,function(){var t,n,r,o,i,s,a,u,c,l,p,d,f,h,m,g;return Ab(this,function(e){switch(e.label){case 0:return t=[Eb({},y)],g={},[4,lw(y.body,v)];case 1:switch(h=Eb.apply(void 0,t.concat([(g.body=e.sent(),g)])),m="UnknownError",m=pw(y,h.body)){case"BadGatewayException":case"com.amazonaws.lexruntimeservice#BadGatewayException":return[3,2];case"BadRequestException":case"com.amazonaws.lexruntimeservice#BadRequestException":return[3,4];case"ConflictException":case"com.amazonaws.lexruntimeservice#ConflictException":return[3,6];case"DependencyFailedException":case"com.amazonaws.lexruntimeservice#DependencyFailedException":return[3,8];case"InternalFailureException":case"com.amazonaws.lexruntimeservice#InternalFailureException":return[3,10];case"LimitExceededException":case"com.amazonaws.lexruntimeservice#LimitExceededException":return[3,12];case"LoopDetectedException":case"com.amazonaws.lexruntimeservice#LoopDetectedException":return[3,14];case"NotAcceptableException":case"com.amazonaws.lexruntimeservice#NotAcceptableException":return[3,16];case"NotFoundException":case"com.amazonaws.lexruntimeservice#NotFoundException":return[3,18];case"RequestTimeoutException":case"com.amazonaws.lexruntimeservice#RequestTimeoutException":return[3,20];case"UnsupportedMediaTypeException":case"com.amazonaws.lexruntimeservice#UnsupportedMediaTypeException":return[3,22]}return[3,24];case 2:return r=[{}],[4,Jb(h)];case 3:return n=Eb.apply(void 0,[Eb.apply(void 0,r.concat([e.sent()])),{name:m,$metadata:cw(y)}]),[3,25];case 4:return o=[{}],[4,Zb(h)];case 5:return n=Eb.apply(void 0,[Eb.apply(void 0,o.concat([e.sent()])),{name:m,$metadata:cw(y)}]),[3,25];case 6:return i=[{}],[4,Qb(h)];case 7:return n=Eb.apply(void 0,[Eb.apply(void 0,i.concat([e.sent()])),{name:m,$metadata:cw(y)}]),[3,25];case 8:return s=[{}],[4,Xb(h)];case 9:return n=Eb.apply(void 0,[Eb.apply(void 0,s.concat([e.sent()])),{name:m,$metadata:cw(y)}]),[3,25];case 10:return a=[{}],[4,ew(h)];case 11:return n=Eb.apply(void 0,[Eb.apply(void 0,a.concat([e.sent()])),{name:m,$metadata:cw(y)}]),[3,25];case 12:return u=[{}],[4,tw(h)];case 13:return n=Eb.apply(void 0,[Eb.apply(void 0,u.concat([e.sent()])),{name:m,$metadata:cw(y)}]),[3,25];case 14:return c=[{}],[4,nw(h)];case 15:return n=Eb.apply(void 0,[Eb.apply(void 0,c.concat([e.sent()])),{name:m,$metadata:cw(y)}]),[3,25];case 16:return l=[{}],[4,rw(h)];case 17:return n=Eb.apply(void 0,[Eb.apply(void 0,l.concat([e.sent()])),{name:m,$metadata:cw(y)}]),[3,25];case 18:return p=[{}],[4,ow(h)];case 19:return n=Eb.apply(void 0,[Eb.apply(void 0,p.concat([e.sent()])),{name:m,$metadata:cw(y)}]),[3,25];case 20:return d=[{}],[4,iw(h)];case 21:return n=Eb.apply(void 0,[Eb.apply(void 0,d.concat([e.sent()])),{name:m,$metadata:cw(y)}]),[3,25];case 22:return f=[{}],[4,sw(h)];case 23:return n=Eb.apply(void 0,[Eb.apply(void 0,f.concat([e.sent()])),{name:m,$metadata:cw(y)}]),[3,25];case 24:h=h.body,m=h.code||h.Code||m,n=Eb(Eb({},h),{name:""+m,message:h.message||h.Message||m,$fault:"client",$metadata:cw(y)}),e.label=25;case 25:return m=n.message||n.Message||m,n.message=m,delete n.Message,[2,Promise.reject(Object.assign(new Error(m),n))]}})}))]:(t={$metadata:cw(r),alternativeIntents:void 0,audioStream:void 0,botVersion:void 0,contentType:void 0,dialogState:void 0,inputTranscript:void 0,intentName:void 0,message:void 0,messageFormat:void 0,nluIntentConfidence:void 0,sentimentResponse:void 0,sessionAttributes:void 0,sessionId:void 0,slotToElicit:void 0,slots:void 0},void 0!==r.headers["x-amz-lex-alternative-intents"]&&(t.alternativeIntents=new lc(r.headers["x-amz-lex-alternative-intents"])),void 0!==r.headers["x-amz-lex-message-format"]&&(t.messageFormat=r.headers["x-amz-lex-message-format"]),void 0!==r.headers["content-type"]&&(t.contentType=r.headers["content-type"]),void 0!==r.headers["x-amz-lex-message"]&&(t.message=r.headers["x-amz-lex-message"]),void 0!==r.headers["x-amz-lex-bot-version"]&&(t.botVersion=r.headers["x-amz-lex-bot-version"]),void 0!==r.headers["x-amz-lex-sentiment"]&&(t.sentimentResponse=r.headers["x-amz-lex-sentiment"]),void 0!==r.headers["x-amz-lex-slots"]&&(t.slots=new lc(r.headers["x-amz-lex-slots"])),void 0!==r.headers["x-amz-lex-input-transcript"]&&(t.inputTranscript=r.headers["x-amz-lex-input-transcript"]),void 0!==r.headers["x-amz-lex-slot-to-elicit"]&&(t.slotToElicit=r.headers["x-amz-lex-slot-to-elicit"]),void 0!==r.headers["x-amz-lex-session-attributes"]&&(t.sessionAttributes=new lc(r.headers["x-amz-lex-session-attributes"])),void 0!==r.headers["x-amz-lex-session-id"]&&(t.sessionId=r.headers["x-amz-lex-session-id"]),void 0!==r.headers["x-amz-lex-dialog-state"]&&(t.dialogState=r.headers["x-amz-lex-dialog-state"]),void 0!==r.headers["x-amz-lex-intent-name"]&&(t.intentName=r.headers["x-amz-lex-intent-name"]),void 0!==r.headers["x-amz-lex-nlu-intent-confidence"]&&(t.nluIntentConfidence=new lc(r.headers["x-amz-lex-nlu-intent-confidence"])),n=r.body,t.audioStream=n,[2,Promise.resolve(t)]);var y,v})});var r,o},fw);function fw(e){var t=Yb.call(this)||this;return t.input=e,t}var hw,mw=(_b(gw,hw=hn),gw.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Hc(t,this.serialize,this.deserialize));var r=e.concat(this.middlewareStack),o=t.logger,i="LexRuntimeServiceClient",s="PostTextCommand",e={logger:o,clientName:i,commandName:s,inputFilterSensitiveLog:Mb.filterSensitiveLog,outputFilterSensitiveLog:Ub.filterSensitiveLog};"function"==typeof o.info&&o.info({clientName:i,commandName:s});var a=t.requestHandler;return r.resolve(function(e){return a.handle(e.request,n||{})},e)},gw.prototype.serialize=function(e,t){return a=e,u=t,Ib(void 0,void 0,void 0,function(){var t,n,r,o,i,s;return Ab(this,function(e){switch(e.label){case 0:if(t={"Content-Type":"application/json"},n="/bot/{botName}/alias/{botAlias}/user/{userId}/text",void 0===a.userId)throw new Error("No value provided for input HTTP label: userId.");if((i=a.userId).length<=0)throw new Error("Empty value provided for input HTTP label: userId.");if(n=n.replace("{userId}",sc(i)),void 0===a.botAlias)throw new Error("No value provided for input HTTP label: botAlias.");if((i=a.botAlias).length<=0)throw new Error("Empty value provided for input HTTP label: botAlias.");if(n=n.replace("{botAlias}",sc(i)),void 0===a.botName)throw new Error("No value provided for input HTTP label: botName.");if((i=a.botName).length<=0)throw new Error("Empty value provided for input HTTP label: botName.");return n=n.replace("{botName}",sc(i)),r=JSON.stringify(Eb(Eb(Eb({},void 0!==a.inputText&&{inputText:a.inputText}),void 0!==a.requestAttributes&&{requestAttributes:Gb(a.requestAttributes)}),void 0!==a.sessionAttributes&&{sessionAttributes:Gb(a.sessionAttributes)})),[4,u.endpoint()];case 1:return s=e.sent(),o=s.hostname,i=void 0===(i=s.protocol)?"https":i,s=s.port,[2,new zs({protocol:i,hostname:o,port:s,method:"POST",headers:t,path:n,body:r})]}})});var a,u},gw.prototype.deserialize=function(e,t){return i=e,s=t,Ib(void 0,void 0,void 0,function(){var r,o;return Ab(this,function(e){switch(e.label){case 0:return 200!==i.statusCode&&300<=i.statusCode?[2,(h=i,m=s,Ib(void 0,void 0,void 0,function(){var t,n,r,o,i,s,a,u,c,l,p,d,f;return Ab(this,function(e){switch(e.label){case 0:return t=[Eb({},h)],f={},[4,lw(h.body,m)];case 1:switch(p=Eb.apply(void 0,t.concat([(f.body=e.sent(),f)])),d="UnknownError",d=pw(h,p.body)){case"BadGatewayException":case"com.amazonaws.lexruntimeservice#BadGatewayException":return[3,2];case"BadRequestException":case"com.amazonaws.lexruntimeservice#BadRequestException":return[3,4];case"ConflictException":case"com.amazonaws.lexruntimeservice#ConflictException":return[3,6];case"DependencyFailedException":case"com.amazonaws.lexruntimeservice#DependencyFailedException":return[3,8];case"InternalFailureException":case"com.amazonaws.lexruntimeservice#InternalFailureException":return[3,10];case"LimitExceededException":case"com.amazonaws.lexruntimeservice#LimitExceededException":return[3,12];case"LoopDetectedException":case"com.amazonaws.lexruntimeservice#LoopDetectedException":return[3,14];case"NotFoundException":case"com.amazonaws.lexruntimeservice#NotFoundException":return[3,16]}return[3,18];case 2:return r=[{}],[4,Jb(p)];case 3:return n=Eb.apply(void 0,[Eb.apply(void 0,r.concat([e.sent()])),{name:d,$metadata:cw(h)}]),[3,19];case 4:return o=[{}],[4,Zb(p)];case 5:return n=Eb.apply(void 0,[Eb.apply(void 0,o.concat([e.sent()])),{name:d,$metadata:cw(h)}]),[3,19];case 6:return i=[{}],[4,Qb(p)];case 7:return n=Eb.apply(void 0,[Eb.apply(void 0,i.concat([e.sent()])),{name:d,$metadata:cw(h)}]),[3,19];case 8:return s=[{}],[4,Xb(p)];case 9:return n=Eb.apply(void 0,[Eb.apply(void 0,s.concat([e.sent()])),{name:d,$metadata:cw(h)}]),[3,19];case 10:return a=[{}],[4,ew(p)];case 11:return n=Eb.apply(void 0,[Eb.apply(void 0,a.concat([e.sent()])),{name:d,$metadata:cw(h)}]),[3,19];case 12:return u=[{}],[4,tw(p)];case 13:return n=Eb.apply(void 0,[Eb.apply(void 0,u.concat([e.sent()])),{name:d,$metadata:cw(h)}]),[3,19];case 14:return c=[{}],[4,nw(p)];case 15:return n=Eb.apply(void 0,[Eb.apply(void 0,c.concat([e.sent()])),{name:d,$metadata:cw(h)}]),[3,19];case 16:return l=[{}],[4,ow(p)];case 17:return n=Eb.apply(void 0,[Eb.apply(void 0,l.concat([e.sent()])),{name:d,$metadata:cw(h)}]),[3,19];case 18:p=p.body,d=p.code||p.Code||d,n=Eb(Eb({},p),{name:""+d,message:p.message||p.Message||d,$fault:"client",$metadata:cw(h)}),e.label=19;case 19:return d=n.message||n.Message||d,n.message=d,delete n.Message,[2,Promise.reject(Object.assign(new Error(d),n))]}})}))]:(r={$metadata:cw(i),alternativeIntents:void 0,botVersion:void 0,dialogState:void 0,intentName:void 0,message:void 0,messageFormat:void 0,nluIntentConfidence:void 0,responseCard:void 0,sentimentResponse:void 0,sessionAttributes:void 0,sessionId:void 0,slotToElicit:void 0,slots:void 0},[4,lw(i.body,s)]);case 1:return void 0!==(o=e.sent()).alternativeIntents&&null!==o.alternativeIntents&&(r.alternativeIntents=(o.alternativeIntents||[]).map(function(e){return aw(e)})),void 0!==o.botVersion&&null!==o.botVersion&&(r.botVersion=o.botVersion),void 0!==o.dialogState&&null!==o.dialogState&&(r.dialogState=o.dialogState),void 0!==o.intentName&&null!==o.intentName&&(r.intentName=o.intentName),void 0!==o.message&&null!==o.message&&(r.message=o.message),void 0!==o.messageFormat&&null!==o.messageFormat&&(r.messageFormat=o.messageFormat),void 0!==o.nluIntentConfidence&&null!==o.nluIntentConfidence&&(r.nluIntentConfidence=Wb(o.nluIntentConfidence)),void 0!==o.responseCard&&null!==o.responseCard&&(r.responseCard={contentType:void 0!==(n=o.responseCard).contentType&&null!==n.contentType?n.contentType:void 0,genericAttachments:void 0!==n.genericAttachments&&null!==n.genericAttachments?Hb(n.genericAttachments):void 0,version:void 0!==n.version&&null!==n.version?n.version:void 0}),void 0!==o.sentimentResponse&&null!==o.sentimentResponse&&(r.sentimentResponse={sentimentLabel:void 0!==(t=o.sentimentResponse).sentimentLabel&&null!==t.sentimentLabel?t.sentimentLabel:void 0,sentimentScore:void 0!==t.sentimentScore&&null!==t.sentimentScore?t.sentimentScore:void 0}),void 0!==o.sessionAttributes&&null!==o.sessionAttributes&&(r.sessionAttributes=uw(o.sessionAttributes)),void 0!==o.sessionId&&null!==o.sessionId&&(r.sessionId=o.sessionId),void 0!==o.slotToElicit&&null!==o.slotToElicit&&(r.slotToElicit=o.slotToElicit),void 0!==o.slots&&null!==o.slots&&(r.slots=uw(o.slots)),[2,Promise.resolve(r)]}var t,n,h,m})});var i,s},gw);function gw(e){var t=hw.call(this)||this;return t.input=e,t}var yw,vw,bw=(yw=function(e,t){return(yw=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}yw(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),ww=function(){return(ww=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},Sw=new E.ConsoleLogger("AWSLexProvider"),Cw=(bw(_w,vw=wv),_w.prototype.getProviderName=function(){return"AWSLexProvider"},_w.prototype.reportBotStatus=function(e,t){var n=this;Sw.debug("postContent state",e.dialogState),"ReadyForFulfillment"!==e.dialogState&&"Fulfilled"!==e.dialogState||("function"==typeof this._botsCompleteCallback[t]&&setTimeout(function(){return n._botsCompleteCallback[t](null,{slots:e.slots})},0),this._config&&"function"==typeof this._config[t].onComplete&&setTimeout(function(){return n._config[t].onComplete(null,{slots:e.slots})},0)),"Failed"===e.dialogState&&("function"==typeof this._botsCompleteCallback[t]&&setTimeout(function(){return n._botsCompleteCallback[t]("Bot conversation failed")},0),this._config&&"function"==typeof this._config[t].onComplete&&setTimeout(function(){return n._config[t].onComplete("Bot conversation failed")},0))},_w.prototype.sendMessage=function(h,m){return e=this,u=function(){var t,n,r,o,i,s,a,u,c,l,p,d,e;return a=this,u=function(e){switch(e.label){case 0:return this._config[h]?[4,E.Credentials.get()]:[2,Promise.reject("Bot "+h+" does not exist")];case 1:if(!(t=e.sent()))return[2,Promise.reject("No credentials")];if(this.lexRuntimeServiceClient=new qb({region:this._config[h].region,credentials:t,customUserAgent:E.getAmplifyUserAgent()}),"string"!=typeof m)return[3,6];o={botAlias:this._config[h].alias,botName:h,inputText:m,userId:t.identityId},Sw.debug("postText to lex",m),e.label=2;case 2:return e.trys.push([2,4,,5]),n=new mw(o),[4,this.lexRuntimeServiceClient.send(n)];case 3:return i=e.sent(),this.reportBotStatus(i,h),[2,i];case 4:return r=e.sent(),[2,Promise.reject(r)];case 5:return[3,11];case 6:n=m.content,r=m.options.messageType,o="voice"===r?{botAlias:this._config[h].alias,botName:h,contentType:"audio/x-l16; sample-rate=16000",inputStream:n,userId:t.identityId,accept:"audio/mpeg"}:{botAlias:this._config[h].alias,botName:h,contentType:"text/plain; charset=utf-8",inputStream:n,userId:t.identityId,accept:"audio/mpeg"},Sw.debug("postContent to lex",m),e.label=7;case 7:return e.trys.push([7,10,,11]),o=new dw(o),[4,this.lexRuntimeServiceClient.send(o)];case 8:return[4,function(e){if(e instanceof Blob||e instanceof ReadableStream)return new Response(e).arrayBuffer().then(function(e){return new Uint8Array(e)});throw new Error("Readable is not supported.")}((i=e.sent()).audioStream)];case 9:return s=e.sent(),this.reportBotStatus(i,h),[2,ww(ww({},i),{audioStream:s})];case 10:return s=e.sent(),[2,Promise.reject(s)];case 11:return[2]}},d={label:0,sent:function(){if(1&p[0])throw p[1];return p[1]},trys:[],ops:[]},e={next:f(0),throw:f(1),return:f(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function f(t){return function(e){return function(t){if(c)throw new TypeError("Generator is already executing.");for(;d;)try{if(c=1,l&&(p=2&t[0]?l.return:t[0]?l.throw||((p=l.return)&&p.call(l),0):l.next)&&!(p=p.call(l,t[1])).done)return p;switch(l=0,(t=p?[2&t[0],p.value]:t)[0]){case 0:case 1:p=t;break;case 4:return d.label++,{value:t[1],done:!1};case 5:d.label++,l=t[1],t=[0];continue;case 7:t=d.ops.pop(),d.trys.pop();continue;default:if(!(p=0<(p=d.trys).length&&p[p.length-1])&&(6===t[0]||2===t[0])){d=0;continue}if(3===t[0]&&(!p||t[1]>p[0]&&t[1]<p[3])){d.label=t[1];break}if(6===t[0]&&d.label<p[1]){d.label=p[1],p=t;break}if(p&&d.label<p[2]){d.label=p[2],d.ops.push(t);break}p[2]&&d.ops.pop(),d.trys.pop();continue}t=u.call(a,d)}catch(e){t=[6,e],l=0}finally{c=p=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},new(a=(a=s=void 0)||Promise)(function(n,t){function r(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,o)}i((u=u.apply(e,s||[])).next())});var e,s,a,u},_w.prototype.onComplete=function(e,t){if(!this._config[e])throw new ErrorEvent("Bot "+e+" does not exist");this._botsCompleteCallback[e]=t},_w);function _w(e){return void 0===e&&(e={}),(e=vw.call(this,e)||this)._botsCompleteCallback={},e}var Ew=function(){return(Ew=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},Iw=new E.ConsoleLogger("Interactions");function Aw(e){this._options=e,Iw.debug("Interactions Options",this._options),this._pluggables={}}var Pw=(Aw.prototype.getModuleName=function(){return"Interactions"},Aw.prototype.configure=function(e){var t=this,e=e?e.Interactions||e:{};Iw.debug("configure Interactions",{opt:e}),this._options=Ew(Ew({bots:{}},e),e.Interactions);var e=this._options.aws_bots_config,n=this._options.bots;return!Object.keys(n).length&&e&&Array.isArray(e)&&e.forEach(function(e){t._options.bots[e.name]=e}),!this._pluggables.AWSLexProvider&&n&&Object.keys(n).map(function(e){return n[e]}).find(function(e){return!e.providerName||"AWSLexProvider"===e.providerName})&&(this._pluggables.AWSLexProvider=new Cw),Object.keys(this._pluggables).map(function(e){t._pluggables[e].configure(t._options.bots)}),this._options},Aw.prototype.addPluggable=function(e){if(e&&"Interactions"===e.getCategory()){if(this._pluggables[e.getProviderName()])throw new Error("Bot "+e.getProviderName()+" already plugged");e.configure(this._options.bots),this._pluggables[e.getProviderName()]=e}},Aw.prototype.send=function(c,l){return e=this,u=function(){var t,n,r,o,i,s,a,e;return n=this,r=function(e){switch(e.label){case 0:if(!this._options.bots||!this._options.bots[c])throw new Error("Bot "+c+" does not exist");if(t=this._options.bots[c].providerName||"AWSLexProvider",!this._pluggables[t])throw new Error("Bot "+t+" does not have valid pluggin did you try addPluggable first?");return[4,this._pluggables[t].sendMessage(c,l)];case 1:return[2,e.sent()]}},a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function u(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&t[0]?i.return:t[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,t[1])).done)return s;switch(i=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,i=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],i=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},new(a=(a=s=void 0)||Promise)(function(n,t){function r(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,o)}i((u=u.apply(e,s||[])).next())});var e,s,a,u},Aw.prototype.onComplete=function(e,t){if(!this._options.bots||!this._options.bots[e])throw new Error("Bot "+e+" does not exist");var n=this._options.bots[e].providerName||"AWSLexProvider";if(!this._pluggables[n])throw new Error("Bot "+n+" does not have valid pluggin did you try addPluggable first?");this._pluggables[n].onComplete(e,t)},new Aw(null));E.Amplify.register(Pw);var Ow=function(){return(Ow=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},kw=new E.ConsoleLogger("AbstractXRProvider"),Tw=(xw.prototype.configure=function(e){return void 0===e&&(e={}),this._config=Ow(Ow({},e),this._config),kw.debug("configure "+this.getProviderName(),this._config),this.options},xw.prototype.getCategory=function(){return"XR"},Object.defineProperty(xw.prototype,"options",{get:function(){return Ow({},this._config)},enumerable:!0,configurable:!0}),xw);function xw(e){void 0===e&&(e={}),this._config=e}var Nw,Mw,Rw=(Nw=function(e,t){return(Nw=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}Nw(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),Uw=(Rw(Dw,Mw=Error),Dw);function Dw(){return null!==Mw&&Mw.apply(this,arguments)||this}var Lw,Fw=(Rw(jw,Lw=Uw),jw);function jw(){return null!==Lw&&Lw.apply(this,arguments)||this}var Bw,Vw=(Rw(zw,Bw=Uw),zw);function zw(){return null!==Bw&&Bw.apply(this,arguments)||this}var qw,Kw=(Rw(Hw,qw=Uw),Hw);function Hw(){return null!==qw&&qw.apply(this,arguments)||this}var Gw,Ww=(Rw($w,Gw=Uw),$w);function $w(){return null!==Gw&&Gw.apply(this,arguments)||this}var Yw,Jw=(Rw(Zw,Yw=Uw),Zw);function Zw(){return null!==Yw&&Yw.apply(this,arguments)||this}var Qw,Xw=(Rw(eS,Qw=Uw),eS);function eS(){return null!==Qw&&Qw.apply(this,arguments)||this}function tS(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,o)}i((u=u.apply(e,s||[])).next())})}function nS(n,r){var o,i,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&t[0]?i.return:t[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,t[1])).done)return s;switch(i=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,i=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],i=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}}var rS,oS,iS=(rS=function(e,t){return(rS=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}rS(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),sS=function(){return(sS=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},aS=new E.ConsoleLogger("SumerianProvider"),uS=(iS(cS,oS=Tw),cS.prototype.getProviderName=function(){return"SumerianProvider"},cS.prototype.loadScript=function(r){return tS(this,void 0,void 0,function(){return nS(this,function(e){return[2,new Promise(function(t,n){var e=document.createElement("script");e.src=r,e.addEventListener("load",function(e){t()}),e.addEventListener("error",function(e){n(new Error("Failed to load script: "+r))}),document.head.appendChild(e)})]})})},cS.prototype.loadScene=function(S,C,_){return tS(this,void 0,void 0,function(){var t,n,r,o,i,s,a,u,c,l,p,d,f,h,m,g,y,v,b,w;return nS(this,function(e){switch(e.label){case 0:if(!S)throw a="No scene name passed into loadScene",aS.error(a),new Jw(a);if(!C)throw a="No dom element id passed into loadScene",aS.error(a),new Ww(a);if(!(t=document.getElementById(C)))throw a="DOM element id, "+C+" not found",aS.error(a),new Ww(a);if(!(n=this.getScene(S)).sceneConfig)throw a="No scene config configured for scene: "+S,aS.error(a),new Jw(a);if(r=n.sceneConfig.url,o=n.sceneConfig.sceneId,n.sceneConfig.hasOwnProperty("region"))u=n.sceneConfig.region;else{if(!this.options.hasOwnProperty("region"))throw a="No region configured for scene: "+S,aS.error(a),new Jw(a);u=this.options.region}h={region:u,customUserAgent:E.Constants.userAgent+"-SumerianScene"},i={headers:{"X-Amz-User-Agent":E.Constants.userAgent}},s=r,e.label=1;case 1:return e.trys.push([1,3,,4]),[4,E.Credentials.get()];case 2:return a=e.sent(),a={secret_key:(h.credentials=a).secretAccessKey,access_key:a.accessKeyId,session_token:a.sessionToken},u={region:u,service:"sumerian"},u=E.Signer.sign({method:"GET",url:r},a,u),i.headers=sS(sS({},i.headers),u.headers),s=u.url,[3,4];case 3:return e.sent(),aS.debug("No credentials available, the request will be unsigned"),[3,4];case 4:return[4,fetch(s,i)];case 5:return[4,(c=e.sent()).json()];case 6:if(l=e.sent(),403===c.status)throw l.message?(aS.error("Failure to authenticate user: "+l.message),new Jw("Failure to authenticate user: "+l.message)):(aS.error("Failure to authenticate user"),new Jw("Failure to authenticate user"));return d=l.bundleData[o],[4,fetch(d.url,{headers:d.headers})];case 7:return[4,e.sent().json()];case 8:p=e.sent(),e.label=9;case 9:return e.trys.push([9,11,,12]),[4,this.loadScript(p[o].bootstrapperUrl)];case 10:return e.sent(),[3,12];case 11:throw f=e.sent(),aS.error(f),new Jw(f);case 12:return d=_.progressCallback||void 0,f=n.publishParamOverrides||void 0,h={element:t,sceneId:o,sceneBundle:p,apiResponse:l,progressCallback:d,publishParamOverrides:f,awsSDKConfigOverride:h},[4,window.SumerianBootstrapper.loadScene(h)];case 13:m=e.sent(),n.sceneController=m,n.isLoaded=!0;try{for(g=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return{value:(e=e&&r>=e.length?void 0:e)&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(m.sceneLoadWarnings),y=g.next();!y.done;y=g.next())v=y.value,aS.warn("loadScene warning: "+v)}catch(e){b={error:e}}finally{try{y&&!y.done&&(w=g.return)&&w.call(g)}finally{if(b)throw b.error}}return[2]}})})},cS.prototype.isSceneLoaded=function(e){return this.getScene(e).isLoaded||!1},cS.prototype.getScene=function(e){if(!this.options.scenes){var t="No scenes were defined in the configuration";throw aS.error(t),new Fw(t)}if(!e)throw t="No scene name was passed",aS.error(t),new Vw(t);if(this.options.scenes[e])return this.options.scenes[e];throw t="Scene '"+e+"' is not configured",aS.error(t),new Vw(t)},cS.prototype.getSceneController=function(e){if(!this.options.scenes){var t="No scenes were defined in the configuration";throw aS.error(t),new Fw(t)}var n=this.options.scenes[e];if(!n)throw t="Scene '"+e+"' is not configured",aS.error(t),new Vw(t);if(n=n.sceneController)return n;throw t="Scene controller for '"+e+"' has not been loaded",aS.error(t),new Kw(t)},cS.prototype.isVRCapable=function(e){return this.getSceneController(e).vrCapable},cS.prototype.isVRPresentationActive=function(e){return this.getSceneController(e).vrPresentationActive},cS.prototype.start=function(e){this.getSceneController(e).start()},cS.prototype.enterVR=function(e){this.getSceneController(e).enterVR()},cS.prototype.exitVR=function(e){this.getSceneController(e).exitVR()},cS.prototype.isMuted=function(e){return this.getSceneController(e).muted},cS.prototype.setMuted=function(e,t){this.getSceneController(e).muted=t},cS.prototype.onSceneEvent=function(e,t,n){this.getSceneController(e).on(t,n)},cS.prototype.enableAudio=function(e){this.getSceneController(e).enableAudio()},cS);function cS(e){return void 0===e&&(e={}),oS.call(this,e)||this}function lS(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,o)}i((u=u.apply(e,s||[])).next())})}function pS(n,r){var o,i,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&t[0]?i.return:t[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,t[1])).done)return s;switch(i=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,i=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],i=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}}var dS=new E.ConsoleLogger("XR");function fS(e){this._options=e,dS.debug("XR Options",this._options),this._defaultProvider="SumerianProvider",this._pluggables={},this.addPluggable(new uS)}var hS=(fS.prototype.configure=function(e){var n=this,r=e?e.XR||e:{};return dS.debug("configure XR",{opt:r}),this._options=Object.assign({},this._options,r),Object.entries(this._pluggables).map(function(e){var e=(t=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(r=i.next()).done;)s.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s}(e,2))[0],t=t[1];e!==n._defaultProvider||r[n._defaultProvider]?t.configure(n._options[e]):t.configure(n._options)}),this._options},fS.prototype.addPluggable=function(t){return lS(this,void 0,void 0,function(){return pS(this,function(e){return t&&"XR"===t.getCategory()?[2,(this._pluggables[t.getProviderName()]=t).configure(this._options)]:[2]})})},fS.prototype.loadScene=function(t,n,r,o){return void 0===r&&(r={}),void 0===o&&(o=this._defaultProvider),lS(this,void 0,void 0,function(){return pS(this,function(e){switch(e.label){case 0:if(!this._pluggables[o])throw new Xw("Provider '"+o+"' not configured");return[4,this._pluggables[o].loadScene(t,n,r)];case 1:return[2,e.sent()]}})})},fS.prototype.isSceneLoaded=function(e,t){if(void 0===t&&(t=this._defaultProvider),!this._pluggables[t])throw new Xw("Provider '"+t+"' not configured");return this._pluggables[t].isSceneLoaded(e)},fS.prototype.getSceneController=function(e,t){if(void 0===t&&(t=this._defaultProvider),!this._pluggables[t])throw new Xw("Provider '"+t+"' not configured");return this._pluggables[t].getSceneController(e)},fS.prototype.isVRCapable=function(e,t){if(void 0===t&&(t=this._defaultProvider),!this._pluggables[t])throw new Xw("Provider '"+t+"' not configured");return this._pluggables[t].isVRCapable(e)},fS.prototype.isVRPresentationActive=function(e,t){if(void 0===t&&(t=this._defaultProvider),!this._pluggables[t])throw new Xw("Provider '"+t+"' not configured");return this._pluggables[t].isVRPresentationActive(e)},fS.prototype.start=function(e,t){if(void 0===t&&(t=this._defaultProvider),!this._pluggables[t])throw new Xw("Provider '"+t+"' not configured");return this._pluggables[t].start(e)},fS.prototype.enterVR=function(e,t){if(void 0===t&&(t=this._defaultProvider),!this._pluggables[t])throw new Xw("Provider '"+t+"' not configured");return this._pluggables[t].enterVR(e)},fS.prototype.exitVR=function(e,t){if(void 0===t&&(t=this._defaultProvider),!this._pluggables[t])throw new Xw("Provider '"+t+"' not configured");return this._pluggables[t].exitVR(e)},fS.prototype.isMuted=function(e,t){if(void 0===t&&(t=this._defaultProvider),!this._pluggables[t])throw new Xw("Provider '"+t+"' not configured");return this._pluggables[t].isMuted(e)},fS.prototype.setMuted=function(e,t,n){if(void 0===n&&(n=this._defaultProvider),!this._pluggables[n])throw new Xw("Provider '"+n+"' not configured");return this._pluggables[n].setMuted(e,t)},fS.prototype.onSceneEvent=function(e,t,n,r){if(void 0===r&&(r=this._defaultProvider),!this._pluggables[r])throw new Xw("Provider '"+r+"' not configured");return this._pluggables[r].onSceneEvent(e,t,n)},fS.prototype.enableAudio=function(e,t){if(void 0===t&&(t=this._defaultProvider),!this._pluggables[t])throw new Xw("Provider '"+t+"' not configured");return this._pluggables[t].enableAudio(e)},new fS(null));E.Amplify.register(hS);var mS=(gS.prototype.auth=function(){return this._auth||jf},gS.prototype.analytics=function(){return this._analytics||vp},gS.prototype.storage=function(){return this._storage||Lg},gS.prototype.api=function(){return this._api||vb},gS.prototype.interactions=function(){return this._interactions||Pw},gS.prototype.cache=function(){return this._cache},gS.prototype.pubsub=function(){return this._pubsub||ab},gS.prototype.logger=function(e,t){return new this._logger(e,t)},gS.prototype.xr=function(){return this._xr||hS},gS.prototype.i18n=function(){return this._i18n},gS.prototype.authState=function(){return this._authState},gS.prototype.setAuthState=function(e){this._authState.next(e)},gS.decorators=[{type:f.Injectable}],gS.ctorParameters=function(){return[{type:void 0,decorators:[{type:f.Inject,args:["modules"]},{type:f.Optional}]}]},gS);function gS(e){var t,n,r,o,i,s,a,u,c,l,p,d,f,h,m,g,y;void 0===e&&(e={}),this.modules=e,this._authState=new ke,this.authStateChange$=this._authState.asObservable(),e=e||D,t=this._authState,n=e.Auth,y=t,n.currentAuthenticatedUser().then(function(e){bi.debug("has authenticated user",e),y.next({state:"signedIn",user:e})}).catch(function(e){bi.debug("no authenticated user",e),y.next({state:"signedOut",user:null})}),r=t,o=E.Amplify.configure(null),v.has(o,"Auth.oauth")&&E.Hub.listen("auth",{onHubCapsule:function(e){var t=e.channel,e=e.payload;"auth"===t&&(t=e.data.username,bi.debug("authentication oauth event",e),r.next({state:e.event,user:{username:t}}))}},"angularAuthListener"),i=t,a=(s=n).signIn,s.signIn=function(e,t){return a.call(s,e,t).then(function(e){return bi.debug("signIn success"),e.challengeName?(bi.debug("signIn challenge: "+e.challengeName),"NEW_PASSWORD_REQUIRED"===e.challengeName?i.next({state:"requireNewPassword",user:e}):"MFA_SETUP"===e.challengeName?i.next({state:"setupMFA",user:e}):"SMS_MFA"===e.challengeName||"SOFTWARE_TOKEN_MFA"===e.challengeName?i.next({state:"confirmSignIn",user:e}):bi.debug("warning: unhandled challengeName "+e.challengeName)):i.next({state:"signedIn",user:e}),e}).catch(function(e){throw bi.debug("signIn error",e),e})},u=t,l=(c=n).signOut,c.signOut=function(e){return l.call(c,e).then(function(e){return bi.debug("signOut success"),u.next({state:"signedOut",user:null}),e}).catch(function(e){throw bi.debug("signOut error",e),e})},p=t,f=(d=n).signUp,d.signUp=function(t,e,n,r){return f.call(d,t,e,n,r).then(function(e){return bi.debug("signUp success"),p.next({state:"confirmSignUp",user:{username:t}}),e}).catch(function(e){throw bi.debug("signUp error",e),e})},h=t,g=(m=n).confirmSignUp,m.confirmSignUp=function(t,e){return g.call(m,t,e).then(function(e){return bi.debug("confirmSignUp success"),h.next({state:"signIn",user:{username:t}}),e}).catch(function(e){throw bi.debug("confirmSignUp error",e),e})},this._auth=e.Auth,this._analytics=e.Analytics,this._storage=e.Storage,this._api=e.API,this._cache=e.Cache,this._pubsub=e.PubSub,this._interactions=e.Interactions,this._xr=e.XR,this._i18n=E.I18n,this._logger=E.Logger}var yS=(vS.prototype.ngOnInit=function(){var t=this;if(!this.amplifyService.auth())throw new Error("Auth module not registered on AmplifyService provider");this.amplifyService.auth().currentAuthenticatedUser().then(function(e){"loading"===t.authState.state&&e&&t.amplifyService.setAuthState({state:"signedIn",user:e})}).catch(function(e){"loading"===t.authState.state&&t.amplifyService.setAuthState({state:"signIn",user:null})})},Object.defineProperty(vS.prototype,"data",{set:function(e){e.signUpConfig&&(this._signUpConfig=e.signUpConfig),e.hide&&(this.hide=e.hide),this._usernameAttributes=e.usernameAttributes||this._usernameAttributes||"username"},enumerable:!0,configurable:!0}),Object.defineProperty(vS.prototype,"signUpConfig",{set:function(e){this._signUpConfig=e},enumerable:!0,configurable:!0}),Object.defineProperty(vS.prototype,"usernameAttributes",{set:function(e){this._usernameAttributes=e||"username"},enumerable:!0,configurable:!0}),vS.prototype.subscribe=function(){var t=this;this.amplifyService.authStateChange$.subscribe(function(e){t.authState=e},function(){t.authState={state:"signIn",user:null}})},vS.prototype.shouldHide=function(t){return 0<this.hide.filter(function(e){return e===t}).length},vS.decorators=[{type:f.Component,args:[{selector:"amplify-authenticator-core",template:'\n  <div class="amplify-authenticator">\n    <amplify-auth-sign-in-core\n      *ngIf="!shouldHide(\'SignIn\')"\n      [authState]="authState"\n      [usernameAttributes]="_usernameAttributes"\n      [hide]="hide"\n    ></amplify-auth-sign-in-core>\n\n    <amplify-auth-sign-up-core\n      *ngIf="!shouldHide(\'SignUp\')"\n      [authState]="authState"\n      [signUpConfig]="_signUpConfig"\n      [usernameAttributes]="_usernameAttributes"\n      [hide]="hide"\n    ></amplify-auth-sign-up-core>\n\n    <amplify-auth-confirm-sign-up-core\n      *ngIf="!shouldHide(\'ConfirmSignUp\')"\n      [authState]="authState"\n      [usernameAttributes]="_usernameAttributes"\n      [hide]="hide"\n    ></amplify-auth-confirm-sign-up-core>\n\n    <amplify-auth-confirm-sign-in-core\n      *ngIf="!shouldHide(\'ConfirmSignIn\')"\n      [authState]="authState"\n      [hide]="hide"\n    ></amplify-auth-confirm-sign-in-core>\n\n    <amplify-auth-forgot-password-core\n      *ngIf="!shouldHide(\'ForgotPassword\')"\n      [authState]="authState"\n      [usernameAttributes]="_usernameAttributes"\n      [hide]="hide"\n    ></amplify-auth-forgot-password-core>\n\n    <amplify-auth-greetings-core\n    *ngIf="!shouldHide(\'Greetings\')"\n    [authState]="authState"\n    [usernameAttributes]="_usernameAttributes"\n    ></amplify-auth-greetings-core>\n\n     <amplify-auth-require-new-password-core\n      *ngIf="!shouldHide(\'RequireNewPassword\')"\n      [authState]="authState"\n      [hide]="hide"\n    ></amplify-auth-require-new-password-core>\n  </div>\n'}]}],vS.ctorParameters=function(){return[{type:mS}]},vS.propDecorators={hide:[{type:f.Input}],data:[{type:f.Input}],signUpConfig:[{type:f.Input}],usernameAttributes:[{type:f.Input}]},vS);function vS(e){this.amplifyService=e,this.authState={state:"loading",user:null},this._signUpConfig={},this._usernameAttributes="username",this.hide=[],this.subscribe()}var bS,wS,SS=((gn=(bS=function(e,t){return(bS=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}bS(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}))(CS,wS=yS),CS.decorators=[{type:f.Component,args:[{selector:"amplify-authenticator-ionic",template:'\n<div class="amplify-authenticator amplify-authenticator-ionic ">\n\n<amplify-auth-sign-in-ionic\n  *ngIf="!shouldHide(\'SignIn\')"\n  [authState]="authState"\n  [usernameAttributes]="_usernameAttributes"\n  [hide]="hide"\n></amplify-auth-sign-in-ionic>\n\n<amplify-auth-sign-up-ionic\n  *ngIf="!shouldHide(\'SignUp\')"\n  [authState]="authState"\n  [signUpConfig]="_signUpConfig"\n  [usernameAttributes]="_usernameAttributes"\n  [hide]="hide"\n></amplify-auth-sign-up-ionic>\n\n<amplify-auth-confirm-sign-up-ionic\n  *ngIf="!shouldHide(\'ConfirmSignUp\')"\n  [authState]="authState"\n  [usernameAttributes]="_usernameAttributes"\n  [hide]="hide"\n></amplify-auth-confirm-sign-up-ionic>\n\n<amplify-auth-confirm-sign-in-ionic\n  *ngIf="!shouldHide(\'ConfirmSignIn\')"\n  [authState]="authState"\n  [hide]="hide"\n></amplify-auth-confirm-sign-in-ionic>\n\n<amplify-auth-forgot-password-ionic\n  *ngIf="!shouldHide(\'ForgotPassword\')"\n  [authState]="authState"\n  [usernameAttributes]="_usernameAttributes"\n  [hide]="hide"\n></amplify-auth-forgot-password-ionic>\n\n<amplify-auth-greetings-ionic\n  *ngIf="!shouldHide(\'Greetings\')"\n  [authState]="authState"\n  [usernameAttributes]="_usernameAttributes"\n></amplify-auth-greetings-ionic>\n\n<amplify-auth-require-new-password-ionic\n  *ngIf="!shouldHide(\'RequireNewPassword\')"\n  [authState]="authState"\n  [hide]="hide"\n></amplify-auth-require-new-password-ionic>\n</div>\n'}]}],CS.ctorParameters=function(){return[{type:mS}]},CS);function CS(e){var t=wS.call(this,e)||this;return t.amplifyService=e,t}function _S(e){this.componentFactoryResolver=e,this.hide=[],this.usernameAttributes="username"}_S.prototype.ngOnInit=function(){this.loadComponent()},_S.prototype.ngOnDestroy=function(){},_S.prototype.loadComponent=function(){var e=this.framework&&"ionic"===this.framework.toLowerCase()?new vi(SS,{hide:this.hide,signUpConfig:this.signUpConfig,usernameAttributes:this.usernameAttributes}):new vi(yS,{hide:this.hide,signUpConfig:this.signUpConfig,usernameAttributes:this.usernameAttributes}),t=this.componentFactoryResolver.resolveComponentFactory(e.component),n=this.componentHost.viewContainerRef;n.clear(),n.createComponent(t).instance.data=e.data},_S.decorators=[{type:f.Component,args:[{selector:"amplify-authenticator",template:'\n\t\t<div class="amplify-component">\n\t\t\t<ng-template component-host></ng-template>\n\t\t</div>\n\t'}]}],_S.ctorParameters=function(){return[{type:f.ComponentFactoryResolver}]},_S.propDecorators={framework:[{type:f.Input}],hide:[{type:f.Input}],signUpConfig:[{type:f.Input}],usernameAttributes:[{type:f.Input}],componentHost:[{type:f.ViewChild,args:[mn]}]},vt=_S;var ES="sumerian-scene-container",IS="sumerian-scene",AS="sumerian-scene-loading",PS="sumerian-scene-loading-logo",OS="sumerian-scene-loading-scene-name",kS="sumerian-scene-loading-bar",TS="sumerian-scene-error-text",xS="sumerian-scene-bar",NS="sumerian-scene-actions",MS={section:"sign-in-section",headerSection:"sign-in-header-section",bodySection:"sign-in-body-section",footerSection:"sign-in-footer-section",usernameInput:"username-input",passwordInput:"sign-in-password-input",forgotPasswordLink:"sign-in-forgot-password-link",signInButton:"sign-in-sign-in-button",createAccountLink:"sign-in-create-account-link",signInError:"authenticator-error"},RS={section:"sign-up-section",headerSection:"sign-up-header-section",bodySection:"sign-up-body-section",nonPhoneNumberInput:"sign-up-non-phone-number-input",phoneNumberInput:"sign-up-phone-number-input",dialCodeSelect:"sign-up-dial-code-select",footerSection:"sign-up-footer-section",createAccountButton:"sign-up-create-account-button",signInLink:"sign-up-sign-in-link",signUpButton:"sign-up-sign-up-button",signInButton:"sign-up-sign-in-button",confirmButton:"sign-up-confirm-button"},US={section:"require-new-password-section",headerSection:"require-new-password-header-section",footerSection:"require-new-password-footer-section",bodySection:"require-new-password-body-section",newPasswordInput:"require-new-password-new-password-input",backToSignInLink:"require-new-password-back-to-sign-in-link",submitButton:"require-new-password-submit-button"},DS={usernameInput:"username-input",emailInput:"email-input",phoneNumberInput:"phone-number-input",dialCodeSelect:"dial-code-select"},LS={signOutButton:"sign-out-button",signOutLink:"greeting-sign-out-link",navRight:"greetings-nav-right"},FS={section:"confirm-sign-up-section",headerSection:"confirm-sign-up-header-section",bodySection:"confirm-sign-up-body-section",usernameInput:"confirm-sign-up-username-input",confirmationCodeInput:"confirm-sign-up-confirmation-code-input",resendCodeLink:"confirm-sign-up-resend-code-link",confirmButton:"confirm-sign-up-confirm-button",backToSignInLink:"confirm-sign-up-back-to-sign-in-link"},jS={section:"forgot-password-section",headerSection:"forgot-password-header-section",bodySection:"forgot-password-body-section",submitButton:"forgot-password-submit-button",sendCodeButton:"forgot-password-send-code-button",resendCodeLink:"forgot-password-resend-code-link",backToSignInLink:"forgot-password-back-to-sign-in-link",usernameInput:"username-input",codeInput:"forgot-password-code-input",newPasswordInput:"forgot-password-new-password-input"},hn='\n<div class="amplify-container" *ngIf="_show">\n  <div class="amplify-form-container" data-test="'+(oC={section:"confirm-sign-in-section",headerSection:"confirm-sign-in-header-section",bodySection:"confirm-sign-in-body-section",codeInput:"confirm-sign-in-code-input",confirmButton:"confirm-sign-in-confirm-button",backToSignInLink:"confirm-sign-in-back-to-sign-in-link"}).section+'">\n    <div class="amplify-form-body" data-test="'+oC.bodySection+'">\n    <div class="amplify-form-header" data-test="'+oC.headerSection+'">{{ this.amplifyService.i18n().get(\'Confirm Sign in\') }}</div>\n      <div class="amplify-form-row" *ngIf="!shouldHide(\'SignIn\')">\n        <label class="amplify-input-label" for="code">\n          {{ this.amplifyService.i18n().get(\'Confirmation Code *\') }}\n        </label>\n        <input #code\n          (change)="setCode(code.value)"\n          (keyup)="setCode(code.value)"\n          (keyup.enter)="onConfirm()"\n          class="amplify-form-input"\n          type="text"\n          placeholder="{{ this.amplifyService.i18n().get(\'Enter your Code\') }}"\n          data-test="'+oC.codeInput+'"\n        />\n      </div>\n      <div class="amplify-form-actions">\n        <div class="amplify-form-cell-left">\n          <div class="amplify-form-actions-left">\n            <a \n              class="amplify-form-link"\n              (click)="onSignIn()"\n              data-test="'+oC.backToSignInLink+'"\n              >\n                {{ this.amplifyService.i18n().get(\'Back to Sign in\') }}\n            </a>\n          </div>\n        </div>\n        <div class="amplify-form-cell-right">\n          <button\n            class="amplify-form-button"\n            data-test="'+oC.confirmButton+'"\n            (click)="onConfirm()"\n            >\n              {{ this.amplifyService.i18n().get(\'Confirm\') }}</button>\n        </div>\n      </div>\n      </div>\n  </div>\n  <div class="amplify-alert" *ngIf="errorMessage">\n    <div class="amplify-alert-body">\n      <span class="amplify-alert-icon">&#9888;</span>\n      <div class="amplify-alert-message">{{ this.amplifyService.i18n().get(errorMessage) }}</div>\n      <a class="amplify-alert-close" (click)="onAlertClose()">&times;</a>\n    </div>\n  </div>\n</div>\n',BS=(Object.defineProperty(VS.prototype,"data",{set:function(e){this.hide=e.hide||this.hide,this._authState=e.authState,this._show="confirmSignIn"===e.authState.state},enumerable:!0,configurable:!0}),Object.defineProperty(VS.prototype,"authState",{set:function(e){this._authState=e,this._show="confirmSignIn"===e.state},enumerable:!0,configurable:!0}),VS.prototype.ngOnInit=function(){if(!this.amplifyService.auth())throw new Error("Auth module not registered on AmplifyService provider")},VS.prototype.shouldHide=function(t){return 0<this.hide.filter(function(e){return e===t}).length},VS.prototype.setCode=function(e){this.code=e},VS.prototype.onConfirm=function(){var t=this,e=this._authState.user,n="SOFTWARE_TOKEN_MFA"===(n=e.challengeName)?n:null;this.amplifyService.auth().confirmSignIn(e,this.code,n).then(function(){t.onAlertClose(),t.amplifyService.setAuthState({state:"signedIn",user:e})}).catch(function(e){return t._setError(e)})},VS.prototype.onSignIn=function(){this.onAlertClose(),this.amplifyService.setAuthState({state:"signIn",user:null})},VS.prototype.onAlertClose=function(){this._setError(null)},VS.prototype._setError=function(e){this.errorMessage=e?e.message||e:null},VS.decorators=[{type:f.Component,args:[{selector:"amplify-auth-confirm-sign-in-core",template:hn}]}],VS.ctorParameters=function(){return[{type:mS,decorators:[{type:f.Inject,args:[mS]}]}]},VS.propDecorators={data:[{type:f.Input}],authState:[{type:f.Input}],hide:[{type:f.Input}]},VS);function VS(e){this.amplifyService=e,this.hide=[],this.logger=this.amplifyService.logger("ConfiSignInComponent")}var zS,qS,bw=(zS=function(e,t){return(zS=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}zS(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),wv='\n<div class="amplify-form-container" *ngIf="_show" data-test="'+oC.section+'">\n  <div class="amplify-form-body" data-test="'+oC.bodySection+'">\n    <div\n      class="amplify-form-header amplify-form-header-ionic"\n      data-test="'+oC.headerSection+'"\n      >\n        {{ this.amplifyService.i18n().get(\'Confirm your sign in code\') }}\n    </div>\n    <ion-list>\n      <ion-item lines="none">\n        <ion-label class="amplify-input-label amplify-input-label-ionic" position="stacked">\n          {{ this.amplifyService.i18n().get(\'Code *\') }}\n        </ion-label>\n        <ion-input\n          #code\n          type="text"\n          class="amplify-form-input"\n          (input)="setCode(code.value)"\n          (keyup.enter)="onConfirm()"\n          data-test="'+oC.codeInput+'"\n        ></ion-input>\n      </ion-item>\n    </ion-list>\n\n    <div class="amplify-form-actions">\n      <div>\n        <ion-button expand="block" color="primary"\n          (click)="onConfirm()"\n          data-test="'+oC.confirmButton+'"\n        >{{ this.amplifyService.i18n().get(\'Confirm Code\') }}</ion-button>\n      </div>\n    </div>\n  </div>\n\n  <div class="amplify-alert" *ngIf="errorMessage">\n    <div class="amplify-alert-body">\n      <span class="amplify-alert-icon">&#9888;</span>\n      <div class="amplify-alert-message">{{ this.amplifyService.i18n().get(errorMessage) }}</div>\n      <a class="amplify-alert-close" (click)="onAlertClose()">&times;</a>\n    </div>\n  </div>\n\n</div>\n',KS=(bw(HS,qS=BS),HS.decorators=[{type:f.Component,args:[{selector:"amplify-auth-confirm-sign-in-ionic",template:wv}]}],HS.ctorParameters=function(){return[{type:mS,decorators:[{type:f.Inject,args:[mS]}]}]},HS);function HS(e){var t=qS.call(this,e)||this;return t.amplifyService=e,t}function GS(e){this.componentFactoryResolver=e,this.hide=[]}function WS(e,t){return 0<e.filter(function(e){return e===t}).length}function $S(e,t){return"+"+e+t.replace(/[-()]/g,"")}GS.prototype.ngOnInit=function(){this.loadComponent()},GS.prototype.ngOnDestroy=function(){},GS.prototype.loadComponent=function(){var e=this.framework&&"ionic"===this.framework.toLowerCase()?new vi(KS,{authState:this.authState,hide:this.hide}):new vi(BS,{authState:this.authState,hide:this.hide}),t=this.componentFactoryResolver.resolveComponentFactory(e.component),n=this.componentHost.viewContainerRef;n.clear(),n.createComponent(t).instance.data=e.data},GS.decorators=[{type:f.Component,args:[{selector:"amplify-auth-confirm-sign-in",template:"\n\t\t<div>\n\t\t\t<ng-template component-host></ng-template>\n\t\t</div>\n\t"}]}],GS.ctorParameters=function(){return[{type:f.ComponentFactoryResolver}]},GS.propDecorators={framework:[{type:f.Input}],authState:[{type:f.Input}],hide:[{type:f.Input}],componentHost:[{type:f.ViewChild,args:[mn]}]},Rw=GS;var YS={email:"Email",phone_number:"Phone Number",username:"Username"},Uw='\n<div class="amplify-container" *ngIf="_show">\n<div class="amplify-form-container" data-test="'+FS.section+'">\n  <div class="amplify-form-body" data-test="'+FS.bodySection+'">\n    <div\n      class="amplify-form-header"\n      data-test="'+FS.headerSection+'"\n    >\n      {{ this.amplifyService.i18n().get(\'Confirm Sign up\') }}</div>\n    <div class="amplify-form-row">\n      <label class="amplify-input-label" for="amplifyUsername">\n        {{ this.amplifyService.i18n().get(getUsernameLabel()) }}\n      </label>\n      <input\n        #amplifyUsername\n        class="amplify-form-input"\n        type="text"\n        disabled\n        placeholder="{{ this.amplifyService.i18n().get(getUsernameLabel()) }}"\n        [value]="username"\n        data-test="'+FS.usernameInput+'"\n      />\n    </div>\n    <div class="amplify-form-row">\n      <label class="amplify-input-label" for="code">\n        {{ this.amplifyService.i18n().get(\'Confirmation Code *\') }}\n      </label>\n      <input #code\n        (change)="setCode(code.value)"\n        (keyup)="setCode(code.value)"\n        (keyup.enter)="onConfirm()"\n        class="amplify-form-input"\n        type="text"\n        placeholder="{{ this.amplifyService.i18n().get(\'Enter your Code\') }}"\n        data-test="'+FS.confirmationCodeInput+'"\n      />\n      <span class="amplify-form-action">{{ this.amplifyService.i18n().get(\'Lost your code?\') }}\n        <a class="amplify-form-link"\n            (click)="onResend()"\n            data-test="'+FS.resendCodeLink+'"\n          >{{ this.amplifyService.i18n().get(\'Resend Code\') }}</a></span>\n    </div>\n    <div class="amplify-form-actions">\n      <div class="amplify-form-cell-left">\n        <div class="amplify-form-actions-left">\n          <a\n            class="amplify-form-link"\n            (click)="onSignIn()"\n            data-test="'+FS.backToSignInLink+'"\n            >\n            {{ this.amplifyService.i18n().get(\'Back to Sign in\') }}\n          </a>\n        </div>\n      </div>\n      <div class="amplify-form-cell-right">\n        <button\n          class="amplify-form-button"\n          (click)="onConfirm()"\n          data-test="'+FS.confirmButton+'"\n          >{{ this.amplifyService.i18n().get(\'Confirm\') }}</button>\n      </div>\n    </div>\n  </div>\n</div>\n<div class="amplify-alert" *ngIf="errorMessage">\n  <div class="amplify-alert-body">\n    <span class="amplify-alert-icon">&#9888;</span>\n    <div class="amplify-alert-message">{{ this.amplifyService.i18n().get(errorMessage) }}</div>\n    <a class="amplify-alert-close" (click)="onAlertClose()">&times;</a>\n  </div>\n</div>\n</div>\n',JS=(Object.defineProperty(ZS.prototype,"data",{set:function(e){this.hide=e.hide||this.hide,this._authState=e.authState,this._show="confirmSignUp"===e.authState.state,this.username=e.authState.user&&e.authState.user.username||""},enumerable:!0,configurable:!0}),Object.defineProperty(ZS.prototype,"authState",{set:function(e){this._authState=e,this._show="confirmSignUp"===e.state,this.username=e.user&&e.user.username||""},enumerable:!0,configurable:!0}),Object.defineProperty(ZS.prototype,"usernameAttributes",{set:function(e){this._usernameAttributes=e},enumerable:!0,configurable:!0}),ZS.prototype.ngOnInit=function(){if(!this.amplifyService.auth())throw new Error("Auth module not registered on AmplifyService provider")},ZS.prototype.shouldHide=function(t){return 0<this.hide.filter(function(e){return e===t}).length},ZS.prototype.setUsername=function(e){this.username=e},ZS.prototype.setCode=function(e){this.code=e},ZS.prototype.onConfirm=function(){var t=this;this.amplifyService.auth().confirmSignUp(this.username,this.code).then(function(){return t.logger.info("confirm success")}).catch(function(e){return t._setError(e)})},ZS.prototype.onResend=function(){var t=this;this.amplifyService.auth().resendSignUp(this.username).then(function(){return t.logger.info("code resent")}).catch(function(e){return t._setError(e)})},ZS.prototype.onSignIn=function(){this.onAlertClose(),this.amplifyService.setAuthState({state:"signIn",user:null})},ZS.prototype.onAlertClose=function(){this._setError(null)},ZS.prototype._setError=function(e){this.errorMessage=e?e.message||e:null},ZS.prototype.getUsernameLabel=function(){return YS[this._usernameAttributes]||this._usernameAttributes},ZS.decorators=[{type:f.Component,args:[{selector:"amplify-auth-confirm-sign-up-core",template:Uw}]}],ZS.ctorParameters=function(){return[{type:mS,decorators:[{type:f.Inject,args:[mS]}]}]},ZS.propDecorators={data:[{type:f.Input}],hide:[{type:f.Input}],authState:[{type:f.Input}],usernameAttributes:[{type:f.Input}]},ZS);function ZS(e){this.amplifyService=e,this._usernameAttributes="username",this.hide=[],this.logger=this.amplifyService.logger("ConfirmSignUpComponent")}var QS,XS,iS=(QS=function(e,t){return(QS=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}QS(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),Tw='\n<div\n  class="amplify-authenticator amplify-authenticator-ionic"\n  *ngIf="_show"\n  data-test="'+FS.section+'"\n  >\n  <div class="amplify-form-body" data-test="'+FS.bodySection+'">\n    <div\n      class="amplify-form-header amplify-form-header-ionic"\n      data-test="'+FS.headerSection+'"\n      >\n      {{ this.amplifyService.i18n().get(\'Confirm your sign up code\') }}\n    </div>\n    <ion-list>\n      <ion-item lines="none">\n        <ion-label class="amplify-input-label amplify-input-label-ionic" position="stacked">\n          {{ this.amplifyService.i18n().get(getUsernameLabel()) }}\n        </ion-label>\n        <ion-input type="text"\n          class="amplify-form-input"\n          (input)="setUsername($event.target.value)"\n          [value]="username"\n          data-test="'+FS.usernameInput+'"\n        ></ion-input>\n      </ion-item>\n\n      <ion-item lines="none">\n        <ion-label class="amplify-input-label amplify-input-label-ionic" position="stacked">\n          {{ this.amplifyService.i18n().get(\'Code *\') }}\n        </ion-label>\n        <ion-input\n          #code\n          type="text"\n          class="amplify-form-input"\n          (input)="setCode(code.value)"\n          (keyup.enter)="onConfirm()"\n          data-test="'+FS.confirmationCodeInput+'"\n        ></ion-input>\n      </ion-item>\n    </ion-list>\n\n    <div class="amplify-form-actions">\n      <div>\n        <ion-button\n          expand="block"\n          color="primary"\n          (click)="onConfirm()"\n          data-test="'+FS.confirmButton+'"\n          >\n          {{ this.amplifyService.i18n().get(\'Confirm Code\') }}</ion-button>\n      </div>\n    <div class="amplify-form-row">\n      <div class="amplify-form-signup">\n        {{ this.amplifyService.i18n().get(\'Have an account?\') }}\n        <a\n          class="amplify-form-link"\n          (click)="onSignIn()"\n          data-test="'+FS.backToSignInLink+'"\n          >\n          {{ this.amplifyService.i18n().get(\'Sign In\') }}\n        </a>\n      </div>\n      <div class="amplify-form-signup">\n        {{ this.amplifyService.i18n().get(\'Lost your code?\') }}\n        <a\n          class="amplify-form-link"\n          (click)="onResend()"\n          data-test="'+FS.resendCodeLink+'"\n          >\n          {{ this.amplifyService.i18n().get(\'Resend\') }}\n        </a>\n      </div>\n    </div>\n  </div>\n</div>\n\n  <div class="amplify-alert" *ngIf="errorMessage">\n    <div class="amplify-alert-body">\n      <span class="amplify-alert-icon">&#9888;</span>\n      <div class="amplify-alert-message">{{ this.amplifyService.i18n().get(errorMessage) }}</div>\n      <a class="amplify-alert-close" (click)="onAlertClose()">&times;</a>\n    </div>\n  </div>\n\n</div>\n',eC=(iS(tC,XS=JS),tC.decorators=[{type:f.Component,args:[{selector:"amplify-auth-confirm-sign-up-ionic",template:Tw}]}],tC.ctorParameters=function(){return[{type:mS,decorators:[{type:f.Inject,args:[mS]}]}]},tC);function tC(e){var t=XS.call(this,e)||this;return t.amplifyService=e,t}var nC,gn=(rC.prototype.ngOnInit=function(){this.loadComponent()},rC.prototype.ngOnDestroy=function(){},rC.prototype.loadComponent=function(){var e=this.framework&&"ionic"===this.framework.toLowerCase()?new vi(eC,{authState:this.authState,usernameAttributes:this.usernameAttributes,hide:this.hide}):new vi(JS,{authState:this.authState,usernameAttributes:this.usernameAttributes,hide:this.hide}),t=this.componentFactoryResolver.resolveComponentFactory(e.component),n=this.componentHost.viewContainerRef;n.clear(),n.createComponent(t).instance.data=e.data},rC.decorators=[{type:f.Component,args:[{selector:"amplify-auth-confirm-sign-up",template:"\n\t\t<div>\n\t\t\t<ng-template component-host></ng-template>\n\t\t</div>\n\t"}]}],rC.ctorParameters=function(){return[{type:f.ComponentFactoryResolver}]},rC.propDecorators={framework:[{type:f.Input}],authState:[{type:f.Input}],usernameAttributes:[{type:f.Input}],hide:[{type:f.Input}],componentHost:[{type:f.ViewChild,args:[mn]}]},rC);function rC(e){this.componentFactoryResolver=e,this.usernameAttributes="username",this.hide=[]}(hn=nC=nC||{}).EMAIL="email",hn.PHONE_NUMBER="phone_number",hn.USERNAME="username";var oC='\n<div class="amplify-container" *ngIf="_show">\n  <div class="amplify-form-container" data-test="'+MS.section+'">\n    <div class="amplify-form-body" data-test="'+MS.bodySection+'">\n      <div class="amplify-form-header" data-test="'+MS.headerSection+'">\n        {{ this.amplifyService.i18n().get(\'Sign in to your account\') }}\n      </div>\n      <amplify-auth-username-field-core\n        [usernameAttributes]="_usernameAttributes"\n        (usernameFieldChanged)="onUsernameFieldChanged($event)"\n      ></amplify-auth-username-field-core>\n      <div class="amplify-form-row amplify-signin-password">\n        <label class="amplify-input-label" for="passwordField">\n          {{ this.amplifyService.i18n().get(\'Password *\') }}\n        </label>\n        <input #passwordField\n          (keyup)="setPassword(passwordField.value)"\n          (keyup.enter)="onSignIn()"\n          class="amplify-form-input"\n          type="password"\n          required\n          placeholder="{{ this.amplifyService.i18n().get(\'Enter your password\') }}"\n          data-test="'+MS.passwordInput+'"\n        />\n        <span class="amplify-form-action" *ngIf="!shouldHide(\'ForgotPassword\')">\n          {{ this.amplifyService.i18n().get(\'Forgot Password?\') }}\n          <a class="amplify-form-link"\n            (click)="onForgotPassword()"\n            data-test="'+MS.forgotPasswordLink+'"\n          >{{ this.amplifyService.i18n().get(\'Reset password\') }}</a>\n        </span>\n      </div>\n      <div class="amplify-form-actions">\n        <div class="amplify-form-cell-right">\n          <button class="amplify-form-button"\n            (click)="onSignIn()"\n            data-test="'+MS.signInButton+'"\n          >{{ this.amplifyService.i18n().get(\'Sign In\') }}</button>\n        </div>\n        <div class="amplify-form-cell-left" *ngIf="!shouldHide(\'SignUp\')">\n          <div class="amplify-form-signup">\n            {{ this.amplifyService.i18n().get(\'No account?\') }}\n            <a\n              class="amplify-form-link"\n              (click)="onSignUp()"\n              data-test="'+MS.createAccountLink+'"\n              >\n              {{ this.amplifyService.i18n().get(\'Create account\') }}\n            </a>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n  <div class="amplify-alert" *ngIf="errorMessage">\n    <div class="amplify-alert-body">\n      <span class="amplify-alert-icon">&#9888;</span>\n      <div\n        class="amplify-alert-message"\n        data-test="'+MS.signInError+'"\n        >\n          {{ this.amplifyService.i18n().get(errorMessage) }}</div>\n      <a class="amplify-alert-close" (click)="onAlertClose()">&times;</a>\n    </div>\n  </div>\n</div>\n',iC=(Object.defineProperty(sC.prototype,"data",{set:function(e){this.hide=e.hide||this.hide,this._usernameAttributes=e.usernameAttributes,this._authState=e.authState,this._show=WS(["signIn","signedOut","signedUp"],e.authState.state)},enumerable:!0,configurable:!0}),Object.defineProperty(sC.prototype,"authState",{set:function(e){this._authState=e,this._show=WS(["signIn","signedOut","signedUp"],e.state),this.username=e.user&&e.user.username||"",this.email=e.user&&e.user.email||"",this.country_code=(e.user&&e.user.country_code?e.user:this).country_code,this.local_phone_number=e.user&&e.user.local_phone_number||""},enumerable:!0,configurable:!0}),Object.defineProperty(sC.prototype,"usernameAttributes",{set:function(e){this._usernameAttributes=e},enumerable:!0,configurable:!0}),sC.prototype.ngOnInit=function(){if(!this.amplifyService.auth())throw new Error("Auth module not registered on AmplifyService provider")},sC.prototype.shouldHide=function(t){return 0<this.hide.filter(function(e){return e===t}).length},sC.prototype.setUsername=function(e){this.username=e},sC.prototype.setPassword=function(e){this.password=e},sC.prototype.onSignIn=function(){var t=this;this.amplifyService.auth().signIn(this.getSignInUsername(),this.password).then(function(e){"SMS_MFA"===e.challengeName||"SOFTWARE_TOKEN_MFA"===e.challengeName?t.amplifyService.setAuthState({state:"confirmSignIn",user:e}):"NEW_PASSWORD_REQUIRED"===e.challengeName?t.amplifyService.setAuthState({state:"requireNewPassword",user:e}):"CUSTOM_CHALLENGE"===e.challengeName&&e.challengeParam&&"true"===e.challengeParam.trigger&&t.amplifyService.setAuthState({state:"customConfirmSignIn",user:e})}).catch(function(e){t._setError(e)})},sC.prototype.onAlertClose=function(){this._setError(null)},sC.prototype.getUserObj=function(){return this.username||this.email||this.local_phone_number?{username:this.username,email:this.email,local_phone_number:this.local_phone_number,courtry_code:this.country_code}:null},sC.prototype.onForgotPassword=function(){var e=this.getUserObj();this.onAlertClose(),this.amplifyService.setAuthState({state:"forgotPassword",user:e})},sC.prototype.onSignUp=function(){var e=this.getUserObj();this.onAlertClose(),this.amplifyService.setAuthState({state:"signUp",user:e})},sC.prototype._setError=function(e){e?(this.errorMessage=e.message||e,this.logger.error(this.errorMessage)):this.errorMessage=null},sC.prototype.onUsernameFieldChanged=function(e){this.email=e.email||this.email,this.username=e.username||this.username,this.country_code=e.country_code||this.country_code,this.local_phone_number=e.local_phone_number||this.local_phone_number},sC.prototype.getSignInUsername=function(){switch(this._usernameAttributes){case nC.EMAIL:return this.email;case nC.PHONE_NUMBER:return $S(this.country_code,this.local_phone_number);default:return this.username}},sC.decorators=[{type:f.Component,args:[{selector:"amplify-auth-sign-in-core",template:oC}]}],sC.ctorParameters=function(){return[{type:mS,decorators:[{type:f.Inject,args:[mS]}]}]},sC.propDecorators={data:[{type:f.Input}],hide:[{type:f.Input}],authState:[{type:f.Input}],usernameAttributes:[{type:f.Input}]},sC);function sC(e){this.amplifyService=e,this._usernameAttributes="username",this.local_phone_number="",this.country_code="1",this.email="",this.signInUsername="",this.hide=[],this.logger=this.amplifyService.logger("SignInComponent"),this.onUsernameFieldChanged=this.onUsernameFieldChanged.bind(this)}var aC,uC,bw=(aC=function(e,t){return(aC=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}aC(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),wv='\n<div\n  class="amplify-authenticator"\n  *ngIf="_show"\n  data-test="'+MS.section+'"\n  >\n  <div class="amplify-form-body" data-test="'+MS.bodySection+'">\n    <div class="amplify-form-header" data-test="'+MS.headerSection+'">\n      {{ this.amplifyService.i18n().get(\'Sign in to your account\') }}\n    </div>\n    <ion-list lines="none">\n      <amplify-auth-username-field-ionic\n        [usernameAttributes]="_usernameAttributes"\n        (usernameFieldChanged)="onUsernameFieldChanged($event)"\n      ></amplify-auth-username-field-ionic>\n      <ion-item lines="none">\n        <ion-label class="amplify-input-label" for="password" position="stacked">\n          {{ this.amplifyService.i18n().get(\'Password *\') }}\n        </ion-label>\n        <ion-input\n          #password\n          type="password"\n          class="amplify-form-input"\n          (input)="setPassword(password.value)"\n          (keyup.enter)="onSignIn()"\n          data-test="'+MS.passwordInput+'"\n        ></ion-input>\n      </ion-item>\n    </ion-list>\n    <div class="amplify-form-actions">\n      <div class="amplify-form-row">\n        <ion-button expand="block" color="primary"\n          (click)="onSignIn()"\n          data-test="'+MS.signInButton+'"\n          >{{ this.amplifyService.i18n().get(\'Sign In\') }}</ion-button>\n      </div>\n\n      <div class="amplify-form-row">\n        <div class="amplify-form-signup" *ngIf="!shouldHide(\'SignUp\')">\n          {{ this.amplifyService.i18n().get(\'No account?\') }}\n          <a\n            class="amplify-form-link"\n            (click)="onSignUp()"\n            data-test="'+MS.createAccountLink+'"\n            >\n            {{ this.amplifyService.i18n().get(\'Create account\') }}\n          </a>\n        </div>\n        <div class="amplify-form-signup" *ngIf="!shouldHide(\'ForgotPassword\')">\n          <a class="amplify-form-link" (click)="onForgotPassword()" data-test="'+MS.forgotPasswordLink+'">\n            {{ this.amplifyService.i18n().get(\'Reset Password\') }}\n          </a>\n        </div>\n      </div>\n\n    </div>\n  </div>\n\n  <div class="amplify-alert" *ngIf="errorMessage">\n    <div class="amplify-alert-body">\n      <span class="amplify-alert-icon">&#9888;</span>\n      <div class="amplify-alert-message">{{ this.amplifyService.i18n().get(errorMessage) }}</div>\n      <a class="amplify-alert-close" (click)="onAlertClose()">&times;</a>\n    </div>\n  </div>\n</div>\n',cC=(bw(lC,uC=iC),lC.decorators=[{type:f.Component,args:[{selector:"amplify-auth-sign-in-ionic",template:wv}]}],lC.ctorParameters=function(){return[{type:mS,decorators:[{type:f.Inject,args:[mS]}]}]},lC);function lC(e){var t=uC.call(this,e)||this;return t.amplifyService=e,t}function pC(e){this.componentFactoryResolver=e,this.usernameAttributes="username",this.hide=[]}pC.prototype.ngOnInit=function(){this.loadComponent()},pC.prototype.ngOnDestroy=function(){},pC.prototype.loadComponent=function(){var e=this.framework&&"ionic"===this.framework?new vi(cC,{authState:this.authState,hide:this.hide,usernameAttributes:this.usernameAttributes}):new vi(iC,{authState:this.authState,hide:this.hide,usernameAttributes:this.usernameAttributes}),t=this.componentFactoryResolver.resolveComponentFactory(e.component),n=this.componentHost.viewContainerRef;n.clear(),n.createComponent(t).instance.data=e.data},pC.decorators=[{type:f.Component,args:[{selector:"amplify-auth-sign-in",template:"\n\t\t<div>\n\t\t\t<ng-template component-host></ng-template>\n\t\t</div>\n\t"}]}],pC.ctorParameters=function(){return[{type:f.ComponentFactoryResolver}]},pC.propDecorators={framework:[{type:f.Input}],authState:[{type:f.Input}],usernameAttributes:[{type:f.Input}],hide:[{type:f.Input}],componentHost:[{type:f.ViewChild,args:[mn]}]},Uw=pC;var dC=[{label:"Username",key:"username",required:!1,displayOrder:1},{label:"Password",key:"password",required:!0,type:"password",displayOrder:2},{label:"Email",key:"email",required:!0,type:"email",displayOrder:3},{label:"Phone Number",key:"phone_number",required:!0,displayOrder:4}],fC=[{label:"Email",key:"email",required:!0,type:"email",displayOrder:1},{label:"Password",key:"password",required:!0,type:"password",displayOrder:2},{label:"Phone Number",key:"phone_number",required:!0,displayOrder:3}],hC=[{label:"Phone Number",key:"phone_number",required:!0,displayOrder:1},{label:"Password",key:"password",required:!0,type:"password",displayOrder:2},{label:"Email",key:"email",required:!0,type:"email",displayOrder:3}],FS='\n<div class="amplify-container" *ngIf="_show">\n  <div class="amplify-form-container" data-test="'+RS.section+'">\n    <div class="amplify-form-body" data-test="'+RS.bodySection+'">\n      <div\n        class="amplify-form-header"\n        data-test="'+RS.headerSection+'"\n        >{{ this.amplifyService.i18n().get(this.header) }}</div>\n      <div class="amplify-form-row" *ngFor="let field of signUpFields">\n        <div *ngIf="field.key !== \'phone_number\'">\n          <label class="amplify-input-label">\n            {{ this.amplifyService.i18n().get(field.label) }}\n            <span *ngIf="field.required">*</span>\n          </label>\n          <input #{{field.key}}\n            class="amplify-form-input"\n            [ngClass]="{\'amplify-input-invalid \': field.invalid}"\n            type={{field.type}}\n            [placeholder]="this.amplifyService.i18n().get(field.label)"\n            [(ngModel)]="user[field.key]"\n            name="field.key"\n            data-test="'+RS.nonPhoneNumberInput+'"\n            />\n            <div *ngIf="field.key === \'password\'" class="amplify-form-extra-details">\n              {{passwordPolicy}}\n            </div>\n        </div>\n        <div *ngIf="field.key === \'phone_number\'">\n          <amplify-auth-phone-field-core\n            [label]="field.label"\n            [required]="field.required"\n            [placeholder]="field.placeholder"\n            [defaultCountryCode]="country_code"\n            (phoneFieldChanged)="onPhoneFieldChanged($event)"\n          ></amplify-auth-phone-field-core>\n        </div>\n      </div>\n      <div class="amplify-form-actions">\n        <div class="amplify-form-cell-left" *ngIf="!shouldHide(\'SignIn\')">\n          <div class="amplify-form-signup">\n            {{ this.amplifyService.i18n().get(\'Have an account?\') }}\n            <a class="amplify-form-link" (click)="onSignIn()" data-test="'+RS.signInLink+'">\n              {{ this.amplifyService.i18n().get(\'Sign in\') }}\n            </a>\n          </div>\n        </div>\n        <div class="amplify-form-cell-right">\n          <button class="amplify-form-button"\n          (click)="onSignUp()"\n          data-test="'+RS.createAccountButton+'"\n          >{{ this.amplifyService.i18n().get(\'Create Account\') }}</button>\n        </div>\n      </div>\n    </div>\n  </div>\n  <div class="amplify-alert" *ngIf="errorMessage">\n    <div class="amplify-alert-body">\n      <span class="amplify-alert-icon">&#9888;</span>\n      <div class="amplify-alert-message">{{ this.amplifyService.i18n().get(errorMessage) }}</div>\n      <a class="amplify-alert-close" (click)="onAlertClose()">&times;</a>\n    </div>\n  </div>\n</div>\n',mC=(Object.defineProperty(gC.prototype,"data",{set:function(e){this._authState=e.authState,this._show="signUp"===e.authState.state,this._usernameAttributes=e.usernameAttributes,e.signUpConfig&&(this._signUpConfig=e.signUpConfig,this._signUpConfig.defaultCountryCode&&(this.country_code=this._signUpConfig.defaultCountryCode),this._signUpConfig.signUpFields&&(this.signUpFields=this._signUpConfig.signUpFields),this._signUpConfig.header&&(this.header=this._signUpConfig.header),this._signUpConfig.hiddenDefaults&&(this.hiddenFields=this._signUpConfig.hiddenDefaults),this._usernameAttributes===nC.EMAIL?(this.signUpFields=fC,this.defaultSignUpFields=fC):this._usernameAttributes===nC.PHONE_NUMBER&&(this.signUpFields=hC,this.defaultSignUpFields=hC),this._signUpConfig.passwordPolicy&&(this.passwordPolicy=this._signUpConfig.passwordPolicy))},enumerable:!0,configurable:!0}),Object.defineProperty(gC.prototype,"usernameAttributes",{set:function(e){this._usernameAttributes=e,this._usernameAttributes===nC.EMAIL?(this.signUpFields=fC,this.defaultSignUpFields=fC):this._usernameAttributes===nC.PHONE_NUMBER&&(this.signUpFields=hC,this.defaultSignUpFields=hC)},enumerable:!0,configurable:!0}),Object.defineProperty(gC.prototype,"authState",{set:function(e){this._authState=e,this._show="signUp"===e.state},enumerable:!0,configurable:!0}),Object.defineProperty(gC.prototype,"signUpConfig",{set:function(e){e&&(this._signUpConfig=e,this._signUpConfig.defaultCountryCode&&(this.country_code=this._signUpConfig.defaultCountryCode),this._signUpConfig.signUpFields&&(this.signUpFields=this._signUpConfig.signUpFields),this._signUpConfig.header&&(this.header=this._signUpConfig.header),this._signUpConfig.hiddenDefaults&&(this.hiddenFields=this._signUpConfig.hiddenDefaults),this._signUpConfig.passwordPolicy&&(this.passwordPolicy=this._signUpConfig.passwordPolicy))},enumerable:!0,configurable:!0}),gC.prototype.ngOnInit=function(){this.amplifyService.auth()||this.logger.warn("Auth module not registered on AmplifyService provider"),this.sortFields()},gC.prototype.shouldHide=function(t){return 0<this.hide.filter(function(e){return e===t}).length},gC.prototype.onSignUp=function(){var n=this,e=this.validate();if(e&&0<e.length)return this._setError("The following fields need to be filled out: "+e.join(", "));this.user.attributes={},this.signUpFields.find(function(e){return"phone_number"===e.key})&&(this.user.phone_number=$S(this.country_code,this.local_phone_number));var r=(e=Object.keys(this.user)).map(function(e){return n.user[e]});e.forEach(function(e,t){"username"!==e&&"password"!==e&&"attributes"!==e&&(e=(n.needPrefix(e)?"custom:":"")+e,n.user.attributes[e]=r[t])});var t=!1;if(this.signUpFields.forEach(function(e){e.label===n.getUsernameLabel()&&(n.amplifyService.logger("Changing the username to the value of "+e.label,"DEBUG"),n.user.username=n.user.attributes[e.key]||n.user.username,t=!0)}),!t&&!this.user.username)throw new Error("Couldn't find the label: "+this.getUsernameLabel()+", in sign up fields according to usernameAttributes!");this.amplifyService.auth().signUp(this.user).then(function(e){var t=n.user.username;n.user={},n.onAlertClose(),n.amplifyService.setAuthState({state:"confirmSignUp",user:{username:t}})}).catch(function(e){return n._setError(e)})},gC.prototype.onSignIn=function(){this.onAlertClose(),this.amplifyService.setAuthState({state:"signIn",user:null})},gC.prototype.needPrefix=function(t){var e=this.signUpFields.find(function(e){return e.key===t});return 0!==t.indexOf("custom:")?e.custom:(0===t.indexOf("custom:")&&!1===e.custom&&this.logger.warn("Custom prefix prepended to key but custom field flag is set to false"),null)},gC.prototype.onConfirmSignUp=function(){this.onAlertClose(),this.amplifyService.setAuthState({state:"confirmSignUp",user:{username:this.user.username}})},gC.prototype.sortFields=function(){var n=this;0<this.hiddenFields.length&&(this.defaultSignUpFields=this.defaultSignUpFields.filter(function(e){return!n.hiddenFields.includes(e.key)})),this._signUpConfig&&this._signUpConfig.signUpFields&&0<this._signUpConfig.signUpFields.length&&(this._signUpConfig.hideAllDefaults||this.defaultSignUpFields.forEach(function(t,e){-1===n.signUpFields.findIndex(function(e){return e.key===t.key})&&n.signUpFields.push(t)}),this.signUpFields.sort(function(e,t){return e.displayOrder&&t.displayOrder?e.displayOrder<t.displayOrder||!(e.displayOrder>t.displayOrder)&&e.key<t.key?-1:1:!e.displayOrder&&t.displayOrder?1:e.displayOrder&&!t.displayOrder?-1:e.displayOrder||t.displayOrder?void 0:e.key<t.key?-1:1}),this.signUpFields=this.removeHiddenFields())},gC.prototype.onAlertClose=function(){this._setError(null)},gC.prototype.removeHiddenFields=function(){return this.signUpFields.filter(function(e){return!e.displayOrder||-1!==e.displayOrder})},gC.prototype.validate=function(){var t=this,n=[];return this.signUpFields.map(function(e){"phone_number"!==e.key?e.required&&!t.user[e.key]?(e.invalid=!0,n.push(t.amplifyService.i18n().get(e.label))):e.invalid=!1:!e.required||t.country_code&&t.local_phone_number?e.invalid=!1:(e.invalid=!0,n.push(t.amplifyService.i18n().get(e.label)))}),n},gC.prototype._setError=function(e){this.errorMessage=e?e.message||e:null},gC.prototype.getUsernameLabel=function(){return YS[this._usernameAttributes]||this._usernameAttributes},gC.prototype.onPhoneFieldChanged=function(e){this.country_code=e.country_code,this.local_phone_number=e.local_phone_number},gC.decorators=[{type:f.Component,args:[{selector:"amplify-auth-sign-up-core",template:FS}]}],gC.ctorParameters=function(){return[{type:mS,decorators:[{type:f.Inject,args:[mS]}]}]},gC.propDecorators={data:[{type:f.Input}],hide:[{type:f.Input}],usernameAttributes:[{type:f.Input}],authState:[{type:f.Input}],signUpConfig:[{type:f.Input}]},gC);function gC(e){this.amplifyService=e,this._usernameAttributes="username",this.user={},this.local_phone_number="",this.country_code="1",this.header="Create a new account",this.defaultSignUpFields=dC,this.signUpFields=this.defaultSignUpFields,this.hiddenFields=[],this.hide=[],this.logger=this.amplifyService.logger("SignUpComponent")}var yC,vC,iS=(yC=function(e,t){return(yC=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}yC(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),Tw='\n<div\n  class="amplify-authenticator"\n  *ngIf="_show"\n  data-test="'+RS.section+'"\n  >\n  <div class="amplify-form-body" data-test="'+RS.bodySection+'">\n    <div class="amplify-form-header" data-test="'+RS.headerSection+'">\n      {{ this.amplifyService.i18n().get(this.header) }}</div>\n    <ion-list lines="none">\n      <ion-item lines="none" *ngFor="let field of signUpFields">\n        <ion-label class="amplify-input-label"\n        position="stacked"\n        *ngIf="field.key !== \'phone_number\'"\n        >\n          {{ this.amplifyService.i18n().get(field.label) }}\n          <span *ngIf="field.required">*</span>\n        </ion-label>\n        <ion-input\n          [ngClass]="{\'amplify-input-invalid \': field.invalid}"\n          *ngIf="field.key !== \'phone_number\'"\n          #{{field.key}}\n          type="text"\n          class="amplify-form-input"\n          type={{field.type}}\n          [placeholder]="this.amplifyService.i18n().get(field.label)"\n          (keyup)="setProp($event.target)"\n          name={{field.key}}\n          data-test="'+RS.nonPhoneNumberInput+'"\n        ></ion-input>\n        <ion-content *ngIf="field.key === \'phone_number\'" class="amplify-phone-ion-content">\n          <amplify-auth-phone-field-ionic\n            [label]="field.label"\n            [required]="field.required"\n            [placeholder]="field.placeholder"\n            [defaultCountryCode]="country_code"\n            (phoneFieldChanged)="onPhoneFieldChanged($event)"\n          ></amplify-auth-phone-field-ionic>\n        </ion-content>\n      </ion-item>\n    </ion-list>\n    <div class="amplify-form-actions">\n      <div class="amplify-form-row">\n        <ion-button expand="block" color="primary"\n          (click)="onSignUp()"\n          data-test="'+RS.createAccountButton+'"\n        >{{ this.amplifyService.i18n().get(\'Create Account\') }}</ion-button>\n      </div>\n      <div class="amplify-form-row">\n        <div class="amplify-form-signup">\n          {{ this.amplifyService.i18n().get(\'Have an account?\') }}\n          <a class="amplify-form-link" (click)="onSignIn()" data-test="'+RS.signInButton+'">\n            {{ this.amplifyService.i18n().get(\'Sign In\') }}\n          </a>\n        </div>\n        <div class="amplify-form-signup" *ngIf="!shouldHide(\'SignUp\')">\n          {{ this.amplifyService.i18n().get(\'Have a code?\') }}\n          <a\n            class="amplify-form-link"\n            (click)="onConfirmSignUp()"\n            data-test="'+RS.confirmButton+'"\n            >\n            {{ this.amplifyService.i18n().get(\'Confirm\') }}\n          </a>\n        </div>\n      </div>\n    </div>\n  </div>\n  <div class="amplify-alert" *ngIf="errorMessage">\n    <div class="amplify-alert-body">\n      <span class="amplify-alert-icon">&#9888;</span>\n      <div class="amplify-alert-message">{{ this.amplifyService.i18n().get(errorMessage) }}</div>\n      <a class="amplify-alert-close" (click)="onAlertClose()">&times;</a>\n    </div>\n  </div>\n</div>\n',bC=(iS(wC,vC=mC),wC.prototype.setProp=function(e){return this.user[e.name]=e.value},wC.decorators=[{type:f.Component,args:[{selector:"amplify-auth-sign-up-ionic",template:Tw}]}],wC.ctorParameters=function(){return[{type:mS,decorators:[{type:f.Inject,args:[mS]}]}]},wC);function wC(e){var t=vC.call(this,e)||this;return t.amplifyService=e,t}function SC(e){this.componentFactoryResolver=e,this.usernameAttributes="username",this.hide=[]}SC.prototype.ngOnInit=function(){this.loadComponent()},SC.prototype.ngOnDestroy=function(){},SC.prototype.loadComponent=function(){var e=this.framework&&"ionic"===this.framework.toLowerCase()?new vi(bC,{authState:this.authState,signUpConfig:this.signUpConfig,usernameAttributes:this.usernameAttributes,hide:this.hide}):new vi(mC,{authState:this.authState,signUpConfig:this.signUpConfig,usernameAttributes:this.usernameAttributes,hide:this.hide}),t=this.componentFactoryResolver.resolveComponentFactory(e.component),n=this.componentHost.viewContainerRef;n.clear(),n.createComponent(t).instance.data=e.data},SC.decorators=[{type:f.Component,args:[{selector:"amplify-auth-sign-up",template:"\n\t\t<div>\n\t\t\t<ng-template component-host></ng-template>\n\t\t</div>\n\t"}]}],SC.ctorParameters=function(){return[{type:f.ComponentFactoryResolver}]},SC.propDecorators={framework:[{type:f.Input}],authState:[{type:f.Input}],signUpConfig:[{type:f.Input}],usernameAttributes:[{type:f.Input}],hide:[{type:f.Input}],componentHost:[{type:f.ViewChild,args:[mn]}]},hn=SC;var oC='\n<div class="amplify-container" *ngIf="_show">\n<div class="amplify-form-container" data-test="'+US.section+'">\n  <div class="amplify-form-body" data-test="'+US.bodySection+'">\n  <div class="amplify-form-header" data-test="'+US.headerSection+'">\n    {{ this.amplifyService.i18n().get(\'You are required to update your password\') }}\n  </div>\n  <div class="amplify-form-row">\n    <label class="amplify-input-label" for="password">\n      {{ this.amplifyService.i18n().get(\'Password *\') }}\n    </label>\n    <input #password\n      (keyup)="setPassword(password.value)"\n      (keyup.enter)="onSubmit()"\n      class="amplify-form-input"\n      type="password"\n      placeholder="{{ this.amplifyService.i18n().get(\'Password\') }}"\n      data-test="'+US.newPasswordInput+'"\n    />\n    </div>\n    <div class="amplify-form-actions">\n      <div class="amplify-form-cell-left">\n        <a class="amplify-form-link"\n          (click)="onSignIn()"\n          data-test="'+US.backToSignInLink+'"\n        >{{ this.amplifyService.i18n().get(\'Back to Sign In\') }}</a>\n      </div>\n      <div class="amplify-form-cell-right">\n        <button class="amplify-form-button"\n          (click)="onSubmit()"\n          data-test="'+US.submitButton+'"\n        >{{ this.amplifyService.i18n().get(\'Submit\') }}</button>\n      </div>\n    </div>\n  </div>\n</div>\n<div class="amplify-alert" *ngIf="errorMessage">\n<div class="amplify-alert-body">\n  <span class="amplify-alert-icon">&#9888;</span>\n  <div class="amplify-alert-message">{{ this.amplifyService.i18n().get(errorMessage) }}</div>\n  <a class="amplify-alert-close" (click)="onAlertClose()">&times;</a>\n</div>\n</div>\n</div>\n',CC=(Object.defineProperty(_C.prototype,"authState",{set:function(e){this._authState=e,this._show="requireNewPassword"===e.state},enumerable:!0,configurable:!0}),Object.defineProperty(_C.prototype,"data",{set:function(e){this._authState=e.authState,this._show="requireNewPassword"===e.authState.state,this.hide=e.hide||this.hide},enumerable:!0,configurable:!0}),_C.prototype.ngOnInit=function(){if(!this.amplifyService.auth())throw new Error("Auth module not registered on AmplifyService provider")},_C.prototype.shouldHide=function(t){return 0<this.hide.filter(function(e){return e===t}).length},_C.prototype.setPassword=function(e){this.password=e},_C.prototype.onSubmit=function(){var t=this,e=this._authState.user,n=e.challengeParam.requiredAttributes;this.amplifyService.auth().completeNewPassword(e,this.password,n).then(function(){t.onAlertClose(),t.amplifyService.setAuthState({state:"signIn",user:e})}).catch(function(e){return t._setError(e)})},_C.prototype.onSignIn=function(){this.onAlertClose(),this.amplifyService.setAuthState({state:"signIn",user:null})},_C.prototype.onAlertClose=function(){this._setError(null)},_C.prototype._setError=function(e){this.errorMessage=e?e.message||e:null},_C.decorators=[{type:f.Component,args:[{selector:"amplify-auth-require-new-password-core",template:oC}]}],_C.ctorParameters=function(){return[{type:mS,decorators:[{type:f.Inject,args:[mS]}]}]},_C.propDecorators={authState:[{type:f.Input}],hide:[{type:f.Input}],data:[{type:f.Input}]},_C);function _C(e){this.amplifyService=e,this.hide=[],this.logger=this.amplifyService.logger("RequireNewPasswordComponent")}var EC,IC,MS=(EC=function(e,t){return(EC=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}EC(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),bw='\n<div\n  class="amplify-authenticator amplify-authenticator-ionic"\n  *ngIf="_show"\n  data-test="'+US.section+'"\n  >\n  <div class="amplify-form-body" data-test="'+US.bodySection+'">\n    <div\n      class="amplify-form-header amplify-form-header-ionic"\n      data-test="'+US.headerSection+'"\n      >\n      {{ this.amplifyService.i18n().get(\'Reset your password\') }}\n    </div>\n    <ion-list>\n      <ion-item lines="none">\n        <ion-label class="amplify-input-label amplify-input-label-ionic" position="stacked">\n          {{ this.amplifyService.i18n().get(\'Password\') }}\n        </ion-label>\n        <ion-input\n          #password\n          type="password"\n          class="amplify-form-input"\n          (input)="setPassword(password.value)"\n          (keyup.enter)="onSubmit()"\n          data-test="'+US.newPasswordInput+'"\n        ></ion-input>\n      </ion-item>\n\n    </ion-list>\n\n    <div class="amplify-form-actions">\n      <div class="amplify-form-row">\n        <ion-button\n          expand="block"\n          (click)="onSignIn()"\n          data-test="'+US.backToSignInLink+'"\n        >{{ this.amplifyService.i18n().get(\'Back to Sign In\') }}</ion-button>\n      </div>\n      <div class="amplify-form-row">\n        <ion-button\n          expand="block"\n          (click)="onSubmit()"\n          data-test="'+US.submitButton+'"\n        >Submit</ion-button>\n      </div>\n    </div>\n  </div>\n  <div class="amplify-alert" *ngIf="errorMessage">\n    <div class="amplify-alert-body">\n      <span class="amplify-alert-icon">&#9888;</span>\n      <div class="amplify-alert-message">{{ errorMessage }}</div>\n      <a class="amplify-alert-close" (click)="onAlertClose()">&times;</a>\n    </div>\n  </div>\n</div>\n',AC=(MS(PC,IC=CC),PC.decorators=[{type:f.Component,args:[{selector:"amplify-auth-require-new-password-ionic",template:bw}]}],PC.ctorParameters=function(){return[{type:mS,decorators:[{type:f.Inject,args:[mS]}]}]},PC);function PC(e){var t=IC.call(this,e)||this;return t.amplifyService=e,t}function OC(e){this.componentFactoryResolver=e,this.hide=[]}OC.prototype.ngOnInit=function(){this.loadComponent()},OC.prototype.ngOnDestroy=function(){},OC.prototype.loadComponent=function(){var e=this.framework&&"ionic"===this.framework.toLowerCase()?new vi(AC,{authState:this.authState,hide:this.hide}):new vi(CC,{authState:this.authState,hide:this.hide}),t=this.componentFactoryResolver.resolveComponentFactory(e.component),n=this.componentHost.viewContainerRef;n.clear(),n.createComponent(t).instance.data=e.data},OC.decorators=[{type:f.Component,args:[{selector:"amplify-auth-require-new-password",template:"\n\t\t<div>\n\t\t\t<ng-template component-host></ng-template>\n\t\t</div>\n\t"}]}],OC.ctorParameters=function(){return[{type:f.ComponentFactoryResolver}]},OC.propDecorators={framework:[{type:f.Input}],authState:[{type:f.Input}],hide:[{type:f.Input}],componentHost:[{type:f.ViewChild,args:[mn]}]},wv=OC;var FS='\n<div class="amplify-greeting" *ngIf="signedIn">\n    <div class="amplify-greeting-text">{{ greeting }}</div>\n    <div class="amplify-greeting-flex-spacer"></div>\n    <a class="amplify-form-link amplify-greeting-sign-out"\n      (click)="onSignOut()"\n      data-test="'+LS.signOutButton+"\"\n    >{{ this.amplifyService.i18n().get('Sign Out') }}</a>\n</div>\n",kC=(Object.defineProperty(TC.prototype,"usernameAttributes",{set:function(e){this._usernameAttributes=e},enumerable:!0,configurable:!0}),TC.prototype.ngOnInit=function(){if(!this.amplifyService.auth())throw new Error("Auth module not registered on AmplifyService provider")},TC.prototype.subscribe=function(){var t=this;this.amplifyService.authStateChange$.subscribe(function(e){return t.setAuthState(e)})},TC.prototype.setAuthState=function(e){this.authState=e,this.signedIn="signedIn"===e.state;var t="";e.user&&(t=this._usernameAttributes===nC.EMAIL?e.user.attributes?e.user.attributes.email:e.user.username:this._usernameAttributes===nC.PHONE_NUMBER&&e.user.attributes?e.user.attributes.phone_number:e.user.username),this.greeting=this.signedIn?this.amplifyService.i18n().get("Hello, {{username}}").replace("{{username}}",t):""},TC.prototype.onSignOut=function(){this.amplifyService.auth().signOut()},TC.decorators=[{type:f.Component,args:[{selector:"amplify-auth-greetings-core",template:FS}]}],TC.ctorParameters=function(){return[{type:mS,decorators:[{type:f.Inject,args:[mS]}]}]},TC.propDecorators={authState:[{type:f.Input}],usernameAttributes:[{type:f.Input}]},TC);function TC(e){this.amplifyService=e,this._usernameAttributes="username",this.logger=this.amplifyService.logger("GreetingComponent"),this.subscribe()}var xC,NC,RS=(xC=function(e,t){return(xC=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}xC(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),iS='\n<div class="amplify-greeting" *ngIf="signedIn">\n    <div class="amplify-greeting-text">{{ greeting }}</div>\n    <div class="amplify-greeting-flex-spacer"></div>\n    <ion-button\n        class="amplify-greeting-sign-out"\n        size="small"\n        *ngIf="signedIn"\n        (click)="onSignOut()"\n        data-test="'+LS.signOutButton+"\"\n      >{{ this.amplifyService.i18n().get('Sign Out') }}</ion-button>\n</div>\n",MC=(RS(RC,NC=kC),RC.decorators=[{type:f.Component,args:[{selector:"amplify-auth-greetings-ionic",template:iS}]}],RC.ctorParameters=function(){return[{type:mS,decorators:[{type:f.Inject,args:[mS]}]}]},RC);function RC(e){var t=NC.call(this,e)||this;return t.amplifyService=e,t}function UC(e){this.componentFactoryResolver=e,this.usernameAttributes="username"}UC.prototype.ngOnInit=function(){this.loadComponent()},UC.prototype.ngOnDestroy=function(){},UC.prototype.loadComponent=function(){var e=this.framework&&"ionic"===this.framework.toLowerCase()?new vi(MC,{authState:this.authState,usernameAttributes:this.usernameAttributes}):new vi(kC,{authState:this.authState,usernameAttributes:this.usernameAttributes}),t=this.componentFactoryResolver.resolveComponentFactory(e.component),n=this.componentHost.viewContainerRef;n.clear(),n.createComponent(t).instance.data=e.data},UC.decorators=[{type:f.Component,args:[{selector:"amplify-auth-greetings",template:"\n\t\t<div>\n\t\t\t<ng-template component-host></ng-template>\n\t\t</div>\n\t"}]}],UC.ctorParameters=function(){return[{type:f.ComponentFactoryResolver}]},UC.propDecorators={framework:[{type:f.Input}],authState:[{type:f.Input}],usernameAttributes:[{type:f.Input}],componentHost:[{type:f.ViewChild,args:[mn]}]},Tw=UC;var oC='\n<div class="amplify-container" *ngIf="_show">\n  <div class="amplify-form-container" data-test="'+jS.section+'">\n    <div class="amplify-form-body" data-test="'+jS.bodySection+'">\n    <div class="amplify-form-header" data-test="'+jS.headerSection+'">\n      {{ this.amplifyService.i18n().get(\'Reset your password\') }}\n    </div>\n    <div class="amplify-form-text" *ngIf="!code_sent">\n      {{ this.amplifyService.i18n().get(\'You will receive a verification code\') }}\n    </div>\n    <div class="amplify-form-text" *ngIf="code_sent">\n      {{ this.amplifyService.i18n().get(\'Enter the code you received and set a new password\') }}\n    </div>\n    <amplify-auth-username-field-core\n      *ngIf="!code_sent"\n      [usernameAttributes]="_usernameAttributes"\n      (usernameFieldChanged)="onUsernameFieldChanged($event)"\n    ></amplify-auth-username-field-core>\n      <div class="amplify-form-row" *ngIf="code_sent">\n      <label class="amplify-input-label" for="code">\n        {{ this.amplifyService.i18n().get(\'Confirmation Code *\') }}\n      </label>\n      <input #code\n        (keyup)="setCode(code.value)"\n        class="amplify-form-input"\n        type="text"\n        autocomplete="off"\n        placeholder="{{ this.amplifyService.i18n().get(\'Enter code\') }}"\n        data-test="'+jS.codeInput+'"\n      />\n      </div>\n      <div class="amplify-form-row" *ngIf="code_sent">\n      <label class="amplify-input-label" for="password">\n        {{ this.amplifyService.i18n().get(\'New Password *\') }}\n      </label>\n      <input #password\n        (keyup)="setPassword(password.value)"\n        (keyup.enter)="onSubmit()"\n        class="amplify-form-input"\n        type="password"\n        autocomplete="off"\n        placeholder="{{ this.amplifyService.i18n().get(\'Password\') }}"\n        data-test="'+jS.newPasswordInput+'"\n      />\n      </div>\n      <div class="amplify-form-actions">\n        <div class="amplify-form-cell-right">\n          <button class="amplify-form-button"\n            *ngIf="!code_sent"\n            (click)="onSend()"\n            data-test="'+jS.sendCodeButton+'"\n            >\n              {{ this.amplifyService.i18n().get(\'Submit\') }}</button>\n          <button class="amplify-form-button"\n            *ngIf="code_sent"\n            (click)="onSubmit()"\n            data-test="'+jS.submitButton+'"\n            >\n              {{ this.amplifyService.i18n().get(\'Verify\') }}</button>\n        </div>\n        <div class="amplify-form-cell-left">\n          <div class="amplify-form-actions-left">\n            <a\n              *ngIf="code_sent"\n              class="amplify-form-link"\n              (click)="onSend()"\n              data-test="'+jS.resendCodeLink+'"\n              >\n              {{ this.amplifyService.i18n().get(\'Resend Code\') }}\n            </a>\n            <a\n              *ngIf="!code_sent"\n              class="amplify-form-link"\n              (click)="onSignIn()"\n              data-test="'+jS.backToSignInLink+'"\n              >\n              {{ this.amplifyService.i18n().get(\'Back to Sign in\') }}\n            </a>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n  <div class="amplify-alert" *ngIf="errorMessage">\n    <div class="amplify-alert-body">\n      <span class="amplify-alert-icon">&#9888;</span>\n      <div class="amplify-alert-message">{{ this.amplifyService.i18n().get(errorMessage) }}</div>\n      <a class="amplify-alert-close" (click)="onAlertClose()">&times;</a>\n    </div>\n  </div>\n</div>\n',DC=(Object.defineProperty(LC.prototype,"data",{set:function(e){this._authState=e.authState,this._show="forgotPassword"===e.authState.state,this._usernameAttributes=e.usernameAttributes,this.hide=e.hide||this.hide,this.username=e.authState.user&&e.authState.user.username?e.authState.user.username:""},enumerable:!0,configurable:!0}),LC.prototype.shouldHide=function(t){return 0<this.hide.filter(function(e){return e===t}).length},Object.defineProperty(LC.prototype,"authState",{set:function(e){this._authState=e,this._show="forgotPassword"===e.state,this.email=e.user&&e.user.email?e.user.email:"",this.country_code=e.user&&e.user.contry_code?e.user.country_code:"1",this.local_phone_number=e.user&&e.user.local_phone_number?e.user.local_phone_number:"",this.username=e.user&&e.user.username?e.user.username:""},enumerable:!0,configurable:!0}),LC.prototype.ngOnInit=function(){if(!this.amplifyService.auth())throw new Error("Auth module not registered on AmplifyService provider")},Object.defineProperty(LC.prototype,"usernameAttributes",{set:function(e){this._usernameAttributes=e},enumerable:!0,configurable:!0}),LC.prototype.setCode=function(e){this.code=e},LC.prototype.setPassword=function(e){this.password=e},LC.prototype.getforgotPwUsername=function(){switch(this._usernameAttributes){case nC.EMAIL:return this.email;case nC.PHONE_NUMBER:return $S(this.country_code,this.local_phone_number);default:return this.username}},LC.prototype.onSend=function(){var t=this,e=this.getforgotPwUsername();e?this.amplifyService.auth().forgotPassword(e).then(function(){t.code_sent=!0}).catch(function(e){t._setError(e),t.code_sent=!1}):this.errorMessage="Username cannot be empty"},LC.prototype.onSubmit=function(){var t=this;this.amplifyService.auth().forgotPasswordSubmit(this.getforgotPwUsername(),this.code,this.password).then(function(){var e={username:t.username};t.onAlertClose(),t.amplifyService.setAuthState({state:"signIn",user:e})}).catch(function(e){return t._setError(e)})},LC.prototype.onSignIn=function(){this.onAlertClose(),this.amplifyService.setAuthState({state:"signIn",user:null})},LC.prototype.onAlertClose=function(){this._setError(null)},LC.prototype._setError=function(e){this.errorMessage=e?e.message||e:null},LC.prototype.getUsernameLabel=function(){return YS[this._usernameAttributes]||this._usernameAttributes},LC.prototype.onUsernameFieldChanged=function(e){this.email=e.email||this.email,this.username=e.username||this.username,this.country_code=e.country_code||this.country_code,this.local_phone_number=e.local_phone_number||this.local_phone_number},LC.decorators=[{type:f.Component,args:[{selector:"amplify-auth-forgot-password-core",template:oC}]}],LC.ctorParameters=function(){return[{type:mS,decorators:[{type:f.Inject,args:[mS]}]}]},LC.propDecorators={data:[{type:f.Input}],hide:[{type:f.Input}],authState:[{type:f.Input}],usernameAttributes:[{type:f.Input}]},LC);function LC(e){this.amplifyService=e,this._usernameAttributes="username",this.code_sent=!1,this.country_code="1",this.hide=[],this.logger=this.amplifyService.logger("ForgotPasswordComponent")}var FC,jC,US=(FC=function(e,t){return(FC=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}FC(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),MS='\n<div\n  class="amplify-authenticator amplify-authenticator-ionic"\n  *ngIf="_show"\n  data-test="'+jS.section+'"\n  >\n  <div class="amplify-form-body" data-test="'+jS.bodySection+'">\n  <div\n    class="amplify-form-header amplify-form-header-ionic"\n    data-test="'+jS.headerSection+'"\n    >\n    {{ this.amplifyService.i18n().get(\'Reset your password\') }}\n  </div>\n  <div class="amplify-form-text" *ngIf="!code_sent">\n    {{ this.amplifyService.i18n().get(\'You will receive a verification code to reset your password\') }}\n  </div>\n\n  <ion-list>\n    <amplify-auth-username-field-ionic\n      [usernameAttributes]="_usernameAttributes"\n      (usernameFieldChanged)="onUsernameFieldChanged($event)"\n    ></amplify-auth-username-field-ionic>\n    <ion-item lines="none" *ngIf="code_sent">\n      <ion-label class="amplify-input-label amplify-input-label-ionic" position="stacked">\n        {{ this.amplifyService.i18n().get(\'Code *\') }}\n      </ion-label>\n      <ion-input\n        #code\n        type="text"\n        class="amplify-form-input"\n        (input)="setCode(code.value)"\n        data-test="'+jS.codeInput+'"\n      ></ion-input>\n    </ion-item>\n    <ion-item lines="none" *ngIf="code_sent">\n      <ion-label class="amplify-input-label amplify-input-label-ionic" position="stacked">\n        {{ this.amplifyService.i18n().get(\'Password *\') }}\n      </ion-label>\n      <ion-input\n        #password\n        type="password"\n        class="amplify-form-input"\n        (input)="setPassword(password.value)"\n        (keyup.enter)="onSubmit()"\n        data-test="'+jS.newPasswordInput+'"\n      ></ion-input>\n    </ion-item>\n  </ion-list>\n  <div class="amplify-form-actions">\n    <div>\n      <ion-button expand="block" color="primary"\n        (click)="onSend()"\n        *ngIf="!code_sent"\n        data-test="'+jS.submitButton+'"\n      >\n        {{ this.amplifyService.i18n().get(\'Submit\') }}</ion-button>\n      <ion-button expand="block" color="primary"\n      *ngIf="code_sent"\n      (click)="onSubmit()"\n      >{{ this.amplifyService.i18n().get(\'Verify\') }}</ion-button>\n    </div>\n    <div class="amplify-form-row">\n      <div class="amplify-form-signup">\n        {{ this.amplifyService.i18n().get(\'Have an account?\') }}\n        <a class="amplify-form-link" (click)="onSignIn()">\n          {{ this.amplifyService.i18n().get(\'Sign In\') }}\n        </a>\n      </div>\n      <div class="amplify-form-signup">\n        {{ this.amplifyService.i18n().get(\'Lost your code?\') }}\n        <a\n          class="amplify-form-link"\n          (click)="onSend()"\n          data-test="'+jS.resendCodeLink+'"\n          >\n          {{ this.amplifyService.i18n().get(\'Resend\') }}\n        </a>\n      </div>\n    </div>\n  </div>\n  </div>\n  <div class="amplify-alert" *ngIf="errorMessage">\n    <div class="amplify-alert-body">\n      <span class="amplify-alert-icon">&#9888;</span>\n      <div class="amplify-alert-message">{{ this.amplifyService.i18n().get(errorMessage) }}</div>\n      <a class="amplify-alert-close" (click)="onAlertClose()">&times;</a>\n    </div>\n  </div>\n\n</div>\n',BC=(US(VC,jC=DC),VC.prototype.onCodeChange=function(e){this.country_code=e},VC.prototype.onNumberChange=function(e){this.local_phone_number=e},VC.prototype.setUsername=function(e){this.username=e},VC.prototype.setEmail=function(e){this.email=e},VC.decorators=[{type:f.Component,args:[{selector:"amplify-auth-forgot-password-ionic",template:MS}]}],VC.ctorParameters=function(){return[{type:mS,decorators:[{type:f.Inject,args:[mS]}]}]},VC);function VC(e){var t=jC.call(this,e)||this;return t.amplifyService=e,t}function zC(e){this.componentFactoryResolver=e,this.usernameAttributes="username",this.hide=[]}zC.prototype.ngOnInit=function(){this.loadComponent()},zC.prototype.ngOnDestroy=function(){},zC.prototype.loadComponent=function(){var e=this.framework&&"ionic"===this.framework.toLowerCase()?new vi(BC,{authState:this.authState,hide:this.hide,usernameAttributes:this.usernameAttributes}):new vi(DC,{authState:this.authState,hide:this.hide,usernameAttributes:this.usernameAttributes}),t=this.componentFactoryResolver.resolveComponentFactory(e.component),n=this.componentHost.viewContainerRef;n.clear(),n.createComponent(t).instance.data=e.data},zC.decorators=[{type:f.Component,args:[{selector:"amplify-auth-forgot-password",template:"\n\t\t<div>\n\t\t\t<ng-template component-host></ng-template>\n\t\t</div>\n\t"}]}],zC.ctorParameters=function(){return[{type:f.ComponentFactoryResolver}]},zC.propDecorators={framework:[{type:f.Input}],authState:[{type:f.Input}],usernameAttributes:[{type:f.Input}],hide:[{type:f.Input}],componentHost:[{type:f.ViewChild,args:[mn]}]},bw=zC;var qC=function(){return(qC=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},FS='\n<div class="amplify-amplify-form-row amplify-signin-username">\n    <div *ngIf="this._usernameAttributes === \'email\'">\n        <label class="amplify-input-label" for="emailField"> {{ this.amplifyService.i18n().get(\'Email\') }} *</label>\n        <input\n            #emailField\n            class="amplify-form-input"\n            type="email"\n            placeholder="{{ this.amplifyService.i18n().get(this.getPlaceholder()) }}"\n            (keyup)="setEmail($event.target.value)"\n            data-test="'+DS.emailInput+'"\n        />\n    </div>\n    <div *ngIf="this._usernameAttributes === \'phone_number\'">\n        <amplify-auth-phone-field-core\n            (phoneFieldChanged)="onPhoneFieldChanged($event)"\n        ></amplify-auth-phone-field-core>\n    </div>\n    <div *ngIf="this._usernameAttributes !== \'email\' && this._usernameAttributes !== \'phone_number\'">\n        <label class="amplify-input-label" for="usernameField"> {{ this.amplifyService.i18n().get(getUsernameLabel()) }} *</label>\n        <input\n            #usernameField\n            class="amplify-form-input"\n            type="text"\n            value="{{this.username}}"\n            placeholder="{{ this.amplifyService.i18n().get(this.getPlaceholder()) }}"\n            (keyup)="setUsername($event.target.value)"\n            data-test="'+DS.usernameInput+'"\n        />\n    </div>\n</div>\n',LS=(Object.defineProperty(KC.prototype,"data",{set:function(e){this._usernameAttributes=e.usernameAttributes,this._placeholder=e.placeholder},enumerable:!0,configurable:!0}),Object.defineProperty(KC.prototype,"usernameAttributes",{set:function(e){this._usernameAttributes=e},enumerable:!0,configurable:!0}),Object.defineProperty(KC.prototype,"placeholder",{set:function(e){this._placeholder=e},enumerable:!0,configurable:!0}),KC.prototype.ngOnInit=function(){var e;window&&window.location&&window.location.search&&"email"!==this._usernameAttributes&&"phone_number"!==this._usernameAttributes&&(e=(e=new URLSearchParams(window.location.search))?e.get("username"):void 0,this.setUsername(e),this.username=e)},KC.prototype.ngOnDestroy=function(){},KC.prototype.setUsername=function(e){this.usernameFieldChanged.emit({username:e})},KC.prototype.setEmail=function(e){this.usernameFieldChanged.emit({email:e})},KC.prototype.getUsernameLabel=function(){return YS[this._usernameAttributes]||this._usernameAttributes},KC.prototype.getPlaceholder=function(){return this.amplifyService.i18n().get(""+this.getUsernameLabel()||this._placeholder)},KC.prototype.onPhoneFieldChanged=function(e){this.usernameFieldChanged.emit(qC({},e))},KC.decorators=[{type:f.Component,args:[{selector:"amplify-auth-username-field-core",template:FS}]}],KC.ctorParameters=function(){return[{type:mS,decorators:[{type:f.Inject,args:[mS]}]}]},KC.propDecorators={data:[{type:f.Input}],usernameAttributes:[{type:f.Input}],placeholder:[{type:f.Input}],usernameFieldChanged:[{type:f.Output}]},KC);function KC(e){this.amplifyService=e,this._usernameAttributes=nC.USERNAME,this._placeholder="",this.usernameFieldChanged=new f.EventEmitter,this.onPhoneFieldChanged=this.onPhoneFieldChanged.bind(this)}var HC=[{countryCode:"US",value:"1",label:"USA (+1)"},{countryCode:"GB",value:"44",label:"UK (+44)"},{countryCode:"DZ",value:"213",label:"Algeria (+213)"},{countryCode:"AD",value:"376",label:"Andorra (+376)"},{countryCode:"AO",value:"244",label:"Angola (+244)"},{countryCode:"AI",value:"1264",label:"Anguilla (+1264)"},{countryCode:"AG",value:"1268",label:"Antigua & Barbuda (+1268)"},{countryCode:"AR",value:"54",label:"Argentina (+54)"},{countryCode:"AM",value:"374",label:"Armenia (+374)"},{countryCode:"AW",value:"297",label:"Aruba (+297)"},{countryCode:"AU",value:"61",label:"Australia (+61)"},{countryCode:"AT",value:"43",label:"Austria (+43)"},{countryCode:"AZ",value:"994",label:"Azerbaijan (+994)"},{countryCode:"BS",value:"1242",label:"Bahamas (+1242)"},{countryCode:"BH",value:"973",label:"Bahrain (+973)"},{countryCode:"BD",value:"880",label:"Bangladesh (+880)"},{countryCode:"BB",value:"1246",label:"Barbados (+1246)"},{countryCode:"BY",value:"375",label:"Belarus (+375)"},{countryCode:"BE",value:"32",label:"Belgium (+32)"},{countryCode:"BZ",value:"501",label:"Belize (+501)"},{countryCode:"BJ",value:"229",label:"Benin (+229)"},{countryCode:"BM",value:"1441",label:"Bermuda (+1441)"},{countryCode:"BT",value:"975",label:"Bhutan (+975)"},{countryCode:"BO",value:"591",label:"Bolivia (+591)"},{countryCode:"BA",value:"387",label:"Bosnia Herzegovina (+387)"},{countryCode:"BW",value:"267",label:"Botswana (+267)"},{countryCode:"BR",value:"55",label:"Brazil (+55)"},{countryCode:"BN",value:"673",label:"Brunei (+673)"},{countryCode:"BG",value:"359",label:"Bulgaria (+359)"},{countryCode:"BF",value:"226",label:"Burkina Faso (+226)"},{countryCode:"BI",value:"257",label:"Burundi (+257)"},{countryCode:"KH",value:"855",label:"Cambodia (+855)"},{countryCode:"CM",value:"237",label:"Cameroon (+237)"},{countryCode:"CA",value:"1",label:"Canada (+1)"},{countryCode:"CV",value:"238",label:"Cape Verde Islands (+238)"},{countryCode:"KY",value:"1345",label:"Cayman Islands (+1345)"},{countryCode:"CF",value:"236",label:"Central African Republic (+236)"},{countryCode:"CL",value:"56",label:"Chile (+56)"},{countryCode:"CN",value:"86",label:"China (+86)"},{countryCode:"CO",value:"57",label:"Colombia (+57)"},{countryCode:"KM",value:"269",label:"Comoros (+269)"},{countryCode:"CG",value:"242",label:"Congo (+242)"},{countryCode:"CK",value:"682",label:"Cook Islands (+682)"},{countryCode:"CR",value:"506",label:"Costa Rica (+506)"},{countryCode:"HR",value:"385",label:"Croatia (+385)"},{countryCode:"CU",value:"53",label:"Cuba (+53)"},{countryCode:"CW",value:"599",label:"Curacao (+599)"},{countryCode:"CY",value:"90392",label:"Cyprus North (+90392)"},{countryCode:"CY",value:"357",label:"Cyprus South (+357)"},{countryCode:"CZ",value:"420",label:"Czech Republic (+420)"},{countryCode:"DK",value:"45",label:"Denmark (+45)"},{countryCode:"DJ",value:"253",label:"Djibouti (+253)"},{countryCode:"DM",value:"1809",label:"Dominica (+1809)"},{countryCode:"DO",value:"1809",label:"Dominican Republic (+1809)"},{countryCode:"EC",value:"593",label:"Ecuador (+593)"},{countryCode:"EG",value:"20",label:"Egypt (+20)"},{countryCode:"SV",value:"503",label:"El Salvador (+503)"},{countryCode:"GQ",value:"240",label:"Equatorial Guinea (+240)"},{countryCode:"ER",value:"291",label:"Eritrea (+291)"},{countryCode:"EE",value:"372",label:"Estonia (+372)"},{countryCode:"ET",value:"251",label:"Ethiopia (+251)"},{countryCode:"FK",value:"500",label:"Falkland Islands (+500)"},{countryCode:"FO",value:"298",label:"Faroe Islands (+298)"},{countryCode:"FJ",value:"679",label:"Fiji (+679)"},{countryCode:"FI",value:"358",label:"Finland (+358)"},{countryCode:"FR",value:"33",label:"France (+33)"},{countryCode:"GF",value:"594",label:"French Guiana (+594)"},{countryCode:"PF",value:"689",label:"French Polynesia (+689)"},{countryCode:"GA",value:"241",label:"Gabon (+241)"},{countryCode:"GM",value:"220",label:"Gambia (+220)"},{countryCode:"GE",value:"7880",label:"Georgia (+7880)"},{countryCode:"DE",value:"49",label:"Germany (+49)"},{countryCode:"GH",value:"233",label:"Ghana (+233)"},{countryCode:"GI",value:"350",label:"Gibraltar (+350)"},{countryCode:"GR",value:"30",label:"Greece (+30)"},{countryCode:"GL",value:"299",label:"Greenland (+299)"},{countryCode:"GD",value:"1473",label:"Grenada (+1473)"},{countryCode:"GP",value:"590",label:"Guadeloupe (+590)"},{countryCode:"GU",value:"671",label:"Guam (+671)"},{countryCode:"GT",value:"502",label:"Guatemala (+502)"},{countryCode:"GN",value:"224",label:"Guinea (+224)"},{countryCode:"GW",value:"245",label:"Guinea - Bissau (+245)"},{countryCode:"GY",value:"592",label:"Guyana (+592)"},{countryCode:"HT",value:"509",label:"Haiti (+509)"},{countryCode:"HN",value:"504",label:"Honduras (+504)"},{countryCode:"HK",value:"852",label:"Hong Kong (+852)"},{countryCode:"HU",value:"36",label:"Hungary (+36)"},{countryCode:"IS",value:"354",label:"Iceland (+354)"},{countryCode:"IN",value:"91",label:"India (+91)"},{countryCode:"ID",value:"62",label:"Indonesia (+62)"},{countryCode:"IR",value:"98",label:"Iran (+98)"},{countryCode:"IQ",value:"964",label:"Iraq (+964)"},{countryCode:"IE",value:"353",label:"Ireland (+353)"},{countryCode:"IL",value:"972",label:"Israel (+972)"},{countryCode:"IT",value:"39",label:"Italy (+39)"},{countryCode:"JM",value:"1876",label:"Jamaica (+1876)"},{countryCode:"JP",value:"81",label:"Japan (+81)"},{countryCode:"JO",value:"962",label:"Jordan (+962)"},{countryCode:"KZ",value:"7",label:"Kazakhstan (+7)"},{countryCode:"KE",value:"254",label:"Kenya (+254)"},{countryCode:"KI",value:"686",label:"Kiribati (+686)"},{countryCode:"KP",value:"850",label:"Korea North (+850)"},{countryCode:"KR",value:"82",label:"Korea South (+82)"},{countryCode:"KW",value:"965",label:"Kuwait (+965)"},{countryCode:"KG",value:"996",label:"Kyrgyzstan (+996)"},{countryCode:"LA",value:"856",label:"Laos (+856)"},{countryCode:"LV",value:"371",label:"Latvia (+371)"},{countryCode:"LB",value:"961",label:"Lebanon (+961)"},{countryCode:"LS",value:"266",label:"Lesotho (+266)"},{countryCode:"LR",value:"231",label:"Liberia (+231)"},{countryCode:"LY",value:"218",label:"Libya (+218)"},{countryCode:"LI",value:"417",label:"Liechtenstein (+417)"},{countryCode:"LT",value:"370",label:"Lithuania (+370)"},{countryCode:"LU",value:"352",label:"Luxembourg (+352)"},{countryCode:"MO",value:"853",label:"Macao (+853)"},{countryCode:"MK",value:"389",label:"Macedonia (+389)"},{countryCode:"MG",value:"261",label:"Madagascar (+261)"},{countryCode:"MW",value:"265",label:"Malawi (+265)"},{countryCode:"MY",value:"60",label:"Malaysia (+60)"},{countryCode:"MV",value:"960",label:"Maldives (+960)"},{countryCode:"ML",value:"223",label:"Mali (+223)"},{countryCode:"MT",value:"356",label:"Malta (+356)"},{countryCode:"MH",value:"692",label:"Marshall Islands (+692)"},{countryCode:"MQ",value:"596",label:"Martinique (+596)"},{countryCode:"MR",value:"222",label:"Mauritania (+222)"},{countryCode:"YT",value:"269",label:"Mayotte (+269)"},{countryCode:"MX",value:"52",label:"Mexico (+52)"},{countryCode:"FM",value:"691",label:"Micronesia (+691)"},{countryCode:"MD",value:"373",label:"Moldova (+373)"},{countryCode:"MC",value:"377",label:"Monaco (+377)"},{countryCode:"MN",value:"976",label:"Mongolia (+976)"},{countryCode:"MS",value:"1664",label:"Montserrat (+1664)"},{countryCode:"MA",value:"212",label:"Morocco (+212)"},{countryCode:"MZ",value:"258",label:"Mozambique (+258)"},{countryCode:"MN",value:"95",label:"Myanmar (+95)"},{countryCode:"NA",value:"264",label:"Namibia (+264)"},{countryCode:"NR",value:"674",label:"Nauru (+674)"},{countryCode:"NP",value:"977",label:"Nepal (+977)"},{countryCode:"NL",value:"31",label:"Netherlands (+31)"},{countryCode:"NC",value:"687",label:"New Caledonia (+687)"},{countryCode:"NZ",value:"64",label:"New Zealand (+64)"},{countryCode:"NI",value:"505",label:"Nicaragua (+505)"},{countryCode:"NE",value:"227",label:"Niger (+227)"},{countryCode:"NG",value:"234",label:"Nigeria (+234)"},{countryCode:"NU",value:"683",label:"Niue (+683)"},{countryCode:"NF",value:"672",label:"Norfolk Islands (+672)"},{countryCode:"NP",value:"670",label:"Northern Marianas (+670)"},{countryCode:"NO",value:"47",label:"Norway (+47)"},{countryCode:"OM",value:"968",label:"Oman (+968)"},{countryCode:"PW",value:"680",label:"Palau (+680)"},{countryCode:"PA",value:"507",label:"Panama (+507)"},{countryCode:"PG",value:"675",label:"Papua New Guinea (+675)"},{countryCode:"PY",value:"595",label:"Paraguay (+595)"},{countryCode:"PE",value:"51",label:"Peru (+51)"},{countryCode:"PH",value:"63",label:"Philippines (+63)"},{countryCode:"PL",value:"48",label:"Poland (+48)"},{countryCode:"PT",value:"351",label:"Portugal (+351)"},{countryCode:"PR",value:"1787",label:"Puerto Rico (+1787)"},{countryCode:"QA",value:"974",label:"Qatar (+974)"},{countryCode:"RE",value:"262",label:"Reunion (+262)"},{countryCode:"RO",value:"40",label:"Romania (+40)"},{countryCode:"RU",value:"7",label:"Russia (+7)"},{countryCode:"RW",value:"250",label:"Rwanda (+250)"},{countryCode:"SM",value:"378",label:"San Marino (+378)"},{countryCode:"ST",value:"239",label:"Sao Tome & Principe (+239)"},{countryCode:"SA",value:"966",label:"Saudi Arabia (+966)"},{countryCode:"SN",value:"221",label:"Senegal (+221)"},{countryCode:"CS",value:"381",label:"Serbia (+381)"},{countryCode:"SC",value:"248",label:"Seychelles (+248)"},{countryCode:"SL",value:"232",label:"Sierra Leone (+232)"},{countryCode:"SX",value:"1",label:"Sint Maarten (+1)"},{countryCode:"SG",value:"65",label:"Singapore (+65)"},{countryCode:"SK",value:"421",label:"Slovak Republic (+421)"},{countryCode:"SI",value:"386",label:"Slovenia (+386)"},{countryCode:"SB",value:"677",label:"Solomon Islands (+677)"},{countryCode:"SO",value:"252",label:"Somalia (+252)"},{countryCode:"ZA",value:"27",label:"South Africa (+27)"},{countryCode:"ES",value:"34",label:"Spain (+34)"},{countryCode:"LK",value:"94",label:"Sri Lanka (+94)"},{countryCode:"SH",value:"290",label:"St. Helena (+290)"},{countryCode:"KN",value:"1869",label:"St. Kitts (+1869)"},{countryCode:"SC",value:"1758",label:"St. Lucia (+1758)"},{countryCode:"SD",value:"249",label:"Sudan (+249)"},{countryCode:"SR",value:"597",label:"Suriname (+597)"},{countryCode:"SZ",value:"268",label:"Swaziland (+268)"},{countryCode:"SE",value:"46",label:"Sweden (+46)"},{countryCode:"CH",value:"41",label:"Switzerland (+41)"},{countryCode:"SI",value:"963",label:"Syria (+963)"},{countryCode:"TW",value:"886",label:"Taiwan (+886)"},{countryCode:"TJ",value:"7",label:"Tajikstan (+7)"},{countryCode:"TH",value:"66",label:"Thailand (+66)"},{countryCode:"TG",value:"228",label:"Togo (+228)"},{countryCode:"TO",value:"676",label:"Tonga (+676)"},{countryCode:"TT",value:"1868",label:"Trinidad & Tobago (+1868)"},{countryCode:"TN",value:"216",label:"Tunisia (+216)"},{countryCode:"TR",value:"90",label:"Turkey (+90)"},{countryCode:"TM",value:"7",label:"Turkmenistan (+7)"},{countryCode:"TM",value:"993",label:"Turkmenistan (+993)"},{countryCode:"TC",value:"1649",label:"Turks & Caicos Islands (+1649)"},{countryCode:"TV",value:"688",label:"Tuvalu (+688)"},{countryCode:"UG",value:"256",label:"Uganda (+256)"},{countryCode:"UA",value:"380",label:"Ukraine (+380)"},{countryCode:"AE",value:"971",label:"United Arab Emirates (+971)"},{countryCode:"UY",value:"598",label:"Uruguay (+598)"},{countryCode:"UZ",value:"7",label:"Uzbekistan (+7)"},{countryCode:"VU",value:"678",label:"Vanuatu (+678)"},{countryCode:"VA",value:"379",label:"Vatican City (+379)"},{countryCode:"VE",value:"58",label:"Venezuela (+58)"},{countryCode:"VN",value:"84",label:"Vietnam (+84)"},{countryCode:"VG",value:"84",label:"Virgin Islands - British (+1284)"},{countryCode:"VI",value:"84",label:"Virgin Islands - US (+1340)"},{countryCode:"WF",value:"681",label:"Wallis and Futuna (+681)"},{countryCode:"YE",value:"969",label:"Yemen (North) (+969)"},{countryCode:"YE",value:"967",label:"Yemen (South) (+967)"},{countryCode:"ZM",value:"260",label:"Zambia (+260)"},{countryCode:"ZW",value:"263",label:"Zimbabwe (+263)"}],RS='\n<div>\n    <label class="amplify-input-label" for="localPhoneNumberField">\n        {{ this.amplifyService.i18n().get(this._label) }}\n        <span *ngIf="_required">*</span>\n    </label>\n    <div class="amplify-input-group">\n        <div class="amplify-input-group-item">\n            <select \n            #countryCodeField\n            name="countryCode"\n            class="amplify-select-phone-country"\n            [(ngModel)]="_country_code"\n            (change)="setCountryCode($event.target.value)"\n            data-test="'+DS.dialCodeSelect+'"\n            >\n            <option *ngFor="let country of _countries"\n                value={{country.value}}>\n                {{country.label}}\n            </option>\n            </select>\n        </div>\n        <div class="amplify-input-group-item">\n            <input\n                #localPhoneNumberField\n                class="amplify-form-input"\n                placeholder="{{ this.amplifyService.i18n().get(this.getPlaceholder()) }}"\n                name="local_phone_number"\n                type="tel"\n                (keyup)="setLocalPhoneNumber($event.target.value)"\n                data-test="'+DS.phoneNumberInput+'"\n            />\n        </div>\n    </div>\n</div>\n',iS=(Object.defineProperty(GC.prototype,"data",{set:function(e){this._placeholder=e.placeholder||this._placeholder,this._label=e.label||this._label,this._country_code=e.defaultCountryCode||this._country_code,this._required=void 0===e.required?this._required:e.required},enumerable:!0,configurable:!0}),Object.defineProperty(GC.prototype,"placeholder",{set:function(e){this._placeholder=e},enumerable:!0,configurable:!0}),Object.defineProperty(GC.prototype,"label",{set:function(e){this._label=e},enumerable:!0,configurable:!0}),Object.defineProperty(GC.prototype,"required",{set:function(e){this._required=e},enumerable:!0,configurable:!0}),Object.defineProperty(GC.prototype,"defaultCountryCode",{set:function(e){this._country_code=e},enumerable:!0,configurable:!0}),GC.prototype.ngOnInit=function(){},GC.prototype.ngOnDestroy=function(){},GC.prototype.setCountryCode=function(e){this._country_code=e,this.phoneFieldChanged.emit({country_code:this._country_code,local_phone_number:this._local_phone_number})},GC.prototype.setLocalPhoneNumber=function(e){this._local_phone_number=e,this.phoneFieldChanged.emit({country_code:this._country_code,local_phone_number:this._local_phone_number})},GC.prototype.getPlaceholder=function(){return this.amplifyService.i18n().get("Enter your phone number")},GC.decorators=[{type:f.Component,args:[{selector:"amplify-auth-phone-field-core",template:RS}]}],GC.ctorParameters=function(){return[{type:mS,decorators:[{type:f.Inject,args:[mS]}]}]},GC.propDecorators={data:[{type:f.Input}],placeholder:[{type:f.Input}],label:[{type:f.Input}],required:[{type:f.Input}],defaultCountryCode:[{type:f.Input}],phoneFieldChanged:[{type:f.Output}]},GC);function GC(e){this.amplifyService=e,this._placeholder="",this._label="Phone Number",this._required=!0,this._country_code="1",this._local_phone_number="",this.phoneFieldChanged=new f.EventEmitter,this._countries=HC}var WC=($C.prototype.ngOnInit=function(){if(!this.amplifyService.storage())throw new Error("Storage module not registered on AmplifyService provider");this.getList(this._path,this._options)},$C.prototype.onImageSelected=function(e){this.selected.emit(e)},Object.defineProperty($C.prototype,"data",{set:function(e){e.path&&(this._path=e.path,this._options=e.options)},enumerable:!0,configurable:!0}),Object.defineProperty($C.prototype,"path",{set:function(e){this._path=e},enumerable:!0,configurable:!0}),Object.defineProperty($C.prototype,"options",{set:function(e){this._options=e},enumerable:!0,configurable:!0}),$C.prototype.getList=function(e,t){var n=this;e&&this.amplifyService.storage().list(e,t).then(function(e){n.list=e.map(function(e){return{path:e.key}})}).catch(function(e){return console.error(e)})},$C.decorators=[{type:f.Component,args:[{selector:"amplify-s3-album-core",template:'\n<div class="amplify-album">\n  <div class="amplify-album-container">\n    <amplify-s3-image-core\n      class="amplify-image-container"\n      *ngFor="let item of list"\n      path="{{item.path}}"\n      [options]="_options"\n      (selected)="onImageSelected($event)"\n    ></amplify-s3-image-core>\n  </div>\n</div>\n'}]}],$C.ctorParameters=function(){return[{type:mS}]},$C.propDecorators={selected:[{type:f.Output}],data:[{type:f.Input}],path:[{type:f.Input}],options:[{type:f.Input}]},$C);function $C(e){this.amplifyService=e,this._options={},this.selected=new f.EventEmitter,this.logger=this.amplifyService.logger("S3AlbumComponent")}var YC,JC,ZC=((oC=(YC=function(e,t){return(YC=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}YC(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}))(QC,JC=WC),QC.decorators=[{type:f.Component,args:[{selector:"amplify-s3-album-ionic",template:'\n<div class="amplify-album">\n  <div class="amplify-album-container">\n    <amplify-s3-image-core\n      class="amplify-image-container"\n      *ngFor="let item of list"\n      path="{{item.path}}"\n      (selected)="onImageSelected($event)"\n    ></amplify-s3-image-core>\n  </div>\n</div>\n'}]}],QC.ctorParameters=function(){return[{type:mS}]},QC);function QC(e){var t=JC.call(this,e)||this;return t.amplifyService=e,t}function XC(e){this.componentFactoryResolver=e,this.selected=new f.EventEmitter}XC.prototype.ngOnInit=function(){this.loadComponent()},XC.prototype.ngOnDestroy=function(){},XC.prototype.loadComponent=function(){var t=this,e=this.framework&&"ionic"===this.framework.toLowerCase()?new vi(ZC,{path:this.path,options:this.options}):new vi(WC,{path:this.path,options:this.options}),n=this.componentFactoryResolver.resolveComponentFactory(e.component),r=this.componentHost.viewContainerRef;r.clear(),(n=r.createComponent(n)).instance.data=e.data,n.instance.selected.subscribe(function(e){t.selected.emit(e)})},XC.decorators=[{type:f.Component,args:[{selector:"amplify-s3-album",template:"\n\t\t<div>\n\t\t\t<ng-template component-host></ng-template>\n\t\t</div>\n\t"}]}],XC.ctorParameters=function(){return[{type:f.ComponentFactoryResolver}]},XC.propDecorators={framework:[{type:f.Input}],path:[{type:f.Input}],options:[{type:f.Input}],selected:[{type:f.Output}],componentHost:[{type:f.ViewChild,args:[mn]}]},jS=XC;var e_=(Object.defineProperty(t_.prototype,"data",{set:function(e){e.path&&(this._path=e.path,this._options=e.options)},enumerable:!0,configurable:!0}),Object.defineProperty(t_.prototype,"path",{set:function(e){this._path=e},enumerable:!0,configurable:!0}),Object.defineProperty(t_.prototype,"options",{set:function(e){this._options=e},enumerable:!0,configurable:!0}),t_.prototype.ngOnInit=function(){if(this._path){if(!this.amplifyService.storage())throw new Error("Storage module not registered on AmplifyService provider");this.getImage(this._path,this._options)}},t_.prototype.onImageClicked=function(){this.selected.emit(this.url)},t_.prototype.getImage=function(e,t){var n=this;this.amplifyService.storage().get(e,t).then(function(e){return n.url=e}).catch(function(e){return console.error(e)})},t_.decorators=[{type:f.Component,args:[{selector:"amplify-s3-image-core",template:'\n  <img\n    class="amplify-image"\n    (click)="onImageClicked()"\n    src="{{url}}"\n  />\n'}]}],t_.ctorParameters=function(){return[{type:mS}]},t_.propDecorators={selected:[{type:f.Output}],data:[{type:f.Input}],path:[{type:f.Input}],options:[{type:f.Input}]},t_);function t_(e){this.amplifyService=e,this._options={},this.selected=new f.EventEmitter,this.logger=this.amplifyService.logger("S3ImageComponent")}var n_,r_,o_=((US=(n_=function(e,t){return(n_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}n_(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}))(i_,r_=e_),i_.decorators=[{type:f.Component,args:[{selector:"amplify-s3-image-ionic",template:'\n  <img\n    class="amplify-image"\n    (click)="onImageClicked()"\n    src="{{url}}"\n  />\n'}]}],i_.ctorParameters=function(){return[{type:mS}]},i_);function i_(e){var t=r_.call(this,e)||this;return t.amplifyService=e,t}function s_(e){this.componentFactoryResolver=e,this.selected=new f.EventEmitter}s_.prototype.ngOnInit=function(){this.loadComponent()},s_.prototype.ngOnDestroy=function(){},s_.prototype.loadComponent=function(){var t=this,e=this.framework&&"ionic"===this.framework.toLowerCase()?new vi(o_,{path:this.path,options:this.options}):new vi(e_,{path:this.path,options:this.options}),n=this.componentFactoryResolver.resolveComponentFactory(e.component),r=this.componentHost.viewContainerRef;r.clear(),(n=r.createComponent(n)).instance.data=e.data,n.instance.selected.subscribe(function(e){t.selected.emit(e)})},s_.decorators=[{type:f.Component,args:[{selector:"amplify-s3-image",template:"\n\t\t<div>\n\t\t\t<ng-template component-host></ng-template>\n\t\t</div>\n\t"}]}],s_.ctorParameters=function(){return[{type:f.ComponentFactoryResolver}]},s_.propDecorators={framework:[{type:f.Input}],path:[{type:f.Input}],options:[{type:f.Input}],selected:[{type:f.Output}],componentHost:[{type:f.ViewChild,args:[mn]}]},MS=s_;var a_=(Object.defineProperty(u_.prototype,"url",{set:function(e){this.photoUrl=e,this.hasPhoto=!0},enumerable:!0,configurable:!0}),Object.defineProperty(u_.prototype,"storageOptions",{set:function(e){this._storageOptions=Object.assign(this._storageOptions,e)},enumerable:!0,configurable:!0}),Object.defineProperty(u_.prototype,"path",{set:function(e){this.s3ImagePath=e},enumerable:!0,configurable:!0}),Object.defineProperty(u_.prototype,"data",{set:function(e){this.photoUrl=e.url,this.s3ImagePath=e.path,this._storageOptions=Object.assign(this._storageOptions,e.storageOptions),this.hasPhoto=!0},enumerable:!0,configurable:!0}),u_.prototype.ngOnInit=function(){if(!this.amplifyService.storage())throw new Error("Storage module not registered on AmplifyService provider")},u_.prototype.pick=function(e){var t,n=e.target.files[0];n&&(this._storageOptions.contentType||(this._storageOptions.contentType=n.type),n.name,n.size,n.type,this.picked.emit(n),this.s3ImagePath=this.s3ImagePath+"/"+n.name,this.s3ImageFile=n,t=this,(e=new FileReader).onload=function(e){e=e.target.result,t.photoUrl=e,t.hasPhoto=!0,t.loaded.emit(e)},e.readAsDataURL(n))},u_.prototype.uploadFile=function(){var t=this;this.uploading=!0,this.amplifyService.storage().put(this.s3ImagePath,this.s3ImageFile,this._storageOptions).then(function(e){t.uploaded.emit(e),t.completeFileUpload()}).catch(function(e){t.completeFileUpload(e)})},u_.prototype.completeFileUpload=function(e){if(e)return this._setError(e);this.s3ImagePath="",this.photoUrl=null,this.s3ImageFile=null,this.uploading=!1},u_.prototype.onPhotoError=function(){this.hasPhoto=!1},u_.prototype.onAlertClose=function(){this._setError(null)},u_.prototype._setError=function(e){this.errorMessage=e?e.message||e:null},u_.decorators=[{type:f.Component,args:[{selector:"amplify-photo-picker-core",template:'\n<div class="amplify-photo-picker">\n<div class="amplify-photo-picker-container">\n  <div class="amplify-form-header">Select Photos</div>\n  <div class="amplify-photo-picker-upload" *ngIf="!hasPhoto"></div>\n  <div class="amplify-photo-picker-preview">\n    <img\n      class="amplify-photo-picker-preview"\n      src="{{photoUrl}}"\n      *ngIf="hasPhoto"\n      (error)="onPhotoError()"\n    />\n  </div>\n  <div class="amplify-upload-input">\n    <input type="file" \n      accept="image/*"\n      (change)="pick($event)"/>\n      <button \n        *ngIf="hasPhoto" \n        class="amplify-form-button amplify-upload-button" \n        (click)="uploadFile()">\n        Upload Photo\n      </button>\n  </div>\n</div>\n<div class="amplify-alert" *ngIf="errorMessage">\n  <div class="amplify-alert-body">\n    <span class="amplify-alert-icon">&#9888;</span>\n    <div class="amplify-alert-message">{{ errorMessage }}</div>\n    <a class="amplify-alert-close" (click)="onAlertClose()">&times;</a>\n  </div>\n</div>\n</div>\n'}]}],u_.ctorParameters=function(){return[{type:mS,decorators:[{type:f.Inject,args:[mS]}]}]},u_.propDecorators={url:[{type:f.Input}],storageOptions:[{type:f.Input}],path:[{type:f.Input}],data:[{type:f.Input}],picked:[{type:f.Output}],loaded:[{type:f.Output}],uploaded:[{type:f.Output}]},u_);function u_(e){this.amplifyService=e,this.hasPhoto=!1,this.uploading=!1,this.s3ImageFile=null,this.s3ImagePath="",this._storageOptions={},this.picked=new f.EventEmitter,this.loaded=new f.EventEmitter,this.uploaded=new f.EventEmitter,this.logger=this.amplifyService.logger("PhotoPickerComponent")}var c_,l_,p_=((FS=(c_=function(e,t){return(c_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}c_(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}))(d_,l_=a_),d_.decorators=[{type:f.Component,args:[{selector:"amplify-photo-picker-ionic",template:'\n<div class="amplify-photo-picker">\n<div class="amplify-photo-picker-container">\n  <div class="amplify-form-header">Select Photos</div>\n  <div class="amplify-photo-picker-upload" *ngIf="!hasPhoto"></div>\n  <div class="amplify-photo-picker-preview">\n    <img\n      class="amplify-photo-picker-preview"\n      src="{{photoUrl}}"\n      *ngIf="hasPhoto"\n      (error)="onPhotoError()"\n    />\n  </div>\n  <div class="amplify-upload-input">\n    <input type="file" \n      accept="image/*"\n      (change)="pick($event)"/>\n      <button \n        *ngIf="hasPhoto" \n        class="amplify-form-button amplify-upload-button" \n        (click)="uploadFile()">\n        Upload Photo\n      </button>\n  </div>\n</div>\n<div class="amplify-alert" *ngIf="errorMessage">\n  <div class="amplify-alert-body">\n    <span class="amplify-alert-icon">&#9888;</span>\n    <div class="amplify-alert-message">{{ errorMessage }}</div>\n    <a class="amplify-alert-close" (click)="onAlertClose()">&times;</a>\n  </div>\n</div>\n</div>\n'}]}],d_.ctorParameters=function(){return[{type:mS,decorators:[{type:f.Inject,args:[mS]}]}]},d_);function d_(e){var t=l_.call(this,e)||this;return t.amplifyService=e,t}function f_(e){this.componentFactoryResolver=e,this.picked=new f.EventEmitter,this.loaded=new f.EventEmitter,this.uploaded=new f.EventEmitter}f_.prototype.ngOnInit=function(){this.loadComponent()},f_.prototype.ngOnDestroy=function(){},f_.prototype.loadComponent=function(){var t=this,e=this.framework&&"ionic"===this.framework.toLowerCase()?new vi(p_,{url:this.url,path:this.path,storageOptions:this.storageOptions}):new vi(a_,{url:this.url,path:this.path,storageOptions:this.storageOptions}),n=this.componentFactoryResolver.resolveComponentFactory(e.component),r=this.componentHost.viewContainerRef;r.clear(),(n=r.createComponent(n)).instance.data=e.data,n.instance.picked.subscribe(function(e){t.picked.emit(e)}),n.instance.loaded.subscribe(function(e){t.loaded.emit(e)}),n.instance.uploaded.subscribe(function(e){t.uploaded.emit(e)})},f_.decorators=[{type:f.Component,args:[{selector:"amplify-photo-picker",template:'\n\t\t<div class="amplify-component">\n\t\t\t<ng-template component-host></ng-template>\n\t\t</div>\n\t'}]}],f_.ctorParameters=function(){return[{type:f.ComponentFactoryResolver}]},f_.propDecorators={framework:[{type:f.Input}],url:[{type:f.Input}],path:[{type:f.Input}],storageOptions:[{type:f.Input}],picked:[{type:f.Output}],loaded:[{type:f.Output}],uploaded:[{type:f.Output}],componentHost:[{type:f.ViewChild,args:[mn]}]},RS=f_;function h_(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,o)}i((u=u.apply(e,s||[])).next())})}function m_(n,r){var o,i,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&t[0]?i.return:t[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,t[1])).done)return s;switch(i=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,i=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],i=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}}require("./aws-lex-audio.js");var g_={INITIAL:{MESSAGE:"Type your message or click  ðŸŽ¤",ICON:"ðŸŽ¤"},LISTENING:{MESSAGE:"Listening... click ðŸ”´ again to cancel",ICON:"ðŸ”´"},SENDING:{MESSAGE:"Please wait...",ICON:"ðŸ”Š"},SPEAKING:{MESSAGE:"Speaking...",ICON:"..."}},y_={silenceDetectionConfig:{time:2e3,amplitude:.2}},v_=(Object.defineProperty(b_.prototype,"data",{set:function(e){this.botName=e.bot,this.chatTitle=e.title,this.clearComplete=e.clearComplete,this.conversationModeOn=!R.isUndefined(e.conversationModeOn)&&e.conversationModeOn,this.voiceEnabled=!R.isUndefined(e.voiceEnabled)&&e.voiceEnabled,this.textEnabled=!!R.isUndefined(e.textEnabled)||e.textEnabled,this.voiceConfig=e.voiceConfig||this.voiceConfig,this.performOnComplete=this.performOnComplete.bind(this),this.amplifyService.interactions().onComplete(this.botName,this.performOnComplete),!this.textEnabled&&this.voiceEnabled&&(this.currentVoiceState="Click the mic button",g_.INITIAL.MESSAGE="Click the mic button"),!this.voiceEnabled&&this.textEnabled&&(this.currentVoiceState="Type a message",g_.INITIAL.MESSAGE="Type a message"),this.voiceEnabled&&(this.audioControl=new LexAudio.audioControl)},enumerable:!0,configurable:!0}),Object.defineProperty(b_.prototype,"bot",{set:function(e){this.botName=e,this.performOnComplete=this.performOnComplete.bind(this),this.amplifyService.interactions().onComplete(e,this.performOnComplete)},enumerable:!0,configurable:!0}),Object.defineProperty(b_.prototype,"title",{set:function(e){this.chatTitle=e},enumerable:!0,configurable:!0}),Object.defineProperty(b_.prototype,"clearOnComplete",{set:function(e){this.clearComplete=e},enumerable:!0,configurable:!0}),b_.prototype.ngOnInit=function(){if(!this.amplifyService.interactions())throw new Error("Interactions module not registered on AmplifyService provider")},b_.prototype.performOnComplete=function(e){this.complete.emit(e),this.clearComplete&&(this.messages=[])},b_.prototype.onInputChange=function(e){this.inputText=e},b_.prototype.onSubmit=function(e){var t,n=this;this.inputText&&(t={me:this.inputText,meSentTime:(new Date).toLocaleTimeString(),bot:"",botSentTime:""},this.amplifyService.interactions().send(this.botName,this.inputText).then(function(e){n.inputText="",t.bot=e.message,t.botSentTime=(new Date).toLocaleTimeString(),n.messages.push(t)}).catch(function(e){return n.logger.error(e)}))},b_.prototype.reset=function(){this.audioControl.clear(),this.inputText="",this.currentVoiceState=g_.INITIAL.MESSAGE,this.inputDisabled=!1,this.micText=g_.INITIAL.ICON,this.continueConversation=!1,this.micButtonDisabled=!1,this.ref.detectChanges()},b_.prototype.onError=function(e){this.logger.error(e)},b_.prototype.lexResponseHandler=function(){return h_(this,void 0,void 0,function(){var t;return m_(this,function(e){switch(e.label){case 0:return this.continueConversation?(t={content:this.audioInput,options:{messageType:"voice"}},[4,this.amplifyService.interactions().send(this.botName,t)]):[2];case 1:return t=e.sent(),this.lexResponse=t,this.currentVoiceState=g_.SPEAKING.MESSAGE,this.micText=g_.SPEAKING.ICON,this.micButtonDisabled=!0,t={me:this.lexResponse.inputTranscript,meSentTime:(new Date).toLocaleTimeString(),bot:"",botSentTime:""},this.inputText="",t.bot=this.lexResponse.message,t.botSentTime=(new Date).toLocaleTimeString(),this.messages.push(t),this.doneSpeakingHandler(),this.ref.detectChanges(),[2]}})})},b_.prototype.doneSpeakingHandler=function(){var e=this;this.continueConversation&&("audio/mpeg"===this.lexResponse.contentType?this.audioControl.play(this.lexResponse.audioStream,function(){"ReadyForFulfillment"!==e.lexResponse.dialogState&&"Fulfilled"!==e.lexResponse.dialogState&&"Failed"!==e.lexResponse.dialogState&&e.conversationModeOn?(e.currentVoiceState=g_.LISTENING.MESSAGE,e.micText=g_.LISTENING.ICON,e.micButtonDisabled=!1,e.audioControl.startRecording(e.onSilenceHandler,null,e.voiceConfig.silenceDetectionConfig)):(e.inputDisabled=!1,e.currentVoiceState=g_.INITIAL.MESSAGE,e.micText=g_.INITIAL.ICON,e.micButtonDisabled=!1,e.continueConversation=!1),e.ref.detectChanges()}):(this.inputDisabled=!1,this.currentVoiceState=g_.INITIAL.MESSAGE,this.micText=g_.INITIAL.ICON,this.micButtonDisabled=!1,this.continueConversation=!1,this.ref.detectChanges()))},b_.prototype.micButtonHandler=function(){return h_(this,void 0,void 0,function(){return m_(this,function(e){return this.continueConversation?this.reset():(this.inputDisabled=!0,this.continueConversation=!0,this.currentVoiceState=g_.LISTENING.MESSAGE,this.micText=g_.LISTENING.ICON,this.micButtonDisabled=!1,this.audioControl.startRecording(this.onSilenceHandler,null,this.voiceConfig.silenceDetectionConfig)),this.ref.detectChanges(),[2]})})},b_.decorators=[{type:f.Component,args:[{selector:"amplify-interactions-core",template:'\n<div class="amplify-interactions">\n\t<div class="amplify-interactions-container">\n\t\t<div class="amplify-form-container">\n\t\t\t<div class="amplify-form-row">\n\t\t\t\t<div class="amplify-interactions-conversation">\n\t\t\t\t\t<div *ngFor="let message of messages">\n\t\t\t\t\t\t<div class="amplify-interactions-input">{{message.me}}</div>\n\t\t\t\t\t\t<div class="amplify-interactions-input-timestamp">{{message.meSentTime}}</div>\n\t\t\t\t\t\t<div class="amplify-interactions-response">{{message.bot}}</div>\n\t\t\t\t\t\t<div class="amplify-interactions-response-timestamp">{{message.botSentTime}}</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class="amplify-interactions-actions">\n\t\t\t\t<input #inputValue\n\t\t\t\t\tdata-test="chatbot-message-input"\n\t\t\t\t\ttype=\'text\'\n\t\t\t\t\tclass="amplify-form-input"\n\t\t\t\t\tplaceholder="{{currentVoiceState}}"\n\t\t\t\t\t[value]="inputText"\n\t\t\t\t\t(keyup.enter)="onSubmit(inputValue.value)"\n\t\t\t\t\t(change)="onInputChange($event.target.value)"\n\t\t\t\t\t[disabled]="inputDisabled"\n\t\t\t\t\t*ngIf="textEnabled">\n\t\t\t\t<input #inputValue\n\t\t\t\t\ttype=\'text\'\n\t\t\t\t\tclass="amplify-form-input"\n\t\t\t\t\tplaceholder="{{currentVoiceState}}"\n\t\t\t\t\t[disabled]="!textEnabled"\n\t\t\t\t\t*ngIf="!textEnabled">\n\n\t\t\t\t<button\n\t\t\t\t\ttype="button"\n\t\t\t\t\t*ngIf="voiceEnabled"\n\t\t\t\t\tng-style="{float: \'right\'}"\n\t\t\t\t\t(click)="micButtonHandler()"\n\t\t\t\t\t[disabled]="micButtonDisabled"\n\t\t\t\t>\n\t\t\t\t\t{{micText}}\n\t\t\t\t</button>\n\t\t\t\t<button\n\t\t\t\t\ttype="button"\n\t\t\t\t\t*ngIf="textEnabled"\n\t\t\t\t\tng-style="{float: \'right\'}"\n\t\t\t\t\tclass="amplify-interactions-button"\n\t\t\t\t\t[disabled]="inputDisabled"\n\t\t\t\t\tng-click="!inputDisabled || onSubmit(inputValue.value)"\n\t\t\t\t></button>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>\n'}]}],b_.ctorParameters=function(){return[{type:f.ChangeDetectorRef},{type:mS,decorators:[{type:f.Inject,args:[mS]}]}]},b_.propDecorators={complete:[{type:f.Output}],data:[{type:f.Input}],bot:[{type:f.Input}],title:[{type:f.Input}],clearOnComplete:[{type:f.Input}]},b_);function b_(e,t){var n=this;this.amplifyService=t,this.inputText="",this.clearComplete=!1,this.messages=[],this.completions={},this.currentVoiceState=g_.INITIAL.MESSAGE,this.inputDisabled=!1,this.micText=g_.INITIAL.ICON,this.voiceConfig=y_,this.continueConversation=!1,this.micButtonDisabled=!1,this.conversationModeOn=!1,this.voiceEnabled=!1,this.textEnabled=!0,this.complete=new f.EventEmitter,this.onSilenceHandler=function(){n.continueConversation&&(n.audioControl.exportWAV(function(e){n.currentVoiceState=g_.SENDING.MESSAGE,n.audioInput=e,n.micText=g_.SENDING.ICON,n.micButtonDisabled=!0,n.lexResponseHandler()}),n.ref.detectChanges())},this.ref=e,this.continueConversation=!1,this.logger=this.amplifyService.logger("ChatbotComponent")}var w_,S_,C_=((oC=(w_=function(e,t){return(w_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}w_(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}))(__,S_=v_),__.decorators=[{type:f.Component,args:[{selector:"amplify-interactions-ionic",template:'\n<div class="amplify-interactions-container">\n\t<div class="amplify-form-container">\n\t\t<ion-grid>\n\t\t\t<ion-row *ngIf="chatTitle"> \n\t\t\t\t<ion-col>\n\t\t\t\t\t<ion-row>\n\t\t\t\t\t\t<ion-col align-self-start>\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<ion-chip color="primary">\n\t\t\t\t\t\t\t\t\t<ion-label>{{chatTitle}}</ion-label>\n\t\t\t\t\t\t\t\t</ion-chip>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</ion-col>\n\t\t\t\t\t\t<ion-col align-self-end>\n\t\t\t\t\t\t\t&nbsp;\n\t\t\t\t\t\t</ion-col>\n\t\t\t\t\t</ion-row>\n\t\t\t\t</ion-col>\n\t\t\t</ion-row>\n\t\t\t<ion-row *ngFor="let message of messages">\n\t\t\t\t<ion-col>\n\t\t\t\t\t<ion-row>\n\t\t\t\t\t\t<ion-col align-self-start>\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t&nbsp;\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</ion-col>\n\t\t\t\t\t\t<ion-col align-self-end>\n\t\t\t\t\t\t\t<ion-chip style="float:right">\n\t\t\t\t\t\t\t\t<ion-label>{{message.me}}</ion-label>\n\t\t\t\t\t\t\t</ion-chip>\n\t\t\t\t\t\t</ion-col>\n\t\t\t\t\t</ion-row>\n\t\t\t\t\t<ion-row>\n\t\t\t\t\t\t<ion-col align-self-start>\n\t\t\t\t\t\t\t<ion-chip color="primary">\n\t\t\t\t\t\t\t\t<ion-label>{{message.bot}}</ion-label>\n\t\t\t\t\t\t\t</ion-chip>\n\t\t\t\t\t\t</ion-col>\n\t\t\t\t\t\t<ion-col align-self-end>\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t&nbsp;\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</ion-col>\n\t\t\t\t\t</ion-row>\n\t\t\t\t</ion-col>\n\t\t\t</ion-row>\n\t\t</ion-grid>\n\t\t<div class="amplify-form-row">\n\t\t    <ion-input #inputValue\n\t\t\t\ttype=\'text\'\n\t\t        class="amplify-form-input amplify-form-input-interactions-ionic"\n\t\t        placeholder="{{currentVoiceState}}"\n\t\t        [value]="inputText"\n\t\t        (keyup.enter)="onSubmit(inputValue.value)"\n\t\t\t\t(ionChange)="onInputChange($event.target.value)"\n\t\t\t\t[disabled]="inputDisabled"\n\t\t\t\t*ngIf="textEnabled"></ion-input>\n\t\t\t<ion-input #inputValue\n\t\t\t\ttype=\'text\'\n\t\t\t\tclass="amplify-form-input amplify-form-input-interactions-ionic"\n\t\t\t\tplaceholder="{{currentVoiceState}}"\n\t\t\t\t[disabled]="!textEnabled"\n\t\t\t\t*ngIf="!textEnabled"></ion-input>\n\t\t\t<ion-button \n\t\t\t\texpand="block"\n\t\t\t\t*ngIf="voiceEnabled"\n\t\t\t\tng-style="{float: \'right\'}"\n\t\t\t\t(click)="micButtonHandler()"\n\t\t\t\t[disabled]="micButtonDisabled"\n\t\t\t>\n\t\t\t\t{{micText}}\n\t\t\t</ion-button>\n\t\t\t<ion-button\n\t\t\t\texpand="block"\n\t\t\t\t*ngIf="textEnabled"\n\t\t\t\tng-style="{float: \'right\'}"\n\t\t\t\t(click)="inputDisabled === false || onSubmit(inputValue.value)"\n\t\t\t>\n\t\t\t\tSend\n\t\t\t</ion-button>\n\t\t</div>\n\t</div>\n</div>\n'}]}],__.ctorParameters=function(){return[{type:f.ChangeDetectorRef},{type:mS,decorators:[{type:f.Inject,args:[mS]}]}]},__);function __(e,t){return(e=S_.call(this,e,t)||this).amplifyService=t,e}function E_(e){this.componentFactoryResolver=e,this.complete=new f.EventEmitter}function I_(){}E_.prototype.ngOnInit=function(){this.loadComponent()},E_.prototype.ngOnDestroy=function(){},E_.prototype.loadComponent=function(){var t=this,e={bot:this.bot,title:this.title,clearComplete:this.clearComplete,conversationModeOn:this.conversationModeOn,voiceConfig:this.voiceConfig,voiceEnabled:this.voiceEnabled,textEnabled:this.textEnabled},n=this.framework&&"ionic"===this.framework.toLowerCase()?new vi(C_,e):new vi(v_,e),r=this.componentFactoryResolver.resolveComponentFactory(n.component);(e=this.componentHost.viewContainerRef).clear(),(r=e.createComponent(r)).instance.data=n.data,r.instance.complete.subscribe(function(e){t.complete.emit(e)})},E_.decorators=[{type:f.Component,args:[{selector:"amplify-interactions",template:'\n\t\t<div class="amplify-component">\n\t\t\t<ng-template component-host></ng-template>\n\t\t</div>\n\t'}]}],E_.ctorParameters=function(){return[{type:f.ComponentFactoryResolver}]},E_.propDecorators={framework:[{type:f.Input}],bot:[{type:f.Input}],title:[{type:f.Input}],clearComplete:[{type:f.Input}],conversationModeOn:[{type:f.Input}],voiceConfig:[{type:f.Input}],voiceEnabled:[{type:f.Input}],textEnabled:[{type:f.Input}],complete:[{type:f.Output}],componentHost:[{type:f.ViewChild,args:[mn]}]},US=E_,Object.defineProperty(I_.prototype,"title",{set:function(e){this.title=e},enumerable:!0,configurable:!0}),I_.decorators=[{type:f.Component,args:[{selector:"amplify-form",template:'\n<div class="amplify-form">\n  <div class="form-header">\n    <div class="form-title">{{ title }}</div>\n  </div>\n  <div class="form-body">\n    <ng-content select="[form-body]"></ng-content>\n  </div>\n  <div class="form-footer">\n    <ng-content select="[form-footer]"></ng-content>\n  </div>\n</div>\n'}]}],I_.propDecorators={title:[{type:f.Input}]},FS=I_;function A_(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,o)}i((u=u.apply(e,s||[])).next())})}function P_(n,r){var o,i,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&t[0]?i.return:t[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,t[1])).done)return s;switch(i=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,i=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],i=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}}var oC='\n<div id="sumerian-scene-container" class={{amplifyUI.sumerianSceneContainer}} data-test="'+ES+'">\n  <div id="sumerian-scene-dom-id" class={{amplifyUI.sumerianScene}} data-test="'+IS+'">\n    <sumerian-scene-loading-core *ngIf="loading" loadPercentage={{loadPercentage}} sceneName={{sceneName}} sceneError={{sceneError}} data-test="'+AS+'"></sumerian-scene-loading-core>\n  </div>\n  <div *ngIf="!loading" class={{amplifyUI.sceneBar}} data-test="'+xS+'">\n    <span class={{amplifyUI.sceneActions}} data-test="'+NS+'">\n      <div [ngClass]="[amplifyUI.tooltip, showEnableAudio ? amplifyUI.autoShowTooltip : \'\']" [attr.data-text]="showEnableAudio ? \'The scene is muted. Click to unmute.\' : (muted ? \'Unmute\' : \'Mute\')" (click)="muted ? setMuted(false) : setMuted(true)">\n        <button class={{amplifyUI.actionButton}}>\n          <svg *ngIf="muted" width="19px" height="19px" viewBox="0 0 19 19" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n            <g id="icons/minis/volumeOff" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n              <path d="M3.48026899,12.9630494 C3.63825091,12.9630494 3.79237961,13.0108921 3.92264322,13.1003479 L8.77467683,16.8113609 C9.29423971,17.1679383 10,16.7950396 10,16.1637406 L10,3.78619489 C10,3.15489596 9.29423971,2.78199725 8.77467683,3.13857463 L3.92264322,6.84545211 C3.79237961,6.93490793 3.63825091,6.9827506 3.48026899,6.9827506 L1.78294894,6.9827506 C1.3505185,6.9827506 1,7.33409518 1,7.76754476 L1,12.1781306 C1,12.6117048 1.3505185,12.9630494 1.78294894,12.9630494 L3.48026899,12.9630494 Z M17.2118156,7 L15.0918385,9.11997713 L12.9718614,7 L12,7.97174685 L14.1200917,10.091724 L12,12.2118156 L12.9718614,13.1835625 L15.0918385,11.0635854 L17.2118156,13.1835625 L18.1835625,12.2118156 L16.0635854,10.091724 L18.1835625,7.97174685 L17.2118156,7 Z" id="Fill-2" fill="#FFFFFF"></path>\n            </g>\n          </svg>\n          <svg *ngIf="!muted" width="19px" height="19px" viewBox="0 0 19 19" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n            <g id="icons/minis/volumeOn" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n              <path d="M3.48026899,12.9630494 L1.78294894,12.9630494 C1.3505185,12.9630494 1,12.6117048 1,12.1781306 L1,7.76754476 C1,7.33409518 1.3505185,6.9827506 1.78294894,6.9827506 L3.48026899,6.9827506 C3.63825091,6.9827506 3.79237961,6.93490793 3.92264322,6.84545211 L8.77467683,3.13857463 C9.29423971,2.78199725 10,3.15489596 10,3.78619489 L10,16.1637406 C10,16.7950396 9.29423971,17.1679383 8.77467683,16.8113609 L3.92264322,13.1003479 C3.79237961,13.0108921 3.63825091,12.9630494 3.48026899,12.9630494 Z M14.9270376,3.03232286 C15.1729267,3.03232286 15.4040399,3.12815658 15.5777627,3.3022351 C17.3699891,5.09889099 18.3570052,7.48235058 18.3570052,10.0135053 C18.3570052,12.54466 17.3699891,14.9281196 15.5777627,16.7247755 C15.4041045,16.898854 15.1729914,16.9947524 14.9270052,16.9947524 C14.6820861,16.9947524 14.4515549,16.899436 14.2777674,16.7263598 C13.9192316,16.3684383 13.9185203,15.7852882 14.2762477,15.4264291 C15.7222893,13.9769926 16.5186727,12.0545954 16.5186727,10.0135053 C16.5186727,7.97241524 15.7222893,6.05001801 14.2762154,4.60058152 C13.9184879,4.24175473 13.9191992,3.65857229 14.277832,3.30065081 C14.4514256,3.1275746 14.6819567,3.03232286 14.9270376,3.03232286 Z M13.5730665,6.11570485 C14.6133991,7.15574642 15.1862998,8.54003279 15.1862998,10.0134924 C15.1862998,11.4892799 14.6113945,12.8741159 13.5675376,13.9128965 C13.3942351,14.0855848 13.1639626,14.1806425 12.9191727,14.1806425 C12.6727016,14.1806425 12.4412975,14.0844531 12.2677039,13.9097926 C12.0944984,13.7358111 11.9994406,13.5047303 11.9999903,13.2592291 C12.0005723,13.0136956 12.096794,12.7831644 12.2708079,12.6100882 C12.9654406,11.9185917 13.3479995,10.996467 13.3479995,10.0134924 C13.3479995,9.03119677 12.966346,8.1086194 12.2733298,7.4157649 C11.9150203,7.05745543 11.9149233,6.47436998 12.2731358,6.11589885 C12.4467617,5.94224065 12.6775838,5.84666559 12.923085,5.84666559 C13.1685538,5.84666559 13.3993436,5.94220831 13.5730665,6.11570485 Z" id="Fill-2" fill="#FFFFFF"></path>\n            </g>\n          </svg>\n        </button>\n      </div>\n      <div *ngIf="isVRCapable && !isVRPresentationActive" class={{amplifyUI.tooltip}} data-text="Enter VR" (click)="toggleVRPresentation()">\n        <button class={{amplifyUI.actionButton}}>\n          <svg width="19px" height="19px" viewBox="0 0 17 10" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n            <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n              <g id="VRon" fill="#FFFFFF" fill-rule="nonzero">\n                <path d="M15.7856977,0.02395184 L15.8915734,0.02395184 C16.5037405,0.02395184 17,0.520211324 17,1.13237842 L17,1.54663675 L17,8.8915038 C17,9.5034193 16.4560011,10 15.7856977,10 L12.0095825,10 C9.98324439,7.1593807 8.80676009,5.741338 8.48012959,5.74587199 C8.16206045,5.75028714 7.01003321,7.1683298 5.02404785,10 L1.21426911,10 C0.543965735,10 3.32031236e-05,9.5034193 3.32031236e-05,8.8915038 L3.32031236e-05,1.54663675 L3.32031236e-05,1.13237842 L3.32031236e-05,1.13237842 C3.32031236e-05,0.520211324 0.496292687,0.02395184 1.10845978,0.02395184 L1.21426911,0.02395184 L15.7856977,0.02395184 Z M4.5,6 C5.32842712,6 6,5.32842712 6,4.5 C6,3.67157288 5.32842712,3 4.5,3 C3.67157288,3 3,3.67157288 3,4.5 C3,5.32842712 3.67157288,6 4.5,6 Z M12.5,6 C13.3284271,6 14,5.32842712 14,4.5 C14,3.67157288 13.3284271,3 12.5,3 C11.6715729,3 11,3.67157288 11,4.5 C11,5.32842712 11.6715729,6 12.5,6 Z" id="Fill-1"></path>\n              </g>\n            </g>\n          </svg>\n        </button>\n      </div>\n      <div *ngIf="isVRCapable && isVRPresentationActive" class={{amplifyUI.tooltip}} data-text="Exit VR" (click)="toggleVRPresentation()">\n        <button class={{amplifyUI.actionButton}}>\n          <svg width="19px" height="19px" viewBox="0 0 19 19" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n            <g id="icons/minis/VRon-Copy" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n              <g id="Group-7-Copy" transform="translate(1.000000, 3.000000)" fill="#FFFFFF">\n                <path d="M15.7856977,3.02395184 L17,3.02395184 L17,4.13237842 L17,4.54663675 L17,11.8915038 C17,12.5034193 16.4560011,13 15.7856977,13 L12.0095825,13 C9.98324439,10.1593807 8.80676009,8.741338 8.48012959,8.74587199 C8.16206045,8.75028714 7.01003321,10.1683298 5.02404785,13 L1.21426911,13 C0.543965735,13 3.32031236e-05,12.5034193 3.32031236e-05,11.8915038 L3.32031236e-05,4.54663675 L3.32031236e-05,4.13237842 L3.32031236e-05,3.02395184 L1.21426911,3.02395184 L15.7856977,3.02395184 Z M4.5,9 C5.32842712,9 6,8.32842712 6,7.5 C6,6.67157288 5.32842712,6 4.5,6 C3.67157288,6 3,6.67157288 3,7.5 C3,8.32842712 3.67157288,9 4.5,9 Z M12.5,9 C13.3284271,9 14,8.32842712 14,7.5 C14,6.67157288 13.3284271,6 12.5,6 C11.6715729,6 11,6.67157288 11,7.5 C11,8.32842712 11.6715729,9 12.5,9 Z M2.5486669,0 L14.420089,0 C14.7977406,0 15.1613805,0.149260956 15.4374308,0.417695511 L16.9999668,2.00634766 L0,2.00634766 L1.58537972,0.395493117 C1.84682061,0.141306827 2.19106994,0 2.5486669,0 Z" id="Fill-1"></path>\n              </g>\n            </g>\n          </svg>\n        </button>\n      </div>\n      <div *ngIf="!isFullscreen" class={{amplifyUI.tooltip}} data-text="Fullscreen">\n        <button class={{amplifyUI.actionButton}} (click)="maximize()">\n          <svg width="19px" height="19px" viewBox="0 0 19 19" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n            <g id="icons/minis/screenfull" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n              <path d="M2.04162598,3 L2.04162598,16 L17.0147705,16 L17.0147705,3 L2.04162598,3 Z M1,2 L18,2 L18,17 L1,17 L1,2 Z M3,4 L16,4 L16,15 L3,15 L3,4 Z" id="Rectangle-Copy" fill="#FFFFFF" fill-rule="nonzero"></path>\n            </g>\n          </svg>\n        </button>\n      </div>\n      <div *ngIf="isFullscreen" class={{amplifyUI.tooltip}} data-text="Exit Fullscreen">\n        <button class={{amplifyUI.actionButton}} (click)="minimize()">\n          <svg width="19px" height="19px" viewBox="0 0 19 19" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n            <g id="icons/minis/screensmall" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n              <path d="M11,16 L17.0147705,16 L17.0147705,3 L2.04162598,3 L2.04162598,10 L11,10 L11,16 Z M1,2 L18,2 L18,17 L1,17 L1,2 Z" id="Rectangle" fill="#FFFFFF" fill-rule="nonzero"></path>\n            </g>\n          </svg>\n        </button>\n      </div>\n    </span>\n  </div>\n</div>\n',O_=(Object.defineProperty(k_.prototype,"data",{set:function(e){this.sceneName=e.sceneName},enumerable:!0,configurable:!0}),k_.prototype.ngOnInit=function(){if(document.addEventListener("fullscreenchange",this.onFullscreenChange.bind(this)),document.addEventListener("webkitfullscreenchange",this.onFullscreenChange.bind(this)),document.addEventListener("mozfullscreenchange",this.onFullscreenChange.bind(this)),document.addEventListener("MSFullscreenChange",this.onFullscreenChange.bind(this)),!this.amplifyService.xr())throw new Error("XR module not registered on AmplifyService provider");this.loadAndStartScene()},k_.prototype.ngOnDestroy=function(){document.removeEventListener("fullscreenchange",this.onFullscreenChange.bind(this)),document.removeEventListener("webkitfullscreenchange",this.onFullscreenChange.bind(this)),document.removeEventListener("mozfullscreenchange",this.onFullscreenChange.bind(this)),document.removeEventListener("MSFullscreenChange",this.onFullscreenChange.bind(this))},k_.prototype.loadAndStartScene=function(){return A_(this,void 0,void 0,function(){var t,n=this;return P_(this,function(e){switch(e.label){case 0:this.loading=!0,t={progressCallback:this.progressCallback},e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this.amplifyService.xr().loadScene(this.sceneName,"sumerian-scene-dom-id",t)];case 2:return e.sent(),[3,4];case 3:return t=e.sent(),this.sceneError="Failed to load scene",this.logger.error(this.sceneError,t),[2];case 4:return this.amplifyService.xr().start(this.sceneName),this.loading=!1,this.muted=this.amplifyService.xr().isMuted(this.sceneName),this.isVRCapable=this.amplifyService.xr().isVRCapable(this.sceneName),this.isVRPresentationActive=this.amplifyService.xr().isVRPresentationActive(this.sceneName),this.amplifyService.xr().onSceneEvent(this.sceneName,"AudioEnabled",function(){return n.showEnableAudio=!1}),this.amplifyService.xr().onSceneEvent(this.sceneName,"AudioDisabled",function(){return n.showEnableAudio=!0}),[2]}})})},k_.prototype.setMuted=function(e){this.muted=e,this.amplifyService.xr().setMuted(this.sceneName,e),this.showEnableAudio&&(this.amplifyService.xr().enableAudio(this.sceneName),this.showEnableAudio=!1)},k_.prototype.toggleVRPresentation=function(){try{this.isVRPresentationActive?this.amplifyService.xr().exitVR(this.sceneName):this.amplifyService.xr().enterVR(this.sceneName)}catch(e){return void this.logger.error("Unable to start/stop WebVR System: "+e.message)}this.isVRPresentationActive=!this.isVRPresentationActive},k_.prototype.onFullscreenChange=function(){var e=document;this.isFullscreen=null!==e.fullscreenElement},k_.prototype.maximize=function(){return A_(this,void 0,void 0,function(){var t;return P_(this,function(e){return((t=document.getElementById("sumerian-scene-container")).requestFullscreen||t.msRequestFullscreen||t.mozRequestFullScreen||t.webkitRequestFullscreen).call(t),[2]})})},k_.prototype.minimize=function(){return A_(this,void 0,void 0,function(){var t;return P_(this,function(e){return(t=document).exitFullscreen?t.exitFullscreen():t.mozCancelFullScreen?t.mozCancelFullScreen():t.webkitExitFullscreen&&t.webkitExitFullscreen(),[2]})})},k_.decorators=[{type:f.Component,args:[{selector:"sumerian-scene-core",template:oC}]}],k_.ctorParameters=function(){return[{type:mS}]},k_.propDecorators={sceneName:[{type:f.Input}],data:[{type:f.Input}]},k_);function k_(e){var t=this;this.amplifyService=e,this.loading=!1,this.loadPercentage=0,this.muted=!1,this.showEnableAudio=!1,this.isVRCapable=!1,this.isVRPresentationActive=!1,this.isFullscreen=!1,this.sceneError=null,this.progressCallback=function(e){e*=100,t.loadPercentage=e},this.amplifyUI=U,this.logger=this.amplifyService.logger("SumerianSceneComponentCore")}var T_,x_,xS='\n<div id="sumerian-scene-container" [ngClass]="amplifyUI.sumerianSceneContainer" data-test="'+ES+'">\n  <div id="sumerian-scene-dom-id" [class]="amplifyUI.sumerianScene" data-test="'+IS+'">\n    <sumerian-scene-loading-ionic *ngIf="loading" loadPercentage={{loadPercentage}} sceneName={{sceneName}} data-test="'+AS+'"></sumerian-scene-loading-ionic>\n  </div>\n  <div *ngIf="!loading" class={{amplifyUI.sceneBar}} data-test="'+xS+'">\n    <span class={{amplifyUI.sceneActions}} data-test="'+NS+'">\n      <div [ngClass]="[amplifyUI.tooltip, showEnableAudio ? amplifyUI.autoShowTooltip : \'\']" [attr.data-text]="showEnableAudio ? \'The scene is muted. Click to unmute.\' : (muted ? \'Unmute\' : \'Mute\')" (click)="muted ? setMuted(false) : setMuted(true)">\n        <button class={{amplifyUI.actionButton}}>\n          <svg *ngIf="muted" width="19px" height="19px" viewBox="0 0 19 19" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n            <g id="icons/minis/volumeOff" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n              <path d="M3.48026899,12.9630494 C3.63825091,12.9630494 3.79237961,13.0108921 3.92264322,13.1003479 L8.77467683,16.8113609 C9.29423971,17.1679383 10,16.7950396 10,16.1637406 L10,3.78619489 C10,3.15489596 9.29423971,2.78199725 8.77467683,3.13857463 L3.92264322,6.84545211 C3.79237961,6.93490793 3.63825091,6.9827506 3.48026899,6.9827506 L1.78294894,6.9827506 C1.3505185,6.9827506 1,7.33409518 1,7.76754476 L1,12.1781306 C1,12.6117048 1.3505185,12.9630494 1.78294894,12.9630494 L3.48026899,12.9630494 Z M17.2118156,7 L15.0918385,9.11997713 L12.9718614,7 L12,7.97174685 L14.1200917,10.091724 L12,12.2118156 L12.9718614,13.1835625 L15.0918385,11.0635854 L17.2118156,13.1835625 L18.1835625,12.2118156 L16.0635854,10.091724 L18.1835625,7.97174685 L17.2118156,7 Z" id="Fill-2" fill="#FFFFFF"></path>\n            </g>\n          </svg>\n          <svg *ngIf="!muted" width="19px" height="19px" viewBox="0 0 19 19" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n            <g id="icons/minis/volumeOn" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n              <path d="M3.48026899,12.9630494 L1.78294894,12.9630494 C1.3505185,12.9630494 1,12.6117048 1,12.1781306 L1,7.76754476 C1,7.33409518 1.3505185,6.9827506 1.78294894,6.9827506 L3.48026899,6.9827506 C3.63825091,6.9827506 3.79237961,6.93490793 3.92264322,6.84545211 L8.77467683,3.13857463 C9.29423971,2.78199725 10,3.15489596 10,3.78619489 L10,16.1637406 C10,16.7950396 9.29423971,17.1679383 8.77467683,16.8113609 L3.92264322,13.1003479 C3.79237961,13.0108921 3.63825091,12.9630494 3.48026899,12.9630494 Z M14.9270376,3.03232286 C15.1729267,3.03232286 15.4040399,3.12815658 15.5777627,3.3022351 C17.3699891,5.09889099 18.3570052,7.48235058 18.3570052,10.0135053 C18.3570052,12.54466 17.3699891,14.9281196 15.5777627,16.7247755 C15.4041045,16.898854 15.1729914,16.9947524 14.9270052,16.9947524 C14.6820861,16.9947524 14.4515549,16.899436 14.2777674,16.7263598 C13.9192316,16.3684383 13.9185203,15.7852882 14.2762477,15.4264291 C15.7222893,13.9769926 16.5186727,12.0545954 16.5186727,10.0135053 C16.5186727,7.97241524 15.7222893,6.05001801 14.2762154,4.60058152 C13.9184879,4.24175473 13.9191992,3.65857229 14.277832,3.30065081 C14.4514256,3.1275746 14.6819567,3.03232286 14.9270376,3.03232286 Z M13.5730665,6.11570485 C14.6133991,7.15574642 15.1862998,8.54003279 15.1862998,10.0134924 C15.1862998,11.4892799 14.6113945,12.8741159 13.5675376,13.9128965 C13.3942351,14.0855848 13.1639626,14.1806425 12.9191727,14.1806425 C12.6727016,14.1806425 12.4412975,14.0844531 12.2677039,13.9097926 C12.0944984,13.7358111 11.9994406,13.5047303 11.9999903,13.2592291 C12.0005723,13.0136956 12.096794,12.7831644 12.2708079,12.6100882 C12.9654406,11.9185917 13.3479995,10.996467 13.3479995,10.0134924 C13.3479995,9.03119677 12.966346,8.1086194 12.2733298,7.4157649 C11.9150203,7.05745543 11.9149233,6.47436998 12.2731358,6.11589885 C12.4467617,5.94224065 12.6775838,5.84666559 12.923085,5.84666559 C13.1685538,5.84666559 13.3993436,5.94220831 13.5730665,6.11570485 Z" id="Fill-2" fill="#FFFFFF"></path>\n            </g>\n          </svg>\n        </button>\n      </div>\n      <div *ngIf="isVRCapable && !isVRPresentationActive" class={{amplifyUI.tooltip}} data-text="Enter VR" (click)="toggleVRPresentation()">\n        <button class={{amplifyUI.actionButton}}>\n          <svg width="19px" height="19px" viewBox="0 0 17 10" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n            <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n              <g id="VRon" fill="#FFFFFF" fill-rule="nonzero">\n                <path d="M15.7856977,0.02395184 L15.8915734,0.02395184 C16.5037405,0.02395184 17,0.520211324 17,1.13237842 L17,1.54663675 L17,8.8915038 C17,9.5034193 16.4560011,10 15.7856977,10 L12.0095825,10 C9.98324439,7.1593807 8.80676009,5.741338 8.48012959,5.74587199 C8.16206045,5.75028714 7.01003321,7.1683298 5.02404785,10 L1.21426911,10 C0.543965735,10 3.32031236e-05,9.5034193 3.32031236e-05,8.8915038 L3.32031236e-05,1.54663675 L3.32031236e-05,1.13237842 L3.32031236e-05,1.13237842 C3.32031236e-05,0.520211324 0.496292687,0.02395184 1.10845978,0.02395184 L1.21426911,0.02395184 L15.7856977,0.02395184 Z M4.5,6 C5.32842712,6 6,5.32842712 6,4.5 C6,3.67157288 5.32842712,3 4.5,3 C3.67157288,3 3,3.67157288 3,4.5 C3,5.32842712 3.67157288,6 4.5,6 Z M12.5,6 C13.3284271,6 14,5.32842712 14,4.5 C14,3.67157288 13.3284271,3 12.5,3 C11.6715729,3 11,3.67157288 11,4.5 C11,5.32842712 11.6715729,6 12.5,6 Z" id="Fill-1"></path>\n              </g>\n            </g>\n          </svg>\n        </button>\n      </div>\n      <div *ngIf="isVRCapable && isVRPresentationActive" class={{amplifyUI.tooltip}} data-text="Exit VR" (click)="toggleVRPresentation()">\n        <button class={{amplifyUI.actionButton}}>\n          <svg width="19px" height="19px" viewBox="0 0 19 19" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n            <g id="icons/minis/VRon-Copy" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n              <g id="Group-7-Copy" transform="translate(1.000000, 3.000000)" fill="#FFFFFF">\n                <path d="M15.7856977,3.02395184 L17,3.02395184 L17,4.13237842 L17,4.54663675 L17,11.8915038 C17,12.5034193 16.4560011,13 15.7856977,13 L12.0095825,13 C9.98324439,10.1593807 8.80676009,8.741338 8.48012959,8.74587199 C8.16206045,8.75028714 7.01003321,10.1683298 5.02404785,13 L1.21426911,13 C0.543965735,13 3.32031236e-05,12.5034193 3.32031236e-05,11.8915038 L3.32031236e-05,4.54663675 L3.32031236e-05,4.13237842 L3.32031236e-05,3.02395184 L1.21426911,3.02395184 L15.7856977,3.02395184 Z M4.5,9 C5.32842712,9 6,8.32842712 6,7.5 C6,6.67157288 5.32842712,6 4.5,6 C3.67157288,6 3,6.67157288 3,7.5 C3,8.32842712 3.67157288,9 4.5,9 Z M12.5,9 C13.3284271,9 14,8.32842712 14,7.5 C14,6.67157288 13.3284271,6 12.5,6 C11.6715729,6 11,6.67157288 11,7.5 C11,8.32842712 11.6715729,9 12.5,9 Z M2.5486669,0 L14.420089,0 C14.7977406,0 15.1613805,0.149260956 15.4374308,0.417695511 L16.9999668,2.00634766 L0,2.00634766 L1.58537972,0.395493117 C1.84682061,0.141306827 2.19106994,0 2.5486669,0 Z" id="Fill-1"></path>\n              </g>\n            </g>\n          </svg>\n        </button>\n      </div>\n      <div *ngIf="!isFullscreen" class={{amplifyUI.tooltip}} data-text="Fullscreen">\n        <button class={{amplifyUI.actionButton}} (click)="maximize()">\n          <svg width="19px" height="19px" viewBox="0 0 19 19" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n            <g id="icons/minis/screenfull" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n              <path d="M2.04162598,3 L2.04162598,16 L17.0147705,16 L17.0147705,3 L2.04162598,3 Z M1,2 L18,2 L18,17 L1,17 L1,2 Z M3,4 L16,4 L16,15 L3,15 L3,4 Z" id="Rectangle-Copy" fill="#FFFFFF" fill-rule="nonzero"></path>\n            </g>\n          </svg>\n        </button>\n      </div>\n      <div *ngIf="isFullscreen" class={{amplifyUI.tooltip}} data-text="Exit Fullscreen">\n        <button class={{amplifyUI.actionButton}} (click)="minimize()">\n          <svg width="19px" height="19px" viewBox="0 0 19 19" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n            <g id="icons/minis/screensmall" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n              <path d="M11,16 L17.0147705,16 L17.0147705,3 L2.04162598,3 L2.04162598,10 L11,10 L11,16 Z M1,2 L18,2 L18,17 L1,17 L1,2 Z" id="Rectangle" fill="#FFFFFF" fill-rule="nonzero"></path>\n            </g>\n          </svg>\n        </button>\n      </div>\n    </span>\n  </div>\n</div>\n',N_=((oC=(T_=function(e,t){return(T_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}T_(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}))(M_,x_=O_),M_.decorators=[{type:f.Component,args:[{selector:"sumerian-scene-ionic",template:xS}]}],M_.ctorParameters=function(){return[{type:mS}]},M_);function M_(e){var t=x_.call(this,e)||this;return t.amplifyService=e,t}function R_(e){this.componentFactoryResolver=e}function U_(){this.AmplifyUI=U}function D_(){}R_.prototype.ngOnInit=function(){this.loadComponent()},R_.prototype.ngOnDestroy=function(){},R_.prototype.loadComponent=function(){var e=this.framework&&"ionic"===this.framework.toLowerCase()?new vi(N_,{sceneName:this.sceneName}):new vi(O_,{sceneName:this.sceneName}),t=this.componentFactoryResolver.resolveComponentFactory(e.component),n=this.componentHost.viewContainerRef;n.clear(),n.createComponent(t).instance.data=e.data},R_.decorators=[{type:f.Component,args:[{selector:"amplify-sumerian-scene",template:"\n\t\t<ng-template component-host></ng-template>\n\t"}]}],R_.ctorParameters=function(){return[{type:f.ComponentFactoryResolver}]},R_.propDecorators={framework:[{type:f.Input}],sceneName:[{type:f.Input}],componentHost:[{type:f.ViewChild,args:[mn]}]},NS=R_,oC='\n<div class={{AmplifyUI.loadingOverlay}}>\n  <div class={{AmplifyUI.loadingContainer}}>\n    <div class={{AmplifyUI.loadingLogo}} data-test="'+PS+'">\n      <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n      viewBox="0 0 2000 1195" style="enable-background:new 0 0 2000 1195;" xml:space="preserve">\n        <g>\n          <path class="st0" d="M1026.8,146.2c-0.7,2.3-1.2,3.7-1.6,5.1C991.8,291,958.5,430.6,925,570.3c-1.6,6.7-3.8,13.3-6.2,19.7\n            c-3.9,10.4-12,16.3-22.8,16.5c-26.3,0.5-52.6,0.5-78.9,0c-9.5-0.2-17.3-5.3-21.2-14.2c-4.1-9.2-7.6-18.7-10.6-28.3\n            c-51-167.3-101.9-334.6-152.7-502c-2.5-8.4-4.7-16.9-6.2-25.5c-2-11.7,3.8-18.9,15.5-19c24.6-0.2,49.2,0.1,73.8,0.4\n            c12,0.2,21.1,5.9,24.8,17.3c5.4,16.3,10.1,32.8,14.4,49.4c33.9,133.3,67.7,266.6,101.5,399.9c0.3,1.3,0.8,2.6,1.5,5\n            c0.7-2,1.3-3,1.5-4.1c19.9-84.2,39.7-168.4,59.6-252.7c14.5-61.3,28.9-122.6,43.4-183.8c0.9-3.6,2.1-7.1,3.2-10.6\n            c4-13.2,13.5-19.8,26.6-20.1c24.1-0.6,48.2-0.5,72.3,0c12.6,0.2,21.5,7.2,25.1,19.2c3.9,12.9,7.1,26,10.1,39.1\n            c32.5,137.8,65,275.6,97.5,413.4c0.3,1.4,0.8,2.8,1.7,5.7c1.7-6.1,3-10.7,4.2-15.3c36.8-142.6,73.6-285.2,110.5-427.8\n            c1.4-5.5,3.7-10.8,5.7-16.2c4.5-12,13.8-17.8,26.1-18.1c21.7-0.6,43.5-0.5,65.2-0.7c2.2,0,4.4,0,6.6,0.3c9.9,1,14.9,5.9,14.3,15.9\n            c-0.4,7.5-1.8,15.1-4.1,22.3c-33.5,107.9-67.2,215.6-100.9,323.5c-20.5,65.7-41,131.4-61.6,197.1c-1.3,4-2.8,7.9-4.3,11.9\n            c-4.9,12.9-14.9,19.1-28.1,19.4c-23.9,0.5-47.9,0.4-71.8,0c-13.6-0.2-23.3-7.1-27.2-20.2c-4.5-15.5-8.3-31.2-12.1-46.9\n            c-31.2-129.6-62.3-259.3-93.4-388.9C1028,150.1,1027.5,148.7,1026.8,146.2z"/>\n          <path class="st0" d="M995.7,1194.2c-23.1,0-46.2,0.8-69.3-0.2c-25.4-1.1-50.7-3.5-76-5.7c-77.9-7-154.6-20.9-230.3-40.5\n            c-68.1-17.6-134.6-40.1-199.4-67.3C330.7,1042.5,245.3,996,164.5,941c-53.7-36.6-104.7-76.7-153-120.1c-3.5-3.1-6.6-6.8-9-10.8\n            c-3.5-5.8-3.4-12.1,0.8-17.5c4.3-5.6,10.5-7.4,17.2-5.7c4.5,1.2,8.8,3.3,12.9,5.5c42.2,22.1,83.9,45.3,126.7,66.4\n            c63.2,31.2,128.6,57.4,195.1,80.8c68.4,24,137.7,44.8,208.4,60.6c48.4,10.8,97.2,19.9,146,28.7c29.8,5.3,59.9,8.8,89.9,12.3\n            c23.4,2.7,46.9,4.6,70.3,6.3c22.8,1.7,45.7,3.3,68.5,4c39.8,1.1,79.5,2.1,119.3,1.8c29.9-0.2,59.9-2,89.8-4\n            c26.2-1.7,52.4-3.7,78.4-7.1c46.8-6.2,93.6-12.7,140.1-20.9c99-17.3,196-42.9,290.8-76.1c40.7-14.3,80.6-30.6,120.8-46.1\n            c12-4.6,23.6-5.4,34.7,2c11.5,7.7,15.3,22.7,7.6,34.2c-4,6-9.6,11.4-15.4,15.7c-81,59.3-169.6,104.7-262.8,141.3\n            c-77,30.2-156,53.6-237,70.3c-37.9,7.8-76.1,13.8-114.3,19.6c-24.7,3.7-49.7,6-74.7,8.2c-22.1,1.9-44.3,3.3-66.5,4.1\n            c-17.8,0.7-35.7,0.1-53.6,0.1C995.7,1194.3,995.7,1194.2,995.7,1194.2z"/>\n          <path class="st0" d="M1714.8,0c39.2,0.9,85.7,8.5,130.2,26.1c9.3,3.7,17.9,9.3,26.1,15.1c9,6.4,13.3,15.9,13.4,27.1\n            c0,12,0.1,23.9,0,35.9c0,2.5-0.4,5.1-1,7.5c-2.1,8.7-7.4,12.7-16.2,11.4c-5.7-0.9-11.6-2.6-16.8-5c-46.6-21.8-95.9-30.1-147-28.3\n            c-21.5,0.8-42.6,3.5-62.7,11.9c-37.6,15.6-54.4,54.2-39.7,91c7.1,17.8,21.1,28.8,37.3,37.7c21.4,11.8,44.5,19.1,67.6,26.5\n            c31.6,10,63.3,19.7,94.6,30.6c28.5,9.9,55.1,24,76.4,46.1c23.3,24.1,36.4,53.2,39.9,86.5c9.1,86.7-40.5,150.8-109.3,180.7\n            c-38.9,16.8-79.7,24.4-122,24.6c-56.9,0.2-112-9.7-164.9-30.7c-9.4-3.8-18.3-9.3-26.9-14.8c-9.7-6.2-13.6-16.1-13.9-27.3\n            c-0.4-13-0.3-26-0.1-38.9c0.3-14.9,8.1-21.1,22.5-17.3c8.2,2.2,16.2,5.6,24.1,9c52.7,22.5,107.7,31.7,164.8,29.6\n            c24.9-0.9,49.4-4.7,72-16c29.7-14.9,45.7-38.5,44.5-72.4c-0.9-23.7-11.9-41.7-31.7-54.4c-17.2-10.9-36.1-18-55.4-24.1\n            c-36.4-11.5-73.1-22.4-109.3-34.6c-30.8-10.4-58.7-26.2-81.4-50.2c-43.4-45.8-56.3-116.8-30.6-172.5c18.1-39.3,48.5-66.6,86.9-85.5\n            C1624,6.4,1664.5,0,1714.8,0z"/>\n          <path class="st0" d="M1860.6,746.5c33.3,0.4,66.3,2.8,98.5,11.6c8.4,2.3,16.5,5.8,24.6,9.1c7.5,3.1,11.9,9.2,13.5,17.2\n            c2.5,12.2,3.1,24.5,2.5,37.1c-1.2,24-5,47.5-10.5,70.8c-12.3,51.3-31.6,99.8-60.1,144.4c-16.5,25.9-36,49.3-59.4,69.2\n            c-5.2,4.4-10.7,8.3-17.9,8.4c-6.8,0-10.7-3.5-10.3-10.2c0.2-4.1,1.3-8.3,2.9-12.1c17-42.7,33.7-85.6,47-129.7\n            c7.6-25.2,14.3-50.6,16.5-76.9c0.7-8.8,0.1-17.9-1.1-26.7c-1.6-12-9.3-19.8-20.2-24.6c-12.5-5.4-25.8-8.2-39.2-9.1\n            c-18.6-1.3-37.4-2.3-56-2c-20.7,0.4-41.3,2.1-62,3.7c-18.8,1.4-37.5,3.3-56.3,5.2c-9.9,1-19.7,2.4-29.5,3.6c-1,0.1-2,0.4-3,0.3\n            c-4.8-0.2-9.7-0.8-12.4-5.4c-2.7-4.6-1.8-9.7,1.5-13.2c5.1-5.5,10.6-10.8,16.9-14.9c36.4-24,76.8-38.4,119.4-46.2\n            c22.1-4,44.6-5.9,67-8.3C1842.1,746.9,1851.4,746.9,1860.6,746.5z"/>\n          <path class="st0" d="M591.6,541.4c-21.4-36.5-29.7-76.2-29.7-117.9c-0.1-70.3,0.1-140.6-0.1-211c-0.1-29.6-3.8-58.8-13-87.1\n            c-15.6-48-45.4-83.2-92.4-102.9C424.8,9.3,391.7,3.9,357.9,2c-63.7-3.6-125.3,6.4-184.7,29.3c-11.7,4.5-23,10.3-34.3,16\n            c-11.6,5.8-17.3,15.4-17.1,28.6c0.2,12.6-0.1,25.3,0,37.9c0,2.9,0.1,5.8,0.7,8.5c2,9.5,7.9,13.7,17.3,11.2c8.4-2.2,16.8-5,24.9-8.2\n            c40.4-15.9,81.7-28.9,125.3-32.1c29.7-2.2,59.3-1.4,88.3,6.5c24.2,6.6,44.8,18.5,57.2,41.5c10.1,18.6,15.1,38.7,16.1,59.5\n            c1.3,24.7,1,49.5,1.4,74.3c0,0.8-0.2,1.6-0.3,2.8c-16.1-3.3-31.5-6.6-47.1-9.5c-46.9-8.6-94.1-13.2-141.8-7.7\n            c-33.5,3.9-65.4,12.9-94.4,30.5c-37.4,22.6-64.8,53.5-78.2,95.7c-10.9,34.3-11.9,69.4-4.4,104.4c12,56.1,44.4,96,97.9,117.4\n            c41.8,16.6,85.2,17.2,128.9,9.5c57.4-10.1,104-39.3,142.3-82.5c1.3-1.5,2.7-2.9,4.3-4.8c1.7,3.4,3.1,6.2,4.5,9\n            c10.4,21.4,22.2,42,38.5,59.7c11.2,12.1,24,14.5,37.5,5.8c14.5-9.3,28.8-18.8,42.9-28.6C597.7,567,600.3,556.1,591.6,541.4z\n              M448.3,436.2c-7.1,29.5-25.4,50.8-49.1,68.2c-22,16.2-47.4,23.8-73.8,28.5c-20.7,3.6-41.6,4.4-62.3-0.2\n            c-35.6-8-59.6-35.5-63.5-72.3c-2.3-21.9-1.9-43.5,7-64.1c11.9-27.6,34-43.2,61.9-51.5c21.4-6.4,43.4-7.9,63.7-7.5\n            c41.1,0.2,79.8,5.3,117.9,14.4c1.6,0.4,4.1,2.4,4.1,3.7C454.7,382.5,454.7,409.6,448.3,436.2z"/>\n        </g>\n      </svg>\n    </div>\n    <div class={{AmplifyUI.loadingSceneName}} data-test="'+OS+'">{{sceneName}}</div>\n    <div *ngIf="sceneError" class={{AmplifyUI.sceneErrorText}} data-test="'+TS+'">{{sceneError}}</div>\n    <div *ngIf="!sceneError" class={{AmplifyUI.loadingBar}} data-test="'+kS+"\">\n      <div class={{AmplifyUI.loadingBarFill}} [ngStyle]=\"{ 'width': loadPercentage + '%' }\"></div>\n    </div>\n  </div>\n</div>\n",U_.decorators=[{type:f.Component,args:[{selector:"sumerian-scene-loading-core",template:oC}]}],U_.ctorParameters=function(){return[]},U_.propDecorators={loadPercentage:[{type:f.Input}],sceneName:[{type:f.Input}],sceneError:[{type:f.Input}]},oC=function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var r=Array(e),o=0,t=0;t<n;t++)for(var i=arguments[t],s=0,a=i.length;s<a;s++,o++)r[o]=i[s];return r},NS=[vt,yS,Rw,BS,gn,JS,Uw,iC,hn,mC,wv,CC,Tw,kC,bw,DC,LS,iS,jS,WC,MS,e_,RS,a_,US,v_,FS,NS,O_,xS=U_],D_.decorators=[{type:f.NgModule,args:[{imports:[t.CommonModule,fn],declarations:oC([mn],NS),entryComponents:oC(NS),providers:[],exports:oC(NS)}]}],mn=D_;var L_,F_,oC=(L_=function(e,t){return(L_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}L_(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),NS='\n<ion-grid class="amplify-ionic-grid-padding-left">\n    <ion-row>\n        <ion-col size="6" class="amplify-ionic-grid-padding-left">\n            <ion-label class="amplify-input-label push-right"\n                position="stacked" \n                for="localPhoneNumberField">\n                {{ this.amplifyService.i18n().get(this._label) }}\n                <span *ngIf="_required">*</span>\n            </ion-label>\n            <ion-select \n            #countryCodeField\n            name="countryCode"\n            class="amplify-select-phone-country"\n            [value]="_country_code"\n            (ionChange)="setCountryCode($event.target.value)"\n            data-test="'+DS.dialCodeSelect+'">\n            <ion-select-option *ngFor="let country of _countries"\n            value={{country.value}}>\n                {{country.label}}\n            </ion-select-option>\n            </ion-select>\n        </ion-col>\n        <ion-col size="6">\n            <ion-label class="amplify-input-label push-right">&nbsp;</ion-label>\n            <ion-input\n            #localPhoneNumberField\n            class="amplify-form-input-phone-ionic"\n            placeholder="{{ this.amplifyService.i18n().get(this.getPlaceholder()) }}"\n            name="local_phone_number"\n            type="tel"\n            (ionChange)="setLocalPhoneNumber($event.target.value)"\n            data-test="'+DS.phoneNumberInput+'"\n            ></ion-input>\n        </ion-col>\n    </ion-row>\n</ion-grid>',iS=(oC(j_,F_=iS),j_.decorators=[{type:f.Component,args:[{selector:"amplify-auth-phone-field-ionic",template:NS}]}],j_.ctorParameters=function(){return[{type:mS,decorators:[{type:f.Inject,args:[mS]}]}]},j_);function j_(e){var t=F_.call(this,e)||this;return t.amplifyService=e,t}var B_,V_,NS=(B_=function(e,t){return(B_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}B_(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),DS='\n\n    <ion-item lines="none" *ngIf="this._usernameAttributes === \'email\'">\n        <ion-label class="amplify-input-label amplify-input-label-ionic" for="emailField" position="stacked">{{ this.amplifyService.i18n().get(\'Email *\') }}</ion-label>\n        <ion-input type="text"\n            #emailField\n            class="amplify-form-input"\n            type="email"\n            placeholder="{{ this.amplifyService.i18n().get(this.getPlaceholder()) }}"\n            (input)="setEmail($event.target.value)"\n            data-test="'+DS.emailInput+'"\n        ></ion-input>\n    </ion-item> \n    <ion-item lines="none" *ngIf="this._usernameAttributes === \'phone_number\'">\n       <amplify-auth-phone-field-ionic\n            (phoneFieldChanged)="onPhoneFieldChanged($event)"\n        ></amplify-auth-phone-field-ionic>\n    </ion-item>\n    <ion-item lines="none" *ngIf="this._usernameAttributes !== \'email\' && this._usernameAttributes !== \'phone_number\'">\n        <ion-label class="amplify-input-label amplify-input-label-ionic" for="usernameField" position="stacked">{{ this.amplifyService.i18n().get(getUsernameLabel()) }} *</ion-label>\n        <ion-input type="text"\n            #usernameField\n            class="amplify-form-input"\n            type="text"\n            placeholder="{{ this.amplifyService.i18n().get(this.getPlaceholder()) }}"\n            (input)="setUsername($event.target.value)"\n            data-test="'+DS.usernameInput+'"\n        ></ion-input>\n    </ion-item>\n\n',LS=(NS(z_,V_=LS),z_.decorators=[{type:f.Component,args:[{selector:"amplify-auth-username-field-ionic",template:DS}]}],z_.ctorParameters=function(){return[{type:mS,decorators:[{type:f.Inject,args:[mS]}]}]},z_);function z_(e){var t=V_.call(this,e)||this;return t.amplifyService=e,t}var q_,K_,kS='\n<div class={{AmplifyUI.loadingOverlay}}>\n  <div class={{AmplifyUI.loadingContainer}}>\n    <div class={{AmplifyUI.loadingLogo}} data-test="'+PS+'">\n      <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n      viewBox="0 0 2000 1195" style="enable-background:new 0 0 2000 1195;" xml:space="preserve">\n        <g>\n          <path class="st0" d="M1026.8,146.2c-0.7,2.3-1.2,3.7-1.6,5.1C991.8,291,958.5,430.6,925,570.3c-1.6,6.7-3.8,13.3-6.2,19.7\n            c-3.9,10.4-12,16.3-22.8,16.5c-26.3,0.5-52.6,0.5-78.9,0c-9.5-0.2-17.3-5.3-21.2-14.2c-4.1-9.2-7.6-18.7-10.6-28.3\n            c-51-167.3-101.9-334.6-152.7-502c-2.5-8.4-4.7-16.9-6.2-25.5c-2-11.7,3.8-18.9,15.5-19c24.6-0.2,49.2,0.1,73.8,0.4\n            c12,0.2,21.1,5.9,24.8,17.3c5.4,16.3,10.1,32.8,14.4,49.4c33.9,133.3,67.7,266.6,101.5,399.9c0.3,1.3,0.8,2.6,1.5,5\n            c0.7-2,1.3-3,1.5-4.1c19.9-84.2,39.7-168.4,59.6-252.7c14.5-61.3,28.9-122.6,43.4-183.8c0.9-3.6,2.1-7.1,3.2-10.6\n            c4-13.2,13.5-19.8,26.6-20.1c24.1-0.6,48.2-0.5,72.3,0c12.6,0.2,21.5,7.2,25.1,19.2c3.9,12.9,7.1,26,10.1,39.1\n            c32.5,137.8,65,275.6,97.5,413.4c0.3,1.4,0.8,2.8,1.7,5.7c1.7-6.1,3-10.7,4.2-15.3c36.8-142.6,73.6-285.2,110.5-427.8\n            c1.4-5.5,3.7-10.8,5.7-16.2c4.5-12,13.8-17.8,26.1-18.1c21.7-0.6,43.5-0.5,65.2-0.7c2.2,0,4.4,0,6.6,0.3c9.9,1,14.9,5.9,14.3,15.9\n            c-0.4,7.5-1.8,15.1-4.1,22.3c-33.5,107.9-67.2,215.6-100.9,323.5c-20.5,65.7-41,131.4-61.6,197.1c-1.3,4-2.8,7.9-4.3,11.9\n            c-4.9,12.9-14.9,19.1-28.1,19.4c-23.9,0.5-47.9,0.4-71.8,0c-13.6-0.2-23.3-7.1-27.2-20.2c-4.5-15.5-8.3-31.2-12.1-46.9\n            c-31.2-129.6-62.3-259.3-93.4-388.9C1028,150.1,1027.5,148.7,1026.8,146.2z"/>\n          <path class="st0" d="M995.7,1194.2c-23.1,0-46.2,0.8-69.3-0.2c-25.4-1.1-50.7-3.5-76-5.7c-77.9-7-154.6-20.9-230.3-40.5\n            c-68.1-17.6-134.6-40.1-199.4-67.3C330.7,1042.5,245.3,996,164.5,941c-53.7-36.6-104.7-76.7-153-120.1c-3.5-3.1-6.6-6.8-9-10.8\n            c-3.5-5.8-3.4-12.1,0.8-17.5c4.3-5.6,10.5-7.4,17.2-5.7c4.5,1.2,8.8,3.3,12.9,5.5c42.2,22.1,83.9,45.3,126.7,66.4\n            c63.2,31.2,128.6,57.4,195.1,80.8c68.4,24,137.7,44.8,208.4,60.6c48.4,10.8,97.2,19.9,146,28.7c29.8,5.3,59.9,8.8,89.9,12.3\n            c23.4,2.7,46.9,4.6,70.3,6.3c22.8,1.7,45.7,3.3,68.5,4c39.8,1.1,79.5,2.1,119.3,1.8c29.9-0.2,59.9-2,89.8-4\n            c26.2-1.7,52.4-3.7,78.4-7.1c46.8-6.2,93.6-12.7,140.1-20.9c99-17.3,196-42.9,290.8-76.1c40.7-14.3,80.6-30.6,120.8-46.1\n            c12-4.6,23.6-5.4,34.7,2c11.5,7.7,15.3,22.7,7.6,34.2c-4,6-9.6,11.4-15.4,15.7c-81,59.3-169.6,104.7-262.8,141.3\n            c-77,30.2-156,53.6-237,70.3c-37.9,7.8-76.1,13.8-114.3,19.6c-24.7,3.7-49.7,6-74.7,8.2c-22.1,1.9-44.3,3.3-66.5,4.1\n            c-17.8,0.7-35.7,0.1-53.6,0.1C995.7,1194.3,995.7,1194.2,995.7,1194.2z"/>\n          <path class="st0" d="M1714.8,0c39.2,0.9,85.7,8.5,130.2,26.1c9.3,3.7,17.9,9.3,26.1,15.1c9,6.4,13.3,15.9,13.4,27.1\n            c0,12,0.1,23.9,0,35.9c0,2.5-0.4,5.1-1,7.5c-2.1,8.7-7.4,12.7-16.2,11.4c-5.7-0.9-11.6-2.6-16.8-5c-46.6-21.8-95.9-30.1-147-28.3\n            c-21.5,0.8-42.6,3.5-62.7,11.9c-37.6,15.6-54.4,54.2-39.7,91c7.1,17.8,21.1,28.8,37.3,37.7c21.4,11.8,44.5,19.1,67.6,26.5\n            c31.6,10,63.3,19.7,94.6,30.6c28.5,9.9,55.1,24,76.4,46.1c23.3,24.1,36.4,53.2,39.9,86.5c9.1,86.7-40.5,150.8-109.3,180.7\n            c-38.9,16.8-79.7,24.4-122,24.6c-56.9,0.2-112-9.7-164.9-30.7c-9.4-3.8-18.3-9.3-26.9-14.8c-9.7-6.2-13.6-16.1-13.9-27.3\n            c-0.4-13-0.3-26-0.1-38.9c0.3-14.9,8.1-21.1,22.5-17.3c8.2,2.2,16.2,5.6,24.1,9c52.7,22.5,107.7,31.7,164.8,29.6\n            c24.9-0.9,49.4-4.7,72-16c29.7-14.9,45.7-38.5,44.5-72.4c-0.9-23.7-11.9-41.7-31.7-54.4c-17.2-10.9-36.1-18-55.4-24.1\n            c-36.4-11.5-73.1-22.4-109.3-34.6c-30.8-10.4-58.7-26.2-81.4-50.2c-43.4-45.8-56.3-116.8-30.6-172.5c18.1-39.3,48.5-66.6,86.9-85.5\n            C1624,6.4,1664.5,0,1714.8,0z"/>\n          <path class="st0" d="M1860.6,746.5c33.3,0.4,66.3,2.8,98.5,11.6c8.4,2.3,16.5,5.8,24.6,9.1c7.5,3.1,11.9,9.2,13.5,17.2\n            c2.5,12.2,3.1,24.5,2.5,37.1c-1.2,24-5,47.5-10.5,70.8c-12.3,51.3-31.6,99.8-60.1,144.4c-16.5,25.9-36,49.3-59.4,69.2\n            c-5.2,4.4-10.7,8.3-17.9,8.4c-6.8,0-10.7-3.5-10.3-10.2c0.2-4.1,1.3-8.3,2.9-12.1c17-42.7,33.7-85.6,47-129.7\n            c7.6-25.2,14.3-50.6,16.5-76.9c0.7-8.8,0.1-17.9-1.1-26.7c-1.6-12-9.3-19.8-20.2-24.6c-12.5-5.4-25.8-8.2-39.2-9.1\n            c-18.6-1.3-37.4-2.3-56-2c-20.7,0.4-41.3,2.1-62,3.7c-18.8,1.4-37.5,3.3-56.3,5.2c-9.9,1-19.7,2.4-29.5,3.6c-1,0.1-2,0.4-3,0.3\n            c-4.8-0.2-9.7-0.8-12.4-5.4c-2.7-4.6-1.8-9.7,1.5-13.2c5.1-5.5,10.6-10.8,16.9-14.9c36.4-24,76.8-38.4,119.4-46.2\n            c22.1-4,44.6-5.9,67-8.3C1842.1,746.9,1851.4,746.9,1860.6,746.5z"/>\n          <path class="st0" d="M591.6,541.4c-21.4-36.5-29.7-76.2-29.7-117.9c-0.1-70.3,0.1-140.6-0.1-211c-0.1-29.6-3.8-58.8-13-87.1\n            c-15.6-48-45.4-83.2-92.4-102.9C424.8,9.3,391.7,3.9,357.9,2c-63.7-3.6-125.3,6.4-184.7,29.3c-11.7,4.5-23,10.3-34.3,16\n            c-11.6,5.8-17.3,15.4-17.1,28.6c0.2,12.6-0.1,25.3,0,37.9c0,2.9,0.1,5.8,0.7,8.5c2,9.5,7.9,13.7,17.3,11.2c8.4-2.2,16.8-5,24.9-8.2\n            c40.4-15.9,81.7-28.9,125.3-32.1c29.7-2.2,59.3-1.4,88.3,6.5c24.2,6.6,44.8,18.5,57.2,41.5c10.1,18.6,15.1,38.7,16.1,59.5\n            c1.3,24.7,1,49.5,1.4,74.3c0,0.8-0.2,1.6-0.3,2.8c-16.1-3.3-31.5-6.6-47.1-9.5c-46.9-8.6-94.1-13.2-141.8-7.7\n            c-33.5,3.9-65.4,12.9-94.4,30.5c-37.4,22.6-64.8,53.5-78.2,95.7c-10.9,34.3-11.9,69.4-4.4,104.4c12,56.1,44.4,96,97.9,117.4\n            c41.8,16.6,85.2,17.2,128.9,9.5c57.4-10.1,104-39.3,142.3-82.5c1.3-1.5,2.7-2.9,4.3-4.8c1.7,3.4,3.1,6.2,4.5,9\n            c10.4,21.4,22.2,42,38.5,59.7c11.2,12.1,24,14.5,37.5,5.8c14.5-9.3,28.8-18.8,42.9-28.6C597.7,567,600.3,556.1,591.6,541.4z\n              M448.3,436.2c-7.1,29.5-25.4,50.8-49.1,68.2c-22,16.2-47.4,23.8-73.8,28.5c-20.7,3.6-41.6,4.4-62.3-0.2\n            c-35.6-8-59.6-35.5-63.5-72.3c-2.3-21.9-1.9-43.5,7-64.1c11.9-27.6,34-43.2,61.9-51.5c21.4-6.4,43.4-7.9,63.7-7.5\n            c41.1,0.2,79.8,5.3,117.9,14.4c1.6,0.4,4.1,2.4,4.1,3.7C454.7,382.5,454.7,409.6,448.3,436.2z"/>\n        </g>\n      </svg>\n    </div>\n    <div class={{AmplifyUI.loadingSceneName}} data-test="'+OS+'">{{sceneName}}</div>\n    <div *ngIf="sceneError" class={{AmplifyUI.sceneErrorText}} data-test="'+TS+'">{{sceneError}}</div>\n    <div *ngIf="!sceneError" class={{AmplifyUI.loadingBar}} data-test="'+kS+"\">\n      <div class={{AmplifyUI.loadingBarFill}} [ngStyle]=\"{ 'width': loadPercentage + '%' }\"></div>\n    </div>\n  </div>\n</div>\n",xS=((DS=(q_=function(e,t){return(q_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}q_(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}))(H_,K_=xS),H_.decorators=[{type:f.Component,args:[{selector:"sumerian-scene-loading-ionic",template:kS}]}],H_.ctorParameters=function(){return[]},H_);function H_(){return K_.call(this)||this}function G_(){}kS=function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var r=Array(e),o=0,t=0;t<n;t++)for(var i=arguments[t],s=0,a=i.length;s<a;s++,o++)r[o]=i[s];return r},xS=[SS,KS,eC,BC,MC,cC,bC,LS,iS,AC,p_,ZC,o_,C_,N_,xS],G_.decorators=[{type:f.NgModule,args:[{imports:[t.CommonModule,fn],declarations:kS(xS),entryComponents:kS(xS),providers:[mS],schemas:[f.CUSTOM_ELEMENTS_SCHEMA],exports:kS(xS)}]}],xS=G_,e.AmplifyAngularModule=mn,e.AmplifyIonicModule=xS,e.AmplifyModules=function(e){return new mS(e)},e.AmplifyService=mS,Object.defineProperty(e,"__esModule",{value:!0})});